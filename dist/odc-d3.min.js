!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ODCD3=t()}}(function(){return function t(e,i,r){function n(a,l){if(!i[a]){if(!e[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return n(i?i:t)},c,c.exports,t,e,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(t,e,i){"use strict";e.exports={color:t("./src/color"),size:t("./src/size"),symbol:t("./src/symbol")}},{"./src/color":2,"./src/size":4,"./src/symbol":5}],2:[function(t,e,i){"use strict";var r=t("./legend");e.exports=function(){function t(t){var _=r.d3_calcType(i,b,u,c,g,y),C=t.selectAll("g").data([i]);C.enter().append("g").attr("class",p+"legendCells");var w=C.selectAll("."+p+"cell").data(_.data),k=w.enter().append("g",".cell").attr("class",p+"cell").style("opacity",1e-6),O=(k.append(n).attr("class",p+"swatch"),w.select("g."+p+"cell "+n));r.d3_addEvents(k,x),w.exit().transition().style("opacity",0).remove(),r.d3_drawShapes(n,O,a,o,l,e),r.d3_addText(C,k,_.labels,p);var P=w.select("text"),S=O[0].map(function(t){return t.getBBox()});f?O.attr("class",function(t){return p+"swatch "+_.feature(t)}):"line"==n?O.style("stroke",_.feature):O.style("fill",_.feature);var j,A,z="start"==v?0:"middle"==v?.5:1;"vertical"===m?(j=function(t,e){return"translate(0, "+e*(S[e].height+s)+")"},A=function(t,e){return"translate("+(S[e].width+S[e].x+d)+","+(S[e].y+S[e].height/2+5)+")"}):"horizontal"===m&&(j=function(t,e){return"translate("+e*(S[e].width+s)+",0)"},A=function(t,e){return"translate("+(S[e].width*z+S[e].x)+","+(S[e].height+S[e].y+d+8)+")"}),r.d3_placement(m,w,j,P,A,v),r.d3_title(t,C,h,p),w.transition().style("opacity",1)}var e,i=d3.scale.linear(),n="rect",o=15,a=15,l=10,s=2,u=[5],c=[],p="",f=!1,h="",g=d3.format(".01f"),d=10,v="middle",y="to",m="vertical",b=!1,x=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(i=e,t):i},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(u=e),t):u},t.shape=function(i,r){return arguments.length?(("rect"==i||"circle"==i||"line"==i||"path"==i&&"string"==typeof r)&&(n=i,e=r),t):n},t.shapeWidth=function(e){return arguments.length?(o=+e,t):o},t.shapeHeight=function(e){return arguments.length?(a=+e,t):a},t.shapeRadius=function(e){return arguments.length?(l=+e,t):l},t.shapePadding=function(e){return arguments.length?(s=+e,t):s},t.labels=function(e){return arguments.length?(c=e,t):c},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(v=e),t):v},t.labelFormat=function(e){return arguments.length?(g=e,t):g},t.labelOffset=function(e){return arguments.length?(d=+e,t):d},t.labelDelimiter=function(e){return arguments.length?(y=e,t):y},t.useClass=function(e){return arguments.length?(e!==!0&&e!==!1||(f=e),t):f},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(m=e),t):m},t.ascending=function(e){return arguments.length?(b=!!e,t):b},t.classPrefix=function(e){return arguments.length?(p=e,t):p},t.title=function(e){return arguments.length?(h=e,t):h},d3.rebind(t,x,"on"),t}},{"./legend":3}],3:[function(t,e,i){"use strict";e.exports={d3_identity:function(t){return t},d3_mergeLabels:function(t,e){if(0===e.length)return t;t=t?t:[];for(var i=e.length;i<t.length;i++)e.push(t[i]);return e},d3_linearLegend:function(t,e,i){var r=[];if(e.length>1)r=e;else for(var n=t.domain(),o=(n[n.length-1]-n[0])/(e-1),a=0;a<e;a++)r.push(n[0]+a*o);var l=r.map(i);return{data:r,labels:l,feature:function(e){return t(e)}}},d3_quantLegend:function(t,e,i){var r=t.range().map(function(r){var n=t.invertExtent(r);e(n[0]),e(n[1]);return e(n[0])+" "+i+" "+e(n[1])});return{data:t.range(),labels:r,feature:this.d3_identity}},d3_ordinalLegend:function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}},d3_drawShapes:function(t,e,i,r,n,o){"rect"===t?e.attr("height",i).attr("width",r):"circle"===t?e.attr("r",n):"line"===t?e.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",o)},d3_addText:function(t,e,i,r){e.append("text").attr("class",r+"label"),t.selectAll("g."+r+"cell text").data(i).text(this.d3_identity)},d3_calcType:function(t,e,i,r,n,o){var a=t.ticks?this.d3_linearLegend(t,i,n):t.invertExtent?this.d3_quantLegend(t,n,o):this.d3_ordinalLegend(t);return a.labels=this.d3_mergeLabels(a.labels,r),e&&(a.labels=this.d3_reverse(a.labels),a.data=this.d3_reverse(a.data)),a},d3_reverse:function(t){for(var e=[],i=0,r=t.length;i<r;i++)e[i]=t[r-i-1];return e},d3_placement:function(t,e,i,r,n,o){e.attr("transform",i),r.attr("transform",n),"horizontal"===t&&r.style("text-anchor",o)},d3_addEvents:function(t,e){var i=this;t.on("mouseover.legend",function(t){i.d3_cellOver(e,t,this)}).on("mouseout.legend",function(t){i.d3_cellOut(e,t,this)}).on("click.legend",function(t){i.d3_cellClick(e,t,this)})},d3_cellOver:function(t,e,i){t.cellover.call(i,e)},d3_cellOut:function(t,e,i){t.cellout.call(i,e)},d3_cellClick:function(t,e,i){t.cellclick.call(i,e)},d3_title:function(t,e,i,r){if(""!==i){var n=t.selectAll("text."+r+"legendTitle");n.data([i]).enter().append("text").attr("class",r+"legendTitle"),t.selectAll("text."+r+"legendTitle").text(i);var o=t.select("."+r+"legendTitle").map(function(t){return t[0].getBBox().height})[0],a=-e.map(function(t){return t[0].getBBox().x})[0];e.attr("transform","translate("+a+","+(o+10)+")")}}}},{}],4:[function(t,e,i){"use strict";var r=t("./legend");e.exports=function(){function t(t){var m=r.d3_calcType(i,v,l,s,p,g),b=t.selectAll("g").data([i]);b.enter().append("g").attr("class",u+"legendCells");var x=b.selectAll("."+u+"cell").data(m.data),_=x.enter().append("g",".cell").attr("class",u+"cell").style("opacity",1e-6),C=(_.append(n).attr("class",u+"swatch"),x.select("g."+u+"cell "+n));r.d3_addEvents(_,y),x.exit().transition().style("opacity",0).remove(),"line"===n?(r.d3_drawShapes(n,C,0,o),C.attr("stroke-width",m.feature)):r.d3_drawShapes(n,C,m.feature,m.feature,m.feature,e),r.d3_addText(b,_,m.labels,u);var w,k,O=x.select("text"),P=C[0].map(function(t,e){var r=t.getBBox(),o=i(m.data[e]);return"line"===n&&"horizontal"===d?r.height=r.height+o:"line"===n&&"vertical"===d&&(r.width=r.width),r}),S=d3.max(P,function(t){return t.height+t.y}),j=d3.max(P,function(t){return t.width+t.x}),A="start"==h?0:"middle"==h?.5:1;"vertical"===d?(w=function(t,e){var i=d3.sum(P.slice(0,e+1),function(t){return t.height});return"translate(0, "+(i+e*a)+")"},k=function(t,e){return"translate("+(j+f)+","+(P[e].y+P[e].height/2+5)+")"}):"horizontal"===d&&(w=function(t,e){var i=d3.sum(P.slice(0,e+1),function(t){return t.width});return"translate("+(i+e*a)+",0)"},k=function(t,e){return"translate("+(P[e].width*A+P[e].x)+","+(S+f)+")"}),r.d3_placement(d,x,w,O,k,h),r.d3_title(t,b,c,u),x.transition().style("opacity",1)}var e,i=d3.scale.linear(),n="rect",o=15,a=2,l=[5],s=[],u="",c="",p=d3.format(".01f"),f=10,h="middle",g="to",d="vertical",v=!1,y=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(i=e,t):i},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(l=e),t):l},t.shape=function(i,r){return arguments.length?("rect"!=i&&"circle"!=i&&"line"!=i||(n=i,e=r),t):n},t.shapeWidth=function(e){return arguments.length?(o=+e,t):o},t.shapePadding=function(e){return arguments.length?(a=+e,t):a},t.labels=function(e){return arguments.length?(s=e,t):s},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(h=e),t):h},t.labelFormat=function(e){return arguments.length?(p=e,t):p},t.labelOffset=function(e){return arguments.length?(f=+e,t):f},t.labelDelimiter=function(e){return arguments.length?(g=e,t):g},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(d=e),t):d},t.ascending=function(e){return arguments.length?(v=!!e,t):v},t.classPrefix=function(e){return arguments.length?(u=e,t):u},t.title=function(e){return arguments.length?(c=e,t):c},d3.rebind(t,y,"on"),t}},{"./legend":3}],5:[function(t,e,i){"use strict";var r=t("./legend");e.exports=function(){function t(t){var b=r.d3_calcType(e,y,s,u,f,d),x=t.selectAll("g").data([e]);x.enter().append("g").attr("class",c+"legendCells");var _=x.selectAll("."+c+"cell").data(b.data),C=_.enter().append("g",".cell").attr("class",c+"cell").style("opacity",1e-6),w=(C.append(i).attr("class",c+"swatch"),_.select("g."+c+"cell "+i));r.d3_addEvents(C,m),_.exit().transition().style("opacity",0).remove(),r.d3_drawShapes(i,w,o,n,a,b.feature),r.d3_addText(x,C,b.labels,c);var k,O,P=_.select("text"),S=w[0].map(function(t){return t.getBBox()}),j=d3.max(S,function(t){return t.height}),A=d3.max(S,function(t){return t.width}),z="start"==h?0:"middle"==h?.5:1;"vertical"===v?(k=function(t,e){return"translate(0, "+e*(j+l)+")"},O=function(t,e){return"translate("+(A+g)+","+(S[e].y+S[e].height/2+5)+")"}):"horizontal"===v&&(k=function(t,e){return"translate("+e*(A+l)+",0)"},O=function(t,e){return"translate("+(S[e].width*z+S[e].x)+","+(j+g)+")"}),r.d3_placement(v,_,k,P,O,h),r.d3_title(t,x,p,c),_.transition().style("opacity",1)}var e=d3.scale.linear(),i="path",n=15,o=15,a=10,l=5,s=[5],u=[],c="",p="",f=d3.format(".01f"),h="middle",g=10,d="to",v="vertical",y=!1,m=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(i){return arguments.length?(e=i,t):e},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(s=e),t):s},t.shapePadding=function(e){return arguments.length?(l=+e,t):l},t.labels=function(e){return arguments.length?(u=e,t):u},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(h=e),t):h},t.labelFormat=function(e){return arguments.length?(f=e,t):f},t.labelOffset=function(e){return arguments.length?(g=+e,t):g},t.labelDelimiter=function(e){return arguments.length?(d=e,t):d},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(v=e),t):v},t.ascending=function(e){return arguments.length?(y=!!e,t):y},t.classPrefix=function(e){return arguments.length?(c=e,t):c},t.title=function(e){return arguments.length?(p=e,t):p},d3.rebind(t,m,"on"),t}},{"./legend":3}],6:[function(t,e,i){"use strict";function r(t){var e=1/(1+.5*Math.abs(t)),i=e*Math.exp(-Math.pow(t,2)-1.26551223+1.00002368*e+.37409196*Math.pow(e,2)+.09678418*Math.pow(e,3)-.18628806*Math.pow(e,4)+.27886807*Math.pow(e,5)-1.13520398*Math.pow(e,6)+1.48851587*Math.pow(e,7)-.82215223*Math.pow(e,8)+.17087277*Math.pow(e,9));return t>=0?1-i:i-1}e.exports=r},{}],7:[function(t,e,i){"use strict";function r(t){var e,i,r=t.length;if(1===r)e=0,i=t[0][1];else{for(var n,o,a,l=0,s=0,u=0,c=0,p=0;p<r;p++)n=t[p],o=n[0],a=n[1],l+=o,s+=a,u+=o*o,c+=o*a;e=(r*c-l*s)/(r*u-l*l),i=s/r-e*l/r}return{m:e,b:i}}e.exports=r},{}],8:[function(t,e,i){"use strict";function r(t){return function(e){return t.b+t.m*e}}e.exports=r},{}],9:[function(t,e,i){"use strict";function r(t){return 0===t.length?NaN:n(t)/t.length}var n=t("./sum");e.exports=r},{"./sum":18}],10:[function(t,e,i){"use strict";function r(t,e){var i=t.slice();if(Array.isArray(e)){o(i,e);for(var r=[],a=0;a<e.length;a++)r[a]=s(i,e[a]);return r}var u=l(i.length,e);return n(i,u,0,i.length-1),s(i,e)}function n(t,e,i,r){e%1===0?u(t,e,i,r):(e=Math.floor(e),u(t,e,i,r),u(t,e+1,e+1,r))}function o(t,e){for(var i=[0],r=0;r<e.length;r++)i.push(l(t.length,e[r]));i.push(t.length-1),i.sort(a);for(var o=[0,i.length-1];o.length;){var s=Math.ceil(o.pop()),u=Math.floor(o.pop());if(!(s-u<=1)){var c=Math.floor((u+s)/2);n(t,i[c],i[u],i[s]),o.push(u,c,c,s)}}}function a(t,e){return t-e}function l(t,e){var i=t*e;return 1===e?t-1:0===e?0:i%1!==0?Math.ceil(i)-1:t%2===0?i-.5:i}var s=t("./quantile_sorted"),u=t("./quickselect");e.exports=r},{"./quantile_sorted":11,"./quickselect":12}],11:[function(t,e,i){"use strict";function r(t,e){var i=t.length*e;return e<0||e>1?NaN:1===e?t[t.length-1]:0===e?t[0]:i%1!==0?t[Math.ceil(i)-1]:t.length%2===0?(t[i-1]+t[i])/2:t[i]}e.exports=r},{}],12:[function(t,e,i){"use strict";function r(t,e,i,o){for(i=i||0,o=o||t.length-1;o>i;){if(o-i>600){var a=o-i+1,l=e-i+1,s=Math.log(a),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(a-u)/a);l-a/2<0&&(c*=-1);var p=Math.max(i,Math.floor(e-l*u/a+c)),f=Math.min(o,Math.floor(e+(a-l)*u/a+c));r(t,e,p,f)}var h=t[e],g=i,d=o;for(n(t,i,e),t[o]>h&&n(t,i,o);g<d;){for(n(t,g,d),g++,d--;t[g]<h;)g++;for(;t[d]>h;)d--}t[i]===h?n(t,i,d):(d++,n(t,d,o)),d<=e&&(i=d+1),e<=d&&(o=d-1)}}function n(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}e.exports=r},{}],13:[function(t,e,i){"use strict";function r(t,e){var i=n(t,e),r=o(t),a=o(e);return i/r/a}var n=t("./sample_covariance"),o=t("./sample_standard_deviation");e.exports=r},{"./sample_covariance":14,"./sample_standard_deviation":15}],14:[function(t,e,i){"use strict";function r(t,e){if(t.length<=1||t.length!==e.length)return NaN;for(var i=n(t),r=n(e),o=0,a=0;a<t.length;a++)o+=(t[a]-i)*(e[a]-r);var l=t.length-1;return o/l}var n=t("./mean");e.exports=r},{"./mean":9}],15:[function(t,e,i){"use strict";function r(t){var e=n(t);return isNaN(e)?NaN:Math.sqrt(e)}var n=t("./sample_variance");e.exports=r},{"./sample_variance":16}],16:[function(t,e,i){"use strict";function r(t){if(t.length<=1)return NaN;var e=n(t,2),i=t.length-1;return e/i}var n=t("./sum_nth_power_deviations");e.exports=r},{"./sum_nth_power_deviations":19}],17:[function(t,e,i){"use strict";function r(t){var e=n(t);return isNaN(e)?0:Math.sqrt(e)}var n=t("./variance");e.exports=r},{"./variance":20}],18:[function(t,e,i){"use strict";function r(t){for(var e,i,r=0,n=0,o=0;o<t.length;o++)e=t[o]-n,i=r+e,n=i-r-e,r=i;return r}e.exports=r},{}],19:[function(t,e,i){"use strict";function r(t,e){for(var i=n(t),r=0,o=0;o<t.length;o++)r+=Math.pow(t[o]-i,e);return r}var n=t("./mean");e.exports=r},{"./mean":9}],20:[function(t,e,i){"use strict";function r(t){return 0===t.length?NaN:n(t,2)/t.length}var n=t("./sum_nth_power_deviations");e.exports=r},{"./sum_nth_power_deviations":19}],21:[function(t,e,i){"use strict";function r(t,e,i){return(t-e)/i}e.exports=r},{}],22:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.BarChart=i.BarChartConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:p(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./chart-with-color-groups"),u=t("./utils"),c=(t("./legend"),i.BarChartConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.svgClass=i.cssClassPrefix+"bar-chart",i.showLegend=!0,i.showTooltip=!0,i.x={title:"",key:0,value:function(t,e){return u.Utils.isNumber(t)?t:t[e]},scale:"ordinal",ticks:void 0},i.y={key:1,value:function(t,e){return u.Utils.isNumber(t)?t:t[e]},title:"",orient:"left",scale:"linear"},i.transition=!0;return t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.ChartWithColorGroupsConfig));i.BarChart=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new c(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new c(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);this.config;return this.plot.x={},this.plot.y={},this.computePlotSize(),this.setupY(),this.setupX(),this.setupGroupStacks(),this.setupYDomain(),this}},{key:"setupX",value:function(){var t=this.plot,e=t.x,i=this.config.x;e.value=function(t){return i.value(t,i.key)},e.scale=d3.scale.ordinal().rangeRoundBands([0,t.width],.08),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(i.orient);var r,n=this.plot.data;r=n&&n.length?this.config.series?d3.map(n[0].values,e.value).keys():d3.map(n,e.value).keys():[],t.x.scale.domain(r)}},{key:"setupY",value:function(){var t=this.plot,e=t.y,i=this.config.y;e.value=function(t){return i.value(t,i.key)},e.scale=d3.scale[i.scale]().range([t.height,0]),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(i.orient),i.ticks&&e.axis.ticks(i.ticks)}},{key:"setupYDomain",value:function(){var t,e=this.plot,i=(this.plot.data,d3.max(e.layers,function(t){return d3.max(t.points,function(t){return t.y0+t.y})})),r=i;t=[0,r],e.y.scale.domain(t)}},{key:"setupGroupStacks",value:function(){var t=this;this.groupData(),this.plot.stack=d3.layout.stack().values(function(t){return t.points}),this.plot.groupedData.forEach(function(e){e.points=e.values.map(function(e){return t.mapToPoint(e)})}),this.plot.layers=this.plot.stack(this.plot.groupedData)}},{key:"mapToPoint",value:function(t){var e=this.plot;return{x:e.x.value(t),y:parseFloat(e.y.value(t))}}},{key:"drawAxisX",value:function(){var t=this,e=t.plot,i=this.config.x,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-x")+"."+t.prefixClass("axis")+(t.config.guides?"":"."+t.prefixClass("no-guides"))).attr("transform","translate(0,"+e.height+")"),n=r;t.config.transition&&(n=r.transition().ease("sin-in-out")),n.call(e.x.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+e.width/2+","+e.margin.bottom+")").attr("dy","-1em").style("text-anchor","middle").text(i.title)}},{key:"drawAxisY",value:function(){var t=this,e=t.plot,i=this.config.y,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-y")+"."+t.prefixClass("axis")+(t.config.guides?"":"."+t.prefixClass("no-guides"))),n=r;t.config.transition&&(n=r.transition().ease("sin-in-out")),n.call(e.y.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+-e.margin.left+","+e.height/2+")rotate(-90)").attr("dy","1em").style("text-anchor","middle").text(i.title)}},{key:"drawBars",value:function(){var t=this,e=t.plot,i=this.prefixClass("layer"),r=this.prefixClass("bar"),n=t.svgG.selectAll("."+i).data(e.layers);n.enter().append("g").attr("class",i);var o=n.selectAll("."+r).data(function(t){return t.points});o.enter().append("g").attr("class",r).append("rect").attr("x",1);var a=o.select("rect"),l=a,s=o,u=n;this.transitionEnabled()&&(l=a.transition(),s=o.transition(),u=n.transition());var c=e.y.scale.domain();s.attr("transform",function(t){return"translate("+e.x.scale(t.x)+","+e.y.scale(t.y0+t.y)+")"}),l.attr("width",e.x.scale.rangeBand()).attr("height",function(t){return e.y.scale(t.y0)-e.y.scale(t.y0+t.y-c[0])}),this.plot.seriesColor&&u.attr("fill",this.plot.seriesColor),e.tooltip&&o.on("mouseover",function(e){t.showTooltip(e.y)}).on("mouseout",function(e){t.hideTooltip()}),n.exit().remove(),o.exit().remove()}},{key:"update",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.drawAxisX(),this.drawAxisY(),this.drawBars(),this}}]),e}(s.ChartWithColorGroups)},{"./chart-with-color-groups":25,"./legend":33,"./utils":39}],23:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.BoxPlotBase=i.BoxPlotBaseConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:p(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./chart"),u=t("./utils"),c=i.BoxPlotBaseConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.svgClass=i.cssClassPrefix+"box-plot",i.showLegend=!0,i.showTooltip=!0,i.x={title:"",value:function(t){return t.key},guides:!1,scale:"ordinal"},i.y={title:"",value:function(t){return t},scale:"linear",orient:"left",domainMargin:.1,guides:!0},i.Q1=function(t){return t.values.Q1},i.Q2=function(t){return t.values.Q2},i.Q3=function(t){return t.values.Q3},i.Wl=function(t){return t.values.whiskerLow},i.Wh=function(t){return t.values.whiskerHigh},i.outliers=function(t){return t.values.outliers},i.outlierValue=function(t,e){return t},i.outlierLabel=function(t,e){return t},i.minBoxWidth=35,i.maxBoxWidth=100,i.transition=!0,i.color=void 0,i.d3ColorCategory="category10",t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.ChartConfig);i.BoxPlotBase=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new c(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new c(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"computePlotSize",this).call(this),this.plot.x={},this.plot.y={},this.plot.data=this.getDataToPlot(),this.setupY(),this.setupX(),this.setupColor()}},{key:"getDataToPlot",value:function(){return this.data}},{key:"setupX",value:function(){var t=this.plot,e=t.x,i=this.config.x;e.value=i.value,e.scale=d3.scale.ordinal().rangeRoundBands([0,t.width],.08),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(i.orient),i.guides&&e.axis.tickSize(-t.height);var r,n=this.plot.data;r=n&&n.length?n.map(e.value):[],t.x.scale.domain(r)}},{key:"setupY",value:function(){var t=this,e=this.plot,i=e.y,r=this.config.y;i.value=function(e){return r.value.call(t.config,e)},i.scale=d3.scale[r.scale]().range([e.height,0]),i.map=function(t){return i.scale(i.value(t))},i.axis=d3.svg.axis().scale(i.scale).orient(r.orient),r.ticks&&i.axis.ticks(r.ticks),r.guides&&i.axis.tickSize(-e.width),this.setupYDomain()}},{key:"setupYDomain",value:function(){var t,e,i=this.plot,r=this.plot.data,n=this.config,o=[];r.forEach(function(t,e){var i=n.Q1(t),r=n.Q3(t),a=n.Wl(t),l=n.Wh(t),s=n.outliers(t);s&&s.forEach(function(t,e){o.push(n.outlierValue(t,e))}),a&&o.push(a),i&&o.push(i),r&&o.push(r),l&&o.push(l)}),t=d3.min(o),e=d3.max(o);var a=(e-t)*this.config.y.domainMargin;t-=a,e+=a;var l=[t,e];i.y.scale.domain(l)}},{key:"drawAxisX",value:function(){var t=this,e=t.plot,i=this.config.x,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-x")+"."+t.prefixClass("axis")+(i.guides?"":"."+t.prefixClass("no-guides"))).attr("transform","translate(0,"+e.height+")"),n=r;t.config.transition&&(n=r.transition().ease("sin-in-out")),n.call(e.x.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+e.width/2+","+e.margin.bottom+")").attr("dy","-1em").style("text-anchor","middle").text(i.label)}},{key:"drawAxisY",value:function(){var t=this,e=t.plot,i=this.config.y,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-y")+"."+t.prefixClass("axis")+(i.guides?"":"."+t.prefixClass("no-guides"))),n=r;t.config.transition&&(n=r.transition().ease("sin-in-out")),n.call(e.y.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+-e.margin.left+","+e.height/2+")rotate(-90)").attr("dy","1em").style("text-anchor","middle").text(i.title)}},{key:"drawBoxPlots",value:function(){var t=this,e=t.plot,i=t.config,r=t.prefixClass("boxplot-item"),n=t.svgG.selectAll("."+r).data(e.data),o=n.enter().append("g").attr("class",r).style("stroke-opacity",1e-6).style("fill-opacity",1e-6),a=1e3,l=n;t.transitionEnabled()&&(l=n.transition(),l.delay(function(t,i){return i*a/e.data.length})),l.style("fill",e.color).style("stroke-opacity",1).style("fill-opacity",.75).attr("transform",function(t,i){return"translate("+(e.x.map(t,i)+.05*e.x.scale.rangeBand())+", 0)"}),n.exit().remove();var s=i.maxBoxWidth?Math.min(i.maxBoxWidth,Math.max(i.minBoxWidth,.9*e.x.scale.rangeBand())):.9*e.x.scale.rangeBand(),u=.45*e.x.scale.rangeBand()-s/2,c=.45*e.x.scale.rangeBand()+s/2,p=t.prefixClass("box");o.append("rect").attr("class",p).on("mouseover",function(e,r){d3.select(this).classed("hover",!0);var n="Q3: "+i.Q3(e,r)+"<br/>Q2: "+i.Q2(e,r)+"<br/>Q1: "+i.Q1(e,r);t.showTooltip(n)}).on("mouseout",function(e,i){d3.select(this).classed("hover",!1),t.hideTooltip()});var f=n.select("rect."+p),h=f;t.config.transition&&(h=f.transition()),h.attr("y",function(t,r){return e.y.scale(i.Q3(t))}).attr("width",s).attr("x",u).attr("height",function(t,r){return Math.abs(e.y.scale(i.Q3(t))-e.y.scale(i.Q1(t)))||1}).style("stroke",e.color);var g=t.prefixClass("median");o.append("line").attr("class",g);var d=n.select("line."+g);t.config.transition&&(d=d.transition()),d.attr("x1",u).attr("y1",function(t,r){return e.y.scale(i.Q2(t))}).attr("x2",c).attr("y2",function(t,r){return e.y.scale(i.Q2(t))});var v=t.prefixClass("whisker"),y=t.prefixClass("boxplot-tick"),m=[{key:"low",value:i.Wl},{key:"high",value:i.Wh}];o.each(function(t,i){var n=d3.select(this);m.forEach(function(o){o.value(t)&&(n.append("line").style("stroke",e.color(t,i)).attr("class",v+" "+r+"-"+o.key),n.append("line").style("stroke",e.color(t,i)).attr("class",y+" "+r+"-"+o.key))})}),m.forEach(function(a){var l="low"===a.key?i.Q1:i.Q3,s=n.select("."+v+"."+r+"-"+a.key),p=n.select("."+y+"."+r+"-"+a.key);t.config.transition&&(s=s.transition(),p=p.transition()),s.attr("x1",.45*e.x.scale.rangeBand()).attr("y1",function(t,i){return e.y.scale(a.value(t))}).attr("x2",.45*e.x.scale.rangeBand()).attr("y2",function(t,i){return e.y.scale(l(t))}),p.attr("x1",u).attr("y1",function(t,i){return e.y.scale(a.value(t))}).attr("x2",c).attr("y2",function(t,i){return e.y.scale(a.value(t))}),o.selectAll("."+r+"-"+a.key).on("mouseover",function(e,i,r){d3.select(this).classed("hover",!0),t.showTooltip(a.value(e))}).on("mouseout",function(e,i,r){d3.select(this).classed("hover",!1),t.hideTooltip()})});var b=t.prefixClass("outlier"),x=n.selectAll("."+b).data(function(t,e){return i.outliers(t,e)||[]}),_=x.enter().append("circle").attr("class",b).style("z-index",9e3);_.on("mouseover",function(e,r,n){d3.select(this).classed("hover",!0),t.showTooltip(i.outlierLabel(e,r))}).on("mouseout",function(e,i,r){d3.select(this).classed("hover",!1),t.hideTooltip()});var C=x;t.config.transition&&(C=x.transition()),C.attr("cx",.45*e.x.scale.rangeBand()).attr("cy",function(t,r){return e.y.scale(i.outlierValue(t,r))}).attr("r","3"),x.exit().remove()}},{key:"update",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.drawAxisX(),this.drawAxisY(),this.drawBoxPlots(),this}},{key:"setupColor",value:function(){var t=this,e=this,i=this.config;i.d3ColorCategory&&(this.plot.colorCategory=d3.scale[i.d3ColorCategory]());var r=i.color;r&&"string"==typeof r||r instanceof String?this.plot.color=r:this.plot.colorCategory&&(e.plot.colorValue=r,this.plot.color=function(i){return e.plot.colorCategory(t.plot.x.value(i))})}}]),e}(s.Chart)},{"./chart":26,"./utils":39}],24:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.BoxPlot=i.BoxPlotConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:f(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./box-plot-base"),u=t("./utils"),c=t("./statistics-utils"),p=i.BoxPlotConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.svgClass=i.cssClassPrefix+"box-plot",i.showLegend=!0,i.showTooltip=!0,i.y={key:void 0,value:function(t){return void 0===this.y.key?t:t[this.y.key]},scale:"linear",orient:"left",domainMargin:.1,guides:!0},i.series=!1,i.groups={key:void 0,value:function(t){return void 0===this.groups.key?"":t[this.groups.key]},label:"",displayValue:void 0},t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.BoxPlotBaseConfig);i.BoxPlot=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new p(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new p(t))}},{key:"getDataToPlot",value:function(){var t=this,e=t.config;t.plot.groupingEnabled=this.isGroupingEnabled();var i=this.data;if(t.plot.groupingEnabled){if(t.config.series)t.plot.groupedData=i.map(function(t){return{key:t.label||t.key||"",values:t.values}});else{t.plot.groupValue=function(t){return e.groups.value.call(e,t)},t.plot.groupedData=d3.nest().key(this.plot.groupValue).entries(i);var r=function(t){return t};t.config.groups.displayValue&&(u.Utils.isFunction(t.config.groups.displayValue)?r=function(e){return t.config.groups.displayValue(e)||e}:u.Utils.isObject(t.config.groups.displayValue)&&(r=function(e){return t.config.groups.displayValue[e]||e})),t.plot.groupedData.forEach(function(t){t.key=r(t.key)})}t.plot.dataLength=d3.sum(this.plot.groupedData,function(t){return t.values.length})}else t.plot.groupedData=[{key:"",values:i}],t.plot.dataLength=i.length;return t.plot.groupedData.forEach(function(e){if(Array.isArray(e.values)){var i=e.values.map(function(e){return parseFloat(t.config.y.value.call(t.config,e))});e.values.Q1=c.StatisticsUtils.quantile(i,.25),e.values.Q2=c.StatisticsUtils.quantile(i,.5),e.values.Q3=c.StatisticsUtils.quantile(i,.75);var r=e.values.Q3-e.values.Q1;t.config.tukey?(e.values.whiskerLow=e.values.Q1-1.5*r,e.values.whiskerHigh=e.values.Q3+1.5*r,
e.values.outliers=i.filter(function(t){return t<e.values.whiskerLow||t>e.values.whiskerHigh})):(e.values.whiskerLow=d3.min(i),e.values.whiskerHigh=d3.max(i))}}),t.plot.groupedData}},{key:"isGroupingEnabled",value:function(){return this.config.series||!(!this.config.groups||!this.config.groups.value)}}]),e}(s.BoxPlotBase)},{"./box-plot-base":23,"./statistics-utils":38,"./utils":39}],25:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.ChartWithColorGroups=i.ChartWithColorGroupsConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:f(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./chart"),u=t("./utils"),c=t("./legend"),p=i.ChartWithColorGroupsConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.showLegend=!0,i.legend={width:80,margin:10,shapeWidth:20},i.groups={key:2,value:function(t){return t[this.groups.key]},label:"",displayValue:void 0},i.series=!1,i.color=void 0,i.d3ColorCategory="category10",t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.ChartConfig);i.ChartWithColorGroups=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new p(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new p(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);var t=this.config;if(this.plot.showLegend=t.showLegend,this.setupGroups(),this.plot.data=this.getDataToPlot(),this.groupData(),this.plot.showLegend){var i=this.plot.colorCategory;!i.domain()||i.domain().length<2?this.plot.showLegend=!1:this.plot.margin.right=t.margin.right+t.legend.width+2*t.legend.margin}return this}},{key:"isGroupingEnabled",value:function(){return this.config.series||!(!this.config.groups||!this.config.groups.value)}},{key:"computeGroupColorDomain",value:function(){var t=this;return Object.getOwnPropertyNames(d3.map(this.data,function(e){return t.plot.groupValue(e)})._)}},{key:"setupGroups",value:function(){var t=this,e=this,i=this.config;this.plot.groupingEnabled=this.isGroupingEnabled();var r=[];if(this.plot.groupingEnabled)if(e.plot.groupToLabel={},this.config.series)this.plot.groupValue=function(t){return t.key},r=this.computeGroupColorDomain(),this.data.forEach(function(t){e.plot.groupToLabel[t.key]=t.label||t.key});else{this.plot.groupValue=function(t){return i.groups.value.call(i,t)},r=this.computeGroupColorDomain();var n=function(t){return t};e.config.groups.displayValue&&(u.Utils.isFunction(e.config.groups.displayValue)?n=function(t){return e.config.groups.displayValue(t)||t}:u.Utils.isObject(e.config.groups.displayValue)&&(n=function(t){return e.config.groups.displayValue[t]||t})),r.forEach(function(t){e.plot.groupToLabel[t]=n(t)})}else this.plot.groupValue=function(t){return null};i.d3ColorCategory&&(this.plot.colorCategory=d3.scale[i.d3ColorCategory]());var o=i.color;o&&"string"==typeof o||o instanceof String?(this.plot.color=o,this.plot.seriesColor=this.plot.color):this.plot.colorCategory?(e.plot.colorValue=o,e.plot.colorCategory.domain(r),this.plot.seriesColor=function(t){return e.plot.colorCategory(t.key)},this.plot.color=function(i){return e.plot.colorCategory(t.plot.groupValue(i))}):this.plot.color=this.plot.seriesColor=function(t){return"black"}}},{key:"groupData",value:function(){var t=this,e=this.plot.data;t.plot.groupingEnabled?(t.config.series?t.plot.groupedData=e.map(function(t){return{key:t.key,label:t.label,values:t.values}}):(t.plot.groupedData=d3.nest().key(this.plot.groupValue).entries(e),t.plot.groupedData.forEach(function(e){e.label=t.plot.groupToLabel[e.key]})),t.plot.dataLength=d3.sum(this.plot.groupedData,function(t){return t.values.length})):(t.plot.groupedData=[{key:null,label:"",values:e}],t.plot.dataLength=e.length)}},{key:"getDataToPlot",value:function(){var t=this;return this.plot.groupingEnabled&&this.enabledGroups?this.data.filter(function(e){return t.enabledGroups.indexOf(t.plot.groupValue(e))>-1}):this.data}},{key:"update",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.updateLegend(),this}},{key:"updateLegend",value:function(){var t=this,e=this.plot,i=e.colorCategory;if((!i.domain()||i.domain().length<2)&&(e.showLegend=!1),!e.showLegend)return void(e.legend&&e.legend.container&&e.legend.container.remove());var r=this.plot.width+this.config.legend.margin,n=this.config.legend.margin;e.legend=new c.Legend(this.svg,this.svgG,i,r,n),e.legendColor=e.legend.color().shapeWidth(this.config.legend.shapeWidth).orient("vertical").scale(i).labels(i.domain().map(function(t){return e.groupToLabel[t]})),e.legendColor.on("cellclick",function(e){return t.onLegendCellClick(e)}),e.legend.container.call(e.legendColor),this.updateLegendCellStatuses()}},{key:"onLegendCellClick",value:function(t){this.updateEnabledGroups(t),this.init()}},{key:"updateLegendCellStatuses",value:function(){var t=this;this.plot.legend.container.selectAll("g.cell").each(function(e){var i=t.enabledGroups&&t.enabledGroups.indexOf(e)<0;d3.select(this).classed("odc-disabled",i)})}},{key:"updateEnabledGroups",value:function(t){this.enabledGroups||(this.enabledGroups=this.plot.colorCategory.domain().slice());var e=this.enabledGroups.indexOf(t);e<0?this.enabledGroups.push(t):this.enabledGroups.splice(e,1),this.enabledGroups.length||(this.enabledGroups=this.plot.colorCategory.domain().slice())}},{key:"setData",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.enabledGroups=null,this}}]),e}(s.Chart)},{"./chart":26,"./legend":33,"./utils":39}],26:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.Chart=i.ChartConfig=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("./utils"),a=i.ChartConfig=function l(t){r(this,l),this.cssClassPrefix="odc-",this.svgClass=this.cssClassPrefix+"mw-d3-chart",this.width=void 0,this.height=void 0,this.margin={left:50,right:30,top:30,bottom:50},this.showTooltip=!1,this.transition=!0,this.title=void 0,this.titleSize=20,this.titleMargin={left:0,right:0,top:15,bottom:20},this.subtitle=void 0,this.subtitleSize=14,this.subtitleMargin={left:0,right:0,top:10,bottom:20},t&&o.Utils.deepExtend(this,t)};i.Chart=function(){function t(e,i,n){r(this,t),this.utils=o.Utils,this.plot={margin:{}},this._attached={},this._layers={},this._events={},this._isInitialized=!1,this._id=o.Utils.guid(),this._isAttached=e instanceof t,this.baseContainer=e,this.setConfig(n),i&&this.setData(i),this.init(),this.postInit()}return n(t,[{key:"setConfig",value:function(t){return t?this.config=t:this.config=new a,this.initConfigAccessors(),this}},{key:"setData",value:function(t){return this.data=t,this}},{key:"init",value:function(){var t=this;return t.initPlot(),t.initSvg(),this._isInitialized||t.initTooltip(),t.draw(),this._isInitialized=!0,this}},{key:"redraw",value:function(){return this.init()}},{key:"postInit",value:function(){}},{key:"initSvg",value:function(){var t=this,e=this.config,i=t.plot.margin,r=t.svgWidth=t.plot.width+i.left+i.right,n=t.svgHeight=t.plot.height+i.top+i.bottom;t._isAttached?(t.svg=t.baseContainer.svg,t.svgG=t.svg.selectOrAppend("g.main-group."+e.svgClass)):(this._isInitialized||d3.select(t.baseContainer).select("svg").remove(),t.svg=d3.select(t.baseContainer).selectOrAppend("svg"),t.svg.attr("width",r).attr("height",n).attr("viewBox","0 0  "+r+" "+n).attr("preserveAspectRatio","xMidYMid meet").attr("class",e.svgClass),t.svgG=t.svg.selectOrAppend("g.main-group")),t.svgG.attr("transform","translate("+i.left+","+i.top+")"),e.width&&!e.height||d3.select(window).on("resize."+t._id,function(){var e=t.config.transition;t.config.transition=!1,t.init(),t.config.transition=e})}},{key:"initTooltip",value:function(){var t=this;t.config.showTooltip?t._isAttached?t.plot.tooltip=t.baseContainer.plot.tooltip:t.plot.tooltip=d3.select("body").selectOrAppend("div."+t.config.cssClassPrefix+"tooltip").style("opacity",0):t.plot.tooltip=null}},{key:"initPlot",value:function(){var t=this.config.margin;this.plot=this.plot||{},this.plot.margin={top:t.top,bottom:t.bottom,left:t.left,right:t.right};var e=0;this.config.title&&(e=this.config.titleSize+this.config.titleMargin.top,this.config.subtitle||(e+=this.config.titleMargin.bottom),this.plot.margin.top=Math.max(this.plot.margin.top,e)),this.config.subtitle&&(this.plot.margin.top=Math.max(this.plot.margin.top,e+this.config.subtitleMargin.top+this.config.subtitleSize+this.config.subtitleMargin.bottom))}},{key:"update",value:function(t){t&&this.setData(t),this.updateTitle(),this.updateSubtitle();var e;for(var i in this._attached)e=t,this._attached[i].update(e);return this}},{key:"updateTitle",value:function(){var t=this.prefixClass("plot-title");return this.config.title?void this.svg.selectOrAppend("text."+t).attr("transform","translate("+this.svgWidth/2+","+this.config.titleMargin.top+")").attr("dy","0.5em").style("text-anchor","middle").style("dominant-baseline","central").style("font-size",this.config.titleSize+"px").text(this.config.title):void this.svg.select("text."+t).remove()}},{key:"updateSubtitle",value:function(){var t=this.prefixClass("plot-subtitle");if(!this.config.subtitle)return void this.svg.select("text."+t).remove();var e=this.config.subtitleMargin.top;this.config.title&&(e+=this.config.titleMargin.top+this.config.titleSize),this.svg.selectOrAppend("text."+t).attr("transform","translate("+this.svgWidth/2+","+e+")").attr("dy","0.5em").style("text-anchor","middle").style("dominant-baseline","central").style("font-size",this.config.subtitleSize+"px").text(this.config.subtitle)}},{key:"draw",value:function(t){return this.update(t),this}},{key:"attach",value:function(t,e){return 1===arguments.length?this._attached[t]:(this._attached[t]=e,e)}},{key:"on",value:function(t,e,i){var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:i||this,_chart:this}),this}},{key:"once",value:function e(t,i,r){var n=this,e=function o(){n.off(t,o),i.apply(this,arguments)};return this.on(t,e,r)}},{key:"off",value:function(t,e,i){var r,n,o,a,l,s;if(0===arguments.length){for(t in this._events)this._events[t].length=0;return this}if(1===arguments.length)return o=this._events[t],o&&(o.length=0),this;for(r=t?[t]:Object.keys(this._events),l=0;l<r.length;l++)for(n=r[l],o=this._events[n],s=o.length;s--;)a=o[s],(e&&e===a.callback||i&&i===a.context)&&o.splice(s,1);return this}},{key:"trigger",value:function(t){var e,i,r=Array.prototype.slice.call(arguments,1),n=this._events[t];if(void 0!==n)for(e=0;e<n.length;e++)i=n[e],i.callback.apply(i.context,r);return this}},{key:"getBaseContainer",value:function(){return this._isAttached?this.baseContainer.svg:d3.select(this.baseContainer)}},{key:"getBaseContainerNode",value:function(){return this.getBaseContainer().node()}},{key:"prefixClass",value:function(t,e){return e?".":""+this.config.cssClassPrefix+t}},{key:"computePlotSize",value:function(){this.plot.width=o.Utils.availableWidth(this.config.width,this.getBaseContainer(),this.plot.margin),this.plot.height=o.Utils.availableHeight(this.config.height,this.getBaseContainer(),this.plot.margin)}},{key:"transitionEnabled",value:function(){return this._isInitialized&&this.config.transition}},{key:"showTooltip",value:function(t){this.plot.tooltip&&(this.plot.tooltip.transition().duration(200).style("opacity",.9),this.plot.tooltip.html(t).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px"))}},{key:"hideTooltip",value:function(){this.plot.tooltip&&this.plot.tooltip.transition().duration(500).style("opacity",0)}},{key:"initConfigAccessors",value:function(){this.initPropertyAccessors(this,this,this.config,"$",!0)}},{key:"initPropertyAccessors",value:function(t,e,i,r,n){var a=this;for(var l in i)if(i.hasOwnProperty(l)){var s=a.initPropertyAccessor(t,e,i,l,r);n&&o.Utils.isObjectNotArray(i[l])&&a.initPropertyAccessors(s,t,i[l],r,n)}}},{key:"initPropertyAccessor",value:function(t,e,i,r,n){return t[n+r]=function(t){return arguments.length?(i[r]=t,e):i[r]}}}]),t}()},{"./utils":39}],27:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.CorrelationMatrix=i.CorrelationMatrixConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function g(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:g(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./chart"),u=t("./utils"),c=t("./statistics-utils"),p=t("./legend"),f=t("./scatterplot"),h=i.CorrelationMatrixConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.svgClass=i.cssClassPrefix+"correlation-matrix",i.guides=!1,i.showTooltip=!0,i.showLegend=!0,i.highlightLabels=!0,i.rotateLabelsX=!0,i.rotateLabelsY=!0,i.variables={labels:void 0,keys:[],value:function(t,e){return t[e]},scale:"ordinal"},i.correlation={scale:"linear",domain:[-1,-.75,-.5,0,.5,.75,1],range:["darkblue","blue","lightskyblue","white","orangered","crimson","darkred"],value:function(t,e){return c.StatisticsUtils.sampleCorrelation(t,e)}},i.cell={shape:"ellipse",size:void 0,sizeMin:15,sizeMax:250,padding:1},i.margin={left:60,right:50,top:30,bottom:60},t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.ChartConfig);i.CorrelationMatrix=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new h(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new h(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);var t=this.config.margin,i=this.config;this.plot.x={},this.plot.correlation={matrix:void 0,cells:void 0,color:{},shape:{}},this.setupVariables();var r=i.width,n=this.getBaseContainerNode();this.plot.placeholderNode=n;var o=n.getBoundingClientRect().width;r?this.plot.cellSize||(this.plot.cellSize=Math.max(i.cell.sizeMin,Math.min(i.cell.sizeMax,(r-t.left-t.right)/this.plot.variables.length))):(this.plot.cellSize=this.config.cell.size,this.plot.cellSize||(this.plot.cellSize=Math.max(i.cell.sizeMin,Math.min(i.cell.sizeMax,(o-t.left-t.right)/this.plot.variables.length))),r=this.plot.cellSize*this.plot.variables.length+t.left+t.right);var a=r;return a||(a=n.getBoundingClientRect().height),this.plot.width=r-t.left-t.right,this.plot.height=this.plot.width,this.setupVariablesScales(),this.setupCorrelationScales(),this.setupCorrelationMatrix(),this}},{key:"setupVariablesScales",value:function(){var t=this.plot,e=t.x,i=this.config.variables;e.value=i.value,e.scale=d3.scale[i.scale]().rangeBands([t.width,0]),e.map=function(t){return e.scale(e.value(t))}}},{key:"setupCorrelationScales",value:function(){var t=this.plot,e=this.config.correlation;t.correlation.color.scale=d3.scale[e.scale]().domain(e.domain).range(e.range);var i=t.correlation.shape={},r=this.config.cell;i.type=r.shape;var n=t.cellSize-2*r.padding;if("circle"==i.type){var o=n/2;i.radiusScale=d3.scale.linear().domain([0,1]).range([2,o]),i.radius=function(t){return i.radiusScale(Math.abs(t.value))}}else if("ellipse"==i.type){var o=n/2;i.radiusScale=d3.scale.linear().domain([0,1]).range([o,2]),i.radiusX=function(t){return i.radiusScale(Math.abs(t.value))},i.radiusY=o,i.rotateVal=function(t){return 0==t?"0":t<0?"-45":"45"}}else"rect"==i.type&&(i.size=n)}},{key:"setupVariables",value:function(){var t=this.config.variables,e=this.data,i=this.plot;i.domainByVariable={},i.variables=t.keys,i.variables&&i.variables.length||(i.variables=u.Utils.inferVariables(e,this.config.groups.key,this.config.includeInPlot)),i.labels=[],i.labelByVariable={},i.variables.forEach(function(r,n){i.domainByVariable[r]=d3.extent(e,function(e){return t.value(e,r)});var o=r;t.labels&&t.labels.length>n&&(o=t.labels[n]),i.labels.push(o),i.labelByVariable[r]=o})}},{key:"setupCorrelationMatrix",value:function(){var t=this,e=this.data,i=this.plot.correlation.matrix=[],r=this.plot.correlation.matrix.cells=[],n=this.plot,o={};n.variables.forEach(function(t,i){o[t]=e.map(function(e){return n.x.value(e,t)})}),n.variables.forEach(function(e,a){var l=[];i.push(l),n.variables.forEach(function(i,n){var s=1;e!=i&&(s=t.config.correlation.value(o[e],o[i]));var u={rowVar:e,colVar:i,row:a,col:n,value:s};l.push(u),r.push(u)})})}},{key:"update",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.updateCells(),this.updateVariableLabels(),this.config.showLegend&&this.updateLegend()}},{key:"updateVariableLabels",value:function(){this.plot.labelClass=this.prefixClass("label"),this.updateAxisX(),this.updateAxisY()}},{key:"updateAxisX",value:function(){var t=this,e=t.plot,i=e.labelClass,r=i+"-x",n=t.svgG.selectAll("text."+r).data(e.variables,function(t,e){return e});n.enter().append("text").attr("class",function(t,e){return i+" "+r+" "+r+"-"+e}),n.attr("x",function(t,i){return i*e.cellSize+e.cellSize/2}).attr("y",e.height).attr("dx",-2).attr("dy",5).attr("text-anchor","end").text(function(t){return e.labelByVariable[t]}),this.config.rotateLabelsX&&n.attr("transform",function(t,i){return"rotate(-45, "+(i*e.cellSize+e.cellSize/2)+", "+e.height+")"});var o=t.computeXAxisLabelsWidth();n.each(function(e){u.Utils.placeTextWithEllipsisAndTooltip(d3.select(this),e,o,!!t.config.showTooltip&&t.plot.tooltip)}),n.exit().remove()}},{key:"updateAxisY",value:function(){var t=this,e=t.plot,i=e.labelClass,r=e.labelClass+"-y",n=t.svgG.selectAll("text."+r).data(e.variables);n.enter().append("text"),n.attr("x",0).attr("y",function(t,i){return i*e.cellSize+e.cellSize/2}).attr("dx",-2).attr("text-anchor","end").attr("class",function(t,e){return i+" "+r+" "+r+"-"+e}).text(function(t){return e.labelByVariable[t]}),this.config.rotateLabelsY&&n.attr("transform",function(t,i){return"rotate(-45, 0, "+(i*e.cellSize+e.cellSize/2)+")"}).attr("text-anchor","end");var o=t.computeYAxisLabelsWidth();n.each(function(e){u.Utils.placeTextWithEllipsisAndTooltip(d3.select(this),e,o,!!t.config.showTooltip&&t.plot.tooltip)}),n.exit().remove()}},{key:"computeYAxisLabelsWidth",value:function(){var t=this.plot.margin.left;if(!this.config.rotateLabelsY)return t;t*=u.Utils.SQRT_2;var e=11;return t-=e/2}},{key:"computeXAxisLabelsWidth",value:function(t){if(!this.config.rotateLabelsX)return this.plot.cellSize-2;var e=this.plot.margin.bottom;e*=u.Utils.SQRT_2;var i=11;return e-=i/2}},{key:"updateCells",value:function(){var t=this,e=t.plot,i=t.prefixClass("cell"),r=e.correlation.shape.type,n=t.svgG.selectAll("g."+i).data(e.correlation.matrix.cells);n.enter().append("g").classed(i,!0);n.attr("transform",function(t){return"translate("+(e.cellSize*t.col+e.cellSize/2)+","+(e.cellSize*t.row+e.cellSize/2)+")"}),n.classed(t.config.cssClassPrefix+"selectable",!!t.scatterPlot);var o="*:not(.cell-shape-"+r+")",a=n.selectAll(o);a.remove();var l=n.selectOrAppend(r+".cell-shape-"+r);"circle"==e.correlation.shape.type&&l.attr("r",e.correlation.shape.radius).attr("cx",0).attr("cy",0),"ellipse"==e.correlation.shape.type&&l.attr("rx",e.correlation.shape.radiusX).attr("ry",e.correlation.shape.radiusY).attr("cx",0).attr("cy",0).attr("transform",function(t){return"rotate("+e.correlation.shape.rotateVal(t.value)+")"}),"rect"==e.correlation.shape.type&&l.attr("width",e.correlation.shape.size).attr("height",e.correlation.shape.size).attr("x",-e.cellSize/2).attr("y",-e.cellSize/2),l.style("fill",function(t){return e.correlation.color.scale(t.value)});var s=[],u=[];if(e.tooltip&&(s.push(function(e){var i=e.value;t.showTooltip(i)}),u.push(function(e){t.hideTooltip()})),t.config.highlightLabels){var c=t.config.cssClassPrefix+"highlight",p=function(t){return e.labelClass+"-x-"+t.col},f=function(t){return e.labelClass+"-y-"+t.row};s.push(function(e){t.svgG.selectAll("text."+p(e)).classed(c,!0),t.svgG.selectAll("text."+f(e)).classed(c,!0)}),u.push(function(e){t.svgG.selectAll("text."+p(e)).classed(c,!1),t.svgG.selectAll("text."+f(e)).classed(c,!1)})}n.on("mouseover",function(t){s.forEach(function(e){return e(t)})}).on("mouseout",function(t){u.forEach(function(e){return e(t)})}),n.on("click",function(e){t.trigger("cell-selected",e)}),n.exit().remove()}},{key:"updateLegend",value:function(){var t=this.plot,e=this.plot.width+10,i=0,r=10,n=this.plot.height-2,o=t.correlation.color.scale;t.legend=new p.Legend(this.svg,this.svgG,o,e,i).linearGradientBar(r,n)}},{key:"attachScatterPlot",value:function(t,e){var i=this,r=this;e=e||{};var n={height:r.plot.height+r.config.margin.top+r.config.margin.bottom,width:r.plot.height+r.config.margin.top+r.config.margin.bottom,groups:{key:r.config.groups.key,label:r.config.groups.label},guides:!0,showLegend:!1};r.scatterPlot=!0,n=u.Utils.deepExtend(n,e),this.update(),this.on("cell-selected",function(e){n.x={key:e.rowVar,label:r.plot.labelByVariable[e.rowVar]},n.y={key:e.colVar,label:r.plot.labelByVariable[e.colVar]},r.scatterPlot&&r.scatterPlot!==!0?r.scatterPlot.setConfig(n).init():(r.scatterPlot=new f.ScatterPlot(t,r.data,n),i.attach("ScatterPlot",r.scatterPlot))})}}]),e}(s.Chart)},{"./chart":26,"./legend":33,"./scatterplot":36,"./statistics-utils":38,"./utils":39}],28:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.D3Extensions=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("./utils");i.D3Extensions=function(){function t(){r(this,t)}return n(t,null,[{key:"extend",value:function(){d3.selection.enter.prototype.insertSelector=d3.selection.prototype.insertSelector=function(t,e){return o.Utils.insertSelector(this,t,e)},d3.selection.enter.prototype.appendSelector=d3.selection.prototype.appendSelector=function(t){return o.Utils.appendSelector(this,t)},d3.selection.enter.prototype.selectOrAppend=d3.selection.prototype.selectOrAppend=function(t){return o.Utils.selectOrAppend(this,t)},d3.selection.enter.prototype.selectOrInsert=d3.selection.prototype.selectOrInsert=function(t,e){return o.Utils.selectOrInsert(this,t,e)}}}]),t}()},{"./utils":39}],29:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.HeatmapTimeSeries=i.HeatmapTimeSeriesConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:p(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=(t("./chart"),t("./heatmap")),u=t("./utils"),c=(t("./statistics-utils"),i.HeatmapTimeSeriesConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.x={fillMissing:!1,interval:void 0,intervalStep:1,format:void 0,displayFormat:void 0,intervalToFormats:[{name:"year",formats:["%Y"]},{name:"month",formats:["%Y-%m"]},{name:"day",formats:["%Y-%m-%d"]},{name:"hour",formats:["%H","%Y-%m-%d %H"]},{name:"minute",formats:["%H:%M","%Y-%m-%d %H:%M"]},{name:"second",formats:["%H:%M:%S","%Y-%m-%d %H:%M:%S"]}],sortComparator:function(t,e){return u.Utils.isString(t)?t.localeCompare(e):t-e},formatter:void 0},i.z={fillMissing:!0},i.legend={formatter:function(t){var e="";t/1e6>=1&&(e=" M",t=Number(t/1e6).toFixed(3));var i=Intl.NumberFormat();return i.format(t)+e}},t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.HeatmapConfig));i.HeatmapTimeSeries=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new c(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new c(t))}},{key:"setupValuesBeforeGroupsSort",value:function(){var t=this;if(this.plot.x.timeFormat=this.config.x.format,this.config.x.displayFormat&&!this.plot.x.timeFormat&&this.guessTimeFormat(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setupValuesBeforeGroupsSort",this).call(this),this.config.x.fillMissing){var i=this;this.initTimeFormatAndInterval(),this.plot.x.intervalStep=this.config.x.intervalStep||1,this.plot.x.timeParser=this.getTimeParser(),this.plot.x.uniqueValues.sort(this.config.x.sortComparator);var r=null;this.plot.x.uniqueValues.forEach(function(e,n){var o=t.parseTime(e);if(null===r)return void(r=o);for(var a=i.nextTimeTickValue(r),l=[],s=0;i.compareTimeValues(a,o)<=0&&(s++,!(s>100));){var u={},c=i.formatTime(a);u[t.config.x.key]=c,i.updateGroups(u,c,i.plot.x.groups,i.config.x.groups),l.push(a),a=i.nextTimeTickValue(a)}r=o})}}},{key:"parseTime",value:function(t){var e=this.getTimeParser();return e.parse(t)}},{key:"formatTime",value:function(t){var e=this.getTimeParser();return e(t)}},{key:"formatValueX",value:function(t){if(this.config.x.formatter)return this.config.x.formatter.call(this.config,t);if(this.config.x.displayFormat){var e=this.parseTime(t);return d3.time.format(this.config.x.displayFormat)(e)}return this.plot.x.timeFormat&&u.Utils.isDate(t)?this.formatTime(t):t}},{key:"compareTimeValues",value:function(t,e){return t-e}},{key:"timeValuesEqual",value:function(t,e){var i=this.plot.x.timeParser;return i(t)===i(e)}},{key:"nextTimeTickValue",value:function(t){var e=this.plot.x.interval;return d3.time[e].offset(t,this.plot.x.intervalStep)}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this),this.config.z.fillMissing&&this.plot.matrix.forEach(function(t,e){var i=void 0;t.forEach(function(t,e){void 0===t.value&&void 0!==i&&(t.value=i,t.missing=!0),i=t.value})})}},{key:"update",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t)}},{key:"initTimeFormatAndInterval",value:function(){this.plot.x.interval=this.config.x.interval,this.plot.x.timeFormat||this.guessTimeFormat(),!this.plot.x.interval&&this.plot.x.timeFormat&&this.guessInterval()}},{key:"guessTimeFormat",value:function(){for(var t=this,e=0;e<t.config.x.intervalToFormats.length;e++){var i=t.config.x.intervalToFormats[e],r=null,n=i.formats.some(function(e){r=e;var i=d3.time.format(e);return t.plot.x.uniqueValues.every(function(t){return null!==i.parse(t)})});if(n)return t.plot.x.timeFormat=r,void(t.plot.x.interval||(t.plot.x.interval=i.name))}}},{key:"guessInterval",value:function(){for(var t=this,e=0;e<t.config.x.intervalToFormats.length;e++){var i=t.config.x.intervalToFormats[e];if(i.formats.indexOf(t.plot.x.timeFormat)>=0)return void(t.plot.x.interval=i.name)}}},{key:"getTimeParser",value:function(){return this.plot.x.timeParser||(this.plot.x.timeParser=d3.time.format(this.plot.x.timeFormat)),this.plot.x.timeParser}}]),e}(s.Heatmap)},{"./chart":26,"./heatmap":30,"./statistics-utils":38,"./utils":39}],30:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.Heatmap=i.HeatmapConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function h(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:h(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./chart"),u=t("./utils"),c=t("./legend"),p=i.HeatmapConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.svgClass="odc-heatmap",i.showTooltip=!0,i.tooltip={noDataText:"N/A"},i.showLegend=!0,i.legend={width:30,rotateLabels:!1,decimalPlaces:void 0,formatter:function(t){return void 0===i.legend.decimalPlaces?t:Number(t).toFixed(i.legend.decimalPlaces)}},i.highlightLabels=!0,i.x={title:"",key:0,value:function(t){return t[i.x.key]},rotateLabels:!0,sortLabels:!1,sortComparator:function(t,e){return u.Utils.isNumber(t)?t-e:t.localeCompare(e)},groups:{keys:[],labels:[],value:function(t,e){return t[e]},overlap:{top:20,bottom:20}},formatter:void 0},i.y={title:"",rotateLabels:!0,key:1,value:function(t){return t[i.y.key];
},sortLabels:!1,sortComparator:function(t,e){return u.Utils.isNumber(e)?e-t:e.localeCompare(t)},groups:{keys:[],labels:[],value:function(t,e){return t[e]},overlap:{left:20,right:20}},formatter:void 0},i.z={key:2,value:function(t){return t[i.z.key]},notAvailableValue:function(t){return null===t||void 0===t},decimalPlaces:void 0,formatter:function(t){return void 0===i.z.decimalPlaces?t:Number(t).toFixed(i.z.decimalPlaces)}},i.color={noDataColor:"white",scale:"linear",reverseScale:!1,range:["darkblue","lightskyblue","orange","crimson","darkred"]},i.cell={width:void 0,height:void 0,sizeMin:15,sizeMax:250,padding:0},i.margin={left:60,right:50,top:30,bottom:80},t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.ChartConfig),f=i.Heatmap=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new p(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new p(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);var t=this,i=(this.config.margin,this.config);this.plot.x={},this.plot.y={},this.plot.z={matrixes:void 0,cells:void 0,color:{},shape:{}},this.setupValues(),this.buildCells();var r=6;if(this.plot.x.overlap={top:0,bottom:0},this.plot.groupByX){var n=t.config.x.groups.keys.length,o=n*r;this.plot.x.overlap.bottom=t.config.x.groups.overlap.bottom,this.plot.x.overlap.top=t.config.x.groups.overlap.top+o,this.plot.margin.top=i.margin.right+i.x.groups.overlap.top,this.plot.margin.bottom=i.margin.bottom+i.x.groups.overlap.bottom}if(this.plot.y.overlap={left:0,right:0},this.plot.groupByY){var a=t.config.y.groups.keys.length,s=a*r;this.plot.y.overlap.right=t.config.y.groups.overlap.left+s,this.plot.y.overlap.left=t.config.y.groups.overlap.left,this.plot.margin.left=i.margin.left+this.plot.y.overlap.left,this.plot.margin.right=i.margin.right+this.plot.y.overlap.right}return this.plot.showLegend=i.showLegend,this.plot.showLegend&&(this.plot.margin.right+=i.legend.width),this.computePlotSize(),this.setupZScale(),this}},{key:"setupValues",value:function(){var t=this,e=this,i=e.config,r=e.plot.x,n=e.plot.y,o=e.plot.z;r.value=function(t){return i.x.value.call(i,t)},n.value=function(t){return i.y.value.call(i,t)},o.value=function(t){return i.z.value.call(i,t)},r.uniqueValues=[],n.uniqueValues=[],e.plot.groupByY=!!i.y.groups.keys.length,e.plot.groupByX=!!i.x.groups.keys.length,n.groups={key:void 0,label:"",values:[],children:null,level:0,index:0,lastIndex:0},r.groups={key:void 0,label:"",values:[],children:null,level:0,index:0,lastIndex:0};var a={},l=void 0,s=void 0;this.data.forEach(function(u){var c=r.value(u),p=n.value(u),f=o.value(u),h=i.z.notAvailableValue(f)?void 0:parseFloat(f);r.uniqueValues.indexOf(c)===-1&&r.uniqueValues.push(c),n.uniqueValues.indexOf(p)===-1&&n.uniqueValues.push(p);var g=n.groups;e.plot.groupByY&&(g=t.updateGroups(u,p,n.groups,i.y.groups));var d=r.groups;e.plot.groupByX&&(d=t.updateGroups(u,c,r.groups,i.x.groups)),a[g.index]||(a[g.index]={}),a[g.index][d.index]||(a[g.index][d.index]={}),a[g.index][d.index][p]||(a[g.index][d.index][p]={}),a[g.index][d.index][p][c]=h,(void 0===l||h<l)&&(l=h),(void 0===s||h>s)&&(s=h)}),e.plot.valueMap=a,e.plot.groupByX||(r.groups.values=r.uniqueValues),e.plot.groupByY||(n.groups.values=n.uniqueValues),this.setupValuesBeforeGroupsSort(),r.gaps=[],r.totalValuesCount=0,r.allValuesList=[],this.sortGroups(r,r.groups,i.x),n.gaps=[],n.totalValuesCount=0,n.allValuesList=[],this.sortGroups(n,n.groups,i.y),o.min=l,o.max=s}},{key:"setupValuesBeforeGroupsSort",value:function(){}},{key:"buildCells",value:function(){var t=this,e=t.plot.x,i=t.plot.y,r=(t.plot.z,t.plot.valueMap),n=t.plot.cells=[],o=t.plot.matrix=[];i.allValuesList.forEach(function(t,i){var a=[];o.push(a),e.allValuesList.forEach(function(e,o){var l=void 0;try{l=r[t.group.index][e.group.index][t.val][e.val]}catch(s){}var u={rowVar:t,colVar:e,row:i,col:o,value:l};a.push(u),n.push(u)})})}},{key:"updateGroups",value:function(t,e,i,r){var n=this.config,o=i;return r.keys.forEach(function(e,a){o.key=e,o.children||(o.children={});var l=r.value.call(n,t,e);o.children.hasOwnProperty(l)||(i.lastIndex++,o.children[l]={values:[],children:null,groupingValue:l,level:o.level+1,index:i.lastIndex,key:e}),o=o.children[l]}),o.values.indexOf(e)===-1&&o.values.push(e),o}},{key:"sortGroups",value:function(t,i,r,n){if(r.groups.labels&&r.groups.labels.length>i.level?i.label=r.groups.labels[i.level]:i.label=i.key,n||(n=[0]),n.length<=i.level&&n.push(0),i.allValuesCount=i.allValuesCount||0,i.allValuesBeforeCount=i.allValuesBeforeCount||0,i.gaps=n.slice(),i.gapsBefore=n.slice(),i.gapsSize=e.computeGapsSize(i.gaps),i.gapsBeforeSize=i.gapsSize,i.values&&(r.sortLabels&&i.values.sort(r.sortComparator),i.values.forEach(function(e){return t.allValuesList.push({val:e,group:i})}),i.allValuesBeforeCount=t.totalValuesCount,t.totalValuesCount+=i.values.length,i.allValuesCount+=i.values.length),i.childrenList=[],i.children){var o=0;for(var a in i.children)if(i.children.hasOwnProperty(a)){var l=i.children[a];i.childrenList.push(l),o++,this.sortGroups(t,l,r,n),i.allValuesCount+=l.allValuesCount,n[i.level]+=1}n&&o>1&&(n[i.level]-=1),i.gapsInside=[],n.forEach(function(t,e){i.gapsInside.push(t-(i.gapsBefore[e]||0))}),i.gapsInsideSize=e.computeGapsSize(i.gapsInside),t.gaps.length<n.length&&(t.gaps=n)}}},{key:"computeYAxisLabelsWidth",value:function(t){var e=this.plot.margin.left;if(this.config.y.title&&(e-=15),t&&t.x&&(e+=t.x),this.config.y.rotateLabels){e*=u.Utils.SQRT_2;var i=11;e-=i/2}return e}},{key:"computeXAxisLabelsWidth",value:function(t){if(!this.config.x.rotateLabels)return this.plot.cellWidth-2;var e=this.plot.margin.bottom;this.config.x.title&&(e-=15),t&&t.y&&(e-=t.y),e*=u.Utils.SQRT_2;var i=11;return e-=i/2}},{key:"computePlotSize",value:function(){var t=this.plot,i=this.config,r=t.margin,n=u.Utils.availableWidth(this.config.width,this.getBaseContainer(),this.plot.margin),o=u.Utils.availableHeight(this.config.height,this.getBaseContainer(),this.plot.margin),a=n,l=o,s=e.computeGapsSize(t.x.gaps),c=Math.max(i.cell.sizeMin,Math.min(i.cell.sizeMax,(n-s)/this.plot.x.totalValuesCount));this.config.width?this.config.cell.width||(this.plot.cellWidth=c):(this.plot.cellWidth=this.config.cell.width,this.plot.cellWidth||(this.plot.cellWidth=c)),a=this.plot.cellWidth*this.plot.x.totalValuesCount+r.left+r.right+s;var p=e.computeGapsSize(t.y.gaps),f=Math.max(i.cell.sizeMin,Math.min(i.cell.sizeMax,(o-p)/this.plot.y.totalValuesCount));this.config.height?this.config.cell.height||(this.plot.cellHeight=f):(this.plot.cellHeight=this.config.cell.height,this.plot.cellHeight||(this.plot.cellHeight=f)),l=this.plot.cellHeight*this.plot.y.totalValuesCount+r.top+r.bottom+p,this.plot.width=a-r.left-r.right,this.plot.height=l-r.top-r.bottom}},{key:"setupZScale",value:function(){var t,e=this,i=e.config,r=e.plot.z,n=i.color.range,o=r.max-r.min;if(r.domain=[],"pow"==i.color.scale){var a=10;n.forEach(function(t,e){var i=r.max-o/Math.pow(10,e);r.domain.push(i)}),t=d3.scale.pow().exponent(a)}else"log"==i.color.scale?(n.forEach(function(t,e){var i=r.min+o/Math.pow(10,e);r.domain.unshift(i)}),t=d3.scale.log()):(n.forEach(function(t,e){var i=r.min+o*(e/(n.length-1));r.domain.push(i)}),t=d3.scale[i.color.scale]());r.domain[0]=r.min,r.domain[r.domain.length-1]=r.max,i.color.reverseScale&&r.domain.reverse();var l=this.plot;l.z.color.scale=t.domain(r.domain).range(n);var s=l.z.shape={},u=this.config.cell;s.type="rect",l.z.shape.width=l.cellWidth-2*u.padding,l.z.shape.height=l.cellHeight-2*u.padding}},{key:"update",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.plot.groupByY&&this.drawGroupsY(this.plot.y.groups,this.svgG),this.plot.groupByX&&this.drawGroupsX(this.plot.x.groups,this.svgG),this.updateCells(),this.updateAxisX(),this.updateAxisY(),this.config.showLegend&&this.updateLegend(),this.updateAxisTitles()}},{key:"updateAxisTitles",value:function(){var t=this;t.plot}},{key:"updateAxisX",value:function(){var t=this,i=t.plot,r=t.prefixClass("label"),n=r+"-x";i.labelClass=r;var o={x:0,y:0},a=e.computeGapSize(0);if(i.groupByX){var l=t.config.x.groups.overlap;o.x=a/2,o.y=l.bottom+a/2+6}else i.groupByY&&(o.y=a);var s=t.svgG.selectAll("text."+n).data(i.x.allValuesList,function(t,e){return e});s.enter().append("text").attr("class",function(t,e){return r+" "+n+" "+n+"-"+e}),s.attr("x",function(t,e){return e*i.cellWidth+i.cellWidth/2+t.group.gapsSize+o.x}).attr("y",i.height+o.y).attr("dy",10).attr("text-anchor","middle").text(function(e){return t.formatValueX(e.val)});var c=t.computeXAxisLabelsWidth(o);s.each(function(e){var i=d3.select(this),r=t.formatValueX(e.val);u.Utils.placeTextWithEllipsisAndTooltip(i,r,c,!!t.config.showTooltip&&t.plot.tooltip)}),t.config.x.rotateLabels&&s.attr("transform",function(t,e){return"rotate(-45, "+(e*i.cellWidth+i.cellWidth/2+t.group.gapsSize+o.x)+", "+(i.height+o.y)+")"}).attr("dx",-2).attr("dy",8).attr("text-anchor","end"),s.exit().remove(),t.svgG.selectOrAppend("g."+t.prefixClass("axis-x")).attr("transform","translate("+i.width/2+","+(i.height+i.margin.bottom)+")").selectOrAppend("text."+t.prefixClass("label")).attr("dy","-0.5em").style("text-anchor","middle").text(t.config.x.title)}},{key:"updateAxisY",value:function(){var t=this,i=t.plot,r=t.prefixClass("label"),n=r+"-y";i.labelClass=r;var o=t.svgG.selectAll("text."+n).data(i.y.allValuesList);o.enter().append("text");var a={x:0,y:0};if(i.groupByY){var l=t.config.y.groups.overlap,s=e.computeGapSize(0);a.x=-l.left,a.y=s/2}o.attr("x",a.x).attr("y",function(t,e){return e*i.cellHeight+i.cellHeight/2+t.group.gapsSize+a.y}).attr("dx",-2).attr("text-anchor","end").attr("class",function(t,e){return r+" "+n+" "+n+"-"+e}).text(function(e){var i=t.formatValueY(e.val);return i});var c=t.computeYAxisLabelsWidth(a);o.each(function(e){var i=d3.select(this),r=t.formatValueY(e.val);u.Utils.placeTextWithEllipsisAndTooltip(i,r,c,!!t.config.showTooltip&&t.plot.tooltip)}),t.config.y.rotateLabels?o.attr("transform",function(t,e){return"rotate(-45, "+a.x+", "+(t.group.gapsSize+(e*i.cellHeight+i.cellHeight/2)+a.y)+")"}).attr("text-anchor","end"):o.attr("dominant-baseline","middle"),o.exit().remove(),t.svgG.selectOrAppend("g."+t.prefixClass("axis-y")).selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+-i.margin.left+","+i.height/2+")rotate(-90)").attr("dy","1em").style("text-anchor","middle").text(t.config.y.title)}},{key:"drawGroupsY",value:function(t,i,r){var n=this,o=n.plot,a=n.prefixClass("group"),l=a+"-y",s=i.selectAll("g."+a+"."+l).data(t.childrenList),u=0,c=0,p=s.enter().append("g");p.classed(a,!0).classed(l,!0).append("rect").classed("group-rect",!0);var f=p.appendSelector("g.title");f.append("rect"),f.append("text");var h=e.computeGapSize(t.level),g=h/4,d=e.groupTitleRectHeight,v=(n.config.y.groups.keys.length-t.level,{left:0,right:0});r||(v.right=o.y.overlap.left,v.left=o.y.overlap.left,r=o.width+h+v.left+v.right),s.attr("transform",function(t,e){var i="translate("+(g-v.left)+","+(o.cellHeight*u+e*h+c+g)+")";return c+=t.gapsInsideSize||0,u+=t.allValuesCount||0,i});var y=r-2*g,m=s.selectAll("g.title").attr("transform",function(t,e){return"translate("+(y-d)+", 0)"}),b=m.selectAll("rect").attr("width",d).attr("height",function(t){return(t.gapsInsideSize||0)+o.cellHeight*t.allValuesCount+2*g}).attr("x",0).attr("y",0).attr("stroke-width",0);this.setGroupMouseCallbacks(t,b),s.selectAll("rect.group-rect").attr("class",function(t){return"group-rect group-rect-"+t.index}).attr("width",y).attr("height",function(t){return(t.gapsInsideSize||0)+o.cellHeight*t.allValuesCount+2*g}).attr("x",0).attr("y",0).attr("fill","white").attr("fill-opacity",0).attr("stroke-width",.5).attr("stroke","black"),s.each(function(t){n.drawGroupsY.call(n,t,d3.select(this),y-d)})}},{key:"drawGroupsX",value:function(t,i,r){var n=this,o=n.plot,a=n.prefixClass("group"),l=a+"-x",s=i.selectAll("g."+a+"."+l).data(t.childrenList),u=0,c=0,p=s.enter().append("g");p.classed(a,!0).classed(l,!0).append("rect").classed("group-rect",!0);var f=p.appendSelector("g.title");f.append("rect"),f.append("text");var h=e.computeGapSize(t.level),g=h/4,d=e.groupTitleRectHeight,v=(n.config.x.groups.keys.length-t.level,{top:0,bottom:0});r?v.top=-d:(v.bottom=o.x.overlap.bottom,v.top=o.x.overlap.top,r=o.height+h+v.top+v.bottom),s.attr("transform",function(t,e){var i="translate("+(o.cellWidth*u+e*h+c+g)+", "+(g-v.top)+")";return c+=t.gapsInsideSize||0,u+=t.allValuesCount||0,i});var y=r-2*g,m=s.selectAll("g.title").attr("transform",function(t,e){return"translate(0, 0)"}),b=m.selectAll("rect").attr("height",d).attr("width",function(t){return(t.gapsInsideSize||0)+o.cellWidth*t.allValuesCount+2*g}).attr("x",0).attr("y",0).attr("stroke-width",0);this.setGroupMouseCallbacks(t,b),s.selectAll("rect.group-rect").attr("class",function(t){return"group-rect group-rect-"+t.index}).attr("height",y).attr("width",function(t){return(t.gapsInsideSize||0)+o.cellWidth*t.allValuesCount+2*g}).attr("x",0).attr("y",0).attr("fill","white").attr("fill-opacity",0).attr("stroke-width",.5).attr("stroke","black"),s.each(function(t){n.drawGroupsX.call(n,t,d3.select(this),y-d)}),s.exit().remove()}},{key:"setGroupMouseCallbacks",value:function(t,e){var i=this.plot,r=this,n=[];n.push(function(t){d3.select(this).classed("highlighted",!0),d3.select(this.parentNode.parentNode).selectAll("rect.group-rect-"+t.index).classed("highlighted",!0)});var o=[];o.push(function(t){d3.select(this).classed("highlighted",!1),d3.select(this.parentNode.parentNode).selectAll("rect.group-rect-"+t.index).classed("highlighted",!1)}),i.tooltip&&(n.push(function(e){var i=t.label+": "+e.groupingValue;r.showTooltip(i)}),o.push(function(t){r.hideTooltip()})),e.on("mouseover",function(t){var e=this;n.forEach(function(i){i.call(e,t)})}),e.on("mouseout",function(t){var e=this;o.forEach(function(i){i.call(e,t)})})}},{key:"updateCells",value:function(){var t=this,i=t.plot,r=t.prefixClass("cells"),n=e.computeGapSize(0),o=i.x.groups.childrenList.length?n/2:0,a=i.y.groups.childrenList.length?n/2:0,l=t.svgG.selectOrAppend("g."+r);l.attr("transform","translate("+o+", "+a+")");var s=t.prefixClass("cell"),u=i.z.shape.type,c=l.selectAll("g."+s).data(t.plot.cells);c.enter().append("g").classed(s,!0);c.attr("transform",function(t){return"translate("+(i.cellWidth*t.col+i.cellWidth/2+t.colVar.group.gapsSize)+","+(i.cellHeight*t.row+i.cellHeight/2+t.rowVar.group.gapsSize)+")"});var p=c.selectOrAppend(u+".cell-shape-"+u);p.attr("width",i.z.shape.width).attr("height",i.z.shape.height).attr("x",-i.cellWidth/2).attr("y",-i.cellHeight/2),p.style("fill",function(e){return void 0===e.value?t.config.color.noDataColor:i.z.color.scale(e.value)}),p.attr("fill-opacity",function(t){return void 0===t.value?0:1});var f=[],h=[];if(i.tooltip&&(f.push(function(e){var i=void 0===e.value?t.config.tooltip.noDataText:t.formatValueZ(e.value);t.showTooltip(i)}),h.push(function(e){t.hideTooltip()})),t.config.highlightLabels){var g=t.config.cssClassPrefix+"highlight",d=function(t){return i.labelClass+"-x-"+t.col},v=function(t){return i.labelClass+"-y-"+t.row};f.push(function(e){t.svgG.selectAll("text."+d(e)).classed(g,!0),t.svgG.selectAll("text."+v(e)).classed(g,!0)}),h.push(function(e){t.svgG.selectAll("text."+d(e)).classed(g,!1),t.svgG.selectAll("text."+v(e)).classed(g,!1)})}c.on("mouseover",function(t){f.forEach(function(e){return e(t)})}).on("mouseout",function(t){h.forEach(function(e){return e(t)})}),c.on("click",function(e){t.trigger("cell-selected",e)}),c.exit().remove()}},{key:"formatValueX",value:function(t){return this.config.x.formatter?this.config.x.formatter.call(this.config,t):t}},{key:"formatValueY",value:function(t){return this.config.y.formatter?this.config.y.formatter.call(this.config,t):t}},{key:"formatValueZ",value:function(t){return this.config.z.formatter?this.config.z.formatter.call(this.config,t):t}},{key:"formatLegendValue",value:function(t){return this.config.legend.formatter?this.config.legend.formatter.call(this.config,t):t}},{key:"updateLegend",value:function(){var t=this,i=this.plot,r=this.plot.width+10,n=e.computeGapSize(0);this.plot.groupByY?r+=n/2+i.y.overlap.right:this.plot.groupByX&&(r+=n);var o=0;(this.plot.groupByX||this.plot.groupByY)&&(o+=n/2);var a=10,l=this.plot.height-2,s=i.z.color.scale;i.legend=new c.Legend(this.svg,this.svgG,s,r,o,function(e){return t.formatLegendValue(e)}).setRotateLabels(t.config.legend.rotateLabels).linearGradientBar(a,l)}}],[{key:"computeGapSize",value:function(t){return e.maxGroupGapSize/(t+1)}},{key:"computeGapsSize",value:function(t){var i=0;return t.forEach(function(t,r){return i+=t*e.computeGapSize(r)}),i}}]),e}(s.Chart);f.maxGroupGapSize=24,f.groupTitleRectHeight=6},{"./chart":26,"./legend":33,"./utils":39}],31:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.Histogram=i.HistogramConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:p(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./chart-with-color-groups"),u=t("./utils"),c=i.HistogramConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.svgClass=i.cssClassPrefix+"histogram",i.showLegend=!0,i.showTooltip=!0,i.x={title:"",key:0,value:function(t,e){return u.Utils.isNumber(t)?t:parseFloat(t[e])},scale:"linear",ticks:void 0},i.y={title:"",orient:"left",scale:"linear"},i.frequency=!0,i.groups={key:1},i.transition=!0,t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.ChartWithColorGroupsConfig);i.Histogram=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new c(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new c(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);this.config;return this.plot.x={},this.plot.y={},this.plot.bar={color:null},this.computePlotSize(),this.setupX(),this.setupHistogram(),this.setupGroupStacks(),this.setupY(),this}},{key:"setupX",value:function(){var t=this.plot,e=t.x,i=this.config.x;e.value=function(t){return i.value(t,i.key)},e.scale=d3.scale[i.scale]().range([0,t.width]),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(i.orient),i.ticks&&e.axis.ticks(i.ticks);var r=this.plot.groupedData;t.x.scale.domain([d3.min(r,function(e){return d3.min(e.values,t.x.value)}),d3.max(r,function(e){return d3.max(e.values,t.x.value)})])}},{key:"setupY",value:function(){var t=this.plot,e=t.y,i=this.config.y;e.scale=d3.scale[i.scale]().range([t.height,0]),e.axis=d3.svg.axis().scale(e.scale).orient(i.orient);var r=(this.plot.data,d3.max(t.stackedHistograms,function(t){return d3.max(t.histogramBins,function(t){return t.y0+t.y})}));t.y.scale.domain([0,r])}},{key:"setupHistogram",value:function(){var t=this.plot,e=t.x,i=(t.y,this.config.x.ticks?e.scale.ticks(this.config.x.ticks):e.scale.ticks());t.histogram=d3.layout.histogram().frequency(this.config.frequency).value(e.value).bins(i)}},{key:"setupGroupStacks",value:function(){var t=this;this.plot.stack=d3.layout.stack().values(function(t){return t.histogramBins}),this.plot.groupedData.forEach(function(e){e.histogramBins=t.plot.histogram.frequency(t.config.frequency||t.plot.groupingEnabled)(e.values),!t.config.frequency&&t.plot.groupingEnabled&&e.histogramBins.forEach(function(e){e.dy=e.dy/t.plot.dataLength,e.y=e.y/t.plot.dataLength})}),this.plot.stackedHistograms=this.plot.stack(this.plot.groupedData)}},{key:"drawAxisX",value:function(){var t=this,e=t.plot,i=this.config.x,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-x")+"."+t.prefixClass("axis")+(t.config.guides?"":"."+t.prefixClass("no-guides"))).attr("transform","translate(0,"+e.height+")"),n=r;t.config.transition&&(n=r.transition().ease("sin-in-out")),n.call(e.x.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+e.width/2+","+e.margin.bottom+")").attr("dy","-1em").style("text-anchor","middle").text(i.title)}},{key:"drawAxisY",value:function(){var t=this,e=t.plot,i=this.config.y,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-y")+"."+t.prefixClass("axis")+(t.config.guides?"":"."+t.prefixClass("no-guides"))),n=r;t.config.transition&&(n=r.transition().ease("sin-in-out")),n.call(e.y.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+-e.margin.left+","+e.height/2+")rotate(-90)").attr("dy","1em").style("text-anchor","middle").text(i.title)}},{key:"drawHistogram",value:function(){var t=this,e=t.plot,i=this.prefixClass("layer"),r=this.prefixClass("bar"),n=t.svgG.selectAll("."+i).data(e.stackedHistograms);n.enter().append("g").attr("class",i);var o=n.selectAll("."+r).data(function(t){return t.histogramBins});o.enter().append("g").attr("class",r).append("rect").attr("x",1);var a=o.select("rect"),l=a,s=o,u=n;this.transitionEnabled()&&(l=a.transition(),s=o.transition(),u=n.transition()),s.attr("transform",function(t){return"translate("+e.x.scale(t.x)+","+e.y.scale(t.y0+t.y)+")"});var c=e.stackedHistograms.length&&e.stackedHistograms[0].histogramBins.length?e.x.scale(e.stackedHistograms[0].histogramBins[0].dx):0;l.attr("width",c-e.x.scale(0)-1).attr("height",function(t){return e.height-e.y.scale(t.y)}),this.plot.color&&u.attr("fill",this.plot.seriesColor),e.tooltip&&o.on("mouseover",function(e){t.showTooltip(e.y)}).on("mouseout",function(e){t.hideTooltip()}),n.exit().remove(),o.exit().remove()}},{key:"update",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.drawAxisX(),this.drawAxisY(),this.drawHistogram(),this}}]),e}(s.ChartWithColorGroups)},{"./chart-with-color-groups":25,"./utils":39}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Legend=i.StatisticsUtils=i.BoxPlotConfig=i.BoxPlot=i.BoxPlotBaseConfig=i.BoxPlotBase=i.BarChartConfig=i.BarChart=i.HistogramConfig=i.Histogram=i.HeatmapTimeSeriesConfig=i.HeatmapTimeSeries=i.HeatmapConfig=i.Heatmap=i.RegressionConfig=i.Regression=i.CorrelationMatrixConfig=i.CorrelationMatrix=i.ScatterPlotMatrixConfig=i.ScatterPlotMatrix=i.ScatterPlotConfig=i.ScatterPlot=void 0;var r=t("./scatterplot");Object.defineProperty(i,"ScatterPlot",{enumerable:!0,get:function(){return r.ScatterPlot}}),Object.defineProperty(i,"ScatterPlotConfig",{enumerable:!0,get:function(){return r.ScatterPlotConfig}});var n=t("./scatterplot-matrix");Object.defineProperty(i,"ScatterPlotMatrix",{enumerable:!0,get:function(){return n.ScatterPlotMatrix}}),Object.defineProperty(i,"ScatterPlotMatrixConfig",{enumerable:!0,get:function(){return n.ScatterPlotMatrixConfig}});var o=t("./correlation-matrix");Object.defineProperty(i,"CorrelationMatrix",{enumerable:!0,get:function(){return o.CorrelationMatrix}}),Object.defineProperty(i,"CorrelationMatrixConfig",{enumerable:!0,get:function(){return o.CorrelationMatrixConfig}});var a=t("./regression");Object.defineProperty(i,"Regression",{enumerable:!0,get:function(){return a.Regression}}),Object.defineProperty(i,"RegressionConfig",{enumerable:!0,get:function(){return a.RegressionConfig}});var l=t("./heatmap");Object.defineProperty(i,"Heatmap",{enumerable:!0,get:function(){return l.Heatmap}}),Object.defineProperty(i,"HeatmapConfig",{enumerable:!0,get:function(){return l.HeatmapConfig}});var s=t("./heatmap-timeseries");Object.defineProperty(i,"HeatmapTimeSeries",{enumerable:!0,get:function(){return s.HeatmapTimeSeries}}),Object.defineProperty(i,"HeatmapTimeSeriesConfig",{enumerable:!0,get:function(){return s.HeatmapTimeSeriesConfig}});var u=t("./histogram");Object.defineProperty(i,"Histogram",{enumerable:!0,get:function(){return u.Histogram}}),Object.defineProperty(i,"HistogramConfig",{enumerable:!0,get:function(){return u.HistogramConfig}});var c=t("./bar-chart");Object.defineProperty(i,"BarChart",{enumerable:!0,get:function(){return c.BarChart}}),Object.defineProperty(i,"BarChartConfig",{enumerable:!0,get:function(){return c.BarChartConfig}});var p=t("./box-plot-base");Object.defineProperty(i,"BoxPlotBase",{enumerable:!0,get:function(){return p.BoxPlotBase}}),Object.defineProperty(i,"BoxPlotBaseConfig",{enumerable:!0,get:function(){return p.BoxPlotBaseConfig}});var f=t("./box-plot");Object.defineProperty(i,"BoxPlot",{enumerable:!0,get:function(){return f.BoxPlot}}),Object.defineProperty(i,"BoxPlotConfig",{enumerable:!0,get:function(){return f.BoxPlotConfig}});var h=t("./statistics-utils");Object.defineProperty(i,"StatisticsUtils",{enumerable:!0,get:function(){return h.StatisticsUtils}});var g=t("./legend");Object.defineProperty(i,"Legend",{enumerable:!0,get:function(){return g.Legend}});var d=t("./d3-extensions");d.D3Extensions.extend()},{"./bar-chart":22,"./box-plot":24,"./box-plot-base":23,"./correlation-matrix":27,"./d3-extensions":28,"./heatmap":30,"./heatmap-timeseries":29,"./histogram":31,"./legend":33,"./regression":34,"./scatterplot":36,"./scatterplot-matrix":35,"./statistics-utils":38}],33:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.Legend=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("./utils"),a=t("../bower_components/d3-legend/no-extend");i.Legend=function(){function t(e,i,n,l,s,u){r(this,t),this.cssClassPrefix="odc-",this.legendClass=this.cssClassPrefix+"legend",this.color=a.color,this.size=a.size,this.symbol=a.symbol,this.labelFormat=void 0,this.scale=n,this.svg=e,this.guid=o.Utils.guid(),this.container=o.Utils.selectOrAppend(i,"g."+this.legendClass,"g").attr("transform","translate("+l+","+s+")").classed(this.legendClass,!0),this.labelFormat=u}return n(t,[{key:"linearGradientBar",value:function(t,e,i){var r=this.cssClassPrefix+"linear-gradient-"+this.guid,n=this.scale,a=this;this.linearGradient=o.Utils.linearGradient(this.svg,r,this.scale.range(),0,100,0,0),this.container.append("rect").attr("width",t).attr("height",e).attr("x",0).attr("y",0).style("fill","url(#"+r+")");var l=this.container.selectAll("text").data(n.domain()),s=n.domain().length-1;return l.enter().append("text"),l.attr("x",t).attr("y",function(t,i){return e-i*e/s}).attr("dx",3).attr("alignment-baseline","middle").text(function(t){return a.labelFormat?a.labelFormat(t):t}),l.attr("dominant-baseline","middle"),this.rotateLabels&&l.attr("transform",function(i,r){return"rotate(-45, "+t+", "+(e-r*e/s)+")"}).attr("text-anchor","start").attr("dx",5).attr("dy",5),l.exit().remove(),this}},{key:"setRotateLabels",value:function(t){return this.rotateLabels=t,this}}]),t}()},{"../bower_components/d3-legend/no-extend":1,"./utils":39}],34:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.Regression=i.RegressionConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:f(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=(t("./chart"),t("./scatterplot")),u=t("./utils"),c=t("./statistics-utils"),p=i.RegressionConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.mainRegression=!0,i.groupRegression=!0,i.confidence={level:.95,criticalValue:function(t,e){return c.StatisticsUtils.tValue(t,e)},marginOfError:void 0},t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.ScatterPlotConfig);i.Regression=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new p(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new p(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this),this.initRegressionLines()}},{key:"initRegressionLines",value:function(){var t=this,e=t.plot.groupingEnabled;if(t.plot.regressions=[],e&&t.config.mainRegression){var i=this.initRegression(this.plot.data,!1);t.plot.regressions.push(i)}t.config.groupRegression&&this.initGroupRegression()}},{key:"initGroupRegression",value:function(){var t=this,e=this;e.plot.groupedData.forEach(function(i){var r=t.initRegression(i.values,i.key);e.plot.regressions.push(r)})}},{key:"initRegression",value:function(t,e){var i=this,r=t.map(function(t){return[parseFloat(i.plot.x.value(t)),parseFloat(i.plot.y.value(t))]}),n=c.StatisticsUtils.linearRegression(r),o=c.StatisticsUtils.linearRegressionLine(n),a=d3.extent(r,function(t){return t[0]}),l=[{x:a[0],y:o(a[0])},{x:a[1],y:o(a[1])}],s=d3.svg.line().interpolate("basis").x(function(t){return i.plot.x.scale(t.x)}).y(function(t){return i.plot.y.scale(t.y)}),p=i.plot.color,f="black";u.Utils.isFunction(p)?p=t.length&&e!==!1?i.config.series?i.plot.colorCategory(e):p(t[0]):f:p||e!==!1||(p=f);var h=this.computeConfidence(r,a,n,o);return{group:e||!1,line:s,linePoints:l,color:p,confidence:h}}},{key:"computeConfidence",value:function(t,e,i,r){var n=this,o=(i.m,t.length),a=Math.max(0,o-2),l=1-n.config.confidence.level,s=1-l/2,u=n.config.confidence.criticalValue(a,s),p=t.map(function(t){return t[0]}),f=c.StatisticsUtils.mean(p),h=0,g=0,d=0,v=0,y=0;t.forEach(function(t){var e=t[0],i=t[1];h+=e*i,g+=e,v+=i,d+=e*e,y+=i*i});var m=i.m,b=i.b,x=o/(o+2)*((y-m*h-b*v)/(o*d-g*g)),_=(y-m*h-b*v)/(o*(o-2)),C=function(t){return Math.sqrt(_+Math.pow(t-f,2)*x)},w=function(t){return u*C(t)},k=function(t){var e=r(t),i=w(t),n=e-i,o=e+i;return{x:t,y0:n,y1:o}},O=(e[1]+e[0])/2,P=[e[0],O,e[1]].map(k),S=function(t){return t},j=d3.svg.area().interpolate("monotone").x(function(t){return n.plot.x.scale(t.x)}).y0(function(t){return S(n.plot.y.scale(t.y0))}).y1(function(t){return S(n.plot.y.scale(t.y1))});return{
area:j,points:P}}},{key:"update",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.updateRegressionLines()}},{key:"updateRegressionLines",value:function(){var t=this,e=this.prefixClass("regression-container"),i="g."+e,r=t.prefixClass("clip"),n=t.svgG.selectOrInsert(i,"."+t.dotsContainerClass),o=n.selectOrAppend("clipPath").attr("id",r);o.selectOrAppend("rect").attr("width",t.plot.width).attr("height",t.plot.height).attr("x",0).attr("y",0),n.attr("clip-path",function(t,e){return"url(#"+r+")"});var a=this.prefixClass("regression"),l=t.prefixClass("confidence"),s="g."+a,u=n.selectAll(s).data(t.plot.regressions,function(t,e){return t.group}),c=u.enter().insertSelector(s),p=t.prefixClass("line");c.append("path").attr("class",p).attr("shape-rendering","optimizeQuality");var f=u.select("path."+p).style("stroke",function(t){return t.color}),h=f;t.transitionEnabled()&&(h=f.transition()),h.attr("d",function(t){return t.line(t.linePoints)}),c.append("path").attr("class",l).attr("shape-rendering","optimizeQuality").style("opacity","0.4");var g=u.select("path."+l),d=g;t.transitionEnabled()&&(d=g.transition()),d.attr("d",function(t){return t.confidence.area(t.confidence.points)}),d.style("fill",function(t){return t.color}),u.exit().remove()}}]),e}(s.ScatterPlot)},{"./chart":26,"./scatterplot":36,"./statistics-utils":38,"./utils":39}],35:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.ScatterPlotMatrix=i.ScatterPlotMatrixConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function f(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:f(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./chart-with-color-groups"),u=t("./scatterplot"),c=t("./utils"),p=(t("./legend"),i.ScatterPlotMatrixConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.svgClass=i.cssClassPrefix+"scatterplot-matrix",i.size=void 0,i.minCellSize=50,i.maxCellSize=1e3,i.padding=20,i.brush=!0,i.guides=!0,i.showTooltip=!0,i.ticks=void 0,i.x={orient:"bottom",scale:"linear"},i.y={orient:"left",scale:"linear"},i.groups={key:void 0,includeInPlot:!1},i.variables={labels:[],keys:[],value:function(t,e){return t[e]}},c.Utils.deepExtend(i,t),i}return o(e,t),e}(u.ScatterPlotConfig));i.ScatterPlotMatrix=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new p(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new p(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);var t=this.plot.margin,i=this.config;this.plot.x={},this.plot.y={},this.plot.dot={color:null},this.setupVariables(),this.plot.size=i.size;var r=i.width,n=c.Utils.availableWidth(this.config.width,this.getBaseContainer(),t),o=c.Utils.availableHeight(this.config.height,this.getBaseContainer(),t);r||(this.plot.size||(this.plot.size=Math.min(i.maxCellSize,Math.max(i.minCellSize,n/this.plot.variables.length))),r=t.left+t.right+this.plot.variables.length*this.plot.size),this.plot.size||(this.plot.size=(r-(t.left+t.right))/this.plot.variables.length);var a=r;return a||(a=o),this.plot.width=r-t.left-t.right,this.plot.height=a-t.top-t.bottom,this.plot.ticks=i.ticks,void 0===this.plot.ticks&&(this.plot.ticks=this.plot.size/40),this.setupX(),this.setupY(),this}},{key:"setupVariables",value:function(){var t=this.config.variables,e=this.plot.groupedData,i=this.plot;i.domainByVariable={},i.variables=t.keys,i.variables&&i.variables.length||(i.variables=e.length?c.Utils.inferVariables(e[0].values,this.config.groups.key,this.config.includeInPlot):[]),i.labels=[],i.labelByVariable={},i.variables.forEach(function(r,n){var o=d3.min(e,function(e){return d3.min(e.values,function(e){return t.value(e,r)})}),a=d3.max(e,function(e){return d3.max(e.values,function(e){return t.value(e,r)})});i.domainByVariable[r]=[o,a];var l=r;t.labels&&t.labels.length>n&&(l=t.labels[n]),i.labels.push(l),i.labelByVariable[r]=l}),i.subplots=[]}},{key:"setupX",value:function(){var t=this.plot,e=t.x,i=this.config;e.value=i.variables.value,e.scale=d3.scale[i.x.scale]().range([i.padding/2,t.size-i.padding/2]),e.map=function(t,i){return e.scale(e.value(t,i))},e.axis=d3.svg.axis().scale(e.scale).orient(i.x.orient).ticks(t.ticks),e.axis.tickSize(t.size*t.variables.length)}},{key:"setupY",value:function(){var t=this.plot,e=t.y,i=this.config;e.value=i.variables.value,e.scale=d3.scale[i.y.scale]().range([t.size-i.padding/2,i.padding/2]),e.map=function(t,i){return e.scale(e.value(t,i))},e.axis=d3.svg.axis().scale(e.scale).orient(i.y.orient).ticks(t.ticks),e.axis.tickSize(-t.size*t.variables.length)}},{key:"update",value:function(t){function i(t){var e=r.plot;e.subplots.push(t);var i=d3.select(this);e.x.scale.domain(e.domainByVariable[t.x]),e.y.scale.domain(e.domainByVariable[t.y]);var n=r.prefixClass("frame");i.selectOrAppend("rect."+n).attr("class",n).attr("x",o.padding/2).attr("y",o.padding/2).attr("width",e.size-o.padding).attr("height",e.size-o.padding),t.update=function(){var t=this,n=r.prefixClass("layer"),o=i.selectAll("g."+n).data(r.plot.groupedData);o.enter().appendSelector("g."+n);var a=o.selectAll("circle").data(function(t){return t.values});a.enter().append("circle");var l=a;r.transitionEnabled()&&(l=a.transition()),l.attr("cx",function(i){return e.x.map(i,t.x)}).attr("cy",function(i){return e.y.map(i,t.y)}).attr("r",r.config.dotRadius),e.seriesColor?o.style("fill",e.seriesColor):e.color&&a.style("fill",e.color),e.tooltip&&a.on("mouseover",function(i){var n="("+e.x.value(i,t.x)+", "+e.y.value(i,t.y)+")",o=r.config.groups?r.config.groups.value.call(r.config,i):null;if(o||0===o){o=e.groupToLabel[o],n+="<br/>";var a=r.config.groups.label;a&&(n+=a+": "),n+=o}r.showTooltip(n)}).on("mouseout",function(t){r.hideTooltip()}),a.exit().remove(),o.exit().remove()},t.update()}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t);var r=this,n=r.plot.variables.length,o=this.config,a=r.prefixClass("axis"),s=a+"-x",u=a+"-y",c="g."+s+"."+a,p="g."+u+"."+a,f=r.prefixClass("no-guides"),h=r.svgG.selectAll(c).data(r.plot.variables);h.enter().appendSelector(c).classed(f,!o.guides),h.attr("transform",function(t,e){return"translate("+(n-e-1)*r.plot.size+",0)"}).each(function(t){r.plot.x.scale.domain(r.plot.domainByVariable[t]);var e=d3.select(this);r.transitionEnabled()&&(e=e.transition()),e.call(r.plot.x.axis)}),h.exit().remove();var g=r.svgG.selectAll(p).data(r.plot.variables);g.enter().appendSelector(p),g.classed(f,!o.guides).attr("transform",function(t,e){return"translate(0,"+e*r.plot.size+")"}),g.each(function(t){r.plot.y.scale.domain(r.plot.domainByVariable[t]);var e=d3.select(this);r.transitionEnabled()&&(e=e.transition()),e.call(r.plot.y.axis)}),g.exit().remove();var d=r.prefixClass("cell"),v=r.svgG.selectAll("."+d).data(r.utils.cross(r.plot.variables,r.plot.variables));v.enter().appendSelector("g."+d).filter(function(t){return t.i===t.j}).append("text"),v.attr("transform",function(t){return"translate("+(n-t.i-1)*r.plot.size+","+t.j*r.plot.size+")"}),o.brush&&this.drawBrush(v),v.each(i),v.select("text").attr("x",o.padding).attr("y",o.padding).attr("dy",".71em").text(function(t){return r.plot.labelByVariable[t.x]}),v.exit().remove()}},{key:"drawBrush",value:function(t){function e(t){n.plot.brushCell!==this&&(n.clearBrush(),n.plot.x.scale.domain(n.plot.domainByVariable[t.x]),n.plot.y.scale.domain(n.plot.domainByVariable[t.y]),n.plot.brushCell=this)}function i(t){var e=o.extent();n.svgG.selectAll("circle").classed("hidden",function(i){return e[0][0]>i[t.x]||i[t.x]>e[1][0]||e[0][1]>i[t.y]||i[t.y]>e[1][1]})}function r(){o.empty()&&n.svgG.selectAll(".hidden").classed("hidden",!1)}var n=this,o=d3.svg.brush().x(n.plot.x.scale).y(n.plot.y.scale).on("brushstart",e).on("brush",i).on("brushend",r);n.plot.brush=o,t.selectOrAppend("g.brush-container").call(o),n.clearBrush()}},{key:"clearBrush",value:function(){var t=this;t.plot.brushCell&&(d3.select(t.plot.brushCell).call(t.plot.brush.clear()),t.svgG.selectAll(".hidden").classed("hidden",!1),t.plot.brushCell=null)}}]),e}(s.ChartWithColorGroups)},{"./chart-with-color-groups":25,"./legend":33,"./scatterplot":36,"./utils":39}],36:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0}),i.ScatterPlot=i.ScatterPlotConfig=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:p(n,e,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},s=t("./chart-with-color-groups"),u=t("./utils"),c=(t("./legend"),i.ScatterPlotConfig=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.svgClass=i.cssClassPrefix+"scatterplot",i.guides=!1,i.showTooltip=!0,i.x={title:"",key:0,value:function(t,e){return t[e]},orient:"bottom",scale:"linear",domainMargin:.05},i.y={title:"",key:1,value:function(t,e){return t[e]},orient:"left",scale:"linear",domainMargin:.05},i.groups={key:2},i.dotRadius=2,i.transition=!0,t&&u.Utils.deepExtend(i,t),i}return o(e,t),e}(s.ChartWithColorGroupsConfig));i.ScatterPlot=function(t){function e(t,i,o){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,new c(o)))}return o(e,t),a(e,[{key:"setConfig",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new c(t))}},{key:"initPlot",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);this.config;return this.plot.x={},this.plot.y={},this.computePlotSize(),this.setupX(),this.setupY(),this}},{key:"setupX",value:function(){var t=this.plot,e=t.x,i=this.config.x;e.value=function(t){return i.value(t,i.key)},e.scale=d3.scale[i.scale]().range([0,t.width]),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(i.orient);var r=this.plot.groupedData,n=[parseFloat(d3.min(r,function(e){return d3.min(e.values,t.x.value)})),parseFloat(d3.max(r,function(e){return d3.max(e.values,t.x.value)}))],o=(n[1]-n[0])*i.domainMargin;n[0]-=o,n[1]+=o,t.x.scale.domain(n),this.config.guides&&e.axis.tickSize(-t.height)}},{key:"setupY",value:function(){var t=this.plot,e=t.y,i=this.config.y;e.value=function(t){return i.value(t,i.key)},e.scale=d3.scale[i.scale]().range([t.height,0]),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(i.orient),this.config.guides&&e.axis.tickSize(-t.width);var r=this.plot.groupedData,n=[parseFloat(d3.min(r,function(e){return d3.min(e.values,t.y.value)})),parseFloat(d3.max(r,function(e){return d3.max(e.values,t.y.value)}))],o=(n[1]-n[0])*i.domainMargin;n[0]-=o,n[1]+=o,t.y.scale.domain(n)}},{key:"drawAxisX",value:function(){var t=this,e=t.plot,i=this.config.x,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-x")+"."+t.prefixClass("axis")+(t.config.guides?"":"."+t.prefixClass("no-guides"))).attr("transform","translate(0,"+e.height+")"),n=r;t.transitionEnabled()&&(n=r.transition().ease("sin-in-out")),n.call(e.x.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+e.width/2+","+e.margin.bottom+")").attr("dy","-1em").style("text-anchor","middle").text(i.title)}},{key:"drawAxisY",value:function(){var t=this,e=t.plot,i=this.config.y,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-y")+"."+t.prefixClass("axis")+(t.config.guides?"":"."+t.prefixClass("no-guides"))),n=r;t.transitionEnabled()&&(n=r.transition().ease("sin-in-out")),n.call(e.y.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+-e.margin.left+","+e.height/2+")rotate(-90)").attr("dy","1em").style("text-anchor","middle").text(i.title)}},{key:"update",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.drawAxisX(),this.drawAxisY(),this.updateDots()}},{key:"updateDots",value:function(){var t=this,e=t.plot,i=(e.data,t.prefixClass("layer")),r=t.prefixClass("dot");t.dotsContainerClass=t.prefixClass("dots-container");var n=t.svgG.selectOrAppend("g."+t.dotsContainerClass),o=n.selectAll("g."+i).data(e.groupedData);o.enter().appendSelector("g."+i);var a=o.selectAll("."+r).data(function(t){return t.values});a.enter().append("circle").attr("class",r);var l=a;t.transitionEnabled()&&(l=a.transition()),l.attr("r",t.config.dotRadius).attr("cx",e.x.map).attr("cy",e.y.map),e.tooltip&&a.on("mouseover",function(i){var r="("+e.x.value(i)+", "+e.y.value(i)+")",n=t.config.groups?t.config.groups.value.call(t.config,i):null;if(n||0===n){n=e.groupToLabel[n],r+="<br/>";var o=t.config.groups.label;o&&(r+=o+": "),r+=n}t.showTooltip(r)}).on("mouseout",function(e){t.hideTooltip()}),e.seriesColor?o.style("fill",e.seriesColor):e.color&&a.style("fill",e.color),a.exit().remove(),o.exit().remove()}}]),e}(s.ChartWithColorGroups)},{"./chart-with-color-groups":25,"./legend":33,"./utils":39}],37:[function(t,e,r){"use strict";function n(t,e){if(t<=0||Math.abs(t)-Math.abs(h(t))!=0)throw"Invalid n: $n\n";if(e<=0||e>=1)throw"Invalid p: $p\n";return p(a(t-0,e-0))}function o(t){var e=-Math.log(4*t*(1-t)),i=Math.sqrt(e*(1.570796288+e*(.03706987906+e*(-.0008364353589+e*(-.0002250947176+e*(6841218299e-15+e*(5824238515e-15+e*(-104527497e-14+e*(8.360937017e-8+e*(-3.231081277e-9+e*(3.657763036e-11+6.936233982e-13*e)))))))))));return t>.5&&(i=-i),i}function a(t,e){if(e>=1||e<=0)throw"Invalid p: $p\n";if(.5==e)return 0;if(e<.5)return-a(t,1-e);var i=o(e),r=Math.pow(i,2),n=(r+1)/4,u=((5*r+16)*r+3)/96,c=(((3*r+19)*r+17)*r-15)/384,p=((((79*r+776)*r+1482)*r-1920)*r-945)/92160,g=(((((27*r+339)*r+930)*r-1782)*r-765)*r+17955)/368640,d=i*(1+(n+(u+(c+(p+g/t)/t)/t)/t)/t);if(t<=Math.pow(s(e),2)+3){var v;do{var y=l(t,d),m=t+1,b=(y-e)/Math.exp((m*Math.log(m/(t+d*d))+Math.log(t/m/2/Math.PI)-1+(1/m-1/t)/6)/2);d+=b,v=f(b,Math.abs(h(s(Math.abs(d))-4)))}while(d&&0!=v)}return d}function l(t,e){for(var i,r,n=Math.atan2(e/Math.sqrt(t),1),o=Math.pow(Math.cos(n),2),a=1,l=t-2;l>=2;l-=2)a=1+(l-1)/l*o*a;return t%2==0?(i=Math.sin(n)/2,r=.5):(i=1==t?0:Math.sin(n)*Math.cos(n)/Math.PI,r=.5+n/Math.PI),u(0,1-r-i*a)}function s(t){return Math.log(t)/Math.log(10)}function u(){for(var t=arguments[0],e=0;i<arguments.length;i++)t<arguments[e]&&(t=arguments[e]);return t}function c(t){return Math.abs(h(s(Math.abs(t))-g))}function p(t){return t?f(t,c(t)):"0"}function f(t,e){return t*=Math.pow(10,e),t=Math.round(t),t/Math.pow(10,e)}function h(t){return t>0?Math.floor(t):Math.ceil(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.tdistr=n;var g=5},{}],38:[function(t,e,i){"use strict";var r=t("./statistics-distributions"),n=e.exports.StatisticsUtils={};n.sampleCorrelation=t("../bower_components/simple-statistics/src/sample_correlation"),n.linearRegression=t("../bower_components/simple-statistics/src/linear_regression"),n.linearRegressionLine=t("../bower_components/simple-statistics/src/linear_regression_line"),n.errorFunction=t("../bower_components/simple-statistics/src/error_function"),n.standardDeviation=t("../bower_components/simple-statistics/src/standard_deviation"),n.sampleStandardDeviation=t("../bower_components/simple-statistics/src/sample_standard_deviation"),n.variance=t("../bower_components/simple-statistics/src/variance"),n.mean=t("../bower_components/simple-statistics/src/mean"),n.zScore=t("../bower_components/simple-statistics/src/z_score"),n.standardError=function(t){return Math.sqrt(n.variance(t)/(t.length-1))},n.quantile=t("../bower_components/simple-statistics/src/quantile"),n.tValue=function(t,e){return(0,r.tdistr)(t,e)}},{"../bower_components/simple-statistics/src/error_function":6,"../bower_components/simple-statistics/src/linear_regression":7,"../bower_components/simple-statistics/src/linear_regression_line":8,"../bower_components/simple-statistics/src/mean":9,"../bower_components/simple-statistics/src/quantile":10,"../bower_components/simple-statistics/src/sample_correlation":13,"../bower_components/simple-statistics/src/sample_standard_deviation":15,"../bower_components/simple-statistics/src/standard_deviation":17,"../bower_components/simple-statistics/src/variance":20,"../bower_components/simple-statistics/src/z_score":21,"./statistics-distributions":37}],39:[function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=i.Utils=function(){function t(){n(this,t)}return a(t,null,[{key:"deepExtend",value:function(t){var e=this;!t&&arguments.length>1&&Array.isArray(arguments[1])&&(t=[]),t=t||{};for(var i=1;i<arguments.length;i++){var r=arguments[i];if(r)for(var n in r)if(r.hasOwnProperty(n)){var o=Array.isArray(t[n]),a=e.isObject(t[n]),l=e.isObject(r[n]);a&&!o&&l?e.deepExtend(t[n],r[n]):t[n]=r[n]}}return t}},{key:"mergeDeep",value:function(e,i){var n=Object.assign({},e);return t.isObjectNotArray(e)&&t.isObjectNotArray(i)&&Object.keys(i).forEach(function(o){t.isObjectNotArray(i[o])&&o in e?n[o]=t.mergeDeep(e[o],i[o]):Object.assign(n,r({},o,i[o]))}),n}},{key:"cross",value:function(t,e){var i,r,n=[],o=t.length,a=e.length;for(i=-1;++i<o;)for(r=-1;++r<a;)n.push({x:t[i],i:i,y:e[r],j:r});return n}},{key:"inferVariables",value:function(t,e,i){var r=[];if(!t)return r;if(t.length){var n=t[0];if(n instanceof Array)r=n.map(function(t,e){return e});else if("object"===("undefined"==typeof n?"undefined":o(n)))for(var a in n)n.hasOwnProperty(a)&&r.push(a)}if(null!==e&&void 0!==e&&!i){var l=r.indexOf(e);l>-1&&r.splice(l,1)}return r}},{key:"isObjectNotArray",value:function(t){return t&&"object"===("undefined"==typeof t?"undefined":o(t))&&!Array.isArray(t)&&null!==t}},{key:"isObject",value:function(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":o(t))}},{key:"isNumber",value:function(t){return!isNaN(t)&&"number"==typeof t}},{key:"isFunction",value:function(t){return"function"==typeof t}},{key:"isDate",value:function(t){return"[object Date]"===Object.prototype.toString.call(t)}},{key:"isString",value:function(t){return"string"==typeof t||t instanceof String}},{key:"insertOrAppendSelector",value:function(t,e,i,r){for(var n=e.split(/([\.\#])/),o=t[i](n.shift(),r);n.length>1;){var a=n.shift(),l=n.shift();"."===a?o=o.classed(l,!0):"#"===a&&(o=o.attr("id",l))}return o}},{key:"insertSelector",value:function(e,i,r){return t.insertOrAppendSelector(e,i,"insert",r)}},{key:"appendSelector",value:function(e,i){return t.insertOrAppendSelector(e,i,"append")}},{key:"selectOrAppend",value:function(e,i,r){var n=e.select(i);return n.empty()?r?e.append(r):t.appendSelector(e,i):n}},{key:"selectOrInsert",value:function(e,i,r){var n=e.select(i);return n.empty()?t.insertSelector(e,i,r):n}},{key:"linearGradient",value:function e(i,r,n,o,a,l,s){var u=t.selectOrAppend(i,"defs"),e=u.append("linearGradient").attr("id",r);e.attr("x1",o+"%").attr("y1",a+"%").attr("x2",l+"%").attr("y2",s+"%");var c=e.selectAll("stop").data(n);c.enter().append("stop"),c.attr("offset",function(t,e){return e/(n.length-1)}).attr("stop-color",function(t){return t}),c.exit().remove()}},{key:"guid",value:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},{key:"placeTextWithEllipsis",value:function(t,e,i){var r=t.node();r.textContent=e;var n=0,o=9;if(r.getComputedTextLength()>i+n){for(var a=e.length-3;a>0;a-=1)if(r.getSubStringLength(0,a)+o<=i+n)return r.textContent=e.substring(0,a)+"...",!0;return r.textContent="...",!0}return!1}},{key:"placeTextWithEllipsisAndTooltip",value:function(e,i,r,n){var o=t.placeTextWithEllipsis(e,i,r);o&&n&&(e.on("mouseover",function(t){n.transition().duration(200).style("opacity",.9),n.html(i).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}),e.on("mouseout",function(t){n.transition().duration(500).style("opacity",0)}))}},{key:"getFontSize",value:function(t){return window.getComputedStyle(t,null).getPropertyValue("font-size")}}]),t}();l.SQRT_2=1.41421356237,l.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},l.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},l.availableHeight=function(t,e,i){return Math.max(0,l.sanitizeHeight(t,e)-i.top-i.bottom)},l.availableWidth=function(t,e,i){return Math.max(0,l.sanitizeWidth(t,e)-i.left-i.right)}},{}]},{},[32])(32)});
//# sourceMappingURL=odc-d3.min.js.map
