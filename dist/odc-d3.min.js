!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ODCD3=t()}}(function(){return function t(e,r,i){function a(o,l){if(!r[o]){if(!e[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return a(r?r:t)},u,u.exports,t,e,r,i)}return r[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(t,e,r){"use strict";function i(t){return 0===t.length?NaN:a(t)/t.length}var a=t("./sum");e.exports=i},{"./sum":6}],2:[function(t,e,r){"use strict";function i(t,e){var r=a(t,e),i=n(t),o=n(e);return r/i/o}var a=t("./sample_covariance"),n=t("./sample_standard_deviation");e.exports=i},{"./sample_covariance":3,"./sample_standard_deviation":4}],3:[function(t,e,r){"use strict";function i(t,e){if(t.length<=1||t.length!==e.length)return NaN;for(var r=a(t),i=a(e),n=0,o=0;o<t.length;o++)n+=(t[o]-r)*(e[o]-i);var l=t.length-1;return n/l}var a=t("./mean");e.exports=i},{"./mean":1}],4:[function(t,e,r){"use strict";function i(t){var e=a(t);return isNaN(e)?NaN:Math.sqrt(e)}var a=t("./sample_variance");e.exports=i},{"./sample_variance":5}],5:[function(t,e,r){"use strict";function i(t){if(t.length<=1)return NaN;var e=a(t,2),r=t.length-1;return e/r}var a=t("./sum_nth_power_deviations");e.exports=i},{"./sum_nth_power_deviations":7}],6:[function(t,e,r){"use strict";function i(t){for(var e,r,i=0,a=0,n=0;n<t.length;n++)e=t[n]-a,r=i+e,a=r-i-e,i=r;return i}e.exports=i},{}],7:[function(t,e,r){"use strict";function i(t,e){for(var r=a(t),i=0,n=0;n<t.length;n++)i+=Math.pow(t[n]-r,e);return i}var a=t("./mean");e.exports=i},{"./mean":1}],8:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Chart=r.ChartConfig=void 0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=t("./utils"),o=r.ChartConfig=function l(t){i(this,l),this.cssClassPrefix="odc-",this.svgClass=this.cssClassPrefix+"mw-d3-chart",this.width=void 0,this.height=void 0,this.margin={left:50,right:30,top:30,bottom:50},this.tooltip=!1,t&&n.Utils.deepExtend(this,t)};r.Chart=function(){function t(e,r,a){i(this,t),this.utils=n.Utils,this.placeholderSelector=e,this.svg=null,this.config=void 0,this.plot={margin:{}},this.setConfig(a),r&&this.setData(r),this.init()}return a(t,[{key:"setConfig",value:function(t){return t?this.config=t:this.config=new o,this}},{key:"setData",value:function(t){return this.data=t,this}},{key:"init",value:function(){var t=this;return t.initPlot(),t.initSvg(),t.draw(),this}},{key:"initSvg",value:function(){var t=this,e=this.config,r=t.plot.width+e.margin.left+e.margin.right,i=t.plot.height+e.margin.top+e.margin.bottom;t.svg=d3.select(t.placeholderSelector).select("svg"),t.svg.empty()||t.svg.remove(),t.svg=d3.select(t.placeholderSelector).append("svg"),t.svg.attr("width",r).attr("height",i).attr("viewBox","0 0  "+r+" "+i).attr("preserveAspectRatio","xMidYMid meet").attr("class",e.svgClass),t.svgG=t.svg.append("g").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.tooltip&&(t.plot.tooltip=this.utils.selectOrAppend(d3.select(t.placeholderSelector),"div.mw-tooltip","div").attr("class","mw-tooltip").style("opacity",0)),e.width&&!e.height||d3.select(window).on("resize",function(){})}},{key:"initPlot",value:function(){}},{key:"update",value:function(t){return t&&this.setData(t),this}},{key:"draw",value:function(){return this.update(),this}}]),t}()},{"./utils":14}],9:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0}),r.CorrelationMatrix=r.CorrelationMatrixConfig=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),l=function p(t,e,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:p(a,e,r)}if("value"in i)return i.value;var n=i.get;if(void 0!==n)return n.call(r)},s=t("./chart"),c=t("./utils"),u=t("./statistics-utils"),f=r.CorrelationMatrixConfig=function(t){function e(t){i(this,e);var r=a(this,Object.getPrototypeOf(e).call(this));return r.svgClass="odc-correlation-matrix",r.guides=!1,r.tooltip=!0,r.legend=!0,r.highlightLabels=!0,r.variables={labels:void 0,keys:[],value:function(t,e){return t[e]},scale:"ordinal"},r.correlation={scale:"linear",domain:[-1,-.75,-.5,0,.5,.75,1],range:["darkblue","blue","lightskyblue","white","orangered","crimson","darkred"],value:function(t,e){return u.StatisticsUtils.sampleCorrelation(t,e)}},r.cell={shape:"ellipse",size:void 0,sizeMin:5,sizeMax:80,padding:1},r.margin={left:60,right:50,top:30,bottom:60},t&&c.Utils.deepExtend(r,t),r}return n(e,t),e}(s.ChartConfig);r.CorrelationMatrix=function(t){function e(t,r,n){return i(this,e),a(this,Object.getPrototypeOf(e).call(this,t,r,new f(n)))}return n(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new f(t))}},{key:"initPlot",value:function(){var t=this.config.margin,e=this.config;this.plot={x:{},correlation:{matrix:void 0,cells:void 0,color:{},shape:{}}},this.setupVariables();var r=e.width,i=d3.select(this.placeholderSelector).node();this.plot.placeholderNode=i;var a=i.getBoundingClientRect().width;r?this.plot.cellSize||(this.plot.cellSize=Math.max(e.cell.sizeMin,Math.min(e.cell.sizeMax,(r-t.left-t.right)/this.plot.variables.length))):(this.plot.cellSize=this.config.cell.size,this.plot.cellSize||(this.plot.cellSize=Math.max(e.cell.sizeMin,Math.min(e.cell.sizeMax,a/this.plot.variables.length))),r=this.plot.cellSize*this.plot.variables.length+t.left+t.right);var n=r;return n||(n=i.getBoundingClientRect().height),this.plot.width=r-t.left-t.right,this.plot.height=this.plot.width,this.setupVariablesScales(),this.setupCorrelationScales(),this.setupCorrelationMatrix(),this}},{key:"setupVariablesScales",value:function(){var t=this.plot,e=t.x,r=this.config.variables;e.value=r.value,e.scale=d3.scale[r.scale]().rangeBands([t.width,0]),e.map=function(t){return e.scale(e.value(t))}}},{key:"setupCorrelationScales",value:function(){var t=this.plot,e=this.config.correlation;t.correlation.color.scale=d3.scale[e.scale]().domain(e.domain).range(e.range);var r=t.correlation.shape={},i=this.config.cell;r.type=i.shape;var a=t.cellSize-2*i.padding;if("circle"==r.type){var n=a/2;r.radiusScale=d3.scale.linear().domain([0,1]).range([2,n]),r.radius=function(t){return r.radiusScale(Math.abs(t.value))}}else if("ellipse"==r.type){var n=a/2;r.radiusScale=d3.scale.linear().domain([0,1]).range([n,2]),r.radiusX=function(t){return r.radiusScale(Math.abs(t.value))},r.radiusY=n,r.rotateVal=function(t){return 0==t?"0":t<0?"-45":"45"}}else"rect"==r.type&&(r.size=a)}},{key:"setupVariables",value:function(){var t=this.config.variables,e=this.data,r=this.plot;r.domainByVariable={},r.variables=t.keys,r.variables&&r.variables.length||(r.variables=c.Utils.inferVariables(e,this.config.groups.key,this.config.includeInPlot)),r.labels=[],r.labelByVariable={},r.variables.forEach(function(i,a){r.domainByVariable[i]=d3.extent(e,function(e){return t.value(e,i)});var n=i;t.labels&&t.labels.length>a&&(n=t.labels[a]),r.labels.push(n),r.labelByVariable[i]=n})}},{key:"setupCorrelationMatrix",value:function(){var t=this,e=this.data,r=this.plot.correlation.matrix=[],i=this.plot.correlation.matrix.cells=[],a=this.plot,n={};a.variables.forEach(function(t,r){n[t]=e.map(function(e){return a.x.value(e,t)})}),a.variables.forEach(function(e,o){var l=[];r.push(l),a.variables.forEach(function(r,a){var s=1;e!=r&&(s=t.config.correlation.value(n[e],n[r]));var c={rowVar:e,colVar:r,row:o,col:a,value:s};l.push(c),i.push(c)})})}},{key:"update",value:function(t){l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.updateCells(),this.updateVariableLabels(),this.config.legend&&this.updateLegend()}},{key:"updateVariableLabels",value:function(){var t=this,e=t.plot,r=t.config.cssClassPrefix+"label",i=r+" "+r+"-x",a=r+" "+r+"-y";e.labelClass=r;var n=t.svgG.selectAll(i).data(e.variables);n.enter().append("text"),n.attr("x",function(t,r){return r*e.cellSize+e.cellSize/2}).attr("y",e.height).attr("dx",-2).attr("transform",function(t,r){return"rotate(-90, "+(r*e.cellSize+e.cellSize/2)+", "+e.height+")"}).attr("text-anchor","end").attr("class",function(t,e){return i+" "+i+"-"+e}).text(function(t){return t}),n.exit().remove();var o=t.svgG.selectAll(a).data(e.variables);o.enter().append("text"),o.attr("x",0).attr("y",function(t,r){return r*e.cellSize+e.cellSize/2}).attr("dx",-2).attr("text-anchor","end").attr("class",function(t,e){return a+" "+a+"-"+e}).text(function(t){return t}),n.exit().remove()}},{key:"updateCells",value:function(){var t=this,e=t.plot,r=t.config.cssClassPrefix+"cell",i=e.correlation.shape.type,a=(this.data,t.svgG.selectAll(r).data(e.correlation.matrix.cells));a.enter().append("g").attr("class",r),a.attr("transform",function(t){return"translate("+(e.cellSize*t.col+e.cellSize/2)+","+(e.cellSize*t.row+e.cellSize/2)+")"});var n=a.append(i);"circle"==e.correlation.shape.type&&n.attr("r",e.correlation.shape.radius).attr("cx",0).attr("cy",0),"ellipse"==e.correlation.shape.type&&n.attr("rx",e.correlation.shape.radiusX).attr("ry",e.correlation.shape.radiusY).attr("cx",0).attr("cy",0).attr("transform",function(t){return"rotate("+e.correlation.shape.rotateVal(t.value)+")"}),"rect"==e.correlation.shape.type&&n.attr("width",e.correlation.shape.size).attr("height",e.correlation.shape.size).attr("x",-e.cellSize/2).attr("y",-e.cellSize/2);var o=[],l=[];if(e.tooltip&&(o.push(function(t){e.tooltip.transition().duration(200).style("opacity",.9);var r=t.value;e.tooltip.html(r).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}),l.push(function(t){e.tooltip.transition().duration(500).style("opacity",0)})),t.config.highlightLabels){var s=t.config.cssClassPrefix+"highlight",c=function(t){return e.labelClass+"-x-"+t.col},u=function(t){return e.labelClass+"-y-"+t.row};o.push(function(e){t.svgG.selectAll("text."+c(e)).classed(s,!0),t.svgG.selectAll("text."+u(e)).classed(s,!0)}),l.push(function(e){t.svgG.selectAll("text."+c(e)).classed(s,!1),t.svgG.selectAll("text."+u(e)).classed(s,!1)})}a.on("mouseover",function(t){o.forEach(function(e){return e(t)})}).on("mouseout",function(t){l.forEach(function(e){return e(t)})}),n.style("fill",function(t){return e.correlation.color.scale(t.value)}),a.exit().remove()}},{key:"updateLegend",value:function(){var t=this.plot,e=this.plot.width+10,r=0,i=10,a=this.plot.height-2,n=t.correlation.color.scale,o=this.config.cssClassPrefix+"linear-gradient",l=this.config.cssClassPrefix+"legend",s=(c.Utils.linearGradient(this.svg,o,n.range(),0,100,0,0),this.svgG.append("g").attr("class",l));s.append("rect").attr("width",i).attr("height",a).attr("x",e).attr("y",r).style("fill","url(#"+o+")");var u=s.selectAll("text").data(n.domain()),f=n.domain().length-1;u.enter().append("text").attr("x",e+i).attr("y",function(t,e){return a-e*a/f}).attr("dx",3).attr("alignment-baseline","middle").text(function(t){return t}),u.exit().remove()}}]),e}(s.Chart)},{"./chart":8,"./statistics-utils":13,"./utils":14}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("./scatterplot");Object.defineProperty(r,"ScatterPlot",{enumerable:!0,get:function(){return i.ScatterPlot}}),Object.defineProperty(r,"ScatterPlotConfig",{enumerable:!0,get:function(){return i.ScatterPlotConfig}});var a=t("./scatterplot-matrix");Object.defineProperty(r,"ScatterPlotMatrix",{enumerable:!0,get:function(){return a.ScatterPlotMatrix}}),Object.defineProperty(r,"ScatterPlotMatrixConfig",{enumerable:!0,get:function(){return a.ScatterPlotMatrixConfig}});var n=t("./correlation-matrix");Object.defineProperty(r,"CorrelationMatrix",{enumerable:!0,get:function(){return n.CorrelationMatrix}}),Object.defineProperty(r,"CorrelationMatrixConfig",{enumerable:!0,get:function(){return n.CorrelationMatrixConfig}});var o=t("./statistics-utils");Object.defineProperty(r,"StatisticsUtils",{enumerable:!0,get:function(){return o.StatisticsUtils}})},{"./correlation-matrix":9,"./scatterplot":12,"./scatterplot-matrix":11,"./statistics-utils":13}],11:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0}),r.ScatterPlotMatrix=r.ScatterPlotMatrixConfig=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),l=function p(t,e,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:p(a,e,r)}if("value"in i)return i.value;var n=i.get;if(void 0!==n)return n.call(r)},s=t("./chart"),c=t("./scatterplot"),u=t("./utils"),f=r.ScatterPlotMatrixConfig=function(t){function e(t){i(this,e);var r=a(this,Object.getPrototypeOf(e).call(this));return r.svgClass="mw-d3-scatterplot-matrix",r.size=200,r.padding=20,r.brush=!0,r.guides=!0,r.tooltip=!0,r.ticks=void 0,r.x={orient:"bottom",scale:"linear"},r.y={orient:"left",scale:"linear"},r.groups={key:void 0,includeInPlot:!1,value:function(t,e){return t[e]},label:""},r.variables={labels:[],keys:[],value:function(t,e){return t[e]}},u.Utils.deepExtend(r,t),r}return n(e,t),e}(c.ScatterPlotConfig);r.ScatterPlotMatrix=function(t){function e(t,r,n){return i(this,e),a(this,Object.getPrototypeOf(e).call(this,t,r,new f(n)))}return n(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new f(t))}},{key:"initPlot",value:function(){var t=this,e=this.config.margin,r=this.config;this.plot={x:{},y:{},dot:{color:null}},this.setupVariables(),this.plot.size=r.size;var i=r.width,a=d3.select(this.placeholderSelector).node();if(!i){var n=e.left+e.right+this.plot.variables.length*this.plot.size;i=Math.min(a.getBoundingClientRect().width,n)}var o=i;o||(o=a.getBoundingClientRect().height),this.plot.width=i-e.left-e.right,this.plot.height=o-e.top-e.bottom,void 0===r.ticks&&(r.ticks=this.plot.size/40),this.setupX(),this.setupY(),r.dot.d3ColorCategory&&(this.plot.dot.colorCategory=d3.scale[r.dot.d3ColorCategory]());var l=r.dot.color;return l&&(this.plot.dot.colorValue=l,"string"==typeof l||l instanceof String?this.plot.dot.color=l:this.plot.dot.colorCategory&&(this.plot.dot.color=function(e){return t.plot.dot.colorCategory(t.plot.dot.colorValue(e))})),this}},{key:"setupVariables",value:function(){var t=this.config.variables,e=this.data,r=this.plot;r.domainByVariable={},r.variables=t.keys,r.variables&&r.variables.length||(r.variables=u.Utils.inferVariables(e,this.config.groups.key,this.config.includeInPlot)),r.labels=[],r.labelByVariable={},r.variables.forEach(function(i,a){r.domainByVariable[i]=d3.extent(e,function(e){return t.value(e,i)});var n=i;t.labels&&t.labels.length>a&&(n=t.labels[a]),r.labels.push(n),r.labelByVariable[i]=n}),r.subplots=[]}},{key:"setupX",value:function(){var t=this.plot,e=t.x,r=this.config;e.value=r.variables.value,e.scale=d3.scale[r.x.scale]().range([r.padding/2,t.size-r.padding/2]),e.map=function(t,r){return e.scale(e.value(t,r))},e.axis=d3.svg.axis().scale(e.scale).orient(r.x.orient).ticks(r.ticks),e.axis.tickSize(t.size*t.variables.length)}},{key:"setupY",value:function(){var t=this.plot,e=t.y,r=this.config;e.value=r.variables.value,e.scale=d3.scale[r.y.scale]().range([t.size-r.padding/2,r.padding/2]),e.map=function(t,r){return e.scale(e.value(t,r))},e.axis=d3.svg.axis().scale(e.scale).orient(r.y.orient).ticks(r.ticks),e.axis.tickSize(-t.size*t.variables.length)}},{key:"draw",value:function(){function t(t){var r=e.plot;r.subplots.push(t);var a=d3.select(this);r.x.scale.domain(r.domainByVariable[t.x]),r.y.scale.domain(r.domainByVariable[t.y]),a.append("rect").attr("class","mw-frame").attr("x",i.padding/2).attr("y",i.padding/2).attr("width",i.size-i.padding).attr("height",i.size-i.padding),t.update=function(){var t=this,i=a.selectAll("circle").data(e.data);i.enter().append("circle"),i.attr("cx",function(e){return r.x.map(e,t.x)}).attr("cy",function(e){return r.y.map(e,t.y)}).attr("r",e.config.dot.radius),r.dot.color&&i.style("fill",r.dot.color),r.tooltip&&i.on("mouseover",function(i){r.tooltip.transition().duration(200).style("opacity",.9);var a="("+r.x.value(i,t.x)+", "+r.y.value(i,t.y)+")";r.tooltip.html(a).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px");var n=e.config.groups.value(i);if(n||0===n){a+="<br/>";var o=e.config.groups.label;o&&(a+=o+": "),a+=n}r.tooltip.html(a).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){r.tooltip.transition().duration(500).style("opacity",0)}),i.exit().remove()},t.update()}var e=this,r=e.plot.variables.length,i=this.config;e.svgG.selectAll(".mw-axis-x.mw-axis").data(e.plot.variables).enter().append("g").attr("class","mw-axis-x mw-axis"+(i.guides?"":" mw-no-guides")).attr("transform",function(t,i){return"translate("+(r-i-1)*e.plot.size+",0)"}).each(function(t){e.plot.x.scale.domain(e.plot.domainByVariable[t]),d3.select(this).call(e.plot.x.axis)}),e.svgG.selectAll(".mw-axis-y.mw-axis").data(e.plot.variables).enter().append("g").attr("class","mw-axis-y mw-axis"+(i.guides?"":" mw-no-guides")).attr("transform",function(t,r){return"translate(0,"+r*e.plot.size+")"}).each(function(t){e.plot.y.scale.domain(e.plot.domainByVariable[t]),d3.select(this).call(e.plot.y.axis)}),i.tooltip&&(e.plot.tooltip=this.utils.selectOrAppend(d3.select(e.placeholderSelector),"div.mw-tooltip","div").attr("class","mw-tooltip").style("opacity",0));var a=e.svgG.selectAll(".mw-cell").data(e.utils.cross(e.plot.variables,e.plot.variables)).enter().append("g").attr("class","mw-cell").attr("transform",function(t){return"translate("+(r-t.i-1)*e.plot.size+","+t.j*e.plot.size+")"});i.brush&&this.drawBrush(a),a.each(t),a.filter(function(t){return t.i===t.j}).append("text").attr("x",i.padding).attr("y",i.padding).attr("dy",".71em").text(function(t){return e.plot.labelByVariable[t.x]})}},{key:"update",value:function(){this.plot.subplots.forEach(function(t){t.update()})}},{key:"drawBrush",value:function(t){function e(t){o!==this&&(d3.select(o).call(n.clear()),a.plot.x.scale.domain(a.plot.domainByVariable[t.x]),a.plot.y.scale.domain(a.plot.domainByVariable[t.y]),o=this)}function r(t){var e=n.extent();a.svgG.selectAll("circle").classed("hidden",function(r){return e[0][0]>r[t.x]||r[t.x]>e[1][0]||e[0][1]>r[t.y]||r[t.y]>e[1][1]})}function i(){n.empty()&&a.svgG.selectAll(".hidden").classed("hidden",!1)}var a=this,n=d3.svg.brush().x(a.plot.x.scale).y(a.plot.y.scale).on("brushstart",e).on("brush",r).on("brushend",i);t.append("g").call(n);var o}}]),e}(s.Chart)},{"./chart":8,"./scatterplot":12,"./utils":14}],12:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0}),r.ScatterPlot=r.ScatterPlotConfig=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),l=function f(t,e,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:f(a,e,r)}if("value"in i)return i.value;var n=i.get;if(void 0!==n)return n.call(r)},s=t("./chart"),c=t("./utils"),u=r.ScatterPlotConfig=function(t){function e(t){i(this,e);var r=a(this,Object.getPrototypeOf(e).call(this));r.svgClass="mw-d3-scatterplot",r.guides=!1,r.tooltip=!0,r.x={label:"X",key:0,value:function(t,e){return t[e]},orient:"bottom",scale:"linear"},r.y={label:"Y",key:1,value:function(t,e){return t[e]},orient:"left",scale:"linear"},r.groups={key:2,value:function(t,e){return t[e]},label:""};var n=r;return r.dot={radius:2,color:function(t){return n.groups.value(t,n.groups.key)},d3ColorCategory:"category10"},t&&c.Utils.deepExtend(r,t),r}return n(e,t),e}(s.ChartConfig);r.ScatterPlot=function(t){function e(t,r,n){return i(this,e),a(this,Object.getPrototypeOf(e).call(this,t,r,new u(n)))}return n(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new u(t))}},{key:"initPlot",value:function(){var t=this,e=this.config.margin,r=this.config;this.plot={x:{},y:{},dot:{color:null}};var i=r.width,a=d3.select(this.placeholderSelector).node();i||(i=a.getBoundingClientRect().width);var n=r.height;n||(n=a.getBoundingClientRect().height),this.plot.width=i-e.left-e.right,this.plot.height=n-e.top-e.bottom,this.setupX(),this.setupY(),r.dot.d3ColorCategory&&(this.plot.dot.colorCategory=d3.scale[r.dot.d3ColorCategory]());var o=r.dot.color;return o&&(this.plot.dot.colorValue=o,"string"==typeof o||o instanceof String?this.plot.dot.color=o:this.plot.dot.colorCategory&&(this.plot.dot.color=function(e){return t.plot.dot.colorCategory(t.plot.dot.colorValue(e))})),this}},{key:"setupX",value:function(){var t=this.plot,e=t.x,r=this.config.x;e.value=function(t){return r.value(t,r.key)},e.scale=d3.scale[r.scale]().range([0,t.width]),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(r.orient);var i=this.data;t.x.scale.domain([d3.min(i,t.x.value)-1,d3.max(i,t.x.value)+1]),this.config.guides&&e.axis.tickSize(-t.height)}},{key:"setupY",value:function(){var t=this.plot,e=t.y,r=this.config.y;e.value=function(t){return r.value(t,r.key)},e.scale=d3.scale[r.scale]().range([t.height,0]),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(r.orient),this.config.guides&&e.axis.tickSize(-t.width);var i=this.data;t.y.scale.domain([d3.min(i,t.y.value)-1,d3.max(i,t.y.value)+1])}},{key:"draw",value:function(){this.drawAxisX(),this.drawAxisY(),this.update()}},{key:"drawAxisX",value:function(){var t=this,e=t.plot,r=this.config.x;t.svgG.append("g").attr("class","mw-axis-x mw-axis"+(t.config.guides?"":" mw-no-guides")).attr("transform","translate(0,"+e.height+")").call(e.x.axis).append("text").attr("class","mw-label").attr("transform","translate("+e.width/2+","+t.config.margin.bottom+")").attr("dy","-1em").style("text-anchor","middle").text(r.label)}},{key:"drawAxisY",value:function(){var t=this,e=t.plot,r=this.config.y;t.svgG.append("g").attr("class","mw-axis mw-axis-y"+(t.config.guides?"":" mw-no-guides")).call(e.y.axis).append("text").attr("class","mw-label").attr("transform","translate("+-t.config.margin.left+","+e.height/2+")rotate(-90)").attr("dy","1em").style("text-anchor","middle").text(r.label)}},{key:"update",value:function(t){var e=this,r=e.plot,i=this.data,a=e.svgG.selectAll(".mw-dot").data(i);a.enter().append("circle").attr("class","mw-dot"),a.attr("r",e.config.dot.radius).attr("cx",r.x.map).attr("cy",r.y.map),r.tooltip&&a.on("mouseover",function(t){r.tooltip.transition().duration(200).style("opacity",.9);var i="("+r.x.value(t)+", "+r.y.value(t)+")",a=e.config.groups.value(t,e.config.groups.key);if(a||0===a){i+="<br/>";var n=e.config.groups.label;n&&(i+=n+": "),i+=a}r.tooltip.html(i).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){r.tooltip.transition().duration(500).style("opacity",0)}),r.dot.color&&a.style("fill",r.dot.color),a.exit().remove()}}]),e}(s.Chart)},{"./chart":8,"./utils":14}],13:[function(t,e,r){"use strict";var i=e.exports.StatisticsUtils={};i.sampleCorrelation=t("../bower_components/simple-statistics/src/sample_correlation")},{"../bower_components/simple-statistics/src/sample_correlation":2}],14:[function(t,e,r){"use strict";function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();r.Utils=function(){function t(){a(this,t)}return o(t,null,[{key:"deepExtend",value:function(t){var e=this;!t&&arguments.length>1&&Array.isArray(arguments[1])&&(t=[]),t=t||{};for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i)for(var a in i)if(i.hasOwnProperty(a)){var n=Array.isArray(t[a]),o=e.isObject(t[a]),l=e.isObject(i[a]);o&&!n&&l?e.deepExtend(t[a],i[a]):t[a]=i[a]}}return t}},{key:"mergeDeep",value:function(e,r){var a=Object.assign({},e);return t.isObjectNotArray(e)&&t.isObjectNotArray(r)&&Object.keys(r).forEach(function(n){t.isObjectNotArray(r[n])&&n in e?a[n]=t.mergeDeep(e[n],r[n]):Object.assign(a,i({},n,r[n]))}),a}},{key:"cross",value:function(t,e){var r,i,a=[],n=t.length,o=e.length;for(r=-1;++r<n;)for(i=-1;++i<o;)a.push({x:t[r],i:r,y:e[i],j:i});return a}},{key:"inferVariables",value:function(t,e,r){var i=[];if(t.length){var a=t[0];if(a instanceof Array)i=a.map(function(t,e){return e});else if("object"===("undefined"==typeof a?"undefined":n(a)))for(var o in a)a.hasOwnProperty(o)&&i.push(o)}if(!r){var l=i.indexOf(e);l>-1&&i.splice(l,1)}return i}},{key:"isObjectNotArray",value:function(t){return t&&"object"===("undefined"==typeof t?"undefined":n(t))&&!Array.isArray(t)&&null!==t}},{key:"isObject",value:function(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":n(t))}},{key:"isNumber",value:function(t){return!isNaN(t)&&"number"==typeof t}},{key:"isFunction",value:function(t){return"function"==typeof t}},{key:"selectOrAppend",value:function(t,e,r){var i=t.select(e);return i.empty()?t.append(r||e):i}},{key:"linearGradient",value:function e(r,i,a,n,o,l,s){var c=t.selectOrAppend(r,"defs"),e=c.append("linearGradient").attr("id",i);e.attr("x1",n+"%").attr("y1",o+"%").attr("x2",l+"%").attr("y2",s+"%");var u=e.selectAll("stop").data(a);u.enter().append("stop"),u.attr("offset",function(t,e){return e/(a.length-1)}).attr("stop-color",function(t){return t}),u.exit().remove()}}]),t}()},{}]},{},[10])(10)});
//# sourceMappingURL=odc-d3.min.js.map
