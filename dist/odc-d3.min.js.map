{"version":3,"sources":["node_modules/browser-pack/_prelude.js","odc-d3.js","bower_components/d3-legend/src/color.js","bower_components/d3-legend/src/legend.js","bower_components/d3-legend/src/size.js","bower_components/d3-legend/src/symbol.js","bower_components/simple-statistics/src/error_function.js","bower_components/simple-statistics/src/linear_regression.js","bower_components/simple-statistics/src/linear_regression_line.js","bower_components/simple-statistics/src/mean.js","bower_components/simple-statistics/src/quantile.js","bower_components/simple-statistics/src/quantile_sorted.js","bower_components/simple-statistics/src/quickselect.js","bower_components/simple-statistics/src/sample_correlation.js","bower_components/simple-statistics/src/sample_covariance.js","bower_components/simple-statistics/src/sample_standard_deviation.js","bower_components/simple-statistics/src/sample_variance.js","bower_components/simple-statistics/src/standard_deviation.js","bower_components/simple-statistics/src/sum.js","bower_components/simple-statistics/src/sum_nth_power_deviations.js","bower_components/simple-statistics/src/variance.js","bower_components/simple-statistics/src/z_score.js","node_modules/d3-array/build/d3-array.js","node_modules/d3-collection/build/d3-collection.js","node_modules/d3-color/build/d3-color.js","node_modules/d3-dispatch/build/d3-dispatch.js","node_modules/d3-format/build/d3-format.js","node_modules/d3-interpolate/build/d3-interpolate.js","node_modules/d3-scale/build/d3-scale.js","node_modules/d3-time-format/build/d3-time-format.js","node_modules/d3-time/build/d3-time.js","src/bar-chart.js","src/box-plot-base.js","src/box-plot.js","src/chart-with-color-groups.js","src/chart.js","src/correlation-matrix.js","src/d3-extensions.js","src/heatmap-timeseries.js","src/heatmap.js","src/histogram.js","src/index.js","src/legend.js","src/regression.js","src/scatterplot-matrix.js","src/scatterplot.js","src/statistics-distributions.js","src/statistics-utils.js","src/utils.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","ODCD3","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_interopRequireDefault","obj","__esModule","default","color","legend","svg","type","_legend2","d3_calcType","scale","ascending","cells","labels","labelFormat","labelDelimiter","legendG","selectAll","data","enter","append","attr","classPrefix","cell","select","cellEnter","shapes","shape","d3_addEvents","legendDispatcher","exit","transition","style","remove","d3_drawShapes","shapeHeight","shapeWidth","shapeRadius","path","d3_addText","text","shapeSize","nodes","map","d","getBBox","useClass","feature","cellTrans","textTrans","textAlign","labelAlign","orient","height","shapePadding","width","x","labelOffset","y","d3_placement","d3_title","title","_d3Scale","scaleLinear","_d3Format","format","_d3Dispatch","dispatch","_","arguments","toLowerCase","on","value","apply","Object","defineProperty","_legend","./legend","d3-dispatch","d3-format","d3-scale","2","d3_identity","d3_mergeLabels","gen","push","d3_linearLegend","domain","increment","d3_quantLegend","range","invert","invertExtent","d3_ordinalLegend","ticks","d3_reverse","arr","mirror","dispatcher","d3_cellOver","d3_cellOut","d3_cellClick","cellDispatcher","titleText","cellsSvg","yOffset","xOffset","3","size","bbox","stroke","maxH","_d3Array","max","maxW","sum","slice","d3-array","4","symbol","5","errorFunction","Math","abs","tau","exp","pow","6","linearRegression","m","b","dataLength","point","sumX","sumY","sumXX","sumXY","7","linearRegressionLine","mb","8","mean","NaN","./sum","9","quantile","sample","p","copy","Array","isArray","multiQuantileSelect","results","quantileSorted","idx","quantileIndex","quantileSelect","k","left","right","quickselect","floor","indices","sort","compare","stack","ceil","pop","len","./quantile_sorted","./quickselect","10","11","z","log","sd","sqrt","newLeft","newRight","min","j","swap","tmp","12","sampleCorrelation","cov","sampleCovariance","xstd","sampleStandardDeviation","ystd","./sample_covariance","./sample_standard_deviation","13","xmean","ymean","besselsCorrection","./mean","14","sampleVarianceX","sampleVariance","isNaN","./sample_variance","15","sumSquaredDeviationsValue","sumNthPowerDeviations","./sum_nth_power_deviations","16","standardDeviation","v","variance","./variance","17","correctedCurrentValue","nextSum","errorCompensation","18","meanValue","19","20","zScore","21","factory","d3","bisector","ascendingComparator","lo","hi","mid","descending","number","array","deviation","extent","c","constant","identity","start","stop","step","count","tickStep","step0","step1","LN10","error","e10","e5","e2","sturges","values","LN2","histogram","xz","x0","x1","tz","threshold","shift","bin","bins","bisectRight","thresholds","h","freedmanDiaconis","scott","median","numbers","merge","arrays","merged","pairs","permute","indexes","permutes","scan","xi","xj","shuffle","i0","i1","random","transpose","matrix","row","zip","ascendingBisect","bisectLeft","prototype","bisect","thresholdFreedmanDiaconis","thresholdScott","thresholdSturges","22","Map","object","each","key","set","nest","depth","createResult","setResult","keys","rollup","sortValues","keyValue","valuesByKey","result","get","entries","sortKey","sortKeys","createObject","setObject","createMap","setMap","order","Set","add","prefix","constructor","has","property","clear","empty","proto","23","extend","parent","definition","create","Color","trim","reHex3","exec","parseInt","Rgb","reHex6","rgbn","reRgbInteger","reRgbPercent","reRgbaInteger","rgba","reRgbaPercent","reHslPercent","hsla","reHslaPercent","named","hasOwnProperty","rgbConvert","rgb","opacity","Hsl","hslConvert","hsl","hsl2rgb","m1","m2","labConvert","Lab","Hcl","deg2rad","cos","sin","rgb2xyz","xyz2lab","Xn","Yn","Zn","lab","t3","t2","t0","lab2xyz","t1","xyz2rgb","hclConvert","atan2","rad2deg","hcl","cubehelixConvert","Cubehelix","BC_DA","ED","EB","bl","E","C","D","cubehelix","darker","brighter","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","displayable","toString","round","PI","Kn","A","B","cosh","sinh","24","Dispatch","parseTypenames","typenames","types","split","name","indexOf","callback","noop","concat","typename","T","that","args","25","formatDecimal","toExponential","coefficient","exponent","formatGroup","grouping","thousands","substring","reverse","join","formatDefault","toPrecision","out","formatPrefixAuto","prefixExponent","formatRounded","formatSpecifier","specifier","FormatSpecifier","match","re","fill","align","sign","zero","comma","precision","formatTypes","formatLocale","locale","newFormat","valuePrefix","valueSuffix","suffix","formatType","valueNegative","charCodeAt","prefixes","maybeSuffix","decimal","group","Infinity","padding","currency","test","formatPrefix","defaultLocale","precisionFixed","precisionPrefix","precisionRound","","%","toFixed","X","toUpperCase","formatDefaultLocale","26","d3Color","basis","v0","v1","v2","v3","basis$1","basisClosed","linear","exponential","hue","gamma","nogamma","rgbSpline","spline","colors","nb","na","date","Date","setTime","one","string","am","bm","bs","bi","reA","lastIndex","reB","q","index","rgb$1","decompose","scaleX","scaleY","skewX","translateX","translateY","rotate","degrees","atan","parseCss","cssNode","document","createElement","cssRoot","documentElement","cssView","defaultView","transform","getComputedStyle","appendChild","getPropertyValue","removeChild","parseSvg","svgNode","createElementNS","setAttribute","baseVal","consolidate","interpolateTransform","parse","pxComma","pxParen","degParen","translate","xa","ya","xb","yb","tanh","zoom","p0","p1","S","ux0","uy0","w0","ux1","uy1","w1","dx","dy","d2","epsilon2","rho","d1","b0","rho4","rho2","b1","r0","r1","coshr0","duration","hsl$1","end","lab$1","hcl$1","cubehelix$1","cubehelixGamma","quantize","interpolator","samples","rgbGamma","rgbBasis","rgbBasisClosed","RegExp","source","interpolateTransformCss","interpolateTransformSvg","SQRT2","hsl$2","hslLong","hcl$2","hclLong","cubehelix$2","cubehelixLong","interpolate","interpolateArray","interpolateBasis","interpolateBasisClosed","interpolateDate","interpolateNumber","interpolateObject","interpolateRound","interpolateString","interpolateZoom","interpolateRgb","interpolateRgbBasis","interpolateRgbBasisClosed","interpolateHsl","interpolateHslLong","interpolateLab","interpolateHcl","interpolateHclLong","interpolateCubehelix","interpolateCubehelixLong","d3-color","27","d3Array","d3Collection","d3Interpolate","d3Format","d3Time","d3TimeFormat","ordinal","unknown","implicit","band","rescale","paddingInner","paddingOuter","bandwidth","ordinalRange","undefined","rangeRound","pointish","deinterpolate","deinterpolateClamp","reinterpolateClamp","reinterpolate","bimap","d0","polymap","target","clamp","continuous","deinterpolate$$","piecewise","output","input","unit","map$1","tickFormat","linearish","nice","interval","deinterpolate$1","pow10","isFinite","powp","base","logp","log10","log2","reflect","logs","pows","raise","quantile$1","quantiles","number$1","calendar","year","month","week","day","hour","minute","second","millisecond","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","tickInterval","tickIntervals","durationYear","every","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","time","timeYear","timeMonth","timeWeek","timeDay","timeHour","timeMinute","timeSecond","timeMillisecond","timeFormat","utcTime","utcYear","utcMonth","utcWeek","utcDay","utcHour","utcMinute","utcSecond","utcMillisecond","utcFormat","UTC","rainbow$1","ts","rainbow","ramp","sequential","category10","category20b","category20c","category20","warm","cool","viridis","magma","inferno","plasma","scaleBand","scalePoint","scaleIdentity","scaleLog","scaleOrdinal","scaleImplicit","scalePow","scaleSqrt","scaleQuantile","scaleQuantize","scaleThreshold","scaleTime","scaleUtc","schemeCategory10","schemeCategory20b","schemeCategory20c","schemeCategory20","interpolateCubehelixDefault","interpolateRainbow","interpolateWarm","interpolateCool","interpolateViridis","interpolateMagma","interpolateInferno","interpolatePlasma","scaleSequential","d3-collection","d3-interpolate","d3-time","d3-time-format","28","localDate","H","M","L","setFullYear","utcDate","setUTCFullYear","newYear","formats","pad","pads","charAt","newParse","newDate","parseSpecifier","w","getUTCDay","getDay","W","U","Z","parses","parsePeriod","periodRe","periodLookup","parseShortWeekday","shortWeekdayRe","shortWeekdayLookup","parseWeekday","weekdayRe","weekdayLookup","parseShortMonth","shortMonthRe","shortMonthLookup","parseMonth","monthRe","monthLookup","parseLocaleDateTime","locale_dateTime","parseLocaleDate","locale_date","parseLocaleTime","locale_time","formatShortWeekday","locale_shortWeekdays","formatWeekday","locale_weekdays","formatShortMonth","locale_shortMonths","getMonth","locale_months","formatPeriod","locale_periods","getHours","formatUTCShortWeekday","formatUTCWeekday","formatUTCShortMonth","getUTCMonth","formatUTCMonth","formatUTCPeriod","getUTCHours","dateTime","periods","days","shortDays","months","shortMonths","formatRe","formatLookup","formatDayOfMonth","formatHour24","I","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekNumberSunday","formatWeekdayNumber","formatWeekNumberMonday","Y","formatFullYear","formatZone","formatLiteralPercent","utcFormats","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekNumberSunday","formatUTCWeekdayNumber","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parseDayOfMonth","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parseSeconds","parseWeekNumberSunday","parseWeekdayNumber","parseWeekNumberMonday","parseYear","parseFullYear","parseZone","parseLiteralPercent","utcParse","requote","replace","requoteRe","names","numberRe","percentRe","getDate","getMilliseconds","getMinutes","getSeconds","timeSunday","timeMonday","getFullYear","getTimezoneOffset","getUTCDate","getUTCMilliseconds","getUTCMinutes","getUTCSeconds","utcSunday","utcMonday","getUTCFullYear","timeParse","formatIsoNative","toISOString","parseIsoNative","-","0","isoSpecifier","formatIso","parseIso","timeFormatDefaultLocale","timeFormatLocale","isoFormat","isoParse","29","newInterval","floori","offseti","field","offset","filter","weekday","setDate","setHours","utcWeekday","setUTCDate","setUTCHours","milliseconds","seconds","minutes","hours","sunday","monday","tuesday","wednesday","thursday","friday","saturday","sundays","mondays","tuesdays","wednesdays","thursdays","fridays","saturdays","setMonth","years","setUTCSeconds","utcMinutes","setUTCMinutes","utcHours","utcDays","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcSundays","utcMondays","utcTuesdays","utcWednesdays","utcThursdays","utcFridays","utcSaturdays","setUTCMonth","utcMonths","utcYears","timeInterval","timeMilliseconds","utcMilliseconds","timeSeconds","utcSeconds","timeMinutes","timeHours","timeDays","timeWeeks","timeSundays","timeMondays","timeTuesday","timeTuesdays","timeWednesday","timeWednesdays","timeThursday","timeThursdays","timeFriday","timeFridays","timeSaturday","timeSaturdays","timeMonths","timeYears","utcWeeks","30","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","enumerable","writable","configurable","setPrototypeOf","__proto__","BarChart","BarChartConfig","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_get","receiver","Function","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","_chartWithColorGroups","_utils","_ChartWithColorGroups","custom","_this","svgClass","cssClassPrefix","showLegend","showTooltip","Utils","isNumber","deepExtend","ChartWithColorGroupsConfig","_ChartWithColorGroups2","placeholderSelector","config","plot","computePlotSize","setupY","setupX","setupGroupStacks","setupYDomain","conf","axis","createAxis","series","createScale","yStackMax","layers","layer","points","y0","groupData","y0s","groupedData","forEach","mapToPoint","prevY0","parseFloat","axisConf","svgG","selectOrAppend","prefixClass","guides","axisT","ease","easeSinInOut","margin","bottom","layerClass","barClass","layerMerge","bar","barEnter","barRectEnter","barMerge","barRect","barRectT","barT","layerT","transitionEnabled","yDomain","seriesColor","tooltip","hideTooltip","newData","drawAxisX","drawAxisY","drawBars","ChartWithColorGroups","./chart-with-color-groups","./utils","31","BoxPlotBase","BoxPlotBaseConfig","_chart","_ChartConfig","domainMargin","Q1","Q2","Q3","Wl","whiskerLow","Wh","whiskerHigh","outliers","outlierValue","outlierLabel","minBoxWidth","maxBoxWidth","d3ColorCategory","ChartConfig","_Chart","getDataToPlot","setupColor","tickSize","_this3","yMin","yMax","q1","q3","wl","wh","label","boxplotClass","boxplots","boxplotEnter","boxplotsMerge","boxplotsT","delay","boxWidth","boxLeft","boxRight","boxClass","classed","html","boxRects","boxRectsT","medianClass","medianLine","whiskerClass","tickClass","whiskers","box","endpoint","whisker","tick","outlierClass","outlierEnterCircle","outliersMerge","outliersT","drawBoxPlots","_this4","colorSchemeCategory","capitalizeFirstLetter","colorCategory","colorValue","String","Chart","./chart","32","BoxPlot","BoxPlotConfig","_boxPlotBase","_statisticsUtils","_BoxPlotBaseConfig","groups","displayValue","_BoxPlotBase","groupingEnabled","isGroupingEnabled","groupValue","getDisplayValue","isFunction","isObject","StatisticsUtils","IQR","tukey","./box-plot-base","./statistics-utils","33","setupGroups","getOwnPropertyNames","groupToLabel","computeGroupColorDomain","getLabel","_this5","enabledGroups","updateLegend","container","legendX","legendY","Legend","legendColor","onLegendCellClick","updateLegendCellStatuses","cellValue","updateEnabledGroups","init","isDisabled","splice","34","top","titleSize","titleMargin","subtitle","subtitleSize","subtitleMargin","utils","_attached","_layers","_events","_isInitialized","_id","guid","_isAttached","baseContainer","setConfig","setData","postInit","initConfigAccessors","initPlot","initSvg","initTooltip","draw","svgWidth","svgHeight","titleMarginSize","updateTitle","updateSubtitle","attachmentData","attachmentName","update","titleClass","subtitleClass","chart","context","events","once","off","event","ev","getBaseContainer","node","clazz","addDot","availableWidth","availableHeight","pageX","pageY","initPropertyAccessors","bindTo","returnObj","recursive","accessor","initPropertyAccessor","isObjectNotArray","propertyKey","35","CorrelationMatrix","CorrelationMatrixConfig","_scatterplot","highlightLabels","rotateLabelsX","rotateLabelsY","variables","variableKey","correlation","xValues","yValues","sizeMin","sizeMax","setupVariables","placeholderNode","getBaseContainerNode","parentWidth","getBoundingClientRect","cellSize","setupVariablesScales","setupCorrelationScales","setupCorrelationMatrix","corrConf","cellConf","radiusMax","radiusScale","radius","radiusX","radiusY","rotateVal","variablesConf","domainByVariable","inferVariables","includeInPlot","labelByVariable","matrixCells","variableToValues","corr","rowVar","colVar","col","updateCells","updateVariableLabels","labelClass","updateAxisX","updateAxisY","labelXClass","labelsMerge","maxWidth","computeXAxisLabelsWidth","placeTextWithEllipsisAndTooltip","labelYClass","computeYAxisLabelsWidth","SQRT_2","fontSize","cellClass","cellShape","cellsEnter","cellsMerge","scatterPlot","selector","wrongShapes","mouseoverCallbacks","mouseoutCallbacks","highlightClass","xLabelClass","yLabelClass","trigger","barWidth","barHeight","linearGradientBar","containerSelector","scatterPlotConfig","ScatterPlot","attach","./scatterplot","36","D3Extensions","selection","insertSelector","before","appendSelector","selectOrInsert","37","HeatmapTimeSeries","HeatmapTimeSeriesConfig","_heatmap","_HeatmapConfig","fillMissing","intervalStep","displayFormat","intervalToFormats","sortComparator","isString","localeCompare","formatter","Number","nf","Intl","NumberFormat","HeatmapConfig","_Heatmap","guessTimeFormat","initTimeFormatAndInterval","timeParser","getTimeParser","uniqueValues","prev","current","parseTime","next","nextTimeTickValue","missing","iteration","compareTimeValues","timeString","formatTime","updateGroups","parser","getTimeFormatter","isDate","rowIndex","prevRowValue","colIndex","guessInterval","intervalFormat","formatMatch","some","timeFormatter","Heatmap","./heatmap","38","noDataText","rotateLabels","decimalPlaces","sortLabels","overlap","notAvailableValue","noDataColor","reverseScale","matrixes","setupValues","buildCells","titleRectWidth","groupByX","allTitlesWidth","groupByY","_depth","_allTitlesWidth","setupZScale","children","level","valueMap","minZ","maxZ","xVal","yVal","zValRaw","zVal","groupY","groupX","setupValuesBeforeGroupsSort","gaps","totalValuesCount","allValuesList","sortGroups","val","axisVal","rootGroup","axisGroupsConfig","currentGroup","groupKey","groupKeyIndex","groupingValue","axisConfig","allValuesCount","allValuesBeforeCount","gapsBefore","gapsSize","computeGapsSize","gapsBeforeSize","childrenList","childrenCount","childProp","child","gapsInside","gapsInsideSize","cellWidth","xGapsSize","computedCellWidth","yGapsSize","computedCellHeight","cellHeight","unshift","drawGroupsY","drawGroupsX","updateAxisTitles","offsetX","gapSize","computeGapSize","formatValueX","elem","labelsEnter","offsetY","formatted","formatValueY","parentGroup","groupClass","groupYClass","valuesBeforeCount","groupsEnter","titleGroupEnter","groupTitleRectHeight","groupsMerge","groupWidth","titleGroups","tileRects","setGroupMouseCallbacks","groupXClass","titleRectHeight","groupHeight","parentNode","cellContainerClass","paddingX","paddingY","cellContainer","formatValueZ","formatLegendValue","setRotateLabels","gapLevel","maxGroupGapSize","gapsNumber","gapsLevel","39","Histogram","HistogramConfig","frequency","setupHistogram","stackedHistograms","histogramBins","drawHistogram","40","RegressionConfig","Regression","ScatterPlotMatrixConfig","ScatterPlotMatrix","ScatterPlotConfig","_scatterplotMatrix","_regression","_correlationMatrix","_heatmapTimeseries","_histogram","_barChart","_boxPlot","_d3Extensions","./bar-chart","./box-plot","./correlation-matrix","./d3-extensions","./heatmap-timeseries","./histogram","./regression","./scatterplot-matrix","41","_color","_color2","_size","_size2","_symbol","_symbol2","legendParent","legendClass","gradientId","linearGradient","ticksNumber","../bower_components/d3-legend/src/color","../bower_components/d3-legend/src/size","../bower_components/d3-legend/src/symbol","42","_ScatterPlotConfig","mainRegression","groupRegression","confidence","criticalValue","degreesOfFreedom","criticalProbability","tValue","marginOfError","_ScatterPlot","initRegressionLines","groupsAvailable","regressions","regression","initRegression","initGroupRegression","groupVal","extentX","linePoints","line","curve","curveBasis","defaultColor","computeConfidence","alpha","meanX","xMySum","xSum","xPowSum","ySum","yPowSum","Sa2","Sy2","errorFn","computeConfidenceAreaPoint","moe","confDown","confUp","y1","centerX","confidenceAreaPoints","fitInPlot","confidenceArea","area","curveNatural","updateRegressionLines","regressionContainerClass","regressionContainerSelector","clipPathId","regressionContainer","dotsContainerClass","regressionContainerClip","regressionClass","confidenceAreaClass","regressionSelector","regressionEnter","regressionMerge","lineClass","lineT","areaT","43","minCellSize","maxCellSize","brush","dot","subplots","variable","plotSubplot","frameClass","subplot","dots","dotsMerge","dotsT","dotRadius","axisClass","axisXClass","axisYClass","xAxisSelector","yAxisSelector","noGuidesClass","xAxis","xAxisMerge","yAxis","yAxisMerge","cross","cellMerge","drawBrush","brushstart","brushCell","clearBrush","brushmove","brushend","move","44","updateDots","dotClass","dotsContainer","layerEnter","dotsEnter","45","tdistr","$n","$p","integer","precision_string","_subt","_subu","$y","$x","$u","$u2","$a","$b","$c","$d","$e","$round","$p1","_subtprob","$n1","$delta","round_to_precision","$w","$z","$i","$max","SIGNIFICANT","46","_statisticsDistributions","su","standardError","../bower_components/simple-statistics/src/error_function","../bower_components/simple-statistics/src/linear_regression","../bower_components/simple-statistics/src/linear_regression_line","../bower_components/simple-statistics/src/mean","../bower_components/simple-statistics/src/quantile","../bower_components/simple-statistics/src/sample_correlation","../bower_components/simple-statistics/src/sample_standard_deviation","../bower_components/simple-statistics/src/standard_deviation","../bower_components/simple-statistics/src/variance","../bower_components/simple-statistics/src/z_score","./statistics-distributions","47","_defineProperty","_typeof","Symbol","iterator","srcObj","assign","mergeDeep","includeGroup","res","prop","item","operation","selectorParts","element","selectorModifier","selectorItem","insertOrAppendSelector","x2","y2","defs","stops","stopsMerge","s4","textD3Obj","textString","textObj","textContent","ellipsisLength","getComputedTextLength","getSubStringLength","ellipsisPlaced","placeTextWithEllipsis","scaleName","scaleFunctionName","axisFnName","sanitizeHeight","sanitizeWidth"],"mappings":"CAAA,SAAAA,GAAA,GAAA,gBAAAC,UAAA,mBAAAC,QAAAA,OAAAD,QAAAD,QAAA,IAAA,kBAAAG,SAAAA,OAAAC,IAAAD,UAAAH,OAAA,CAAA,GAAAK,EAAAA,GAAA,mBAAAC,QAAAA,OAAA,mBAAAC,QAAAA,OAAA,mBAAAC,MAAAA,KAAAC,KAAAJ,EAAAK,MAAAV,MAAA,WAAA,GAAAG,EAAA,OAAA,SAAAQ,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAhB,GAAA,GAAAqB,OAAA,uBAAAL,EAAA,IAAA,MAAAhB,GAAAsB,KAAA,mBAAAtB,EAAA,GAAAuB,GAAAV,EAAAG,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAD,EAAAtB,QAAA,SAAAU,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAY,EAAAA,EAAAtB,QAAAU,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAf,QAAA,IAAA,GAAAmB,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAW,GAAA,SAAAP,EAAAjB,EAAAD,GCCA,YAiBA,SAAS0B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GCbxE,QAASG,KAsBpB,QAASC,GAAOC,GAEd,GAAIC,GAAOC,EAAAA,WAAOC,YAAYC,EAAOC,EAAWC,EAAOC,EAAQC,EAAaC,GAC1EC,EAAUV,EAAIW,UAAU,KAAKC,MAAMR,GAErCM,GAAQG,QAAQC,OAAO,KAAKC,KAAK,QAASC,EAAc,cAExD,IAAIC,GAAOjB,EAAIkB,OAAO,IAAMF,EAAc,eACrCL,UAAU,IAAMK,EAAc,QAAQJ,KAAKX,EAAKW,MACnDO,EAAYF,EAAKJ,QAAQC,OAAO,KAC7BC,KAAK,QAASC,EAAc,QAE/BI,GADaD,EAAUL,OAAOO,GAAON,KAAK,QAASC,EAAc,UACxDhB,EAAIW,UAAU,KAAOK,EAAc,QAAUK,GAGxDnB,GAAAA,WAAOoB,aAAaH,EAAWI,GAE/BN,EAAKO,OAAOC,aAAaC,MAAM,UAAW,GAAGC,SAE7CzB,EAAAA,WAAO0B,cAAcP,EAAOD,EAAQS,EAAaC,EAAYC,EAAaC,GAE1E9B,EAAAA,WAAO+B,WAAYjC,EAAKmB,EAAWlB,EAAKM,OAAQS,EAGhD,IAAIkB,GAAOf,EAAUR,UAAU,QAC7BwB,EAAYf,EAAOgB,QAAQC,IAAK,SAASC,GAAI,MAAOA,GAAEC,WAInDC,GAOHpB,EAAOL,KAAK,QAAS,SAASuB,GAAI,MAAOtB,GAAc,UAAYf,EAAKwC,QAAQH,KANnE,QAATjB,EACFD,EAAOM,MAAM,SAAUzB,EAAKwC,SAE5BrB,EAAOM,MAAM,OAAQzB,EAAKwC,QAM9B,IAAIC,GACJC,EACAC,EAA2B,SAAdC,EAAyB,EAAmB,UAAdA,EAA0B,GAAM,CAG5D,cAAXC,GACFJ,EAAY,SAASJ,EAAEnD,GAAK,MAAO,gBAAmBA,GAAKgD,EAAUhD,GAAG4D,OAASC,GAAiB,KAClGL,EAAY,SAASL,EAAEnD,GAAK,MAAO,cAAgBgD,EAAUhD,GAAG8D,MAAQd,EAAUhD,GAAG+D,EACnFC,GAAe,KAAOhB,EAAUhD,GAAGiE,EAAIjB,EAAUhD,GAAG4D,OAAO,EAAI,GAAK,MAElD,eAAXD,IACTJ,EAAY,SAASJ,EAAEnD,GAAK,MAAO,aAAgBA,GAAKgD,EAAUhD,GAAG8D,MAAQD,GAAiB,OAC9FL,EAAY,SAASL,EAAEnD,GAAK,MAAO,cAAgBgD,EAAUhD,GAAG8D,MAAML,EAAaT,EAAUhD,GAAG+D,GAC9F,KAAOf,EAAUhD,GAAG4D,OAASZ,EAAUhD,GAAGiE,EAAID,EAAc,GAAK,MAGrEjD,EAAAA,WAAOmD,aAAaP,EAAQ3B,EAAWuB,EAAWR,EAAMS,EAAWE,GACnE3C,EAAAA,WAAOoD,SAAStD,EAAKuD,EAAOvC,GAE5BC,EAAKQ,aAAaC,MAAM,UAAW,GA9EvC,GAiBEM,GAjBE5B,GAAQ,EAAAoD,EAAAC,eACVpC,EAAQ,OACRS,EAAa,GACbD,EAAc,GACdE,EAAc,GACdiB,EAAe,EACf1C,GAAS,GACTC,KACAS,EAAc,GACdwB,GAAW,EACXe,EAAQ,GACR/C,GAAc,EAAAkD,EAAAC,QAAO,QACrBR,EAAc,GACdN,EAAa,SACbpC,EAAiB,KACjBqC,EAAS,WACTzC,GAAY,EAEZkB,GAAmB,EAAAqC,EAAAC,UAAS,WAAY,UAAW,YAyLrD,OAvHA9D,GAAOK,MAAQ,SAAS0D,GACtB,MAAKC,WAAUvE,QACfY,EAAQ0D,EACD/D,GAFuBK,GAKhCL,EAAOO,MAAQ,SAASwD,GACtB,MAAKC,WAAUvE,SACXsE,EAAEtE,OAAS,GAAKsE,GAAK,KACvBxD,EAAQwD,GAEH/D,GAJuBO,GAOhCP,EAAOsB,MAAQ,SAASyC,EAAGxB,GACzB,MAAKyB,WAAUvE,SACN,QAALsE,GAAoB,UAALA,GAAsB,QAALA,GAAqB,QAALA,GAA6B,gBAANxB,MACzEjB,EAAQyC,EACR9B,EAAOM,GAEFvC,GALuBsB,GAQhCtB,EAAO+B,WAAa,SAASgC,GAC3B,MAAKC,WAAUvE,QACfsC,GAAcgC,EACP/D,GAFuB+B,GAKhC/B,EAAO8B,YAAc,SAASiC,GAC5B,MAAKC,WAAUvE,QACfqC,GAAeiC,EACR/D,GAFuB8B,GAKhC9B,EAAOgC,YAAc,SAAS+B,GAC5B,MAAKC,WAAUvE,QACfuC,GAAe+B,EACR/D,GAFuBgC,GAKhChC,EAAOiD,aAAe,SAASc,GAC7B,MAAKC,WAAUvE,QACfwD,GAAgBc,EACT/D,GAFuBiD,GAKhCjD,EAAOQ,OAAS,SAASuD,GACvB,MAAKC,WAAUvE,QACfe,EAASuD,EACF/D,GAFuBQ,GAKhCR,EAAO8C,WAAa,SAASiB,GAC3B,MAAKC,WAAUvE,QACN,SAALsE,GAAqB,OAALA,GAAmB,UAALA,IAChCjB,EAAaiB,GAER/D,GAJuB8C,GAOhC9C,EAAOS,YAAc,SAASsD,GAC5B,MAAKC,WAAUvE,QACfgB,EAAcsD,EACP/D,GAFuBS,GAKhCT,EAAOoD,YAAc,SAASW,GAC5B,MAAKC,WAAUvE,QACf2D,GAAeW,EACR/D,GAFuBoD,GAKhCpD,EAAOU,eAAiB,SAASqD,GAC/B,MAAKC,WAAUvE,QACfiB,EAAiBqD,EACV/D,GAFuBU,GAKhCV,EAAOyC,SAAW,SAASsB,GACzB,MAAKC,WAAUvE,QACXsE,KAAM,GAAQA,KAAM,IACtBtB,EAAWsB,GAEN/D,GAJuByC,GAOhCzC,EAAO+C,OAAS,SAASgB,GACvB,MAAKC,WAAUvE,QACfsE,EAAIA,EAAEE,cACG,cAALF,GAA0B,YAALA,IACvBhB,EAASgB,GAEJ/D,GALuB+C,GAQhC/C,EAAOM,UAAY,SAASyD,GAC1B,MAAKC,WAAUvE,QACfa,IAAcyD,EACP/D,GAFuBM,GAKhCN,EAAOiB,YAAc,SAAS8C,GAC5B,MAAKC,WAAUvE,QACfwB,EAAc8C,EACP/D,GAFuBiB,GAKhCjB,EAAOwD,MAAQ,SAASO,GACtB,MAAKC,WAAUvE,QACf+D,EAAQO,EACD/D,GAFuBwD,GAKhCxD,EAAOkE,GAAK,WACV,GAAIC,GAAQ3C,EAAiB0C,GAAGE,MAAM5C,EAAkBwC,UACxD,OAAOG,KAAU3C,EAAmBxB,EAASmE,GAGxCnE,ED/MTqE,OAAOC,eAAerG,EAAS,cAC7BkG,OAAO,IAETlG,EAAAA,WCDwB8B,CALxB,IAAAwE,GAAApF,EAAA,YDUIgB,EAAWR,EAAuB4E,GCTtCV,EAAA1E,EAAA,eACAsE,EAAAtE,EAAA,YACAwE,EAAAxE,EAAA,eDsOGqF,WAAW,EAAEC,cAAc,GAAGC,YAAY,GAAGC,WAAW,KAAKC,GAAG,SAASzF,EAAQjB,EAAOD,GAC3F,YAEAoG,QAAOC,eAAerG,EAAS,cAC7BkG,OAAO,IAETlG,EAAAA,YE7OE4G,YAAa,SAAUtC,GACrB,MAAOA,IAGTuC,eAAgB,SAAUC,EAAKvE,GAE3B,GAAqB,IAAlBA,EAAOf,OAAc,MAAOsF,EAE/BA,GAAOA,EAAOA,IAGd,KADA,GAAI3F,GAAIoB,EAAOf,OACRL,EAAI2F,EAAItF,OAAQL,IACrBoB,EAAOwE,KAAKD,EAAI3F,GAElB,OAAOoB,IAGXyE,gBAAiB,SAAU5E,EAAOE,EAAOE,GACvC,GAAII,KAEJ,IAAIN,EAAMd,OAAS,EACjBoB,EAAON,MAOP,KAJA,GAAI2E,GAAS7E,EAAM6E,SACnBC,GAAaD,EAAOA,EAAOzF,OAAS,GAAKyF,EAAO,KAAK3E,EAAQ,GAC7DnB,EAAI,EAEGA,EAAImB,EAAOnB,IAChByB,EAAKmE,KAAKE,EAAO,GAAK9F,EAAE+F,EAI5B,IAAI3E,GAASK,EAAKyB,IAAI7B,EAEtB,QAAQI,KAAMA,EACNL,OAAQA,EACRkC,QAAS,SAASH,GAAI,MAAOlC,GAAMkC,MAG7C6C,eAAgB,SAAU/E,EAAOI,EAAaC,GAC5C,GAAIF,GAASH,EAAMgF,QAAQ/C,IAAI,SAASC,GACtC,GAAI+C,GAASjF,EAAMkF,aAAahD,EAC5B9B,GAAY6E,EAAO,IACnB7E,EAAY6E,EAAO,GAEvB,OAAO7E,GAAY6E,EAAO,IAAM,IAAM5E,EAAiB,IAAMD,EAAY6E,EAAO,KAIlF,QAAQzE,KAAMR,EAAMgF,QACZ7E,OAAQA,EACRkC,QAASjE,KAAKoG,cAIxBW,iBAAkB,SAAUnF,GAC1B,OAAQQ,KAAMR,EAAM6E,SACZ1E,OAAQH,EAAM6E,SACdxC,QAAS,SAASH,GAAI,MAAOlC,GAAMkC,MAG7CV,cAAe,SAAUP,EAAOD,EAAQS,EAAaC,EAAYC,EAAaC,GAC9D,SAAVX,EACAD,EAAOL,KAAK,SAAUc,GAAad,KAAK,QAASe,GAEhC,WAAVT,EACPD,EAAOL,KAAK,IAAKgB,GAEA,SAAVV,EACPD,EAAOL,KAAK,KAAM,GAAGA,KAAK,KAAMe,GAAYf,KAAK,KAAM,GAAGA,KAAK,KAAM,GAEpD,SAAVM,GACTD,EAAOL,KAAK,IAAKiB,IAIrBC,WAAY,SAAUjC,EAAKa,EAAON,EAAQS,GACxCH,EAAMC,OAAO,QAAQC,KAAK,QAASC,EAAc,SACjDhB,EAAIW,UAAU,KAAOK,EAAc,aAAaJ,KAAKL,GAAQ2B,KAAK1D,KAAKoG,cAGzEzE,YAAa,SAAUC,EAAOC,EAAWC,EAAOC,EAAQC,EAAaC,GACnE,GAAIR,GAAOG,EAAMkF,aACT9G,KAAK2G,eAAe/E,EAAOI,EAAaC,GAAkBL,EAAMoF,MAChEhH,KAAKwG,gBAAgB5E,EAAOE,EAAOE,GAAehC,KAAK+G,iBAAiBnF,EAShF,OAPAH,GAAKM,OAAS/B,KAAKqG,eAAe5E,EAAKM,OAAQA,GAE3CF,IACFJ,EAAKM,OAAS/B,KAAKiH,WAAWxF,EAAKM,QACnCN,EAAKW,KAAOpC,KAAKiH,WAAWxF,EAAKW,OAG5BX,GAGTwF,WAAY,SAASC,GAEnB,IAAK,GADDC,MACKxG,EAAI,EAAGG,EAAIoG,EAAIlG,OAAQL,EAAIG,EAAGH,IACrCwG,EAAOxG,GAAKuG,EAAIpG,EAAEH,EAAE,EAEtB,OAAOwG,IAGTtC,aAAc,SAAUP,EAAQ7B,EAAMyB,EAAWR,EAAMS,EAAWE,GAChE5B,EAAKF,KAAK,YAAa2B,GACvBR,EAAKnB,KAAK,YAAa4B,GACR,eAAXG,GACFZ,EAAKR,MAAM,cAAemB,IAI9BvB,aAAc,SAAShB,EAAOsF,GAC5B,GAAI9B,GAAItF,IAEN8B,GAAM2D,GAAG,mBAAoB,SAAU3B,GAAKwB,EAAE+B,YAAYD,EAAYtD,EAAG9D,QACpEyF,GAAG,kBAAmB,SAAU3B,GAAKwB,EAAEgC,WAAWF,EAAYtD,EAAG9D,QACjEyF,GAAG,eAAgB,SAAU3B,GAAKwB,EAAEiC,aAAaH,EAAYtD,EAAG9D,SAGzEqH,YAAa,SAASG,EAAgB1D,EAAG3C,GACvCqG,EAAezG,KAAK,WAAYI,EAAK2C,IAGvCwD,WAAY,SAASE,EAAgB1D,EAAG3C,GACtCqG,EAAezG,KAAK,UAAWI,EAAK2C,IAGtCyD,aAAc,SAASC,EAAgB1D,EAAG3C,GACxCqG,EAAezG,KAAK,YAAaI,EAAK2C,IAGxCgB,SAAU,SAAStD,EAAKuD,EAAOvC,GAC7B,GAAc,KAAVuC,EAAa,CAEf,GAAI0C,GAAYjG,EAAIW,UAAU,QAAUK,EAAc,cAEtDiF,GAAUrF,MAAM2C,IACb1C,QACAC,OAAO,QACPC,KAAK,QAASC,EAAc,eAE7BhB,EAAIW,UAAU,QAAUK,EAAc,eACjCkB,KAAKqB,EAEZ,IAAI2C,GAAWlG,EAAIkB,OAAO,IAAMF,EAAc,eAE1CmF,EAAUnG,EAAIkB,OAAO,IAAMF,EAAc,eAAeoB,QACvDC,IAAI,SAASC,GAAK,MAAOA,GAAEC,UAAUQ,SAAS,GACnDqD,GAAWF,EAAS9D,QAAQC,IAAI,SAASC,GAAK,MAAOA,GAAEC,UAAUW,IAAI,EAErEgD,GAASnF,KAAK,YAAa,aAAeqF,EAAU,KAAOD,EAAU,IAAM,aFoP3EE,GAAG,SAASnH,EAAQjB,EAAOD,GACjC,YAmBA,SAAS0B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GG5ZxE,QAAS2G,KAoBpB,QAASvG,GAAOC,GAEd,GAAIC,GAAOC,EAAAA,WAAOC,YAAYC,EAAOC,EAAWC,EAAOC,EAAQC,EAAaC,GAC1EC,EAAUV,EAAIW,UAAU,KAAKC,MAAMR,GAErCM,GAAQG,QAAQC,OAAO,KAAKC,KAAK,QAASC,EAAc,cAExD,IAAIC,GAAOjB,EAAIkB,OAAO,IAAMF,EAAc,eACrCL,UAAU,IAAMK,EAAc,QAAQJ,KAAKX,EAAKW,MACnDO,EAAYF,EAAKJ,QAAQC,OAAO,KAC7BC,KAAK,QAASC,EAAc,QAE/BI,GADaD,EAAUL,OAAOO,GAAON,KAAK,QAASC,EAAc,UACxDhB,EAAIW,UAAU,KAAOK,EAAc,QAAUK,GAGxDnB,GAAAA,WAAOoB,aAAaH,EAAWI,GAE/BN,EAAKO,OAAOC,aAAaC,MAAM,UAAW,GAAGC,SAG/B,SAAVN,GACFnB,EAAAA,WAAO0B,cAAcP,EAAOD,EAAQ,EAAGU,GACvCV,EAAOL,KAAK,eAAgBd,EAAKwC,UAEjCvC,EAAAA,WAAO0B,cAAcP,EAAOD,EAAQnB,EAAKwC,QAASxC,EAAKwC,QAASxC,EAAKwC,QAAST,GAGhF9B,EAAAA,WAAO+B,WAAYjC,EAAKmB,EAAWlB,EAAKM,OAAQS,EAGhD,IAkBI0B,GACJC,EAnBIT,EAAOf,EAAUR,UAAU,QAC7BwB,EAAYf,EAAOgB,QAAQC,IACzB,SAASC,EAAGnD,GACV,GAAIoH,GAAOjE,EAAEC,UACTiE,EAASpG,EAAMH,EAAKW,KAAKzB,GAQ7B,OANc,SAAVkC,GAA+B,eAAXyB,EACtByD,EAAKxD,OAASwD,EAAKxD,OAASyD,EACT,SAAVnF,GAA+B,aAAXyB,IAC7ByD,EAAKtD,MAAQsD,EAAKtD,OAGbsD,IAGTE,GAAO,EAAAC,EAAAC,KAAIxE,EAAW,SAASG,GAAI,MAAOA,GAAES,OAAST,EAAEc,IAC3DwD,GAAO,EAAAF,EAAAC,KAAIxE,EAAW,SAASG,GAAI,MAAOA,GAAEW,MAAQX,EAAEY,IAItDN,EAA2B,SAAdC,EAAyB,EAAmB,UAAdA,EAA0B,GAAM,CAG5D,cAAXC,GAEFJ,EAAY,SAASJ,EAAEnD,GACnB,GAAI4D,IAAS,EAAA2D,EAAAG,KAAI1E,EAAU2E,MAAM,EAAG3H,EAAI,GAAK,SAASmD,GAAI,MAAOA,GAAES,QACnE,OAAO,iBAAmBA,EAAS5D,EAAE6D,GAAgB,KAEzDL,EAAY,SAASL,EAAEnD,GAAK,MAAO,cAAgByH,EAAOzD,GAAe,KACtEhB,EAAUhD,GAAGiE,EAAIjB,EAAUhD,GAAG4D,OAAO,EAAI,GAAK,MAE7B,eAAXD,IACTJ,EAAY,SAASJ,EAAEnD,GACnB,GAAI8D,IAAQ,EAAAyD,EAAAG,KAAI1E,EAAU2E,MAAM,EAAG3H,EAAI,GAAK,SAASmD,GAAI,MAAOA,GAAEW,OAClE,OAAO,cAAgBA,EAAQ9D,EAAE6D,GAAgB,OAErDL,EAAY,SAASL,EAAEnD,GAAK,MAAO,cAAgBgD,EAAUhD,GAAG8D,MAAML,EAAaT,EAAUhD,GAAG+D,GAAK,KAC9FuD,EAAOtD,GAAgB,MAGhCjD,EAAAA,WAAOmD,aAAaP,EAAQ3B,EAAWuB,EAAWR,EAAMS,EAAWE,GACnE3C,EAAAA,WAAOoD,SAAStD,EAAKuD,EAAOvC,GAE5BC,EAAKQ,aAAaC,MAAM,UAAW,GA5FvC,GAeEM,GAfE5B,GAAQ,EAAAoD,EAAAC,eACVpC,EAAQ,OACRS,EAAa,GACbkB,EAAe,EACf1C,GAAS,GACTC,KAEAS,EAAc,GACduC,EAAQ,GACR/C,GAAc,EAAAkD,EAAAC,QAAO,QACrBR,EAAc,GACdN,EAAa,SACbpC,EAAiB,KACjBqC,EAAS,WACTzC,GAAY,EAEZkB,GAAmB,EAAAqC,EAAAC,UAAS,WAAY,UAAW,YAoLrD,OApGA9D,GAAOK,MAAQ,SAAS0D,GACtB,MAAKC,WAAUvE,QACfY,EAAQ0D,EACD/D,GAFuBK,GAKhCL,EAAOO,MAAQ,SAASwD,GACtB,MAAKC,WAAUvE,SACXsE,EAAEtE,OAAS,GAAKsE,GAAK,KACvBxD,EAAQwD,GAEH/D,GAJuBO,GAQhCP,EAAOsB,MAAQ,SAASyC,EAAGxB,GACzB,MAAKyB,WAAUvE,QACN,QAALsE,GAAoB,UAALA,GAAsB,QAALA,IAClCzC,EAAQyC,EACR9B,EAAOM,GAEFvC,GALuBsB,GAQhCtB,EAAO+B,WAAa,SAASgC,GAC3B,MAAKC,WAAUvE,QACfsC,GAAcgC,EACP/D,GAFuB+B,GAKhC/B,EAAOiD,aAAe,SAASc,GAC7B,MAAKC,WAAUvE,QACfwD,GAAgBc,EACT/D,GAFuBiD,GAKhCjD,EAAOQ,OAAS,SAASuD,GACvB,MAAKC,WAAUvE,QACfe,EAASuD,EACF/D,GAFuBQ,GAKhCR,EAAO8C,WAAa,SAASiB,GAC3B,MAAKC,WAAUvE,QACN,SAALsE,GAAqB,OAALA,GAAmB,UAALA,IAChCjB,EAAaiB,GAER/D,GAJuB8C,GAOhC9C,EAAOS,YAAc,SAASsD,GAC5B,MAAKC,WAAUvE,QACfgB,EAAcsD,EACP/D,GAFuBS,GAKhCT,EAAOoD,YAAc,SAASW,GAC5B,MAAKC,WAAUvE,QACf2D,GAAeW,EACR/D,GAFuBoD,GAKhCpD,EAAOU,eAAiB,SAASqD,GAC/B,MAAKC,WAAUvE,QACfiB,EAAiBqD,EACV/D,GAFuBU,GAKhCV,EAAO+C,OAAS,SAASgB,GACvB,MAAKC,WAAUvE,QACfsE,EAAIA,EAAEE,cACG,cAALF,GAA0B,YAALA,IACvBhB,EAASgB,GAEJ/D,GALuB+C,GAQhC/C,EAAOM,UAAY,SAASyD,GAC1B,MAAKC,WAAUvE,QACfa,IAAcyD,EACP/D,GAFuBM,GAKhCN,EAAOiB,YAAc,SAAS8C,GAC5B,MAAKC,WAAUvE,QACfwB,EAAc8C,EACP/D,GAFuBiB,GAKhCjB,EAAOwD,MAAQ,SAASO,GACtB,MAAKC,WAAUvE,QACf+D,EAAQO,EACD/D,GAFuBwD,GAKhCxD,EAAOkE,GAAK,WACV,GAAIC,GAAQ3C,EAAiB0C,GAAGE,MAAM5C,EAAkBwC,UACxD,OAAOG,KAAU3C,EAAmBxB,EAASmE,GAGxCnE,EHqMTqE,OAAOC,eAAerG,EAAS,cAC7BkG,OAAO,IAETlG,EAAAA,WG9YwBsI,CANxB,IAAAhC,GAAApF,EAAA,YHwZIgB,EAAWR,EAAuB4E,GGvZtCV,EAAA1E,EAAA,eACAsE,EAAAtE,EAAA,YACAwE,EAAAxE,EAAA,aACAwH,EAAAxH,EAAA,cHgnBGqF,WAAW,EAAEwC,WAAW,GAAGvC,cAAc,GAAGC,YAAY,GAAGC,WAAW,KAAKsC,GAAG,SAAS9H,EAAQjB,EAAOD,GACzG,YAmBA,SAAS0B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GIloBxE,QAASsH,KAqBpB,QAASlH,GAAOC,GAEd,GAAIC,GAAOC,EAAAA,WAAOC,YAAYC,EAAOC,EAAWC,EAAOC,EAAQC,EAAaC,GAC1EC,EAAUV,EAAIW,UAAU,KAAKC,MAAMR,GAErCM,GAAQG,QAAQC,OAAO,KAAKC,KAAK,QAASC,EAAc,cAExD,IAAIC,GAAOjB,EAAIkB,OAAO,IAAMF,EAAc,eACrCL,UAAU,IAAMK,EAAc,QAAQJ,KAAKX,EAAKW,MACnDO,EAAYF,EAAKJ,QAAQC,OAAO,KAC7BC,KAAK,QAASC,EAAc,QAE/BI,GADaD,EAAUL,OAAOO,GAAON,KAAK,QAASC,EAAc,UACxDhB,EAAIW,UAAU,KAAOK,EAAc,QAAUK,GAGxDnB,GAAAA,WAAOoB,aAAaH,EAAWI,GAG/BN,EAAKO,OAAOC,aAAaC,MAAM,UAAW,GAAGC,SAE7CzB,EAAAA,WAAO0B,cAAcP,EAAOD,EAAQS,EAAaC,EAAYC,EAAa9B,EAAKwC,SAC/EvC,EAAAA,WAAO+B,WAAYjC,EAAKmB,EAAWlB,EAAKM,OAAQS,EAGhD,IAMI0B,GACJC,EAPIT,EAAOf,EAAUR,UAAU,QAC7BwB,EAAYf,EAAOgB,QAAQC,IAAK,SAASC,GAAI,MAAOA,GAAEC,YAEpDkE,GAAO,EAAAC,EAAAC,KAAIxE,EAAW,SAASG,GAAI,MAAOA,GAAES,SAChD6D,GAAO,EAAAF,EAAAC,KAAIxE,EAAW,SAASG,GAAI,MAAOA,GAAEW,QAI5CL,EAA2B,SAAdC,EAAyB,EAAmB,UAAdA,EAA0B,GAAM,CAG5D,cAAXC,GACFJ,EAAY,SAASJ,EAAEnD,GAAK,MAAO,gBAAmBA,GAAKsH,EAAOzD,GAAiB,KACnFL,EAAY,SAASL,EAAEnD,GAAK,MAAO,cAAgByH,EAAOzD,GAAe,KAClEhB,EAAUhD,GAAGiE,EAAIjB,EAAUhD,GAAG4D,OAAO,EAAI,GAAK,MAEjC,eAAXD,IACTJ,EAAY,SAASJ,EAAEnD,GAAK,MAAO,aAAgBA,GAAKyH,EAAO5D,GAAiB,OAChFL,EAAY,SAASL,EAAEnD,GAAK,MAAO,cAAgBgD,EAAUhD,GAAG8D,MAAML,EAAaT,EAAUhD,GAAG+D,GAAK,KAC9FuD,EAAOtD,GAAgB,MAGhCjD,EAAAA,WAAOmD,aAAaP,EAAQ3B,EAAWuB,EAAWR,EAAMS,EAAWE,GACnE3C,EAAAA,WAAOoD,SAAStD,EAAKuD,EAAOvC,GAC5BC,EAAKQ,aAAaC,MAAM,UAAW,GAnEvC,GAAItB,IAAQ,EAAAoD,EAAAC,eACVpC,EAAQ,OACRS,EAAa,GACbD,EAAc,GACdE,EAAc,GACdiB,EAAe,EACf1C,GAAS,GACTC,KACAS,EAAc,GAEduC,EAAQ,GACR/C,GAAc,EAAAkD,EAAAC,QAAO,QACrBd,EAAa,SACbM,EAAc,GACd1C,EAAiB,KACjBqC,EAAS,WACTzC,GAAY,EACZkB,GAAmB,EAAAqC,EAAAC,UAAS,WAAY,UAAW,YA2IrD,OApFA9D,GAAOK,MAAQ,SAAS0D,GACtB,MAAKC,WAAUvE,QACfY,EAAQ0D,EACD/D,GAFuBK,GAKhCL,EAAOO,MAAQ,SAASwD,GACtB,MAAKC,WAAUvE,SACXsE,EAAEtE,OAAS,GAAKsE,GAAK,KACvBxD,EAAQwD,GAEH/D,GAJuBO,GAOhCP,EAAOiD,aAAe,SAASc,GAC7B,MAAKC,WAAUvE,QACfwD,GAAgBc,EACT/D,GAFuBiD,GAKhCjD,EAAOQ,OAAS,SAASuD,GACvB,MAAKC,WAAUvE,QACfe,EAASuD,EACF/D,GAFuBQ,GAKhCR,EAAO8C,WAAa,SAASiB,GAC3B,MAAKC,WAAUvE,QACN,SAALsE,GAAqB,OAALA,GAAmB,UAALA,IAChCjB,EAAaiB,GAER/D,GAJuB8C,GAOhC9C,EAAOS,YAAc,SAASsD,GAC5B,MAAKC,WAAUvE,QACfgB,EAAcsD,EACP/D,GAFuBS,GAKhCT,EAAOoD,YAAc,SAASW,GAC5B,MAAKC,WAAUvE,QACf2D,GAAeW,EACR/D,GAFuBoD,GAKhCpD,EAAOU,eAAiB,SAASqD,GAC/B,MAAKC,WAAUvE,QACfiB,EAAiBqD,EACV/D,GAFuBU,GAKhCV,EAAO+C,OAAS,SAASgB,GACvB,MAAKC,WAAUvE,QACfsE,EAAIA,EAAEE,cACG,cAALF,GAA0B,YAALA,IACvBhB,EAASgB,GAEJ/D,GALuB+C,GAQhC/C,EAAOM,UAAY,SAASyD,GAC1B,MAAKC,WAAUvE,QACfa,IAAcyD,EACP/D,GAFuBM,GAKhCN,EAAOiB,YAAc,SAAS8C,GAC5B,MAAKC,WAAUvE,QACfwB,EAAc8C,EACP/D,GAFuBiB,GAKhCjB,EAAOwD,MAAQ,SAASO,GACtB,MAAKC,WAAUvE,QACf+D,EAAQO,EACD/D,GAFuBwD,GAKhCxD,EAAOkE,GAAK,WACV,GAAIC,GAAQ3C,EAAiB0C,GAAGE,MAAM5C,EAAkBwC,UACxD,OAAOG,KAAU3C,EAAmBxB,EAASmE,GAGxCnE,EJmdTqE,OAAOC,eAAerG,EAAS,cAC7BkG,OAAO,IAETlG,EAAAA,WIpnBwBiJ,CANxB,IAAA3C,GAAApF,EAAA,YJ8nBIgB,EAAWR,EAAuB4E,GI7nBtCV,EAAA1E,EAAA,eACAsE,EAAAtE,EAAA,YACAwE,EAAAxE,EAAA,aACAwH,EAAAxH,EAAA,cJ+yBGqF,WAAW,EAAEwC,WAAW,GAAGvC,cAAc,GAAGC,YAAY,GAAGC,WAAW,KAAKwC,GAAG,SAAShI,EAAQjB,EAAOD,GKnzBzG,YAgBA,SAASmJ,GAAcjE,GACnB,GAAIvE,GAAI,GAAK,EAAI,GAAMyI,KAAKC,IAAInE,IAC5BoE,EAAM3I,EAAIyI,KAAKG,KAAKH,KAAKI,IAAItE,EAAG,GAChC,WACA,WAAavE,EACb,UAAayI,KAAKI,IAAI7I,EAAG,GACzB,UAAayI,KAAKI,IAAI7I,EAAG,GACzB,UAAayI,KAAKI,IAAI7I,EAAG,GACzB,UAAayI,KAAKI,IAAI7I,EAAG,GACzB,WAAayI,KAAKI,IAAI7I,EAAG,GACzB,WAAayI,KAAKI,IAAI7I,EAAG,GACzB,UAAayI,KAAKI,IAAI7I,EAAG,GACzB,UAAayI,KAAKI,IAAI7I,EAAG,GAC7B,OAAIuE,IAAK,EACE,EAAIoE,EAEJA,EAAM,EAIrBrJ,EAAOD,QAAUmJ,OL6yBXM,GAAG,SAASvI,EAAQjB,EAAOD,GMj1BjC,YAeA,SAAS0J,GAAiB9G,GAEtB,GAAI+G,GAAGC,EAIHC,EAAajH,EAAKpB,MAItB,IAAmB,IAAfqI,EACAF,EAAI,EACJC,EAAIhH,EAAK,GAAG,OACT,CAeH,IAAK,GAPDkH,GAAO5E,EAAGE,EALV2E,EAAO,EAAGC,EAAO,EACjBC,EAAQ,EAAGC,EAAQ,EAWd/I,EAAI,EAAGA,EAAI0I,EAAY1I,IAC5B2I,EAAQlH,EAAKzB,GACb+D,EAAI4E,EAAM,GACV1E,EAAI0E,EAAM,GAEVC,GAAQ7E,EACR8E,GAAQ5E,EAER6E,GAAS/E,EAAIA,EACbgF,GAAShF,EAAIE,CAIjBuE,IAAME,EAAaK,EAAUH,EAAOC,IAC9BH,EAAaI,EAAUF,EAAOA,GAGpCH,EAAKI,EAAOH,EAAgBF,EAAII,EAAQF,EAI5C,OACIF,EAAGA,EACHC,EAAGA,GAKX3J,EAAOD,QAAU0J,ONq1BXS,GAAG,SAASjJ,EAAQjB,EAAOD,GO55BjC,YAoBA,SAASoK,GAAqBC,GAI1B,MAAO,UAASnF,GACZ,MAAOmF,GAAGT,EAAKS,EAAGV,EAAIzE,GAI9BjF,EAAOD,QAAUoK,OPg6BXE,GAAG,SAASpJ,EAAQjB,EAAOD,GQ77BjC,YAkBA,SAASuK,GAAKrF,GAEV,MAAiB,KAAbA,EAAE1D,OAAuBgJ,IAEtB3B,EAAI3D,GAAKA,EAAE1D,OAnBtB,GAAIqH,GAAM3H,EAAQ,QAsBlBjB,GAAOD,QAAUuK,IRk8BdE,QAAQ,KAAKC,GAAG,SAASxJ,EAAQjB,EAAOD,GS39B3C,YA2BA,SAAS2K,GAASC,EAA6BC,GAC3C,GAAIC,GAAOF,EAAO9B,OAElB,IAAIiC,MAAMC,QAAQH,GAAI,CAGlBI,EAAoBH,EAAMD,EAI1B,KAAK,GAFDK,MAEK/J,EAAI,EAAGA,EAAI0J,EAAErJ,OAAQL,IAC1B+J,EAAQ/J,GAAKgK,EAAeL,EAAMD,EAAE1J,GAExC,OAAO+J,GAEP,GAAIE,GAAMC,EAAcP,EAAKtJ,OAAQqJ,EAErC,OADAS,GAAeR,EAAMM,EAAK,EAAGN,EAAKtJ,OAAS,GACpC2J,EAAeL,EAAMD,GAIpC,QAASS,GAAe5D,EAAK6D,EAAGC,EAAMC,GAC9BF,EAAI,IAAM,EACVG,EAAYhE,EAAK6D,EAAGC,EAAMC,IAE1BF,EAAInC,KAAKuC,MAAMJ,GACfG,EAAYhE,EAAK6D,EAAGC,EAAMC,GAC1BC,EAAYhE,EAAK6D,EAAI,EAAGA,EAAI,EAAGE,IAIvC,QAASR,GAAoBvD,EAAKmD,GAE9B,IAAK,GADDe,IAAW,GACNzK,EAAI,EAAGA,EAAI0J,EAAErJ,OAAQL,IAC1ByK,EAAQ7E,KAAKsE,EAAc3D,EAAIlG,OAAQqJ,EAAE1J,IAE7CyK,GAAQ7E,KAAKW,EAAIlG,OAAS,GAC1BoK,EAAQC,KAAKC,EAIb,KAFA,GAAIC,IAAS,EAAGH,EAAQpK,OAAS,GAE1BuK,EAAMvK,QAAQ,CACjB,GAAIX,GAAIuI,KAAK4C,KAAKD,EAAME,OACpB3K,EAAI8H,KAAKuC,MAAMI,EAAME,MACzB,MAAIpL,EAAIS,GAAK,GAAb,CAEA,GAAIqI,GAAIP,KAAKuC,OAAOrK,EAAIT,GAAK,EAC7ByK,GAAe5D,EAAKkE,EAAQjC,GAAIiC,EAAQtK,GAAIsK,EAAQ/K,IAEpDkL,EAAMhF,KAAKzF,EAAGqI,EAAGA,EAAG9I,KAI5B,QAASiL,GAAQ7K,EAAG2I,GAChB,MAAO3I,GAAI2I,EAGf,QAASyB,GAAca,EAAmBrB,GACtC,GAAIO,GAAMc,EAAMrB,CAChB,OAAU,KAANA,EAEOqB,EAAM,EACA,IAANrB,EAEA,EACAO,EAAM,IAAM,EAEZhC,KAAK4C,KAAKZ,GAAO,EACjBc,EAAM,IAAM,EAGZd,EAAM,GAINA,EAnGf,GAAID,GAAiBjK,EAAQ,qBACzBwK,EAAcxK,EAAQ,gBAsG1BjB,GAAOD,QAAU2K,IT89BdwB,oBAAoB,GAAGC,gBAAgB,KAAKC,IAAI,SAASnL,EAAQjB,EAAOD,GUxkC3E,YAcA,SAASmL,GAAeP,EAA6BC,GACjD,GAAIO,GAAMR,EAAOpJ,OAASqJ,CAC1B,OAAIA,GAAI,GAAKA,EAAI,EACNL,IACM,IAANK,EAEAD,EAAOA,EAAOpJ,OAAS,GACjB,IAANqJ,EAEAD,EAAO,GACPQ,EAAM,IAAM,EAEZR,EAAOxB,KAAK4C,KAAKZ,GAAO,GACxBR,EAAOpJ,OAAS,IAAM,GAGrBoJ,EAAOQ,EAAM,GAAKR,EAAOQ,IAAQ,EAIlCR,EAAOQ,GAItBnL,EAAOD,QAAUmL,OV4kCXmB,IAAI,SAASpL,EAAQjB,EAAOD,GWlnClC,YAsBA,SAAS0L,GAAYhE,EAA0B6D,EAAiBC,EAAoBC,GAIhF,IAHAD,EAAOA,GAAQ,EACfC,EAAQA,GAAU/D,EAAIlG,OAAS,EAExBiK,EAAQD,GAAM,CAEjB,GAAIC,EAAQD,EAAO,IAAK,CACpB,GAAI5K,GAAI6K,EAAQD,EAAO,EACnB7B,EAAI4B,EAAIC,EAAO,EACfe,EAAInD,KAAKoD,IAAI5L,GACbE,EAAI,GAAMsI,KAAKG,IAAI,EAAIgD,EAAI,GAC3BE,EAAK,GAAMrD,KAAKsD,KAAKH,EAAIzL,GAAKF,EAAIE,GAAKF,EACvC+I,GAAI/I,EAAI,EAAI,IAAG6L,MACnB,IAAIE,GAAUvD,KAAKT,IAAI6C,EAAMpC,KAAKuC,MAAMJ,EAAI5B,EAAI7I,EAAIF,EAAI6L,IACpDG,EAAWxD,KAAKyD,IAAIpB,EAAOrC,KAAKuC,MAAMJ,GAAK3K,EAAI+I,GAAK7I,EAAIF,EAAI6L,GAChEf,GAAYhE,EAAK6D,EAAGoB,EAASC,GAGjC,GAAIjM,GAAI+G,EAAI6D,GACRpK,EAAIqK,EACJsB,EAAIrB,CAKR,KAHAsB,EAAKrF,EAAK8D,EAAMD,GACZ7D,EAAI+D,GAAS9K,GAAGoM,EAAKrF,EAAK8D,EAAMC,GAE7BtK,EAAI2L,GAAG,CAIV,IAHAC,EAAKrF,EAAKvG,EAAG2L,GACb3L,IACA2L,IACOpF,EAAIvG,GAAKR,GAAGQ,GACnB,MAAOuG,EAAIoF,GAAKnM,GAAGmM,IAGnBpF,EAAI8D,KAAU7K,EAAGoM,EAAKrF,EAAK8D,EAAMsB,IAEjCA,IACAC,EAAKrF,EAAKoF,EAAGrB,IAGbqB,GAAKvB,IAAGC,EAAOsB,EAAI,GACnBvB,GAAKuB,IAAGrB,EAAQqB,EAAI,IAIhC,QAASC,GAAKrF,EAAKvG,EAAG2L,GAClB,GAAIE,GAAMtF,EAAIvG,EACduG,GAAIvG,GAAKuG,EAAIoF,GACbpF,EAAIoF,GAAKE,EAlEb/M,EAAOD,QAAU0L,OX0rCXuB,IAAI,SAAS/L,EAAQjB,EAAOD,GY7rClC,YAiBA,SAASkN,GAAkBhI,EAAuBE,GAC9C,GAAI+H,GAAMC,EAAiBlI,EAAGE,GAC1BiI,EAAOC,EAAwBpI,GAC/BqI,EAAOD,EAAwBlI,EAEnC,OAAO+H,GAAME,EAAOE,EAnBxB,GAAIH,GAAmBlM,EAAQ,uBAC3BoM,EAA0BpM,EAAQ,8BAqBtCjB,GAAOD,QAAUkN,IZgsCdM,sBAAsB,GAAGC,8BAA8B,KAAKC,IAAI,SAASxM,EAAQjB,EAAOD,GaztC3F,YAgBA,SAASoN,GAAiBlI,EAAsBE,GAG5C,GAAIF,EAAE1D,QAAU,GAAK0D,EAAE1D,SAAW4D,EAAE5D,OAChC,MAAOgJ,IAeX,KAAK,GARDmD,GAAQpD,EAAKrF,GACb0I,EAAQrD,EAAKnF,GACbyD,EAAM,EAMD1H,EAAI,EAAGA,EAAI+D,EAAE1D,OAAQL,IAC1B0H,IAAQ3D,EAAE/D,GAAKwM,IAAUvI,EAAEjE,GAAKyM,EAMpC,IAAIC,GAAoB3I,EAAE1D,OAAS,CAGnC,OAAOqH,GAAMgF,EA1CjB,GAAItD,GAAOrJ,EAAQ,SA6CnBjB,GAAOD,QAAUoN,Ib4tCdU,SAAS,IAAIC,IAAI,SAAS7M,EAAQjB,EAAOD,Gc5wC5C,YAeA,SAASsN,GAAwBpI,GAE7B,GAAI8I,GAAkBC,EAAe/I,EACrC,OAAIgJ,OAAMF,GAA2BxD,IAC9BpB,KAAKsD,KAAKsB,GAhBrB,GAAIC,GAAiB/M,EAAQ,oBAmB7BjB,GAAOD,QAAUsN,IdixCda,oBAAoB,KAAKC,IAAI,SAASlN,EAAQjB,EAAOD,GevyCxD,YAqBA,SAASiO,GAAe/I,GAEpB,GAAIA,EAAE1D,QAAU,EAAK,MAAOgJ,IAE5B,IAAI6D,GAA4BC,EAAsBpJ,EAAG,GAKrD2I,EAAoB3I,EAAE1D,OAAS,CAGnC,OAAO6M,GAA4BR,EA9BvC,GAAIS,GAAwBpN,EAAQ,6BAiCpCjB,GAAOD,QAAUiO,If4yCdM,6BAA6B,KAAKC,IAAI,SAAStN,EAAQjB,EAAOD,GgBh1CjE,YAoBA,SAASyO,GAAkBvJ,GAEvB,GAAIwJ,GAAIC,EAASzJ,EACjB,OAAIgJ,OAAMQ,GAAa,EAChBtF,KAAKsD,KAAKgC,GArBrB,GAAIC,GAAWzN,EAAQ,aAwBvBjB,GAAOD,QAAUyO,IhBq1CdG,aAAa,KAAKC,IAAI,SAAS3N,EAAQjB,EAAOD,GiBh3CjD,YAmBA,SAAS6I,GAAI3D,GAiBT,IAAK,GALD4J,GAGAC,EAXAlG,EAAM,EAKNmG,EAAoB,EAQf7N,EAAI,EAAGA,EAAI+D,EAAE1D,OAAQL,IAE1B2N,EAAwB5J,EAAE/D,GAAK6N,EAK/BD,EAAUlG,EAAMiG,EAOhBE,EAAoBD,EAAUlG,EAAMiG,EAIpCjG,EAAMkG,CAGV,OAAOlG,GAGX5I,EAAOD,QAAU6I,OjBo3CXoG,IAAI,SAAS/N,EAAQjB,EAAOD,GkBh7ClC,YAmBA,SAASsO,GAAsBpJ,EAAuBtE,GAIlD,IAAK,GAHDsO,GAAY3E,EAAKrF,GACjB2D,EAAM,EAED1H,EAAI,EAAGA,EAAI+D,EAAE1D,OAAQL,IAC1B0H,GAAOO,KAAKI,IAAItE,EAAE/D,GAAK+N,EAAWtO,EAGtC,OAAOiI,GAxBX,GAAI0B,GAAOrJ,EAAQ,SA2BnBjB,GAAOD,QAAUsO,IlBm7CdR,SAAS,IAAIqB,IAAI,SAASjO,EAAQjB,EAAOD,GmBj9C5C,YAkBA,SAAS2O,GAASzJ,GAEd,MAAiB,KAAbA,EAAE1D,OAAuBgJ,IAItB8D,EAAsBpJ,EAAG,GAAKA,EAAE1D,OArB3C,GAAI8M,GAAwBpN,EAAQ,6BAwBpCjB,GAAOD,QAAU2O,InBs9CdJ,6BAA6B,KAAKa,IAAI,SAASlO,EAAQjB,EAAOD,GoBj/CjE,YA0BA,SAASqP,GAAOnK,EAAcqF,EAAiBkE,GAC3C,OAAQvJ,EAAIqF,GAAQkE,EAGxBxO,EAAOD,QAAUqP,OpBq/CXC,IAAI,SAASpO,EAAQjB,EAAOD,IqBlhDlC,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,GACA,kBAAAE,IAAAA,EAAAC,IAAAD,GAAA,WAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,SACAhP,KAAA,SAAAR,GAAA,YAEA,SAAAqC,GAAApB,EAAA2I,GACA,MAAA3I,GAAA2I,KAAA3I,EAAA2I,EAAA,EAAA3I,GAAA2I,EAAA,EAAAY,IAGA,QAAAiF,GAAA3D,GAEA,MADA,KAAAA,EAAAtK,SAAAsK,EAAA4D,EAAA5D,KAEAN,KAAA,SAAAvK,EAAAiE,EAAAyK,EAAAC,GAGA,IAFA,MAAAD,IAAAA,EAAA,GACA,MAAAC,IAAAA,EAAA3O,EAAAO,QACAmO,EAAAC,GAAA,CACA,GAAAC,GAAAF,EAAAC,IAAA,CACA9D,GAAA7K,EAAA4O,GAAA3K,GAAA,EAAAyK,EAAAE,EAAA,EACAD,EAAAC,EAEA,MAAAF,IAEAlE,MAAA,SAAAxK,EAAAiE,EAAAyK,EAAAC,GAGA,IAFA,MAAAD,IAAAA,EAAA,GACA,MAAAC,IAAAA,EAAA3O,EAAAO,QACAmO,EAAAC,GAAA,CACA,GAAAC,GAAAF,EAAAC,IAAA,CACA9D,GAAA7K,EAAA4O,GAAA3K,GAAA,EAAA0K,EAAAC,EACAF,EAAAE,EAAA,EAEA,MAAAF,KAKA,QAAAD,GAAA3P,GACA,MAAA,UAAAuE,EAAAY,GACA,MAAA7C,GAAAtC,EAAAuE,GAAAY,IAQA,QAAA4K,GAAA7O,EAAA2I,GACA,MAAAA,GAAA3I,KAAA2I,EAAA3I,EAAA,EAAA2I,GAAA3I,EAAA,EAAAuJ,IAGA,QAAAuF,GAAA7K,GACA,MAAA,QAAAA,EAAAsF,KAAAtF,EAGA,QAAAyJ,GAAAqB,EAAAjQ,GACA,GAEAkB,GACAqD,EAHA1D,EAAAoP,EAAAxO,OACAmI,EAAA,EAGA7I,EAAA,EACAK,KACA2L,EAAA,CAEA,IAAA,MAAA/M,EACA,OAAAoB,EAAAP,GACAsN,MAAAjN,EAAA8O,EAAAC,EAAA7O,OACAmD,EAAArD,EAAA0I,EACAA,GAAArF,IAAAwI,EACAhM,GAAAwD,GAAArD,EAAA0I,QAMA,QAAAxI,EAAAP,GACAsN,MAAAjN,EAAA8O,EAAAhQ,EAAAiQ,EAAA7O,GAAAA,EAAA6O,OACA1L,EAAArD,EAAA0I,EACAA,GAAArF,IAAAwI,EACAhM,GAAAwD,GAAArD,EAAA0I,GAKA,IAAAmD,EAAA,EAAA,MAAAhM,IAAAgM,EAAA,GAGA,QAAAmD,GAAAD,EAAAjQ,GACA,GAAA2O,GAAAC,EAAAqB,EAAAjQ,EACA,OAAA2O,GAAAtF,KAAAsD,KAAAgC,GAAAA,EAGA,QAAAwB,GAAAF,EAAAjQ,GACA,GAEAkB,GACA2I,EACAuG,EAJAhP,KACAP,EAAAoP,EAAAxO,MAKA,IAAA,MAAAzB,EAAA,CACA,OAAAoB,EAAAP,GAAA,GAAA,OAAAgJ,EAAAoG,EAAA7O,KAAAyI,GAAAA,EAAA,CAAA3I,EAAAkP,EAAAvG,CAAA,OACA,OAAAzI,EAAAP,GAAA,OAAAgJ,EAAAoG,EAAA7O,MACAF,EAAA2I,IAAA3I,EAAA2I,GACAuG,EAAAvG,IAAAuG,EAAAvG,QAIA,CACA,OAAAzI,EAAAP,GAAA,GAAA,OAAAgJ,EAAA7J,EAAAiQ,EAAA7O,GAAAA,EAAA6O,KAAApG,GAAAA,EAAA,CAAA3I,EAAAkP,EAAAvG,CAAA,OACA,OAAAzI,EAAAP,GAAA,OAAAgJ,EAAA7J,EAAAiQ,EAAA7O,GAAAA,EAAA6O,MACA/O,EAAA2I,IAAA3I,EAAA2I,GACAuG,EAAAvG,IAAAuG,EAAAvG,IAIA,OAAA3I,EAAAkP,GAQA,QAAAC,GAAAlL,GACA,MAAA,YACA,MAAAA,IAIA,QAAAmL,GAAAnL,GACA,MAAAA,GAGA,QAAAkC,GAAAkJ,EAAAC,EAAAC,GACAF,GAAAA,EAAAC,GAAAA,EAAAC,GAAA5P,EAAAmF,UAAAvE,QAAA,GAAA+O,EAAAD,EAAAA,EAAA,EAAA,GAAA1P,EAAA,EAAA,GAAA4P,CAMA,KAJA,GAAArP,MACAP,EAAA,EAAAwI,KAAAT,IAAA,EAAAS,KAAA4C,MAAAuE,EAAAD,GAAAE,IACApJ,EAAA,GAAA2D,OAAAnK,KAEAO,EAAAP,GACAwG,EAAAjG,GAAAmP,EAAAnP,EAAAqP,CAGA,OAAApJ,GAMA,QAAAI,GAAA8I,EAAAC,EAAAE,GACA,GAAAD,GAAAE,EAAAJ,EAAAC,EAAAE,EACA,OAAArJ,GACAgC,KAAA4C,KAAAsE,EAAAE,GAAAA,EACApH,KAAAuC,MAAA4E,EAAAC,GAAAA,EAAAA,EAAA,EACAA,GAIA,QAAAE,GAAAJ,EAAAC,EAAAE,GACA,GAAAE,GAAAvH,KAAAC,IAAAkH,EAAAD,GAAAlH,KAAAT,IAAA,EAAA8H,GACAG,EAAAxH,KAAAI,IAAA,GAAAJ,KAAAuC,MAAAvC,KAAAoD,IAAAmE,GAAAvH,KAAAyH,OACAC,EAAAH,EAAAC,CAIA,OAHAE,IAAAC,EAAAH,GAAA,GACAE,GAAAE,EAAAJ,GAAA,EACAE,GAAAG,IAAAL,GAAA,GACAL,EAAAD,GAAAM,EAAAA,EAGA,QAAAM,GAAAC,GACA,MAAA/H,MAAA4C,KAAA5C,KAAAoD,IAAA2E,EAAA3P,QAAA4H,KAAAgI,KAAA,EAGA,QAAAC,KAKA,QAAAA,GAAAzO,GACA,GAAAzB,GAEA+D,EADAtE,EAAAgC,EAAApB,OAEA2P,EAAA,GAAApG,OAAAnK,EAEA,KAAAO,EAAA,EAAAA,EAAAP,IAAAO,EACAgQ,EAAAhQ,GAAA+E,EAAAtD,EAAAzB,GAAAA,EAAAyB,EAGA,IAAA0O,GAAArK,EAAAkK,GACAI,EAAAD,EAAA,GACAE,EAAAF,EAAA,GACAG,EAAAC,EAAAP,EAAAI,EAAAC,EAGAzG,OAAAC,QAAAyG,KAAAA,EAAAjK,EAAA+J,EAAAC,EAAAC,GAIA,KADA,GAAA9H,GAAA8H,EAAAjQ,OACAiQ,EAAA,IAAAF,GAAAE,EAAAE,UAAAhI,CACA,MAAA8H,EAAA9H,EAAA,IAAA6H,GAAAC,EAAAxF,QAAAtC,CAEA,IACAiI,GADAC,EAAA,GAAA9G,OAAApB,EAAA,EAIA,KAAAxI,EAAA,EAAAA,GAAAwI,IAAAxI,EACAyQ,EAAAC,EAAA1Q,MACAyQ,EAAAL,GAAApQ,EAAA,EAAAsQ,EAAAtQ,EAAA,GAAAoQ,EACAK,EAAAJ,GAAArQ,EAAAwI,EAAA8H,EAAAtQ,GAAAqQ,CAIA,KAAArQ,EAAA,EAAAA,EAAAP,IAAAO,EACA+D,EAAAiM,EAAAhQ,GACAoQ,GAAArM,GAAAA,GAAAsM,GACAK,EAAAC,EAAAL,EAAAvM,EAAA,EAAAyE,IAAA5C,KAAAnE,EAAAzB,GAIA,OAAA0Q,GA7CA,GAAA3L,GAAAmK,EACApJ,EAAAiJ,EACAwB,EAAAR,CA0DA,OAZAG,GAAAnL,MAAA,SAAAJ,GACA,MAAAC,WAAAvE,QAAA0E,EAAA,kBAAAJ,GAAAA,EAAAsK,EAAAtK,GAAAuL,GAAAnL,GAGAmL,EAAApK,OAAA,SAAAnB,GACA,MAAAC,WAAAvE,QAAAyF,EAAA,kBAAAnB,GAAAA,EAAAsK,GAAAtK,EAAA,GAAAA,EAAA,KAAAuL,GAAApK,GAGAoK,EAAAU,WAAA,SAAAjM,GACA,MAAAC,WAAAvE,QAAAkQ,EAAA,kBAAA5L,GAAAA,EAAAsK,EAAArF,MAAAC,QAAAlF,GAAAgD,EAAAvH,KAAAuE,GAAAA,GAAAuL,GAAAK,GAGAL,EAGA,QAAA1G,GAAAqF,EAAAnF,EAAA9K,GAEA,GADA,MAAAA,IAAAA,EAAAgQ,GACAnP,EAAAoP,EAAAxO,OAAA,CACA,IAAAqJ,GAAAA,IAAA,GAAAjK,EAAA,EAAA,OAAAb,EAAAiQ,EAAA,GAAA,EAAAA,EACA,IAAAnF,GAAA,EAAA,OAAA9K,EAAAiQ,EAAApP,EAAA,GAAAA,EAAA,EAAAoP,EACA,IAAApP,GACAoR,GAAApR,EAAA,GAAAiK,EACA1J,EAAAiI,KAAAuC,MAAAqG,GACA/Q,GAAAlB,EAAAiQ,EAAA7O,GAAAA,EAAA6O,GACApG,GAAA7J,EAAAiQ,EAAA7O,EAAA,GAAAA,EAAA,EAAA6O,EACA,OAAA/O,IAAA2I,EAAA3I,IAAA+Q,EAAA7Q,IAGA,QAAA8Q,GAAAd,EAAAtE,EAAAlE,GAEA,MADAwI,GAAA9M,EAAA9C,KAAA4P,EAAApB,GAAAlE,KAAAxJ,GACA+G,KAAA4C,MAAArD,EAAAkE,IAAA,GAAAlC,EAAAwG,EAAA,KAAAxG,EAAAwG,EAAA,MAAA/H,KAAAI,IAAA2H,EAAA3P,UAAA,KAGA,QAAA0Q,GAAAf,EAAAtE,EAAAlE,GACA,MAAAS,MAAA4C,MAAArD,EAAAkE,IAAA,IAAAoD,EAAAkB,GAAA/H,KAAAI,IAAA2H,EAAA3P,UAAA,KAGA,QAAAmH,GAAAqH,EAAAjQ,GACA,GAEAkB,GACA2I,EAHAzI,KACAP,EAAAoP,EAAAxO,MAIA,IAAA,MAAAzB,EAAA,CACA,OAAAoB,EAAAP,GAAA,GAAA,OAAAgJ,EAAAoG,EAAA7O,KAAAyI,GAAAA,EAAA,CAAA3I,EAAA2I,CAAA,OACA,OAAAzI,EAAAP,GAAA,OAAAgJ,EAAAoG,EAAA7O,KAAAyI,EAAA3I,IAAAA,EAAA2I,OAGA,CACA,OAAAzI,EAAAP,GAAA,GAAA,OAAAgJ,EAAA7J,EAAAiQ,EAAA7O,GAAAA,EAAA6O,KAAApG,GAAAA,EAAA,CAAA3I,EAAA2I,CAAA,OACA,OAAAzI,EAAAP,GAAA,OAAAgJ,EAAA7J,EAAAiQ,EAAA7O,GAAAA,EAAA6O,KAAApG,EAAA3I,IAAAA,EAAA2I,GAGA,MAAA3I,GAGA,QAAAsJ,GAAAyF,EAAAjQ,GACA,GAEAkB,GAFAH,EAAA,EACAF,EAAAoP,EAAAxO,OAEAL,KACA2L,EAAAlM,CAEA,IAAA,MAAAb,EACA,OAAAoB,EAAAP,GAAAsN,MAAAjN,EAAA8O,EAAAC,EAAA7O,OAAA2L,EAAAhM,GAAAG,MAIA,QAAAE,EAAAP,GAAAsN,MAAAjN,EAAA8O,EAAAhQ,EAAAiQ,EAAA7O,GAAAA,EAAA6O,OAAAlD,EAAAhM,GAAAG,CAGA,IAAA6L,EAAA,MAAAhM,GAAAgM,EAGA,QAAAqF,GAAAnC,EAAAjQ,GACA,GAEAkB,GAFAmR,KACAxR,EAAAoP,EAAAxO,OAEAL,IAEA,IAAA,MAAApB,EACA,OAAAoB,EAAAP,GAAAsN,MAAAjN,EAAA8O,EAAAC,EAAA7O,MAAAiR,EAAArL,KAAA9F,OAIA,QAAAE,EAAAP,GAAAsN,MAAAjN,EAAA8O,EAAAhQ,EAAAiQ,EAAA7O,GAAAA,EAAA6O,MAAAoC,EAAArL,KAAA9F,EAGA,OAAA0J,GAAAyH,EAAAvG,KAAAxJ,GAAA,IAGA,QAAAgQ,GAAAC,GAQA,IAPA,GACA3I,GAGA4I,EACAvC,EALApP,EAAA0R,EAAA9Q,OAEAL,KACA2L,EAAA,IAIA3L,EAAAP,GAAAkM,GAAAwF,EAAAnR,GAAAK,MAGA,KAFA+Q,EAAA,GAAAxH,OAAA+B,KAEAlM,GAAA,GAGA,IAFAoP,EAAAsC,EAAA1R,GACA+I,EAAAqG,EAAAxO,SACAmI,GAAA,GACA4I,IAAAzF,GAAAkD,EAAArG,EAIA,OAAA4I,GAGA,QAAA1F,GAAAmD,EAAAjQ,GACA,GAEAkB,GACA2I,EAHAzI,KACAP,EAAAoP,EAAAxO,MAIA,IAAA,MAAAzB,EAAA,CACA,OAAAoB,EAAAP,GAAA,GAAA,OAAAgJ,EAAAoG,EAAA7O,KAAAyI,GAAAA,EAAA,CAAA3I,EAAA2I,CAAA,OACA,OAAAzI,EAAAP,GAAA,OAAAgJ,EAAAoG,EAAA7O,KAAAF,EAAA2I,IAAA3I,EAAA2I,OAGA,CACA,OAAAzI,EAAAP,GAAA,GAAA,OAAAgJ,EAAA7J,EAAAiQ,EAAA7O,GAAAA,EAAA6O,KAAApG,GAAAA,EAAA,CAAA3I,EAAA2I,CAAA,OACA,OAAAzI,EAAAP,GAAA,OAAAgJ,EAAA7J,EAAAiQ,EAAA7O,GAAAA,EAAA6O,KAAA/O,EAAA2I,IAAA3I,EAAA2I,GAGA,MAAA3I,GAGA,QAAAuR,GAAAxC,GAEA,IADA,GAAA7O,GAAA,EAAAP,EAAAoP,EAAAxO,OAAA,EAAAqJ,EAAAmF,EAAA,GAAAwC,EAAA,GAAAzH,OAAAnK,EAAA,EAAA,EAAAA,GACAO,EAAAP,GAAA4R,EAAArR,IAAA0J,EAAAA,EAAAmF,IAAA7O,GACA,OAAAqR,GAGA,QAAAC,GAAAzC,EAAA0C,GAEA,IADA,GAAAvR,GAAAuR,EAAAlR,OAAAmR,EAAA,GAAA5H,OAAA5J,GACAA,KAAAwR,EAAAxR,GAAA6O,EAAA0C,EAAAvR,GACA,OAAAwR,GAGA,QAAAC,GAAA5C,EAAAlE,GACA,GAAAlL,EAAAoP,EAAAxO,OAAA,CACA,GACAZ,GAEAiS,EAHA1R,EAAA,EAEA2L,EAAA,EAEAgG,EAAA9C,EAAAlD,EAIA,KAFAhB,IAAAA,EAAAzJ,KAEAlB,EAAAP,IAAAkL,EAAA+G,EAAA7C,EAAA7O,GAAA2R,GAAA,GAAA,IAAAhH,EAAAgH,EAAAA,MAAAA,EAAAD,EAAA/F,EAAA3L,EAEA,OAAA,KAAA2K,EAAAgH,EAAAA,GAAAhG,EAAA,QAGA,QAAAiG,GAAA/C,EAAAgD,EAAAC,GAKA,IAJA,GACAtS,GACAQ,EAFAwI,GAAA,MAAAsJ,EAAAjD,EAAAxO,OAAAyR,IAAAD,EAAA,MAAAA,EAAA,GAAAA,GAIArJ,GACAxI,EAAAiI,KAAA8J,SAAAvJ,IAAA,EACAhJ,EAAAqP,EAAArG,EAAAqJ,GACAhD,EAAArG,EAAAqJ,GAAAhD,EAAA7O,EAAA6R,GACAhD,EAAA7O,EAAA6R,GAAArS,CAGA,OAAAqP,GAGA,QAAAnH,GAAAmH,EAAAjQ,GACA,GAEAkB,GAFAH,EAAA,EACAF,EAAAoP,EAAAxO,OAEAL,IAEA,IAAA,MAAApB,EACA,OAAAoB,EAAAP,IAAAK,GAAA+O,EAAA7O,MAAAL,GAAAG,OAIA,QAAAE,EAAAP,IAAAK,GAAAlB,EAAAiQ,EAAA7O,GAAAA,EAAA6O,MAAAlP,GAAAG,EAGA,OAAAH,GAGA,QAAAqS,GAAAC,GACA,KAAAxS,EAAAwS,EAAA5R,QAAA,QACA,KAAA,GAAAL,MAAAwI,EAAAkD,EAAAuG,EAAA5R,GAAA2R,EAAA,GAAApI,OAAApB,KAAAxI,EAAAwI,GACA,IAAA,GAAA/I,GAAAkM,KAAAuG,EAAAF,EAAAhS,GAAA,GAAA4J,OAAAnK,KAAAkM,EAAAlM,GACAyS,EAAAvG,GAAAsG,EAAAtG,GAAA3L,EAGA,OAAAgS,GAGA,QAAA3R,GAAA8C,GACA,MAAAA,GAAA9C,OAGA,QAAA8R,KACA,MAAAH,GAAApN,WAjYA,GAAAwN,GAAA9D,EAAApN,GACAyP,EAAAyB,EAAA9H,MACA+H,EAAAD,EAAA/H,KAyEAwE,EAAAjF,MAAA0I,UAEA3K,EAAAkH,EAAAlH,MACAzE,EAAA2L,EAAA3L,IA0BA0M,EAAA3H,KAAAsD,KAAA,IACAsE,EAAA5H,KAAAsD,KAAA,IACAuE,EAAA7H,KAAAsD,KAAA,EA0RA1M,GAAA0T,OAAA5B,EACA9R,EAAA8R,YAAAA,EACA9R,EAAAwT,WAAAA,EACAxT,EAAAqC,UAAAA,EACArC,EAAAyP,SAAAA,EACAzP,EAAA8P,WAAAA,EACA9P,EAAAiQ,UAAAA,EACAjQ,EAAAkQ,OAAAA,EACAlQ,EAAAqR,UAAAA,EACArR,EAAA2T,0BAAA1B,EACAjS,EAAA4T,eAAA1B,EACAlS,EAAA6T,iBAAA3C,EACAlR,EAAA2I,IAAAA,EACA3I,EAAAuK,KAAAA,EACAvK,EAAAmS,OAAAA,EACAnS,EAAAqS,MAAAA,EACArS,EAAA6M,IAAAA,EACA7M,EAAAwS,MAAAA,EACAxS,EAAAyS,QAAAA,EACAzS,EAAA2K,SAAAA,EACA3K,EAAAoH,MAAAA,EACApH,EAAA4S,KAAAA,EACA5S,EAAA+S,QAAAA,EACA/S,EAAA6I,IAAAA,EACA7I,EAAAwH,MAAAA,EACAxH,EAAA0Q,SAAAA,EACA1Q,EAAAmT,UAAAA,EACAnT,EAAA2O,SAAAA,EACA3O,EAAAsT,IAAAA,EAEAlN,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,WrBuhDM4N,IAAI,SAAS5S,EAAQjB,EAAOD,IsBn+DlC,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,GACA,kBAAAE,IAAAA,EAAAC,IAAAD,GAAA,WAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,SACAhP,KAAA,SAAAR,GAAA,YAIA,SAAA+T,MAkDA,QAAA1P,GAAA2P,EAAAjU,GACA,GAAAsE,GAAA,GAAA0P,EAGA,IAAAC,YAAAD,GAAAC,EAAAC,KAAA,SAAA/N,EAAAgO,GAAA7P,EAAA8P,IAAAD,EAAAhO,SAGA,IAAA6E,MAAAC,QAAAgJ,GAAA,CACA,GAEAjT,GAFAI,KACAP,EAAAoT,EAAAxS,MAGA,IAAA,MAAAzB,EAAA,OAAAoB,EAAAP,GAAAyD,EAAA8P,IAAAhT,EAAA6S,EAAA7S,QACA,QAAAA,EAAAP,GAAAyD,EAAA8P,IAAApU,EAAAgB,EAAAiT,EAAA7S,GAAAA,EAAA6S,GAAAjT,OAIA,IAAAiT,EAAA,IAAA,GAAAE,KAAAF,GAAA3P,EAAA8P,IAAAD,EAAAF,EAAAE,GAEA,OAAA7P,GAGA,QAAA+P,KAOA,QAAAjO,GAAA6J,EAAAqE,EAAAC,EAAAC,GACA,GAAAF,GAAAG,EAAAhT,OAAA,MAAA,OAAAiT,EACAA,EAAAzE,GAAA,MAAA0E,EACA1E,EAAAnE,KAAA6I,GACA1E,CAWA,KATA,GAGA2E,GACAzO,EAEAiL,EANAhQ,KACAP,EAAAoP,EAAAxO,OACA0S,EAAAM,EAAAH,KAGAO,EAAAvQ,IAEAwQ,EAAAP,MAEAnT,EAAAP,IACAuQ,EAAAyD,EAAAE,IAAAH,EAAAT,EAAAhO,EAAA8J,EAAA7O,IAAA,KACAgQ,EAAApK,KAAAb,GAEA0O,EAAAT,IAAAQ,GAAAzO,GAQA,OAJA0O,GAAAX,KAAA,SAAA9C,EAAA+C,GACAK,EAAAM,EAAAX,EAAA/N,EAAAgL,EAAAkD,EAAAC,EAAAC,MAGAM,EAGA,QAAAE,GAAA1Q,EAAAgQ,GACA,KAAAA,EAAAG,EAAAhT,OAAA,MAAA6C,EACA,IAAA2L,GAAAgF,EAAAC,EAAAZ,EAAA,EAGA,OAFA,OAAAI,GAAAJ,GAAAG,EAAAhT,OAAAwO,EAAA3L,EAAA0Q,WACA/E,KAAA3L,EAAA4P,KAAA,SAAAvF,EAAAnD,GAAAyE,EAAAjJ,MAAAmN,IAAA3I,EAAA4F,OAAA4D,EAAArG,EAAA2F,QACA,MAAAW,EAAAhF,EAAAnE,KAAA,SAAA5K,EAAA2I,GAAA,MAAAoL,GAAA/T,EAAAiT,IAAAtK,EAAAsK,OAAAlE,EAzCA,GAEA0E,GACAD,EACAL,EAJAI,KACAS,IA2CA,OAAAb,IACAJ,OAAA,SAAAhE,GAAA,MAAA7J,GAAA6J,EAAA,EAAAkF,EAAAC,IACA9Q,IAAA,SAAA2L,GAAA,MAAA7J,GAAA6J,EAAA,EAAAoF,EAAAC,IACAN,QAAA,SAAA/E,GAAA,MAAA+E,GAAA5O,EAAA6J,EAAA,EAAAoF,EAAAC,GAAA,IACAnB,IAAA,SAAA5P,GAAA,MAAAkQ,GAAAzN,KAAAzC,GAAA8P,GACAa,SAAA,SAAAK,GAAA,MAAAL,GAAAT,EAAAhT,OAAA,GAAA8T,EAAAlB,GACAM,WAAA,SAAAY,GAAA,MAAAZ,GAAAY,EAAAlB,GACAK,OAAA,SAAA1U,GAAA,MAAA0U,GAAA1U,EAAAqU,IAIA,QAAAc,KACA,SAGA,QAAAC,GAAAnB,EAAAE,EAAAhO,GACA8N,EAAAE,GAAAhO,EAGA,QAAAkP,KACA,MAAA/Q,KAGA,QAAAgR,GAAAhR,EAAA6P,EAAAhO,GACA7B,EAAA8P,IAAAD,EAAAhO,GAGA,QAAAqP,MAoBA,QAAApB,GAAAH,EAAAjU,GACA,GAAAoU,GAAA,GAAAoB,EAGA,IAAAvB,YAAAuB,GAAAvB,EAAAC,KAAA,SAAA/N,GAAAiO,EAAAqB,IAAAtP,SAGA,IAAA8N,EAAA,CACA,GAAA7S,MAAAP,EAAAoT,EAAAxS,MACA,IAAA,MAAAzB,EAAA,OAAAoB,EAAAP,GAAAuT,EAAAqB,IAAAxB,EAAA7S,QACA,QAAAA,EAAAP,GAAAuT,EAAAqB,IAAAzV,EAAAiU,EAAA7S,GAAAA,EAAA6S,IAGA,MAAAG,GAGA,QAAAK,GAAAnQ,GACA,GAAAmQ,KACA,KAAA,GAAAN,KAAA7P,GAAAmQ,EAAAzN,KAAAmN,EACA,OAAAM,GAGA,QAAArD,GAAA9M,GACA,GAAA8M,KACA,KAAA,GAAA+C,KAAA7P,GAAA8M,EAAApK,KAAA1C,EAAA6P,GACA,OAAA/C,GAGA,QAAA4D,GAAA1Q,GACA,GAAA0Q,KACA,KAAA,GAAAb,KAAA7P,GAAA0Q,EAAAhO,MAAAmN,IAAAA,EAAAhO,MAAA7B,EAAA6P,IACA,OAAAa,GArMA,GAAAU,GAAA,GAIA1B,GAAAN,UAAApP,EAAAoP,WACAiC,YAAA3B,EACA4B,IAAA,SAAAzB,GACA,MAAAuB,GAAAvB,IAAA1T,OAEAsU,IAAA,SAAAZ,GACA,MAAA1T,MAAAiV,EAAAvB,IAEAC,IAAA,SAAAD,EAAAhO,GAEA,MADA1F,MAAAiV,EAAAvB,GAAAhO,EACA1F,MAEAmD,OAAA,SAAAuQ,GACA,GAAA0B,GAAAH,EAAAvB,CACA,OAAA0B,KAAApV,aAAAA,MAAAoV,IAEAC,MAAA,WACA,IAAA,GAAAD,KAAApV,MAAAoV,EAAA,KAAAH,SAAAjV,MAAAoV,IAEApB,KAAA,WACA,GAAAA,KACA,KAAA,GAAAoB,KAAApV,MAAAoV,EAAA,KAAAH,GAAAjB,EAAAzN,KAAA6O,EAAA9M,MAAA,GACA,OAAA0L,IAEArD,OAAA,WACA,GAAAA,KACA,KAAA,GAAAyE,KAAApV,MAAAoV,EAAA,KAAAH,GAAAtE,EAAApK,KAAAvG,KAAAoV,GACA,OAAAzE,IAEA4D,QAAA,WACA,GAAAA,KACA,KAAA,GAAAa,KAAApV,MAAAoV,EAAA,KAAAH,GAAAV,EAAAhO,MAAAmN,IAAA0B,EAAA9M,MAAA,GAAA5C,MAAA1F,KAAAoV,IACA,OAAAb,IAEAzM,KAAA,WACA,GAAAA,GAAA,CACA,KAAA,GAAAsN,KAAApV,MAAAoV,EAAA,KAAAH,KAAAnN,CACA,OAAAA,IAEAwN,MAAA,WACA,IAAA,GAAAF,KAAApV,MAAA,GAAAoV,EAAA,KAAAH,EAAA,OAAA,CACA,QAAA,GAEAxB,KAAA,SAAAlU,GACA,IAAA,GAAA6V,KAAApV,MAAAoV,EAAA,KAAAH,GAAA1V,EAAAS,KAAAoV,GAAAA,EAAA9M,MAAA,GAAAtI,OAoGA,IAAAuV,GAAA1R,EAAAoP,SAEA8B,GAAA9B,UAAAU,EAAAV,WACAiC,YAAAH,EACAI,IAAAI,EAAAJ,IACAH,IAAA,SAAAtP,GAGA,MAFAA,IAAA,GACA1F,KAAAiV,EAAAvP,GAAAA,EACA1F,MAEAmD,OAAAoS,EAAApS,OACAkS,MAAAE,EAAAF,MACA1E,OAAA4E,EAAAvB,KACAlM,KAAAyN,EAAAzN,KACAwN,MAAAC,EAAAD,MACA7B,KAAA8B,EAAA9B,MAqCAjU,EAAAoU,KAAAA,EACApU,EAAAmU,IAAAA,EACAnU,EAAAqE,IAAAA,EACArE,EAAAwU,KAAAA,EACAxU,EAAAmR,OAAAA,EACAnR,EAAA+U,QAAAA,EAEA3O,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,WtBw+DM8P,IAAI,SAAS9U,EAAQjB,EAAOD,IuB7rElC,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,GACA,kBAAAE,IAAAA,EAAAC,IAAAD,GAAA,WAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,SACAhP,KAAA,SAAAR,GAAA,YAEA,SAAAE,GAAAwV,EAAAnG,EAAAkE,GACAiC,EAAAjC,UAAAlE,EAAAkE,UAAAA,EACAA,EAAAiC,YAAAA,EAGA,QAAAO,GAAAC,EAAAC,GACA,GAAA1C,GAAArN,OAAAgQ,OAAAF,EAAAzC,UACA,KAAA,GAAAS,KAAAiC,GAAA1C,EAAAS,GAAAiC,EAAAjC,EACA,OAAAT,GAGA,QAAA4C,MA6KA,QAAAvU,GAAA6D,GACA,GAAAgE,EAEA,OADAhE,IAAAA,EAAA,IAAA2Q,OAAAtQ,eACA2D,EAAA4M,EAAAC,KAAA7Q,KAAAgE,EAAA8M,SAAA9M,EAAA,GAAA,IAAA,GAAA+M,GAAA/M,GAAA,EAAA,GAAAA,GAAA,EAAA,IAAAA,GAAA,EAAA,GAAA,IAAAA,GAAA,GAAAA,IAAA,EAAA,GAAAA,EAAA,KACAA,EAAAgN,EAAAH,KAAA7Q,IAAAiR,EAAAH,SAAA9M,EAAA,GAAA,MACAA,EAAAkN,EAAAL,KAAA7Q,IAAA,GAAA+Q,GAAA/M,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAA,IACAA,EAAAmN,EAAAN,KAAA7Q,IAAA,GAAA+Q,GAAA,IAAA/M,EAAA,GAAA,IAAA,IAAAA,EAAA,GAAA,IAAA,IAAAA,EAAA,GAAA,IAAA,IACAA,EAAAoN,EAAAP,KAAA7Q,IAAAqR,EAAArN,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,KACAA,EAAAsN,EAAAT,KAAA7Q,IAAAqR,EAAA,IAAArN,EAAA,GAAA,IAAA,IAAAA,EAAA,GAAA,IAAA,IAAAA,EAAA,GAAA,IAAAA,EAAA,KACAA,EAAAuN,EAAAV,KAAA7Q,IAAAwR,EAAAxN,EAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,GAAA,IAAA,IACAA,EAAAyN,EAAAZ,KAAA7Q,IAAAwR,EAAAxN,EAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,GAAA,IAAAA,EAAA,IACA0N,EAAAC,eAAA3R,GAAAiR,EAAAS,EAAA1R,IACA,gBAAAA,EAAA,GAAA+Q,GAAAlM,IAAAA,IAAAA,IAAA,GACA,KAGA,QAAAoM,GAAAhW,GACA,MAAA,IAAA8V,GAAA9V,GAAA,GAAA,IAAAA,GAAA,EAAA,IAAA,IAAAA,EAAA,GAGA,QAAAoW,GAAAnW,EAAAT,EAAAwJ,EAAA3I,GAEA,MADAA,IAAA,IAAAJ,EAAAT,EAAAwJ,EAAAY,KACA,GAAAkM,GAAA7V,EAAAT,EAAAwJ,EAAA3I,GAGA,QAAAsW,GAAAxW,GAEA,MADAA,aAAAsV,KAAAtV,EAAAe,EAAAf,IACAA,GACAA,EAAAA,EAAAyW,MACA,GAAAd,GAAA3V,EAAAF,EAAAE,EAAAX,EAAAW,EAAA6I,EAAA7I,EAAA0W,UAFA,GAAAf,GAKA,QAAAc,GAAA3W,EAAAT,EAAAwJ,EAAA6N,GACA,MAAA,KAAA1R,UAAAvE,OAAA+V,EAAA1W,GAAA,GAAA6V,GAAA7V,EAAAT,EAAAwJ,EAAA,MAAA6N,EAAA,EAAAA,GAGA,QAAAf,GAAA7V,EAAAT,EAAAwJ,EAAA6N,GACAjX,KAAAK,GAAAA,EACAL,KAAAJ,GAAAA,EACAI,KAAAoJ,GAAAA,EACApJ,KAAAiX,SAAAA,EA+BA,QAAAN,GAAAnF,EAAAlR,EAAAQ,EAAAL,GAIA,MAHAA,IAAA,EAAA+Q,EAAAlR,EAAAQ,EAAAkJ,IACAlJ,GAAA,GAAAA,GAAA,EAAA0Q,EAAAlR,EAAA0J,IACA1J,GAAA,IAAAkR,EAAAxH,KACA,GAAAkN,GAAA1F,EAAAlR,EAAAQ,EAAAL,GAGA,QAAA0W,GAAA5W,GACA,GAAAA,YAAA2W,GAAA,MAAA,IAAAA,GAAA3W,EAAAiR,EAAAjR,EAAAD,EAAAC,EAAAO,EAAAP,EAAA0W,QAEA,IADA1W,YAAAsV,KAAAtV,EAAAe,EAAAf,KACAA,EAAA,MAAA,IAAA2W,EACA,IAAA3W,YAAA2W,GAAA,MAAA3W,EACAA,GAAAA,EAAAyW,KACA,IAAA3W,GAAAE,EAAAF,EAAA,IACAT,EAAAW,EAAAX,EAAA,IACAwJ,EAAA7I,EAAA6I,EAAA,IACAiD,EAAAzD,KAAAyD,IAAAhM,EAAAT,EAAAwJ,GACAjB,EAAAS,KAAAT,IAAA9H,EAAAT,EAAAwJ,GACAoI,EAAAxH,IACA1J,EAAA6H,EAAAkE,EACAvL,GAAAqH,EAAAkE,GAAA,CAUA,OATA/L,IACAkR,EAAAnR,IAAA8H,GAAAvI,EAAAwJ,GAAA9I,EAAA,GAAAV,EAAAwJ,GACAxJ,IAAAuI,GAAAiB,EAAA/I,GAAAC,EAAA,GACAD,EAAAT,GAAAU,EAAA,EACAA,GAAAQ,EAAA,GAAAqH,EAAAkE,EAAA,EAAAlE,EAAAkE,EACAmF,GAAA,IAEAlR,EAAAQ,EAAA,GAAAA,EAAA,EAAA,EAAA0Q,EAEA,GAAA0F,GAAA1F,EAAAlR,EAAAQ,EAAAP,EAAA0W,SAGA,QAAAG,GAAA5F,EAAAlR,EAAAQ,EAAAmW,GACA,MAAA,KAAA1R,UAAAvE,OAAAmW,EAAA3F,GAAA,GAAA0F,GAAA1F,EAAAlR,EAAAQ,EAAA,MAAAmW,EAAA,EAAAA,GAGA,QAAAC,GAAA1F,EAAAlR,EAAAQ,EAAAmW,GACAjX,KAAAwR,GAAAA,EACAxR,KAAAM,GAAAA,EACAN,KAAAc,GAAAA,EACAd,KAAAiX,SAAAA,EAiCA,QAAAI,GAAA7F,EAAA8F,EAAAC,GACA,MAGA,MAHA/F,EAAA,GAAA8F,GAAAC,EAAAD,GAAA9F,EAAA,GACAA,EAAA,IAAA+F,EACA/F,EAAA,IAAA8F,GAAAC,EAAAD,IAAA,IAAA9F,GAAA,GACA8F,GAcA,QAAAE,GAAAjX,GACA,GAAAA,YAAAkX,GAAA,MAAA,IAAAA,GAAAlX,EAAAO,EAAAP,EAAAE,EAAAF,EAAA6I,EAAA7I,EAAA0W,QACA,IAAA1W,YAAAmX,GAAA,CACA,GAAAlG,GAAAjR,EAAAiR,EAAAmG,CACA,OAAA,IAAAF,GAAAlX,EAAAO,EAAA8H,KAAAgP,IAAApG,GAAAjR,EAAAoP,EAAA/G,KAAAiP,IAAArG,GAAAjR,EAAAoP,EAAApP,EAAA0W,SAEA1W,YAAA2V,KAAA3V,EAAAwW,EAAAxW,GACA,IAAA6I,GAAA0O,EAAAvX,EAAAF,GACAI,EAAAqX,EAAAvX,EAAAX,GACAkB,EAAAgX,EAAAvX,EAAA6I,GACA1E,EAAAqT,GAAA,SAAA3O,EAAA,SAAA3I,EAAA,SAAAK,GAAAkX,GACApT,EAAAmT,GAAA,SAAA3O,EAAA,SAAA3I,EAAA,QAAAK,GAAAmX,GACAlM,EAAAgM,GAAA,SAAA3O,EAAA,QAAA3I,EAAA,SAAAK,GAAAoX,EACA,OAAA,IAAAT,GAAA,IAAA7S,EAAA,GAAA,KAAAF,EAAAE,GAAA,KAAAA,EAAAmH,GAAAxL,EAAA0W,SAGA,QAAAkB,GAAArX,EAAAL,EAAA2I,EAAA6N,GACA,MAAA,KAAA1R,UAAAvE,OAAAwW,EAAA1W,GAAA,GAAA2W,GAAA3W,EAAAL,EAAA2I,EAAA,MAAA6N,EAAA,EAAAA,GAGA,QAAAQ,GAAA3W,EAAAL,EAAA2I,EAAA6N,GACAjX,KAAAc,GAAAA,EACAd,KAAAS,GAAAA,EACAT,KAAAoJ,GAAAA,EACApJ,KAAAiX,SAAAA,EA0BA,QAAAc,GAAA5X,GACA,MAAAA,GAAAiY,EAAAxP,KAAAI,IAAA7I,EAAA,EAAA,GAAAA,EAAAkY,EAAAC,EAGA,QAAAC,GAAApY,GACA,MAAAA,GAAAqY,EAAArY,EAAAA,EAAAA,EAAAkY,GAAAlY,EAAAmY,GAGA,QAAAG,GAAA/T,GACA,MAAA,MAAAA,GAAA,SAAA,MAAAA,EAAA,MAAAkE,KAAAI,IAAAtE,EAAA,EAAA,KAAA,MAGA,QAAAoT,GAAApT,GACA,OAAAA,GAAA,MAAA,OAAAA,EAAA,MAAAkE,KAAAI,KAAAtE,EAAA,MAAA,MAAA,KAGA,QAAAgU,GAAAnY,GACA,GAAAA,YAAAmX,GAAA,MAAA,IAAAA,GAAAnX,EAAAiR,EAAAjR,EAAAoP,EAAApP,EAAAO,EAAAP,EAAA0W,QACA1W,aAAAkX,KAAAlX,EAAAiX,EAAAjX,GACA,IAAAiR,GAAA5I,KAAA+P,MAAApY,EAAA6I,EAAA7I,EAAAE,GAAAmY,CACA,OAAA,IAAAlB,GAAAlG,EAAA,EAAAA,EAAA,IAAAA,EAAA5I,KAAAsD,KAAA3L,EAAAE,EAAAF,EAAAE,EAAAF,EAAA6I,EAAA7I,EAAA6I,GAAA7I,EAAAO,EAAAP,EAAA0W,SAGA,QAAA4B,GAAArH,EAAA7B,EAAA7O,EAAAmW,GACA,MAAA,KAAA1R,UAAAvE,OAAA0X,EAAAlH,GAAA,GAAAkG,GAAAlG,EAAA7B,EAAA7O,EAAA,MAAAmW,EAAA,EAAAA,GAGA,QAAAS,GAAAlG,EAAA7B,EAAA7O,EAAAmW,GACAjX,KAAAwR,GAAAA,EACAxR,KAAA2P,GAAAA,EACA3P,KAAAc,GAAAA,EACAd,KAAAiX,SAAAA,EAuBA,QAAA6B,GAAAvY,GACA,GAAAA,YAAAwY,GAAA,MAAA,IAAAA,GAAAxY,EAAAiR,EAAAjR,EAAAD,EAAAC,EAAAO,EAAAP,EAAA0W,QACA1W,aAAA2V,KAAA3V,EAAAwW,EAAAxW,GACA,IAAAF,GAAAE,EAAAF,EAAA,IACAT,EAAAW,EAAAX,EAAA,IACAwJ,EAAA7I,EAAA6I,EAAA,IACAtI,GAAAkY,GAAA5P,EAAA6P,GAAA5Y,EAAA6Y,GAAAtZ,IAAAoZ,GAAAC,GAAAC,IACAC,EAAA/P,EAAAtI,EACAiK,GAAAqO,GAAAxZ,EAAAkB,GAAAuY,EAAAF,GAAAG,EACAhZ,EAAAsI,KAAAsD,KAAAnB,EAAAA,EAAAoO,EAAAA,IAAAC,EAAAtY,GAAA,EAAAA,IACA0Q,EAAAlR,EAAAsI,KAAA+P,MAAA5N,EAAAoO,GAAAP,EAAA,IAAA5O,GACA,OAAA,IAAA+O,GAAAvH,EAAA,EAAAA,EAAA,IAAAA,EAAAlR,EAAAQ,EAAAP,EAAA0W,SAGA,QAAAsC,GAAA/H,EAAAlR,EAAAQ,EAAAmW,GACA,MAAA,KAAA1R,UAAAvE,OAAA8X,EAAAtH,GAAA,GAAAuH,GAAAvH,EAAAlR,EAAAQ,EAAA,MAAAmW,EAAA,EAAAA,GAGA,QAAA8B,GAAAvH,EAAAlR,EAAAQ,EAAAmW,GACAjX,KAAAwR,GAAAA,EACAxR,KAAAM,GAAAA,EACAN,KAAAc,GAAAA,EACAd,KAAAiX,SAAAA,EA5cA,GAAAuC,GAAA,GACAC,EAAA,EAAAD,EAEAzD,EAAA,mBACAI,EAAA,mBACAE,EAAA,8DACAC,EAAA,+FACAC,EAAA,0FACAE,EAAA,2HACAC,EAAA,8FACAE,EAAA,0HACAC,GACA6C,UAAA,SACAC,aAAA,SACAC,KAAA,MACAC,WAAA,QACAC,MAAA,SACAC,MAAA,SACAC,OAAA,SACAC,MAAA,EACAC,eAAA,SACAC,KAAA,IACAC,WAAA,QACAC,MAAA,SACAC,UAAA,SACAC,UAAA,QACAC,WAAA,QACAC,UAAA,SACAC,MAAA,SACAC,eAAA,QACAC,SAAA,SACAC,QAAA,SACAC,KAAA,MACAC,SAAA,IACAC,SAAA,MACAC,cAAA,SACAC,SAAA,SACAC,UAAA,MACAC,SAAA,SACAC,UAAA,SACAC,YAAA,QACAC,eAAA,QACAC,WAAA,SACAC,WAAA,SACAC,QAAA,QACAC,WAAA,SACAC,aAAA,QACAC,cAAA,QACAC,cAAA,QACAC,cAAA,QACAC,cAAA,MACAC,WAAA,QACAC,SAAA,SACAC,YAAA,MACAC,QAAA,QACAC,QAAA,QACAC,WAAA,QACAC,UAAA,SACAC,YAAA,SACAC,YAAA,QACAC,QAAA,SACAC,UAAA,SACAC,WAAA,SACAC,KAAA,SACAC,UAAA,SACAC,KAAA,QACAC,MAAA,MACAC,YAAA,SACAC,KAAA,QACAC,SAAA,SACAC,QAAA,SACAC,UAAA,SACAC,OAAA,QACAC,MAAA,SACAC,MAAA,SACAC,SAAA,SACAC,cAAA,SACAC,UAAA,QACAC,aAAA,SACAC,UAAA,SACAC,WAAA,SACAC,UAAA,SACAC,qBAAA,SACAC,UAAA,SACAC,WAAA,QACAC,UAAA,SACAC,UAAA,SACAC,YAAA,SACAC,cAAA,QACAC,aAAA,QACAC,eAAA,QACAC,eAAA,QACAC,eAAA,SACAC,YAAA,SACAC,KAAA,MACAC,UAAA,QACAC,MAAA,SACAC,QAAA,SACAC,OAAA,QACAC,iBAAA,QACAC,WAAA,IACAC,aAAA,SACAC,aAAA,QACAC,eAAA,QACAC,gBAAA,QACAC,kBAAA,MACAC,gBAAA,QACAC,gBAAA,SACAC,aAAA,QACAC,UAAA,SACAC,UAAA,SACAC,SAAA,SACAC,YAAA,SACAC,KAAA,IACAC,QAAA,SACAC,MAAA,QACAC,UAAA,QACAC,OAAA,SACAC,UAAA,SACAC,OAAA,SACAC,cAAA,SACAC,UAAA,SACAC,cAAA,SACAC,cAAA,SACAC,WAAA,SACAC,UAAA,SACAC,KAAA,SACAC,KAAA,SACAC,KAAA,SACAC,WAAA,SACAC,OAAA,QACAC,cAAA,QACAC,IAAA,SACAC,UAAA,SACAC,UAAA,QACAC,YAAA,QACAC,OAAA,SACAC,WAAA,SACAC,SAAA,QACAC,SAAA,SACAC,OAAA,SACAC,OAAA,SACAC,QAAA,QACAC,UAAA,QACAC,UAAA,QACAC,UAAA,QACAC,KAAA,SACAC,YAAA,MACAC,UAAA,QACAC,IAAA,SACAC,KAAA,MACAC,QAAA,SACAC,OAAA,SACAC,UAAA,QACAC,OAAA,SACAC,MAAA,SACAC,MAAA,SACAC,WAAA,SACAC,OAAA,SACAC,YAAA,SAGAnjB,GAAAmW,EAAAvU,GACAwhB,YAAA,WACA,MAAA9iB,MAAAgX,MAAA8L,eAEAC,SAAA,WACA,MAAA/iB,MAAAgX,MAAA,MA+CAtX,EAAAwW,EAAAc,EAAAvB,EAAAI,GACA4D,SAAA,SAAA1O,GAEA,MADAA,GAAA,MAAAA,EAAA0O,EAAA7Q,KAAAI,IAAAyQ,EAAA1O,GACA,GAAAmL,GAAAlW,KAAAK,EAAA0K,EAAA/K,KAAAJ,EAAAmL,EAAA/K,KAAAoJ,EAAA2B,EAAA/K,KAAAiX,UAEAuC,OAAA,SAAAzO,GAEA,MADAA,GAAA,MAAAA,EAAAyO,EAAA5Q,KAAAI,IAAAwQ,EAAAzO,GACA,GAAAmL,GAAAlW,KAAAK,EAAA0K,EAAA/K,KAAAJ,EAAAmL,EAAA/K,KAAAoJ,EAAA2B,EAAA/K,KAAAiX,UAEAD,IAAA,WACA,MAAAhX,OAEA8iB,YAAA,WACA,MAAA,IAAA9iB,KAAAK,GAAAL,KAAAK,GAAA,KACA,GAAAL,KAAAJ,GAAAI,KAAAJ,GAAA,KACA,GAAAI,KAAAoJ,GAAApJ,KAAAoJ,GAAA,KACA,GAAApJ,KAAAiX,SAAAjX,KAAAiX,SAAA,GAEA8L,SAAA,WACA,GAAAtiB,GAAAT,KAAAiX,OACA,OADAxW,GAAAiN,MAAAjN,GAAA,EAAAmI,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,EAAA5L,KACA,IAAAA,EAAA,OAAA,SACAmI,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,IAAAzD,KAAAoa,MAAAhjB,KAAAK,IAAA,IAAA,KACAuI,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,IAAAzD,KAAAoa,MAAAhjB,KAAAJ,IAAA,IAAA,KACAgJ,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,IAAAzD,KAAAoa,MAAAhjB,KAAAoJ,IAAA,KACA,IAAA3I,EAAA,IAAA,KAAAA,EAAA,SAgDAf,EAAAwX,EAAAE,EAAA3B,EAAAI,GACA4D,SAAA,SAAA1O,GAEA,MADAA,GAAA,MAAAA,EAAA0O,EAAA7Q,KAAAI,IAAAyQ,EAAA1O,GACA,GAAAmM,GAAAlX,KAAAwR,EAAAxR,KAAAM,EAAAN,KAAAc,EAAAiK,EAAA/K,KAAAiX,UAEAuC,OAAA,SAAAzO,GAEA,MADAA,GAAA,MAAAA,EAAAyO,EAAA5Q,KAAAI,IAAAwQ,EAAAzO,GACA,GAAAmM,GAAAlX,KAAAwR,EAAAxR,KAAAM,EAAAN,KAAAc,EAAAiK,EAAA/K,KAAAiX,UAEAD,IAAA,WACA,GAAAxF,GAAAxR,KAAAwR,EAAA,IAAA,KAAAxR,KAAAwR,EAAA,GACAlR,EAAAoN,MAAA8D,IAAA9D,MAAA1N,KAAAM,GAAA,EAAAN,KAAAM,EACAQ,EAAAd,KAAAc,EACAyW,EAAAzW,GAAAA,EAAA,GAAAA,EAAA,EAAAA,GAAAR,EACAgX,EAAA,EAAAxW,EAAAyW,CACA,OAAA,IAAArB,GACAmB,EAAA7F,GAAA,IAAAA,EAAA,IAAAA,EAAA,IAAA8F,EAAAC,GACAF,EAAA7F,EAAA8F,EAAAC,GACAF,EAAA7F,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAA8F,EAAAC,GACAvX,KAAAiX,UAGA6L,YAAA,WACA,OAAA,GAAA9iB,KAAAM,GAAAN,KAAAM,GAAA,GAAAoN,MAAA1N,KAAAM,KACA,GAAAN,KAAAc,GAAAd,KAAAc,GAAA,GACA,GAAAd,KAAAiX,SAAAjX,KAAAiX,SAAA,KAYA,IAAAU,GAAA/O,KAAAqa,GAAA,IACArK,EAAA,IAAAhQ,KAAAqa,GAEAC,EAAA,GACAlL,EAAA,OACAC,EAAA,EACAC,EAAA,QACAI,EAAA,EAAA,GACAE,EAAA,EAAA,GACAH,EAAA,EAAAG,EAAAA,EACAJ,EAAAI,EAAAA,EAAAA,CA4BA9Y,GAAA+X,EAAAU,EAAA1C,EAAAI,GACA4D,SAAA,SAAA1O,GACA,MAAA,IAAA0M,GAAAzX,KAAAc,EAAAoiB,GAAA,MAAAnY,EAAA,EAAAA,GAAA/K,KAAAS,EAAAT,KAAAoJ,EAAApJ,KAAAiX,UAEAuC,OAAA,SAAAzO,GACA,MAAA,IAAA0M,GAAAzX,KAAAc,EAAAoiB,GAAA,MAAAnY,EAAA,EAAAA,GAAA/K,KAAAS,EAAAT,KAAAoJ,EAAApJ,KAAAiX,UAEAD,IAAA,WACA,GAAApS,IAAA5E,KAAAc,EAAA,IAAA,IACA4D,EAAAgJ,MAAA1N,KAAAS,GAAAmE,EAAAA,EAAA5E,KAAAS,EAAA,IACAsL,EAAA2B,MAAA1N,KAAAoJ,GAAAxE,EAAAA,EAAA5E,KAAAoJ,EAAA,GAIA,OAHAxE,GAAAqT,EAAAM,EAAA3T,GACAF,EAAAsT,EAAAO,EAAA7T,GACAqH,EAAAmM,EAAAK,EAAAxM,GACA,GAAAmK,GACAuC,EAAA,UAAA/T,EAAA,UAAAE,EAAA,SAAAmH,GACA0M,WAAA/T,EAAA,UAAAE,EAAA,QAAAmH,GACA0M,EAAA,SAAA/T,EAAA,SAAAE,EAAA,UAAAmH,GACA/L,KAAAiX,aAuCAvX,EAAAgY,EAAAmB,EAAApD,EAAAI,GACA4D,SAAA,SAAA1O,GACA,MAAA,IAAA2M,GAAA1X,KAAAwR,EAAAxR,KAAA2P,EAAA3P,KAAAc,EAAAoiB,GAAA,MAAAnY,EAAA,EAAAA,GAAA/K,KAAAiX;EAEAuC,OAAA,SAAAzO,GACA,MAAA,IAAA2M,GAAA1X,KAAAwR,EAAAxR,KAAA2P,EAAA3P,KAAAc,EAAAoiB,GAAA,MAAAnY,EAAA,EAAAA,GAAA/K,KAAAiX,UAEAD,IAAA,WACA,MAAAQ,GAAAxX,MAAAgX,SAIA,IAAAmM,WACAC,EAAA,QACA/J,UACAC,UACAF,EAAA,QACAH,GAAAG,EAAAE,EACAJ,GAAAE,EAAAgK,EACApK,GAAAoK,EAAA/J,EAAAC,EAAA6J,CA0BAzjB,GAAAqZ,EAAAQ,EAAA9D,EAAAI,GACA4D,SAAA,SAAA1O,GAEA,MADAA,GAAA,MAAAA,EAAA0O,EAAA7Q,KAAAI,IAAAyQ,EAAA1O,GACA,GAAAgO,GAAA/Y,KAAAwR,EAAAxR,KAAAM,EAAAN,KAAAc,EAAAiK,EAAA/K,KAAAiX,UAEAuC,OAAA,SAAAzO,GAEA,MADAA,GAAA,MAAAA,EAAAyO,EAAA5Q,KAAAI,IAAAwQ,EAAAzO,GACA,GAAAgO,GAAA/Y,KAAAwR,EAAAxR,KAAAM,EAAAN,KAAAc,EAAAiK,EAAA/K,KAAAiX,UAEAD,IAAA,WACA,GAAAxF,GAAA9D,MAAA1N,KAAAwR,GAAA,GAAAxR,KAAAwR,EAAA,KAAAmG,EACA7W,GAAAd,KAAAc,EACAL,EAAAiN,MAAA1N,KAAAM,GAAA,EAAAN,KAAAM,EAAAQ,GAAA,EAAAA,GACAuiB,EAAAza,KAAAgP,IAAApG,GACA8R,EAAA1a,KAAAiP,IAAArG,EACA,OAAA,IAAA0E,GACA,KAAApV,EAAAL,GAAA0iB,EAAAE,EAAAD,EAAAE,IACA,KAAAxiB,EAAAL,GAAA4Y,EAAAgK,EAAA/J,EAAAgK,IACA,KAAAxiB,EAAAL,GAAA2Y,EAAAiK,IACArjB,KAAAiX,aAKAzX,EAAA8B,MAAAA,EACA9B,EAAAwX,IAAAA,EACAxX,EAAA4X,IAAAA,EACA5X,EAAA2Y,IAAAA,EACA3Y,EAAAqZ,IAAAA,EACArZ,EAAA+Z,UAAAA,EAEA3T,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,WvBksEM6d,IAAI,SAAS7iB,EAAQjB,EAAOD,IwBnsFlC,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,GACA,kBAAAE,IAAAA,EAAAC,IAAAD,GAAA,WAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,SACAhP,KAAA,SAAAR,GAAA,YAIA,SAAA6F,KACA,IAAA,GAAAlF,GAAAQ,EAAA,EAAAP,EAAAmF,UAAAvE,OAAAsE,KAAA3E,EAAAP,IAAAO,EAAA,CACA,KAAAR,EAAAoF,UAAA5E,GAAA,KAAAR,IAAAmF,GAAA,KAAA,IAAA1E,OAAA,iBAAAT,EACAmF,GAAAnF,MAEA,MAAA,IAAAqjB,GAAAle,GAGA,QAAAke,GAAAle,GACAtF,KAAAsF,EAAAA,EAGA,QAAAme,GAAAC,EAAAC,GACA,MAAAD,GAAA5N,OAAA8N,MAAA,SAAA/f,IAAA,SAAA1D,GACA,GAAA0jB,GAAA,GAAAljB,EAAAR,EAAA2jB,QAAA,IAEA,IADAnjB,GAAA,IAAAkjB,EAAA1jB,EAAAmI,MAAA3H,EAAA,GAAAR,EAAAA,EAAAmI,MAAA,EAAA3H,IACAR,IAAAwjB,EAAA7M,eAAA3W,GAAA,KAAA,IAAAS,OAAA,iBAAAT,EACA,QAAAsB,KAAAtB,EAAA0jB,KAAAA,KA6CA,QAAAvP,GAAA7S,EAAAoiB,GACA,IAAA,GAAAlU,GAAAhP,EAAA,EAAAP,EAAAqB,EAAAT,OAAAL,EAAAP,IAAAO,EACA,IAAAgP,EAAAlO,EAAAd,IAAAkjB,OAAAA,EACA,MAAAlU,GAAAjK,MAKA,QAAAiO,GAAAlS,EAAAoiB,EAAAE,GACA,IAAA,GAAApjB,GAAA,EAAAP,EAAAqB,EAAAT,OAAAL,EAAAP,IAAAO,EACA,GAAAc,EAAAd,GAAAkjB,OAAAA,EAAA,CACApiB,EAAAd,GAAAqjB,EAAAviB,EAAAA,EAAA6G,MAAA,EAAA3H,GAAAsjB,OAAAxiB,EAAA6G,MAAA3H,EAAA,GACA,OAIA,MADA,OAAAojB,GAAAtiB,EAAA8E,MAAAsd,KAAAA,EAAAne,MAAAqe,IACAtiB,EAhFA,GAAAuiB,IAAAte,MAAA,aAuBA8d,GAAAvQ,UAAA5N,EAAA4N,WACAiC,YAAAsO,EACA/d,GAAA,SAAAye,EAAAH,GACA,GAEA5jB,GAFAmF,EAAAtF,KAAAsF,EACA6e,EAAAV,EAAAS,EAAA,GAAA5e,GAEA3E,KACAP,EAAA+jB,EAAAnjB,MAGA,EAAA,KAAAuE,UAAAvE,OAAA,GAAA,CAOA,GAAA,MAAA+iB,GAAA,kBAAAA,GAAA,KAAA,IAAAnjB,OAAA,qBAAAmjB,EACA,QAAApjB,EAAAP,GACA,GAAAD,GAAA+jB,EAAAC,EAAAxjB,IAAAc,KAAA6D,EAAAnF,GAAAwT,EAAArO,EAAAnF,GAAA+jB,EAAAL,KAAAE,OACA,IAAA,MAAAA,EAAA,IAAA5jB,IAAAmF,GAAAA,EAAAnF,GAAAwT,EAAArO,EAAAnF,GAAA+jB,EAAAL,KAAA,KAGA,OAAA7jB,MAZA,OAAAW,EAAAP,GAAA,IAAAD,GAAA+jB,EAAAC,EAAAxjB,IAAAc,QAAAtB,EAAAmU,EAAAhP,EAAAnF,GAAA+jB,EAAAL,OAAA,MAAA1jB,KAcAmK,KAAA,WACA,GAAAA,MAAAhF,EAAAtF,KAAAsF,CACA,KAAA,GAAAnF,KAAAmF,GAAAgF,EAAAnK,GAAAmF,EAAAnF,GAAAmI,OACA,OAAA,IAAAkb,GAAAlZ,IAEAvJ,KAAA,SAAAU,EAAA2iB,GACA,IAAAhkB,EAAAmF,UAAAvE,OAAA,GAAA,EAAA,IAAA,GAAAZ,GAAAD,EAAAkkB,EAAA,GAAA9Z,OAAAnK,GAAAO,EAAA,EAAAA,EAAAP,IAAAO,EAAA0jB,EAAA1jB,GAAA4E,UAAA5E,EAAA,EACA,KAAAX,KAAAsF,EAAAwR,eAAArV,GAAA,KAAA,IAAAb,OAAA,iBAAAa,EACA,KAAAtB,EAAAH,KAAAsF,EAAA7D,GAAAd,EAAA,EAAAP,EAAAD,EAAAa,OAAAL,EAAAP,IAAAO,EAAAR,EAAAQ,GAAA+E,MAAAC,MAAAye,EAAAC,IAEA1e,MAAA,SAAAlE,EAAA2iB,EAAAC,GACA,IAAArkB,KAAAsF,EAAAwR,eAAArV,GAAA,KAAA,IAAAb,OAAA,iBAAAa,EACA,KAAA,GAAAtB,GAAAH,KAAAsF,EAAA7D,GAAAd,EAAA,EAAAP,EAAAD,EAAAa,OAAAL,EAAAP,IAAAO,EAAAR,EAAAQ,GAAA+E,MAAAC,MAAAye,EAAAC,KAuBA7kB,EAAA6F,SAAAA,EAEAO,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,WxBwsFM4e,IAAI,SAAS5jB,EAAQjB,EAAOD,IyBnyFlC,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,GACA,kBAAAE,IAAAA,EAAAC,IAAAD,GAAA,WAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,SACAhP,KAAA,SAAAR,GAAA,YAKA,SAAA+kB,GAAA7f,EAAA2F,GACA,IAAA1J,GAAA+D,EAAA2F,EAAA3F,EAAA8f,cAAAna,EAAA,GAAA3F,EAAA8f,iBAAAV,QAAA,MAAA,EAAA,MAAA,KACA,IAAAnjB,GAAA8jB,EAAA/f,EAAA4D,MAAA,EAAA3H,EAIA,QACA8jB,EAAAzjB,OAAA,EAAAyjB,EAAA,GAAAA,EAAAnc,MAAA,GAAAmc,GACA/f,EAAA4D,MAAA3H,EAAA,IAIA,QAAA+jB,GAAAhgB,GACA,MAAAA,GAAA6f,EAAA3b,KAAAC,IAAAnE,IAAAA,EAAAA,EAAA,GAAAsF,IAGA,QAAA2a,GAAAC,EAAAC,GACA,MAAA,UAAAnf,EAAAjB,GAOA,IANA,GAAA9D,GAAA+E,EAAA1E,OACAb,KACAmM,EAAA,EACA1M,EAAAglB,EAAA,GACA5jB,EAAA,EAEAL,EAAA,GAAAf,EAAA,IACAoB,EAAApB,EAAA,EAAA6E,IAAA7E,EAAAgJ,KAAAT,IAAA,EAAA1D,EAAAzD,IACAb,EAAAoG,KAAAb,EAAAof,UAAAnkB,GAAAf,EAAAe,EAAAf,OACAoB,GAAApB,EAAA,GAAA6E,KACA7E,EAAAglB,EAAAtY,GAAAA,EAAA,GAAAsY,EAAA5jB,OAGA,OAAAb,GAAA4kB,UAAAC,KAAAH,IAIA,QAAAI,GAAAvgB,EAAA2F,GACA3F,EAAAA,EAAAwgB,YAAA7a,EAEA8a,GAAA,IAAA,GAAA1S,GAAArS,EAAAsE,EAAA1D,OAAAL,EAAA,EAAA6R,KAAA7R,EAAAP,IAAAO,EACA,OAAA+D,EAAA/D,IACA,IAAA,IAAA6R,EAAAC,EAAA9R,CAAA,MACA,KAAA,IAAA,IAAA6R,IAAAA,EAAA7R,GAAA8R,EAAA9R,CAAA,MACA,KAAA,IAAA,KAAAwkB,EACA,SAAA3S,EAAA,IAAAA,EAAA,GAIA,MAAAA,GAAA,EAAA9N,EAAA4D,MAAA,EAAAkK,GAAA9N,EAAA4D,MAAAmK,EAAA,GAAA/N,EAKA,QAAA0gB,GAAA1gB,EAAA2F,GACA,GAAAvG,GAAAygB,EAAA7f,EAAA2F,EACA,KAAAvG,EAAA,MAAAY,GAAA,EACA,IAAA+f,GAAA3gB,EAAA,GACA4gB,EAAA5gB,EAAA,GACAnD,EAAA+jB,GAAAW,EAAA,EAAAzc,KAAAT,OAAAS,KAAAyD,IAAA,EAAAzD,KAAAuC,MAAAuZ,EAAA,MAAA,EACAtkB,EAAAqkB,EAAAzjB,MACA,OAAAL,KAAAP,EAAAqkB,EACA9jB,EAAAP,EAAAqkB,EAAA,GAAAla,OAAA5J,EAAAP,EAAA,GAAA4kB,KAAA,KACArkB,EAAA,EAAA8jB,EAAAnc,MAAA,EAAA3H,GAAA,IAAA8jB,EAAAnc,MAAA3H,GACA,KAAA,GAAA4J,OAAA,EAAA5J,GAAAqkB,KAAA,KAAAT,EAAA7f,EAAAkE,KAAAT,IAAA,EAAAkC,EAAA1J,EAAA,IAAA,GAGA,QAAA2kB,GAAA5gB,EAAA2F,GACA,GAAAvG,GAAAygB,EAAA7f,EAAA2F,EACA,KAAAvG,EAAA,MAAAY,GAAA,EACA,IAAA+f,GAAA3gB,EAAA,GACA4gB,EAAA5gB,EAAA,EACA,OAAA4gB,GAAA,EAAA,KAAA,GAAAna,SAAAma,IAAAM,KAAA,KAAAP,EACAA,EAAAzjB,OAAA0jB,EAAA,EAAAD,EAAAnc,MAAA,EAAAoc,EAAA,GAAA,IAAAD,EAAAnc,MAAAoc,EAAA,GACAD,EAAA,GAAAla,OAAAma,EAAAD,EAAAzjB,OAAA,GAAAgkB,KAAA,KAuBA,QAAAO,GAAAC,GACA,MAAA,IAAAC,GAAAD,GAGA,QAAAC,GAAAD,GACA,KAAAE,EAAAC,EAAA3P,KAAAwP,IAAA,KAAA,IAAA5kB,OAAA,mBAAA4kB,EAEA,IAAAE,GACAE,EAAAF,EAAA,IAAA,IACAG,EAAAH,EAAA,IAAA,IACAI,EAAAJ,EAAA,IAAA,IACAjd,EAAAid,EAAA,IAAA,GACAK,IAAAL,EAAA,GACAjhB,EAAAihB,EAAA,KAAAA,EAAA,GACAM,IAAAN,EAAA,GACAO,EAAAP,EAAA,KAAAA,EAAA,GAAApd,MAAA,GACA7G,EAAAikB,EAAA,IAAA,EAGA,OAAAjkB,GAAAukB,GAAA,EAAAvkB,EAAA,KAGAykB,EAAAzkB,KAAAA,EAAA,KAGAskB,GAAA,MAAAH,GAAA,MAAAC,KAAAE,GAAA,EAAAH,EAAA,IAAAC,EAAA,KAEA7lB,KAAA4lB,KAAAA,EACA5lB,KAAA6lB,MAAAA,EACA7lB,KAAA8lB,KAAAA,EACA9lB,KAAAyI,OAAAA,EACAzI,KAAA+lB,KAAAA,EACA/lB,KAAAyE,MAAAA,EACAzE,KAAAgmB,MAAAA,EACAhmB,KAAAimB,UAAAA,EACAjmB,KAAAyB,KAAAA,EAiBA,QAAAoO,GAAAnL,GACA,MAAAA,GAGA,QAAAyhB,GAAAC,GAKA,QAAAC,GAAAb,GAgCA,QAAArgB,GAAAO,GACA,GAEA/E,GAAAP,EAAAuP,EAFA2W,EAAArR,EACAsR,EAAAC,CAGA,IAAA,MAAA/kB,EACA8kB,EAAAE,EAAA/gB,GAAA6gB,EACA7gB,EAAA,OACA,CACAA,GAAAA,CAIA,IAAAghB,IAAAhhB,EAAA,GAAA,EAAAA,EAAA,KAAAA,OAAA,EAOA,IAJAA,EAAA+gB,EAAA/gB,EAAAugB,GAIAS,EAGA,IAFA/lB,KAAAP,EAAAsF,EAAA1E,OACA0lB,GAAA,IACA/lB,EAAAP,GACA,GAAAuP,EAAAjK,EAAAihB,WAAAhmB,GAAA,GAAAgP,GAAAA,EAAA,IACA,MAAAlO,GAAA,GAAAkO,GAAAA,EAAA,KACA,MAAAlO,GAAA,GAAAkO,GAAAA,EAAA,GAAA,CACA+W,GAAA,CACA,OAWA,GALAJ,GAAAI,EAAA,MAAAZ,EAAAA,EAAA,IAAA,MAAAA,GAAA,MAAAA,EAAA,GAAAA,GAAAQ,EACAC,EAAAA,GAAA,MAAA9kB,EAAAmlB,EAAA,EAAAvB,EAAA,GAAA,KAAAqB,GAAA,MAAAZ,EAAA,IAAA,IAIAe,EAEA,IADAlmB,KAAAP,EAAAsF,EAAA1E,SACAL,EAAAP,GACA,GAAAuP,EAAAjK,EAAAihB,WAAAhmB,GAAA,GAAAgP,GAAAA,EAAA,GAAA,CACA4W,GAAA,KAAA5W,EAAAmX,EAAAphB,EAAA4C,MAAA3H,EAAA,GAAA+E,EAAA4C,MAAA3H,IAAA4lB,EACA7gB,EAAAA,EAAA4C,MAAA,EAAA3H,EACA,QAOAqlB,IAAAD,IAAArgB,EAAAqhB,EAAArhB,EAAAshB,EAAAA,GAGA,IAAAhmB,GAAAslB,EAAAtlB,OAAA0E,EAAA1E,OAAAulB,EAAAvlB,OACAimB,EAAAjmB,EAAAyD,EAAA,GAAA8F,OAAA9F,EAAAzD,EAAA,GAAAgkB,KAAAY,GAAA,EAMA,QAHAI,GAAAD,IAAArgB,EAAAqhB,EAAAE,EAAAvhB,EAAAuhB,EAAAjmB,OAAAyD,EAAA8hB,EAAAvlB,OAAAgmB,EAAAA,GAAAC,EAAA,IAGApB,GACA,IAAA,IAAA,MAAAS,GAAA5gB,EAAA6gB,EAAAU,CACA,KAAA,IAAA,MAAAX,GAAAW,EAAAvhB,EAAA6gB,CACA,KAAA,IAAA,MAAAU,GAAA3e,MAAA,EAAAtH,EAAAimB,EAAAjmB,QAAA,GAAAslB,EAAA5gB,EAAA6gB,EAAAU,EAAA3e,MAAAtH,GAEA,MAAAimB,GAAAX,EAAA5gB,EAAA6gB,EAlGAf,EAAAD,EAAAC,EAEA,IAAAI,GAAAJ,EAAAI,KACAC,EAAAL,EAAAK,MACAC,EAAAN,EAAAM,KACArd,EAAA+c,EAAA/c,OACAsd,EAAAP,EAAAO,KACAthB,EAAA+gB,EAAA/gB,MACAuhB,EAAAR,EAAAQ,MACAC,EAAAT,EAAAS,UACAxkB,EAAA+jB,EAAA/jB,KAIAwT,EAAA,MAAAxM,EAAAye,EAAA,GAAA,MAAAze,GAAA,SAAA0e,KAAA1lB,GAAA,IAAAA,EAAA+D,cAAA,GACAghB,EAAA,MAAA/d,EAAAye,EAAA,GAAA,OAAAC,KAAA1lB,GAAA,IAAA,GAKAglB,EAAAP,EAAAzkB,GACAolB,GAAAplB,GAAA,aAAA0lB,KAAA1lB,EAoFA,OA9EAwkB,GAAA,MAAAA,EAAAxkB,EAAA,EAAA,GACA,SAAA0lB,KAAA1lB,GAAAmH,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,GAAA4Z,IACArd,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,GAAA4Z,IAwEA9gB,EAAA4d,SAAA,WACA,MAAAyC,GAAA,IAGArgB,EAGA,QAAAiiB,GAAA5B,EAAA9f,GACA,GAAAnG,GAAA8mB,GAAAb,EAAAD,EAAAC,GAAAA,EAAA/jB,KAAA,IAAA+jB,IACAtlB,EAAA,EAAA0I,KAAAT,OAAAS,KAAAyD,IAAA,EAAAzD,KAAAuC,MAAAuZ,EAAAhf,GAAA,KACAqF,EAAAnC,KAAAI,IAAA,IAAA9I,GACA+U,EAAA2R,EAAA,EAAA1mB,EAAA,EACA,OAAA,UAAAwF,GACA,MAAAnG,GAAAwL,EAAArF,GAAAuP,GAvHA,GAAA8R,GAAAX,EAAAxB,UAAAwB,EAAAvB,UAAAF,EAAAyB,EAAAxB,SAAAwB,EAAAvB,WAAAhV,EACAqX,EAAAd,EAAAc,SACAJ,EAAAV,EAAAU,OAyHA,QACA3hB,OAAAkhB,EACAe,aAAAA,GAYA,QAAAC,GAAA1R,GAIA,MAHAyQ,GAAAD,EAAAxQ,GACAnW,EAAA2F,OAAAihB,EAAAjhB,OACA3F,EAAA4nB,aAAAhB,EAAAgB,aACAhB,EAGA,QAAAkB,GAAAtX,GACA,MAAApH,MAAAT,IAAA,GAAAuc,EAAA9b,KAAAC,IAAAmH,KAGA,QAAAuX,GAAAvX,EAAAtK,GACA,MAAAkD,MAAAT,IAAA,EAAA,EAAAS,KAAAT,OAAAS,KAAAyD,IAAA,EAAAzD,KAAAuC,MAAAuZ,EAAAhf,GAAA,KAAAgf,EAAA9b,KAAAC,IAAAmH,KAGA,QAAAwX,GAAAxX,EAAA7H,GAEA,MADA6H,GAAApH,KAAAC,IAAAmH,GAAA7H,EAAAS,KAAAC,IAAAV,GAAA6H,EACApH,KAAAT,IAAA,EAAAuc,EAAAvc,GAAAuc,EAAA1U,IAAA,EAhQA,GAAAqV,GAyBAa,GACAuB,GAAAxC,EACAyC,IAAA,SAAAhjB,EAAA2F,GAAA,OAAA,IAAA3F,GAAAijB,QAAAtd,IACAjB,EAAA,SAAA1E,GAAA,MAAAkE,MAAAoa,MAAAte,GAAAqe,SAAA,IACApT,EAAA,SAAAjL,GAAA,MAAAA,GAAA,IACAZ,EAAA,SAAAY,GAAA,MAAAkE,MAAAoa,MAAAte,GAAAqe,SAAA,KACA7iB,EAAA,SAAAwE,EAAA2F,GAAA,MAAA3F,GAAA8f,cAAAna,IACA9K,EAAA,SAAAmF,EAAA2F,GAAA,MAAA3F,GAAAijB,QAAAtd,IACAzK,EAAA,SAAA8E,EAAA2F,GAAA,MAAA3F,GAAAwgB,YAAA7a,IACA9J,EAAA,SAAAmE,GAAA,MAAAkE,MAAAoa,MAAAte,GAAAqe,SAAA,IACA1Y,EAAA,SAAA3F,EAAA2F,GAAA,MAAAib,GAAA,IAAA5gB,EAAA2F,IACAhK,EAAAilB,EACAhlB,EAAA8kB,EACAwC,EAAA,SAAAljB,GAAA,MAAAkE,MAAAoa,MAAAte,GAAAqe,SAAA,IAAA8E,eACAnjB,EAAA,SAAAA,GAAA,MAAAkE,MAAAoa,MAAAte,GAAAqe,SAAA,MAIA4C,EAAA,uEAwCAF,GAAAxS,UAAA8P,SAAA,WACA,MAAA/iB,MAAA4lB,KACA5lB,KAAA6lB,MACA7lB,KAAA8lB,KACA9lB,KAAAyI,QACAzI,KAAA+lB,KAAA,IAAA,KACA,MAAA/lB,KAAAyE,MAAA,GAAAmE,KAAAT,IAAA,EAAA,EAAAnI,KAAAyE,SACAzE,KAAAgmB,MAAA,IAAA,KACA,MAAAhmB,KAAAimB,UAAA,GAAA,IAAArd,KAAAT,IAAA,EAAA,EAAAnI,KAAAimB,YACAjmB,KAAAyB,KAGA,IAwIA2kB,GAxIAQ,GAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,GAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAyIAS,IACAP,QAAA,IACAjC,UAAA,IACAD,UAAA,GACAsC,UAAA,IAAA,MAuBA1nB,EAAAsoB,oBAAAT,EACA7nB,EAAA2mB,aAAAA,EACA3mB,EAAA+lB,gBAAAA,EACA/lB,EAAA8nB,eAAAA,EACA9nB,EAAA+nB,gBAAAA,EACA/nB,EAAAgoB,eAAAA,EAEA5hB,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,WzBwyFMqiB,IAAI,SAASrnB,EAAQjB,EAAOD,I0B7mGlC,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,EAAAkB,EAAA,aACA,kBAAAhB,IAAAA,EAAAC,IAAAD,GAAA,UAAA,YAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,OAAAlP,EAAAkP,KACAhP,KAAA,SAAAR,EAAAwoB,GAAA,YAEA,SAAAC,GAAAzP,EAAA0P,EAAAC,EAAAC,EAAAC,GACA,GAAAhQ,GAAAG,EAAAA,EAAAJ,EAAAC,EAAAG,CACA,SAAA,EAAA,EAAAA,EAAA,EAAAH,EAAAD,GAAA8P,GACA,EAAA,EAAA7P,EAAA,EAAAD,GAAA+P,GACA,EAAA,EAAA3P,EAAA,EAAAH,EAAA,EAAAD,GAAAgQ,EACAhQ,EAAAiQ,GAAA,EAGA,QAAAC,GAAA3X,GACA,GAAAvQ,GAAAuQ,EAAA3P,OAAA,CACA,OAAA,UAAAb,GACA,GAAAQ,GAAAR,GAAA,EAAAA,EAAA,EAAAA,GAAA,GAAAA,EAAA,EAAAC,EAAA,GAAAwI,KAAAuC,MAAAhL,EAAAC,GACA+nB,EAAAxX,EAAAhQ,GACAynB,EAAAzX,EAAAhQ,EAAA,GACAunB,EAAAvnB,EAAA,EAAAgQ,EAAAhQ,EAAA,GAAA,EAAAwnB,EAAAC,EACAC,EAAA1nB,EAAAP,EAAA,EAAAuQ,EAAAhQ,EAAA,GAAA,EAAAynB,EAAAD,CACA,OAAAF,IAAA9nB,EAAAQ,EAAAP,GAAAA,EAAA8nB,EAAAC,EAAAC,EAAAC,IAIA,QAAAE,GAAA5X,GACA,GAAAvQ,GAAAuQ,EAAA3P,MACA,OAAA,UAAAb,GACA,GAAAQ,GAAAiI,KAAAuC,QAAAhL,GAAA,GAAA,IAAAA,EAAAA,GAAAC,GACA8nB,EAAAvX,GAAAhQ,EAAAP,EAAA,GAAAA,GACA+nB,EAAAxX,EAAAhQ,EAAAP,GACAgoB,EAAAzX,GAAAhQ,EAAA,GAAAP,GACAioB,EAAA1X,GAAAhQ,EAAA,GAAAP,EACA,OAAA6nB,IAAA9nB,EAAAQ,EAAAP,GAAAA,EAAA8nB,EAAAC,EAAAC,EAAAC,IAIA,QAAAzY,GAAAlL,GACA,MAAA,YACA,MAAAA,IAIA,QAAA8jB,GAAA/nB,EAAAqD,GACA,MAAA,UAAA3D,GACA,MAAAM,GAAAN,EAAA2D,GAIA,QAAA2kB,GAAAhoB,EAAA2I,EAAAxE,GACA,MAAAnE,GAAAmI,KAAAI,IAAAvI,EAAAmE,GAAAwE,EAAAR,KAAAI,IAAAI,EAAAxE,GAAAnE,EAAAmE,EAAA,EAAAA,EAAA,SAAAzE,GACA,MAAAyI,MAAAI,IAAAvI,EAAAN,EAAAiJ,EAAAxE,IAIA,QAAA8jB,GAAAjoB,EAAA2I,GACA,GAAAtF,GAAAsF,EAAA3I,CACA,OAAAqD,GAAA0kB,EAAA/nB,EAAAqD,EAAA,KAAAA,OAAAA,EAAA,IAAA8E,KAAAoa,MAAAlf,EAAA,KAAAA,GAAA8L,EAAAlC,MAAAjN,GAAA2I,EAAA3I,GAGA,QAAAkoB,GAAA/jB,GACA,MAAA,MAAAA,GAAAA,GAAAgkB,EAAA,SAAAnoB,EAAA2I,GACA,MAAAA,GAAA3I,EAAAgoB,EAAAhoB,EAAA2I,EAAAxE,GAAAgL,EAAAlC,MAAAjN,GAAA2I,EAAA3I,IAIA,QAAAmoB,GAAAnoB,EAAA2I,GACA,GAAAtF,GAAAsF,EAAA3I,CACA,OAAAqD,GAAA0kB,EAAA/nB,EAAAqD,GAAA8L,EAAAlC,MAAAjN,GAAA2I,EAAA3I,GAyBA,QAAAooB,GAAAC,GACA,MAAA,UAAAC,GACA,GAIApoB,GAAAW,EAJAlB,EAAA2oB,EAAA/nB,OACAX,EAAA,GAAAkK,OAAAnK,GACAR,EAAA,GAAA2K,OAAAnK,GACAgJ,EAAA,GAAAmB,OAAAnK,EAEA,KAAAO,EAAA,EAAAA,EAAAP,IAAAO,EACAW,EAAA0mB,EAAAhR,IAAA+R,EAAApoB,IACAN,EAAAM,GAAAW,EAAAjB,GAAA,EACAT,EAAAe,GAAAW,EAAA1B,GAAA,EACAwJ,EAAAzI,GAAAW,EAAA8H,GAAA,CAMA,OAJA/I,GAAAyoB,EAAAzoB,GACAT,EAAAkpB,EAAAlpB,GACAwJ,EAAA0f,EAAA1f,GACA9H,EAAA2V,QAAA,EACA,SAAA9W,GAIA,MAHAmB,GAAAjB,EAAAA,EAAAF,GACAmB,EAAA1B,EAAAA,EAAAO,GACAmB,EAAA8H,EAAAA,EAAAjJ,GACAmB,EAAA,KAQA,QAAAkO,GAAA/O,EAAA2I,GACA,GAIAzI,GAJAqoB,EAAA5f,EAAAA,EAAApI,OAAA,EACAioB,EAAAxoB,EAAAmI,KAAAyD,IAAA2c,EAAAvoB,EAAAO,QAAA,EACA0D,EAAA,GAAA6F,OAAAye,GACArZ,EAAA,GAAApF,OAAAye,EAGA,KAAAroB,EAAA,EAAAA,EAAAsoB,IAAAtoB,EAAA+D,EAAA/D,GAAA+E,EAAAjF,EAAAE,GAAAyI,EAAAzI,GACA,MAAAA,EAAAqoB,IAAAroB,EAAAgP,EAAAhP,GAAAyI,EAAAzI,EAEA,OAAA,UAAAR,GACA,IAAAQ,EAAA,EAAAA,EAAAsoB,IAAAtoB,EAAAgP,EAAAhP,GAAA+D,EAAA/D,GAAAR,EACA,OAAAwP,IAIA,QAAAuZ,GAAAzoB,EAAA2I,GACA,GAAAtF,GAAA,GAAAqlB,KACA,OAAA1oB,IAAAA,EAAA2I,GAAA3I,EAAA,SAAAN,GACA,MAAA2D,GAAAslB,QAAA3oB,EAAA2I,EAAAjJ,GAAA2D,GAIA,QAAAyL,GAAA9O,EAAA2I,GACA,MAAA3I,IAAAA,EAAA2I,GAAA3I,EAAA,SAAAN,GACA,MAAAM,GAAA2I,EAAAjJ,GAIA,QAAAqT,GAAA/S,EAAA2I,GACA,GAEA2B,GAFApK,KACAgP,IAGA,QAAAlP,GAAA,gBAAAA,KAAAA,MACA,OAAA2I,GAAA,gBAAAA,KAAAA,KAEA,KAAA2B,IAAA3B,GACA2B,IAAAtK,GACAE,EAAAoK,GAAArF,EAAAjF,EAAAsK,GAAA3B,EAAA2B,IAEA4E,EAAA5E,GAAA3B,EAAA2B,EAIA,OAAA,UAAA5K,GACA,IAAA4K,IAAApK,GAAAgP,EAAA5E,GAAApK,EAAAoK,GAAA5K,EACA,OAAAwP,IAMA,QAAAoW,GAAA3c,GACA,MAAA,YACA,MAAAA,IAIA,QAAAigB,GAAAjgB,GACA,MAAA,UAAAjJ,GACA,MAAAiJ,GAAAjJ,GAAA,IAIA,QAAAmpB,GAAA7oB,EAAA2I,GACA,GACAmgB,GACAC,EACAC,EAHAC,EAAAC,EAAAC,UAAAC,EAAAD,UAAA,EAIAjpB,KACAL,KACAwpB,IAMA,KAHArpB,GAAA,GAAA2I,GAAA,IAGAmgB,EAAAI,EAAA3T,KAAAvV,MACA+oB,EAAAK,EAAA7T,KAAA5M,MACAqgB,EAAAD,EAAAO,OAAAL,IACAD,EAAArgB,EAAAd,MAAAohB,EAAAD,GACAnpB,EAAAK,GAAAL,EAAAK,IAAA8oB,EACAnpB,IAAAK,GAAA8oB,IAEAF,EAAAA,EAAA,OAAAC,EAAAA,EAAA,IACAlpB,EAAAK,GAAAL,EAAAK,IAAA6oB,EACAlpB,IAAAK,GAAA6oB,GAEAlpB,IAAAK,GAAA,KACAmpB,EAAAvjB,MAAA5F,EAAAA,EAAA+D,EAAA6K,EAAAga,EAAAC,MAEAE,EAAAG,EAAAD,SAYA,OARAF,GAAAtgB,EAAApI,SACAyoB,EAAArgB,EAAAd,MAAAohB,GACAppB,EAAAK,GAAAL,EAAAK,IAAA8oB,EACAnpB,IAAAK,GAAA8oB,GAKAnpB,EAAAU,OAAA,EAAA8oB,EAAA,GACAT,EAAAS,EAAA,GAAAplB,GACAqhB,EAAA3c,IACAA,EAAA0gB,EAAA9oB,OAAA,SAAAb,GACA,IAAA,GAAAI,GAAAI,EAAA,EAAAA,EAAAyI,IAAAzI,EAAAL,GAAAC,EAAAupB,EAAAnpB,IAAAA,GAAAJ,EAAAmE,EAAAvE,EACA,OAAAG,GAAA0kB,KAAA,MAIA,QAAAtf,GAAAjF,EAAA2I,GACA,GAAAuG,GAAAxP,QAAAiJ,EACA,OAAA,OAAAA,GAAA,YAAAjJ,EAAAyP,EAAAxG,IACA,WAAAjJ,EAAAoP,EACA,WAAApP,GAAAwP,EAAAqY,EAAA1mB,MAAA8H,KAAAA,EAAAuG,EAAAqa,GAAAV,EACAlgB,YAAA4e,GAAA1mB,MAAA0oB,EACA5gB,YAAA+f,MAAAD,EACA3e,MAAAC,QAAApB,GAAAoG,EACA9B,MAAAtE,GAAAoK,EACAjE,GAAA9O,EAAA2I,GAGA,QAAA4Z,GAAAviB,EAAA2I,GACA,MAAA3I,IAAAA,EAAA2I,GAAA3I,EAAA,SAAAN,GACA,MAAAyI,MAAAoa,MAAAviB,EAAA2I,EAAAjJ,IAeA,QAAA8pB,GAAAxpB,EAAA2I,EAAAuG,EAAA7L,EAAA5D,EAAAX,GACA,GAAA2qB,GAAAC,EAAAC,CAKA,QAJAF,EAAAthB,KAAAsD,KAAAzL,EAAAA,EAAA2I,EAAAA,MAAA3I,GAAAypB,EAAA9gB,GAAA8gB,IACAE,EAAA3pB,EAAAkP,EAAAvG,EAAAtF,KAAA6L,GAAAlP,EAAA2pB,EAAAtmB,GAAAsF,EAAAghB,IACAD,EAAAvhB,KAAAsD,KAAAyD,EAAAA,EAAA7L,EAAAA,MAAA6L,GAAAwa,EAAArmB,GAAAqmB,EAAAC,GAAAD,GACA1pB,EAAAqD,EAAAsF,EAAAuG,IAAAlP,GAAAA,EAAA2I,GAAAA,EAAAghB,GAAAA,EAAAF,GAAAA,IAEAG,WAAAnqB,EACAoqB,WAAA/qB,EACAgrB,OAAA3hB,KAAA+P,MAAAvP,EAAA3I,GAAA+pB,EACAJ,MAAAxhB,KAAA6hB,KAAAL,GAAAI,EACAN,OAAAA,EACAC,OAAAA,GAQA,QAAAO,GAAAhlB,GACA,MAAA,SAAAA,EAAAmK,GACA8a,IAAAA,EAAAC,SAAAC,cAAA,OAAAC,EAAAF,SAAAG,gBAAAC,EAAAJ,SAAAK,aACAN,EAAAznB,MAAAgoB,UAAAxlB,EACAA,EAAAslB,EAAAG,iBAAAL,EAAAM,YAAAT,GAAA,MAAAU,iBAAA,aACAP,EAAAQ,YAAAX,GACAjlB,EAAAA,EAAA4C,MAAA,MAAAsb,MAAA,KACAqG,GAAAvkB,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,KAGA,QAAA6lB,GAAA7lB,GACA,MAAA,OAAAA,EAAAmK,GACA2b,IAAAA,EAAAZ,SAAAa,gBAAA,6BAAA,MACAD,EAAAE,aAAA,YAAAhmB,IACAA,EAAA8lB,EAAAN,UAAAS,QAAAC,gBACAlmB,EAAAA,EAAAkN,OACAqX,EAAAvkB,EAAAjF,EAAAiF,EAAA0D,EAAA1D,EAAAiK,EAAAjK,EAAA5B,EAAA4B,EAAAxF,EAAAwF,EAAAnG,IAFAsQ,GAKA,QAAAgc,GAAAC,EAAAC,EAAAC,EAAAC,GAEA,QAAAxgB,GAAAnL,GACA,MAAAA,GAAAU,OAAAV,EAAAmL,MAAA,IAAA,GAGA,QAAAygB,GAAAC,EAAAC,EAAAC,EAAAC,EAAAhsB,EAAAwpB,GACA,GAAAqC,IAAAE,GAAAD,IAAAE,EAAA,CACA,GAAA3rB,GAAAL,EAAAiG,KAAA,aAAA,KAAAwlB,EAAA,KAAAC,EACAlC,GAAAvjB,MAAA5F,EAAAA,EAAA,EAAA+D,EAAA6K,EAAA4c,EAAAE,KAAA1rB,EAAAA,EAAA,EAAA+D,EAAA6K,EAAA6c,EAAAE,UACAD,GAAAC,IACAhsB,EAAAiG,KAAA,aAAA8lB,EAAAN,EAAAO,EAAAN,GAIA,QAAAzB,GAAA9pB,EAAA2I,EAAA9I,EAAAwpB,GACArpB,IAAA2I,GACA3I,EAAA2I,EAAA,IAAAA,GAAA,IAAAA,EAAA3I,EAAA,MAAAA,GAAA,KACAqpB,EAAAvjB,MAAA5F,EAAAL,EAAAiG,KAAAkF,EAAAnL,GAAA,UAAA,KAAA2rB,GAAA,EAAAvnB,EAAA6K,EAAA9O,EAAA2I,MACAA,GACA9I,EAAAiG,KAAAkF,EAAAnL,GAAA,UAAA8I,EAAA6iB,GAIA,QAAA7B,GAAA3pB,EAAA2I,EAAA9I,EAAAwpB,GACArpB,IAAA2I,EACA0gB,EAAAvjB,MAAA5F,EAAAL,EAAAiG,KAAAkF,EAAAnL,GAAA,SAAA,KAAA2rB,GAAA,EAAAvnB,EAAA6K,EAAA9O,EAAA2I,KACAA,GACA9I,EAAAiG,KAAAkF,EAAAnL,GAAA,SAAA8I,EAAA6iB,GAIA,QAAArqB,GAAAuqB,EAAAC,EAAAC,EAAAC,EAAAhsB,EAAAwpB,GACA,GAAAqC,IAAAE,GAAAD,IAAAE,EAAA,CACA,GAAA3rB,GAAAL,EAAAiG,KAAAkF,EAAAnL,GAAA,SAAA,KAAA,IAAA,KAAA,IACAwpB,GAAAvjB,MAAA5F,EAAAA,EAAA,EAAA+D,EAAA6K,EAAA4c,EAAAE,KAAA1rB,EAAAA,EAAA,EAAA+D,EAAA6K,EAAA6c,EAAAE,SACA,KAAAD,GAAA,IAAAC,GACAhsB,EAAAiG,KAAAkF,EAAAnL,GAAA,SAAA+rB,EAAA,IAAAC,EAAA,KAIA,MAAA,UAAA7rB,EAAA2I,GACA,GAAA9I,MACAwpB,IAOA,OANArpB,GAAAqrB,EAAArrB,GAAA2I,EAAA0iB,EAAA1iB,GACA8iB,EAAAzrB,EAAA4pB,WAAA5pB,EAAA6pB,WAAAlhB,EAAAihB,WAAAjhB,EAAAkhB,WAAAhqB,EAAAwpB,GACAS,EAAA9pB,EAAA8pB,OAAAnhB,EAAAmhB,OAAAjqB,EAAAwpB,GACAM,EAAA3pB,EAAA2pB,MAAAhhB,EAAAghB,MAAA9pB,EAAAwpB,GACAloB,EAAAnB,EAAAypB,OAAAzpB,EAAA0pB,OAAA/gB,EAAA8gB,OAAA9gB,EAAA+gB,OAAA7pB,EAAAwpB,GACArpB,EAAA2I,EAAA,KACA,SAAAjJ,GAEA,IADA,GAAAI,GAAAI,KAAAP,EAAA0pB,EAAA9oB,SACAL,EAAAP,GAAAE,GAAAC,EAAAupB,EAAAnpB,IAAAA,GAAAJ,EAAAmE,EAAAvE,EACA,OAAAG,GAAA0kB,KAAA,MAYA,QAAA3B,GAAA3e,GACA,QAAAA,EAAAkE,KAAAG,IAAArE,IAAA,EAAAA,GAAA,EAGA,QAAA4e,GAAA5e,GACA,QAAAA,EAAAkE,KAAAG,IAAArE,IAAA,EAAAA,GAAA,EAGA,QAAA6nB,GAAA7nB,GACA,QAAAA,EAAAkE,KAAAG,IAAA,EAAArE,IAAA,IAAAA,EAAA,GAKA,QAAA8nB,GAAAC,EAAAC,GACA,GAKA/rB,GACAgsB,EANAC,EAAAH,EAAA,GAAAI,EAAAJ,EAAA,GAAAK,EAAAL,EAAA,GACAM,EAAAL,EAAA,GAAAM,EAAAN,EAAA,GAAAO,EAAAP,EAAA,GACAQ,EAAAH,EAAAH,EACAO,EAAAH,EAAAH,EACAO,EAAAF,EAAAA,EAAAC,EAAAA,CAKA,IAAAC,EAAAC,EACAV,EAAA/jB,KAAAoD,IAAAihB,EAAAH,GAAAQ,EACA3sB,EAAA,SAAAR,GACA,OACAysB,EAAAzsB,EAAA+sB,EACAL,EAAA1sB,EAAAgtB,EACAL,EAAAlkB,KAAAG,IAAAukB,EAAAntB,EAAAwsB,SAMA,CACA,GAAAY,GAAA3kB,KAAAsD,KAAAkhB,GACAI,GAAAP,EAAAA,EAAAH,EAAAA,EAAAW,EAAAL,IAAA,EAAAN,EAAAY,EAAAH,GACAI,GAAAV,EAAAA,EAAAH,EAAAA,EAAAW,EAAAL,IAAA,EAAAH,EAAAS,EAAAH,GACAK,EAAAhlB,KAAAoD,IAAApD,KAAAsD,KAAAshB,EAAAA,EAAA,GAAAA,GACAK,EAAAjlB,KAAAoD,IAAApD,KAAAsD,KAAAyhB,EAAAA,EAAA,GAAAA,EACAhB,IAAAkB,EAAAD,GAAAN,EACA3sB,EAAA,SAAAR,GACA,GAAAG,GAAAH,EAAAwsB,EACAmB,EAAAzK,EAAAuK,GACAptB,EAAAssB,GAAAY,EAAAH,IAAAO,EAAAvB,EAAAe,EAAAhtB,EAAAstB,GAAAtK,EAAAsK,GACA,QACAhB,EAAApsB,EAAA0sB,EACAL,EAAArsB,EAAA2sB,EACAL,EAAAgB,EAAAzK,EAAAiK,EAAAhtB,EAAAstB,KAOA,MAFAjtB,GAAAotB,SAAA,IAAApB,EAEAhsB,EAGA,QAAAqtB,GAAAtF,GACA,MAAA,UAAA5Y,EAAAme,GACA,GAAAzc,GAAAkX,GAAA5Y,EAAAkY,EAAA5Q,IAAAtH,IAAA0B,GAAAyc,EAAAjG,EAAA5Q,IAAA6W,IAAAzc,GACAlR,EAAAsoB,EAAA9Y,EAAAxP,EAAA2tB,EAAA3tB,GACAQ,EAAA8nB,EAAA9Y,EAAAhP,EAAAmtB,EAAAntB,GACAmW,EAAA2R,EAAA9Y,EAAAmH,QAAAgX,EAAAhX,QACA,OAAA,UAAA9W,GAKA,MAJA2P,GAAA0B,EAAAA,EAAArR,GACA2P,EAAAxP,EAAAA,EAAAH,GACA2P,EAAAhP,EAAAA,EAAAX,GACA2P,EAAAmH,QAAAA,EAAA9W,GACA2P,EAAA,KAQA,QAAAoe,GAAApe,EAAAme,GACA,GAAAntB,GAAA8nB,GAAA9Y,EAAAkY,EAAA7P,IAAArI,IAAAhP,GAAAmtB,EAAAjG,EAAA7P,IAAA8V,IAAAntB,GACAL,EAAAmoB,EAAA9Y,EAAArP,EAAAwtB,EAAAxtB,GACA2I,EAAAwf,EAAA9Y,EAAA1G,EAAA6kB,EAAA7kB,GACA6N,EAAA2R,EAAA9Y,EAAAmH,QAAAgX,EAAAhX,QACA,OAAA,UAAA9W,GAKA,MAJA2P,GAAAhP,EAAAA,EAAAX,GACA2P,EAAArP,EAAAA,EAAAN,GACA2P,EAAA1G,EAAAA,EAAAjJ,GACA2P,EAAAmH,QAAAA,EAAA9W,GACA2P,EAAA,IAIA,QAAAqe,GAAAzF,GACA,MAAA,UAAA5Y,EAAAme,GACA,GAAAzc,GAAAkX,GAAA5Y,EAAAkY,EAAAnP,IAAA/I,IAAA0B,GAAAyc,EAAAjG,EAAAnP,IAAAoV,IAAAzc,GACA7B,EAAAiZ,EAAA9Y,EAAAH,EAAAse,EAAAte,GACA7O,EAAA8nB,EAAA9Y,EAAAhP,EAAAmtB,EAAAntB,GACAmW,EAAA2R,EAAA9Y,EAAAmH,QAAAgX,EAAAhX,QACA,OAAA,UAAA9W,GAKA,MAJA2P,GAAA0B,EAAAA,EAAArR,GACA2P,EAAAH,EAAAA,EAAAxP,GACA2P,EAAAhP,EAAAA,EAAAX,GACA2P,EAAAmH,QAAAA,EAAA9W,GACA2P,EAAA,KAQA,QAAAse,GAAA1F,GACA,MAAA,SAAA2F,GAAAzpB,GAGA,QAAA2U,GAAAzJ,EAAAme,GACA,GAAAzc,GAAAkX,GAAA5Y,EAAAkY,EAAAzO,UAAAzJ,IAAA0B,GAAAyc,EAAAjG,EAAAzO,UAAA0U,IAAAzc,GACAlR,EAAAsoB,EAAA9Y,EAAAxP,EAAA2tB,EAAA3tB,GACAQ,EAAA8nB,EAAA9Y,EAAAhP,EAAAmtB,EAAAntB,GACAmW,EAAA2R,EAAA9Y,EAAAmH,QAAAgX,EAAAhX,QACA,OAAA,UAAA9W,GAKA,MAJA2P,GAAA0B,EAAAA,EAAArR,GACA2P,EAAAxP,EAAAA,EAAAH,GACA2P,EAAAhP,EAAAA,EAAA8H,KAAAI,IAAA7I,EAAAyE,IACAkL,EAAAmH,QAAAA,EAAA9W,GACA2P,EAAA,IAMA,MAlBAlL,IAAAA,EAgBA2U,EAAAoP,MAAA0F,EAEA9U,GACA,GAMA,QAAA+U,GAAAC,EAAAnuB,GAEA,IAAA,GADAouB,GAAA,GAAAjkB,OAAAnK,GACAO,EAAA,EAAAA,EAAAP,IAAAO,EAAA6tB,EAAA7tB,GAAA4tB,EAAA5tB,GAAAP,EAAA,GACA,OAAAouB,GAvbA,GAiNA7D,GACAG,EACAE,EACAQ,EApNAxB,EAAA,QAAAyE,IAAA7pB,GAGA,QAAAoS,GAAAlH,EAAAme,GACA,GAAA5tB,GAAAiB,GAAAwO,EAAAkY,EAAAhR,IAAAlH,IAAAzP,GAAA4tB,EAAAjG,EAAAhR,IAAAiX,IAAA5tB,GACAT,EAAA0B,EAAAwO,EAAAlQ,EAAAquB,EAAAruB,GACAwJ,EAAA9H,EAAAwO,EAAA1G,EAAA6kB,EAAA7kB,GACA6N,EAAA3V,EAAAwO,EAAAmH,QAAAgX,EAAAhX,QACA,OAAA,UAAA9W,GAKA,MAJA2P,GAAAzP,EAAAA,EAAAF,GACA2P,EAAAlQ,EAAAA,EAAAO,GACA2P,EAAA1G,EAAAA,EAAAjJ,GACA2P,EAAAmH,QAAAA,EAAA9W,GACA2P,EAAA,IAZA,GAAAxO,GAAAqnB,EAAA/jB,EAkBA,OAFAoS,GAAA2R,MAAA8F,GAEAzX,GACA,GA4BA0X,EAAA7F,EAAAP,GACAqG,EAAA9F,EAAAN,GAqDAoB,EAAA,8CACAE,EAAA,GAAA+E,QAAAjF,EAAAkF,OAAA,KA+EArE,EAAA,IAAA5hB,KAAAqa,GAEApT,GACAwa,WAAA,EACAC,WAAA,EACAC,OAAA,EACAH,MAAA,EACAF,OAAA,EACAC,OAAA,GAoGA2E,EAAAjD,EAAAnB,EAAA,OAAA,MAAA,QACAqE,EAAAlD,EAAAN,EAAA,KAAA,IAAA,KAEA+B,EAAA1kB,KAAAomB,MACAtB,EAAA,EACAD,EAAA,EACAJ,EAAA,MA6EA4B,EAAAjB,EAAAtF,GACAwG,EAAAlB,EAAApF,GAgCAuG,EAAAhB,EAAAzF,GACA0G,GAAAjB,EAAAvF,GA0BAyG,GAAAjB,EAAA1F,GACA4G,GAAAlB,EAAAxF,EAQAppB,GAAA+vB,YAAA7pB,EACAlG,EAAAgwB,iBAAAhgB,EACAhQ,EAAAiwB,iBAAAnH,EACA9oB,EAAAkwB,uBAAAnH,EACA/oB,EAAAmwB,gBAAAzG,EACA1pB,EAAAowB,kBAAArgB,EACA/P,EAAAqwB,kBAAArc,EACAhU,EAAAswB,iBAAA9M,EACAxjB,EAAAuwB,kBAAAzG,EACA9pB,EAAAsvB,wBAAAA,EACAtvB,EAAAuvB,wBAAAA,EACAvvB,EAAAwwB,gBAAAxD,EACAhtB,EAAAywB,eAAAjG,EACAxqB,EAAA0wB,oBAAAxB,EACAlvB,EAAA2wB,0BAAAxB,EACAnvB,EAAA4wB,eAAAnB,EACAzvB,EAAA6wB,mBAAAnB,EACA1vB,EAAA8wB,eAAApC,EACA1uB,EAAA+wB,eAAApB,EACA3vB,EAAAgxB,mBAAApB,GACA5vB,EAAAixB,qBAAApB,GACA7vB,EAAAkxB,yBAAApB,GACA9vB,EAAA8uB,SAAAA,EAEA1oB,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,Q1BknGGirB,WAAW,KAAKC,IAAI,SAASlwB,EAAQjB,EAAOD,I2B5oH/C,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,EAAAkB,EAAA,YAAAA,EAAA,iBAAAA,EAAA,kBAAAA,EAAA,aAAAA,EAAA,WAAAA,EAAA,kBAAAA,EAAA,aACA,kBAAAhB,IAAAA,EAAAC,IAAAD,GAAA,UAAA,WAAA,gBAAA,iBAAA,YAAA,UAAA,iBAAA,YAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,OAAAlP,EAAAkP,GAAAlP,EAAAkP,GAAAlP,EAAAkP,GAAAlP,EAAAkP,GAAAlP,EAAAkP,GAAAlP,EAAAkP,GAAAlP,EAAAkP,KACAhP,KAAA,SAAAR,EAAAqxB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAlJ,GAAA,YASA,SAAAmJ,GAAAvqB,GAOA,QAAAhF,GAAAkC,GACA,GAAA4P,GAAA5P,EAAA,GAAAnD,EAAAopB,EAAAzV,IAAAZ,EACA,KAAA/S,EAAA,CACA,GAAAywB,IAAAC,EAAA,MAAAD,EACArH,GAAApW,IAAAD,EAAA/S,EAAA8F,EAAAF,KAAAzC,IAEA,MAAA8C,IAAAjG,EAAA,GAAAiG,EAAA5F,QAZA,GAAA+oB,GAAA+G,EAAAjtB,MACA4C,KACA2qB,EAAAC,CAoCA,OAlCAzqB,GAAA,MAAAA,KAAA0B,EAAAvH,KAAA6F,GAWAhF,EAAA6E,OAAA,SAAAnB,GACA,IAAAC,UAAAvE,OAAA,MAAAyF,GAAA6B,OACA7B,MAAAsjB,EAAA+G,EAAAjtB,KAEA,KADA,GAAAC,GAAA4P,EAAA/S,KAAAP,EAAAkF,EAAAtE,SACAL,EAAAP,GAAA2pB,EAAA5U,IAAAzB,GAAA5P,EAAAwB,EAAA3E,IAAA,KAAAopB,EAAApW,IAAAD,EAAAjN,EAAAF,KAAAzC,GACA,OAAAlC,IAGAA,EAAAgF,MAAA,SAAAtB,GACA,MAAAC,WAAAvE,QAAA4F,EAAA0B,EAAAvH,KAAAuE,GAAA1D,GAAAgF,EAAA0B,SAGA1G,EAAAwvB,QAAA,SAAA9rB,GACA,MAAAC,WAAAvE,QAAAowB,EAAA9rB,EAAA1D,GAAAwvB,GAGAxvB,EAAA0I,KAAA,WACA,MAAA6mB,KACA1qB,OAAAA,GACAG,MAAAA,GACAwqB,QAAAA,IAGAxvB,EAGA,QAAA0vB,KAcA,QAAAC,KACA,GAAAnxB,GAAAqG,IAAAzF,OACA+jB,EAAAne,EAAA,GAAAA,EAAA,GACAkJ,EAAAlJ,EAAAme,EAAA,GACAhV,EAAAnJ,EAAA,EAAAme,EACA/U,IAAAD,EAAAD,GAAAlH,KAAAT,IAAA,EAAA/H,EAAAoxB,EAAA,EAAAC,GACAzO,IAAAhT,EAAApH,KAAAuC,MAAA6E,IACAF,IAAAC,EAAAD,EAAAE,GAAA5P,EAAAoxB,IAAA3L,EACA6L,EAAA1hB,GAAA,EAAAwhB,GACAxO,IAAAlT,EAAAlH,KAAAoa,MAAAlT,GAAA4hB,EAAA9oB,KAAAoa,MAAA0O,GACA,IAAA/gB,GAAAkgB,EAAAjqB,MAAAxG,GAAAyD,IAAA,SAAAlD,GAAA,MAAAmP,GAAAE,EAAArP,GACA,OAAAgxB,GAAA5M,EAAApU,EAAAoU,UAAApU,GAxBA,GAIAX,GACA0hB,EALA9vB,EAAAuvB,IAAAC,QAAAQ,QACAnrB,EAAA7E,EAAA6E,OACAkrB,EAAA/vB,EAAAgF,MACAA,GAAA,EAAA,GAGAoc,GAAA,EACAwO,EAAA,EACAC,EAAA,EACA5L,EAAA,EAoEA,cAlEAjkB,GAAAwvB,QAgBAxvB,EAAA6E,OAAA,SAAAnB,GACA,MAAAC,WAAAvE,QAAAyF,EAAAnB,GAAAisB,KAAA9qB,KAGA7E,EAAAgF,MAAA,SAAAtB,GACA,MAAAC,WAAAvE,QAAA4F,IAAAtB,EAAA,IAAAA,EAAA,IAAAisB,KAAA3qB,EAAA0B,SAGA1G,EAAAiwB,WAAA,SAAAvsB,GACA,MAAAsB,KAAAtB,EAAA,IAAAA,EAAA,IAAA0d,GAAA,EAAAuO,KAGA3vB,EAAA8vB,UAAA,WACA,MAAAA,IAGA9vB,EAAAoO,KAAA,WACA,MAAAA,IAGApO,EAAAohB,MAAA,SAAA1d,GACA,MAAAC,WAAAvE,QAAAgiB,IAAA1d,EAAAisB,KAAAvO,GAGAphB,EAAAqlB,QAAA,SAAA3hB,GACA,MAAAC,WAAAvE,QAAAwwB,EAAAC,EAAA7oB,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,EAAA/G,IAAAisB,KAAAC,GAGA5vB,EAAA4vB,aAAA,SAAAlsB,GACA,MAAAC,WAAAvE,QAAAwwB,EAAA5oB,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,EAAA/G,IAAAisB,KAAAC,GAGA5vB,EAAA6vB,aAAA,SAAAnsB,GACA,MAAAC,WAAAvE,QAAAywB,EAAA7oB,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,EAAA/G,IAAAisB,KAAAE,GAGA7vB,EAAAikB,MAAA,SAAAvgB,GACA,MAAAC,WAAAvE,QAAA6kB,EAAAjd,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,EAAA/G,IAAAisB,KAAA1L,GAGAjkB,EAAA0I,KAAA,WACA,MAAAgnB,KACA7qB,OAAAA,KACAG,MAAAA,GACAoc,MAAAA,GACAwO,aAAAA,GACAC,aAAAA,GACA5L,MAAAA,IAGA0L,IAGA,QAAAO,GAAAlwB,GACA,GAAA0I,GAAA1I,EAAA0I,IAUA,OARA1I,GAAAqlB,QAAArlB,EAAA6vB,mBACA7vB,GAAA4vB,mBACA5vB,GAAA6vB,aAEA7vB,EAAA0I,KAAA,WACA,MAAAwnB,GAAAxnB,MAGA1I,EAGA,QAAA0H,KACA,MAAAwoB,GAAAR,IAAAE,aAAA,IAGA,QAAA5hB,GAAAlL,GACA,MAAA,YACA,MAAAA,IAIA,QAAA6K,GAAA7K,GACA,OAAAA,EAKA,QAAAqtB,GAAAtxB,EAAA2I,GACA,OAAAA,GAAA3I,GAAAA,GACA,SAAAiE,GAAA,OAAAA,EAAAjE,GAAA2I,GACAwG,EAAAxG,GAGA,QAAA4oB,GAAAD,GACA,MAAA,UAAAtxB,EAAA2I,GACA,GAAAtF,GAAAiuB,EAAAtxB,GAAAA,EAAA2I,GAAAA,EACA,OAAA,UAAA1E,GAAA,MAAAA,IAAAjE,EAAA,EAAAiE,GAAA0E,EAAA,EAAAtF,EAAAY,KAIA,QAAAutB,GAAAC,GACA,MAAA,UAAAzxB,EAAA2I,GACA,GAAA/I,GAAA6xB,EAAAzxB,GAAAA,EAAA2I,GAAAA,EACA,OAAA,UAAAjJ,GAAA,MAAAA,IAAA,EAAAM,EAAAN,GAAA,EAAAiJ,EAAA/I,EAAAF,KAIA,QAAAgyB,GAAA1rB,EAAAG,EAAAmrB,EAAAG,GACA,GAAAE,GAAA3rB,EAAA,GAAA8mB,EAAA9mB,EAAA,GAAAmnB,EAAAhnB,EAAA,GAAAinB,EAAAjnB,EAAA,EAGA,OAFA2mB,GAAA6E,GAAAA,EAAAL,EAAAxE,EAAA6E,GAAAxE,EAAAsE,EAAArE,EAAAD,KACAwE,EAAAL,EAAAK,EAAA7E,GAAAK,EAAAsE,EAAAtE,EAAAC,IACA,SAAAnpB,GAAA,MAAAkpB,GAAAwE,EAAA1tB,KAGA,QAAA2tB,GAAA5rB,EAAAG,EAAAmrB,EAAAG,GACA,GAAA5lB,GAAA1D,KAAAyD,IAAA5F,EAAAzF,OAAA4F,EAAA5F,QAAA,EACA8C,EAAA,GAAAyG,OAAA+B,GACAjM,EAAA,GAAAkK,OAAA+B,GACA3L,IAQA,KALA8F,EAAA6F,GAAA7F,EAAA,KACAA,EAAAA,EAAA6B,QAAAyc,UACAne,EAAAA,EAAA0B,QAAAyc,aAGApkB,EAAA2L,GACAxI,EAAAnD,GAAAoxB,EAAAtrB,EAAA9F,GAAA8F,EAAA9F,EAAA,IACAN,EAAAM,GAAAuxB,EAAAtrB,EAAAjG,GAAAiG,EAAAjG,EAAA,GAGA,OAAA,UAAA+D,GACA,GAAA/D,GAAAkwB,EAAA3d,OAAAzM,EAAA/B,EAAA,EAAA4H,GAAA,CACA,OAAAjM,GAAAM,GAAAmD,EAAAnD,GAAA+D,KAIA,QAAA4F,GAAAukB,EAAAyD,GACA,MAAAA,GACA7rB,OAAAooB,EAAApoB,UACAG,MAAAioB,EAAAjoB,SACA2oB,YAAAV,EAAAU,eACAgD,MAAA1D,EAAA0D,SAKA,QAAAC,GAAAC,EAAAP,GASA,QAAAX,KAGA,MAFAmB,GAAA9pB,KAAAyD,IAAA5F,EAAAzF,OAAA4F,EAAA5F,QAAA,EAAAqxB,EAAAF,EACAQ,EAAAC,EAAA,KACAhxB,EAGA,QAAAA,GAAA8C,GACA,OAAAiuB,IAAAA,EAAAD,EAAAjsB,EAAAG,EAAA2rB,EAAAP,EAAAS,GAAAA,EAAAlD,MAAA7qB,GAfA,GAIAguB,GACAC,EACAC,EANAnsB,EAAAosB,EACAjsB,EAAAisB,EACAtD,EAAAwB,EAAAxB,YACAgD,GAAA,CAuCA,OAxBA3wB,GAAAiF,OAAA,SAAAjC,GACA,OAAAguB,IAAAA,EAAAF,EAAA9rB,EAAAH,EAAAsrB,EAAAQ,EAAAN,EAAAC,GAAAA,MAAAttB,IAGAhD,EAAA6E,OAAA,SAAAnB,GACA,MAAAC,WAAAvE,QAAAyF,EAAAqsB,EAAA/xB,KAAAuE,EAAAiK,GAAAgiB,KAAA9qB,EAAA6B,SAGA1G,EAAAgF,MAAA,SAAAtB,GACA,MAAAC,WAAAvE,QAAA4F,EAAA0B,EAAAvH,KAAAuE,GAAAisB,KAAA3qB,EAAA0B,SAGA1G,EAAAiwB,WAAA,SAAAvsB,GACA,MAAAsB,GAAA0B,EAAAvH,KAAAuE,GAAAiqB,EAAAwB,EAAAjB,iBAAAyB,KAGA3vB,EAAA2wB,MAAA,SAAAjtB,GACA,MAAAC,WAAAvE,QAAAuxB,IAAAjtB,EAAAisB,KAAAgB,GAGA3wB,EAAA2tB,YAAA,SAAAjqB,GACA,MAAAC,WAAAvE,QAAAuuB,EAAAjqB,EAAAisB,KAAAhC,GAGAgC,IAGA,QAAAwB,GAAAtsB,EAAAwJ,EAAAuV,GACA,GAGAS,GAHAnW,EAAArJ,EAAA,GACAsJ,EAAAtJ,EAAAA,EAAAzF,OAAA,GACAgP,EAAA6gB,EAAA3gB,SAAAJ,EAAAC,EAAA,MAAAE,EAAA,GAAAA,EAGA,QADAuV,EAAAwL,EAAAzL,gBAAA,MAAAC,EAAA,KAAAA,GACAA,EAAA/jB,MACA,IAAA,IACA,GAAAiE,GAAAkD,KAAAT,IAAAS,KAAAC,IAAAiH,GAAAlH,KAAAC,IAAAkH,GAEA,OADA,OAAAyV,EAAAS,WAAAvY,MAAAuY,EAAA+K,EAAAzJ,gBAAAvX,EAAAtK,MAAA8f,EAAAS,UAAAA,GACA+K,EAAA5J,aAAA5B,EAAA9f,EAEA,KAAA,GACA,IAAA,IACA,IAAA,IACA,IAAA,IACA,IAAA,IACA,MAAA8f,EAAAS,WAAAvY,MAAAuY,EAAA+K,EAAAxJ,eAAAxX,EAAApH,KAAAT,IAAAS,KAAAC,IAAAiH,GAAAlH,KAAAC,IAAAkH,QAAAyV,EAAAS,UAAAA,GAAA,MAAAT,EAAA/jB,MACA,MAEA,KAAA,IACA,IAAA,IACA,MAAA+jB,EAAAS,WAAAvY,MAAAuY,EAAA+K,EAAA1J,eAAAtX,MAAAwV,EAAAS,UAAAA,EAAA,GAAA,MAAAT,EAAA/jB,OAIA,MAAAuvB,GAAA7rB,OAAAqgB,GAGA,QAAAwN,GAAApxB,GACA,GAAA6E,GAAA7E,EAAA6E,MA6BA,OA3BA7E,GAAAoF,MAAA,SAAAiJ,GACA,GAAAnM,GAAA2C,GACA,OAAAoqB,GAAA7pB,MAAAlD,EAAA,GAAAA,EAAAA,EAAA9C,OAAA,GAAA,MAAAiP,EAAA,GAAAA,IAGArO,EAAAmxB,WAAA,SAAA9iB,EAAAuV,GACA,MAAAuN,GAAAtsB,IAAAwJ,EAAAuV,IAGA5jB,EAAAqxB,KAAA,SAAAhjB,GACA,GAAAnM,GAAA2C,IACA9F,EAAAmD,EAAA9C,OAAA,EACAZ,EAAA,MAAA6P,EAAA,GAAAA,EACAH,EAAAhM,EAAA,GACAiM,EAAAjM,EAAAnD,GACAqP,EAAA6gB,EAAA3gB,SAAAJ,EAAAC,EAAA3P,EASA,OAPA4P,KACAA,EAAA6gB,EAAA3gB,SAAAtH,KAAAuC,MAAA2E,EAAAE,GAAAA,EAAApH,KAAA4C,KAAAuE,EAAAC,GAAAA,EAAA5P,GACA0D,EAAA,GAAA8E,KAAAuC,MAAA2E,EAAAE,GAAAA,EACAlM,EAAAnD,GAAAiI,KAAA4C,KAAAuE,EAAAC,GAAAA,EACAvJ,EAAA3C,IAGAlC,GAGAA,EAGA,QAAA4mB,KACA,GAAA5mB,GAAA4wB,EAAAT,EAAAhB,EAAAnB,kBAMA,OAJAhuB,GAAA0I,KAAA,WACA,MAAAA,GAAA1I,EAAA4mB,MAGAwK,EAAApxB,GAGA,QAAAiO,KAGA,QAAAjO,GAAA8C,GACA,OAAAA,EAHA,GAAA+B,IAAA,EAAA,EAgBA,OAVA7E,GAAAiF,OAAAjF,EAEAA,EAAA6E,OAAA7E,EAAAgF,MAAA,SAAAtB,GACA,MAAAC,WAAAvE,QAAAyF,EAAAqsB,EAAA/xB,KAAAuE,EAAAiK,GAAA3N,GAAA6E,EAAA6B,SAGA1G,EAAA0I,KAAA,WACA,MAAAuF,KAAApJ,OAAAA,IAGAusB,EAAApxB,GAGA,QAAAqxB,GAAAxsB,EAAAysB,GACAzsB,EAAAA,EAAA6B,OAEA,IAIAnI,GAJAqS,EAAA,EACAC,EAAAhM,EAAAzF,OAAA,EACA+P,EAAAtK,EAAA+L,GACAxB,EAAAvK,EAAAgM,EAUA,OAPAzB,GAAAD,IACA5Q,EAAAqS,EAAAA,EAAAC,EAAAA,EAAAtS,EACAA,EAAA4Q,EAAAA,EAAAC,EAAAA,EAAA7Q,GAGAsG,EAAA+L,GAAA0gB,EAAA/nB,MAAA4F,GACAtK,EAAAgM,GAAAygB,EAAA1nB,KAAAwF,GACAvK,EAGA,QAAA0sB,GAAA1yB,EAAA2I,GACA,OAAAA,EAAAR,KAAAoD,IAAA5C,EAAA3I,IACA,SAAAiE,GAAA,MAAAkE,MAAAoD,IAAAtH,EAAAjE,GAAA2I,GACAwG,EAAAxG,GAGA,QAAA8oB,GAAAzxB,EAAA2I,GACA,MAAA3I,GAAA,EACA,SAAAN,GAAA,OAAAyI,KAAAI,KAAAI,EAAAjJ,GAAAyI,KAAAI,KAAAvI,EAAA,EAAAN,IACA,SAAAA,GAAA,MAAAyI,MAAAI,IAAAI,EAAAjJ,GAAAyI,KAAAI,IAAAvI,EAAA,EAAAN,IAGA,QAAAizB,GAAA1uB,GACA,MAAA2uB,UAAA3uB,KAAA,KAAAA,GAAAA,EAAA,EAAA,EAAAA,EAGA,QAAA4uB,GAAAC,GACA,MAAA,MAAAA,EAAAH,EACAG,IAAA3qB,KAAAwQ,EAAAxQ,KAAAG,IACA,SAAArE,GAAA,MAAAkE,MAAAI,IAAAuqB,EAAA7uB,IAGA,QAAA8uB,GAAAD,GACA,MAAAA,KAAA3qB,KAAAwQ,EAAAxQ,KAAAoD,IACA,KAAAunB,GAAA3qB,KAAA6qB,OACA,IAAAF,GAAA3qB,KAAA8qB,OACAH,EAAA3qB,KAAAoD,IAAAunB,GAAA,SAAA7uB,GAAA,MAAAkE,MAAAoD,IAAAtH,GAAA6uB,IAGA,QAAAI,GAAAp0B,GACA,MAAA,UAAAmF,GACA,OAAAnF,GAAAmF,IAIA,QAAAsH,KAOA,QAAAulB,KAGA,MAFAqC,GAAAJ,EAAAD,GAAAM,EAAAP,EAAAC,GACA9sB,IAAA,GAAA,IAAAmtB,EAAAD,EAAAC,GAAAC,EAAAF,EAAAE,IACAjyB,EATA,GAAAA,GAAA4wB,EAAAW,EAAAjB,GAAAzrB,QAAA,EAAA,KACAA,EAAA7E,EAAA6E,OACA8sB,EAAA,GACAK,EAAAJ,EAAA,IACAK,EAAAP,EAAA,GAgFA,OAxEA1xB,GAAA2xB,KAAA,SAAAjuB,GACA,MAAAC,WAAAvE,QAAAuyB,GAAAjuB,EAAAisB,KAAAgC,GAGA3xB,EAAA6E,OAAA,SAAAnB,GACA,MAAAC,WAAAvE,QAAAyF,EAAAnB,GAAAisB,KAAA9qB,KAGA7E,EAAAoF,MAAA,SAAAiJ,GACA,GAGA5P,GAHAyD,EAAA2C,IACAjG,EAAAsD,EAAA,GACAoK,EAAApK,EAAAA,EAAA9C,OAAA,IAGAX,EAAA6N,EAAA1N,KAAAG,EAAAH,EAAAA,EAAA0N,EAAAA,EAAAvN,EAEA,IAEA0J,GACAU,EACA5K,EAJAQ,EAAAizB,EAAApzB,GACA8L,EAAAsnB,EAAA1lB,GAIA9N,EAAA,MAAA6P,EAAA,IAAAA,EACAlE,IAEA,MAAAwnB,EAAA,IAAAjnB,EAAA3L,EAAAP,GAEA,GADAO,EAAAiI,KAAAoa,MAAAriB,GAAA,EAAA2L,EAAA1D,KAAAoa,MAAA1W,GAAA,EACA9L,EAAA,GAAA,KAAAG,EAAA2L,IAAA3L,EACA,IAAAoK,EAAA,EAAAV,EAAAwpB,EAAAlzB,GAAAoK,EAAAwoB,IAAAxoB,EAEA,GADA5K,EAAAkK,EAAAU,IACA5K,EAAAK,GAAA,CACA,GAAAL,EAAA+N,EAAA,KACAnC,GAAAxF,KAAApG,QAEA,MAAAQ,EAAA2L,IAAA3L,EACA,IAAAoK,EAAAwoB,EAAA,EAAAlpB,EAAAwpB,EAAAlzB,GAAAoK,GAAA,IAAAA,EAEA,GADA5K,EAAAkK,EAAAU,IACA5K,EAAAK,GAAA,CACA,GAAAL,EAAA+N,EAAA,KACAnC,GAAAxF,KAAApG,QAIA4L,GAAA8kB,EAAA7pB,MAAArG,EAAA2L,EAAA1D,KAAAyD,IAAAC,EAAA3L,EAAAP,IAAAyD,IAAAgwB,EAGA,OAAAxzB,GAAA0L,EAAAgZ,UAAAhZ,GAGAnK,EAAAmxB,WAAA,SAAA9iB,EAAAuV,GAGA,GAFA,MAAAA,IAAAA,EAAA,KAAA+N,EAAA,MAAA,KACA,kBAAA/N,KAAAA,EAAAwL,EAAA7rB,OAAAqgB,IACAvV,IAAA+W,EAAAA,EAAA,MAAAxB,EACA,OAAAvV,IAAAA,EAAA,GACA,IAAAlF,GAAAnC,KAAAT,IAAA,EAAAorB,EAAAtjB,EAAArO,EAAAoF,QAAAhG,OACA,OAAA,UAAA8C,GACA,GAAAnD,GAAAmD,EAAA+vB,EAAAjrB,KAAAoa,MAAA4Q,EAAA9vB,IAEA,OADAnD,GAAA4yB,EAAAA,EAAA,KAAA5yB,GAAA4yB,GACA5yB,GAAAoK,EAAAya,EAAA1hB,GAAA,KAIAlC,EAAAqxB,KAAA,WACA,MAAAxsB,GAAAwsB,EAAAxsB,KACA0E,MAAA,SAAAzG,GAAA,MAAAmvB,GAAAjrB,KAAAuC,MAAAyoB,EAAAlvB,MACA8G,KAAA,SAAA9G,GAAA,MAAAmvB,GAAAjrB,KAAA4C,KAAAooB,EAAAlvB,UAIA9C,EAAA0I,KAAA,WACA,MAAAA,GAAA1I,EAAAoK,IAAAunB,KAAAA,KAGA3xB,EAGA,QAAAkyB,GAAApvB,EAAAggB,GACA,MAAAhgB,GAAA,GAAAkE,KAAAI,KAAAtE,EAAAggB,GAAA9b,KAAAI,IAAAtE,EAAAggB,GAGA,QAAA1b,KAKA,QAAA+oB,GAAAtxB,EAAA2I,GACA,OAAAA,EAAA0qB,EAAA1qB,EAAAsb,IAAAjkB,EAAAqzB,EAAArzB,EAAAikB,KACA,SAAAhgB,GAAA,OAAAovB,EAAApvB,EAAAggB,GAAAjkB,GAAA2I,GACAwG,EAAAxG,GAGA,QAAA8oB,GAAAzxB,EAAA2I,GAEA,MADAA,GAAA0qB,EAAA1qB,EAAAsb,IAAAjkB,EAAAqzB,EAAArzB,EAAAikB,IACA,SAAAvkB,GAAA,MAAA2zB,GAAArzB,EAAA2I,EAAAjJ,EAAA,EAAAukB,IAZA,GAAAA,GAAA,EACA9iB,EAAA4wB,EAAAT,EAAAG,GACAzrB,EAAA7E,EAAA6E,MAqBA,OARA7E,GAAA8iB,SAAA,SAAApf,GACA,MAAAC,WAAAvE,QAAA0jB,GAAApf,EAAAmB,EAAAA,MAAAie,GAGA9iB,EAAA0I,KAAA,WACA,MAAAA,GAAA1I,EAAAoH,IAAA0b,SAAAA,KAGAsO,EAAApxB,GAGA,QAAAsK,KACA,MAAAlD,KAAA0b,SAAA,IAGA,QAAAqP,KAKA,QAAAxC,KACA,GAAA5wB,GAAA,EAAAP,EAAAwI,KAAAT,IAAA,EAAAvB,EAAA5F,OAEA,KADAuQ,EAAA,GAAAhH,OAAAnK,EAAA,KACAO,EAAAP,GAAAmR,EAAA5Q,EAAA,GAAAkwB,EAAA1mB,SAAA1D,EAAA9F,EAAAP,EACA,OAAAwB,GAGA,QAAAA,GAAA8C,GACA,IAAAgJ,MAAAhJ,GAAAA,GAAA,MAAAkC,GAAAiqB,EAAA3d,OAAA3B,EAAA7M,IAZA,GAAA+B,MACAG,KACA2K,IA2CA,OA9BA3P,GAAAkF,aAAA,SAAAlC,GACA,GAAAjE,GAAAiG,EAAAkd,QAAAlf,EACA,OAAAjE,GAAA,GAAAqJ,IAAAA,MACArJ,EAAA,EAAA4Q,EAAA5Q,EAAA,GAAA8F,EAAA,GACA9F,EAAA4Q,EAAAvQ,OAAAuQ,EAAA5Q,GAAA8F,EAAAA,EAAAzF,OAAA,KAIAY,EAAA6E,OAAA,SAAAnB,GACA,IAAAC,UAAAvE,OAAA,MAAAyF,GAAA6B,OACA7B,KACA,KAAA,GAAA3C,GAAAnD,EAAA,EAAAP,EAAAkF,EAAAtE,OAAAL,EAAAP,IAAAO,EAAAmD,EAAAwB,EAAA3E,GAAA,MAAAmD,GAAA4J,MAAA5J,GAAAA,IAAA2C,EAAAF,KAAAzC,EAEA,OADA2C,GAAA4E,KAAAwlB,EAAAhvB,WACA0vB,KAGA3vB,EAAAgF,MAAA,SAAAtB,GACA,MAAAC,WAAAvE,QAAA4F,EAAA0B,EAAAvH,KAAAuE,GAAAisB,KAAA3qB,EAAA0B,SAGA1G,EAAAoyB,UAAA,WACA,MAAAziB,GAAAjJ,SAGA1G,EAAA0I,KAAA,WACA,MAAAypB,KACAttB,OAAAA,GACAG,MAAAA,IAGAhF,EAGA,QAAA0sB,KAOA,QAAA1sB,GAAA8C,GACA,GAAAA,GAAAA,EAAA,MAAAkC,GAAAiqB,EAAA3d,OAAAzM,EAAA/B,EAAA,EAAAtE,IAGA,QAAAmxB,KACA,GAAA5wB,KAEA,KADA8F,EAAA,GAAA8D,OAAAnK,KACAO,EAAAP,GAAAqG,EAAA9F,KAAAA,EAAA,GAAAqQ,GAAArQ,EAAAP,GAAA2Q,IAAA3Q,EAAA,EACA,OAAAwB,GAdA,GAAAmP,GAAA,EACAC,EAAA,EACA5Q,EAAA,EACAqG,GAAA,IACAG,GAAA,EAAA,EAmCA,OAtBAhF,GAAA6E,OAAA,SAAAnB,GACA,MAAAC,WAAAvE,QAAA+P,GAAAzL,EAAA,GAAA0L,GAAA1L,EAAA,GAAAisB,MAAAxgB,EAAAC,IAGApP,EAAAgF,MAAA,SAAAtB,GACA,MAAAC,WAAAvE,QAAAZ,GAAAwG,EAAA0B,EAAAvH,KAAAuE,IAAAtE,OAAA,EAAAuwB,KAAA3qB,EAAA0B,SAGA1G,EAAAkF,aAAA,SAAAlC,GACA,GAAAjE,GAAAiG,EAAAkd,QAAAlf,EACA,OAAAjE,GAAA,GAAAqJ,IAAAA,KACArJ,EAAA,GAAAoQ,EAAAtK,EAAA,IACA9F,GAAAP,GAAAqG,EAAArG,EAAA,GAAA4Q,IACAvK,EAAA9F,EAAA,GAAA8F,EAAA9F,KAGAiB,EAAA0I,KAAA,WACA,MAAAgkB,KACA7nB,QAAAsK,EAAAC,IACApK,MAAAA,IAGAosB,EAAApxB,GAGA,QAAAsP,KAKA,QAAAtP,GAAA8C,GACA,GAAAA,GAAAA,EAAA,MAAAkC,GAAAiqB,EAAA3d,OAAAzM,EAAA/B,EAAA,EAAAtE,IALA,GAAAqG,IAAA,IACAG,GAAA,EAAA,GACAxG,EAAA,CAyBA,OAnBAwB,GAAA6E,OAAA,SAAAnB,GACA,MAAAC,WAAAvE,QAAAyF,EAAA6B,EAAAvH,KAAAuE,GAAAlF,EAAAwI,KAAAyD,IAAA5F,EAAAzF,OAAA4F,EAAA5F,OAAA,GAAAY,GAAA6E,EAAA6B,SAGA1G,EAAAgF,MAAA,SAAAtB,GACA,MAAAC,WAAAvE,QAAA4F,EAAA0B,EAAAvH,KAAAuE,GAAAlF,EAAAwI,KAAAyD,IAAA5F,EAAAzF,OAAA4F,EAAA5F,OAAA,GAAAY,GAAAgF,EAAA0B,SAGA1G,EAAAkF,aAAA,SAAAlC,GACA,GAAAjE,GAAAiG,EAAAkd,QAAAlf,EACA,QAAA6B,EAAA9F,EAAA,GAAA8F,EAAA9F,KAGAiB,EAAA0I,KAAA,WACA,MAAA4G,KACAzK,OAAAA,GACAG,MAAAA,IAGAhF,EAUA,QAAAsnB,GAAA/oB,GACA,MAAA,IAAAgpB,MAAAhpB,GAGA,QAAA8zB,GAAA9zB,GACA,MAAAA,aAAAgpB,OAAAhpB,GAAA,GAAAgpB,QAAAhpB,IAGA,QAAA+zB,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAvvB,GAmCA,QAAA4tB,GAAA7J,GACA,OAAAuL,EAAAvL,GAAAA,EAAAyL,EACAH,EAAAtL,GAAAA,EAAA0L,EACAL,EAAArL,GAAAA,EAAA2L,EACAP,EAAApL,GAAAA,EAAA4L,EACAV,EAAAlL,GAAAA,EAAAmL,EAAAnL,GAAAA,EAAA6L,EAAAC,EACAb,EAAAjL,GAAAA,EAAA+L,EACAC,GAAAhM,GAGA,QAAAiM,GAAAjC,EAAApjB,EAAAC,EAAAC,GAMA,GALA,MAAAkjB,IAAAA,EAAA,IAKA,gBAAAA,GAAA,CACA,GAAAZ,GAAA1pB,KAAAC,IAAAkH,EAAAD,GAAAojB,EACAvyB,EAAAkwB,EAAA5hB,SAAA,SAAAtO,GAAA,MAAAA,GAAA,KAAAsK,MAAAmqB,EAAA9C,EACA3xB,KAAAy0B,EAAAp0B,QACAgP,EAAA6gB,EAAA3gB,SAAAJ,EAAAulB,GAAAtlB,EAAAslB,GAAAnC,GACAA,EAAAiB,GACAxzB,GACAA,EAAAy0B,EAAA9C,EAAA8C,EAAAz0B,EAAA,GAAA,GAAAy0B,EAAAz0B,GAAA,GAAA2xB,EAAA3xB,EAAA,EAAAA,GACAqP,EAAArP,EAAA,GACAuyB,EAAAvyB,EAAA,KAEAqP,EAAA6gB,EAAA3gB,SAAAJ,EAAAC,EAAAmjB,GACAA,EAAAwB,GAIA,MAAA,OAAA1kB,EAAAkjB,EAAAA,EAAAoC,MAAAtlB,GAlEA,GAAApO,GAAA4wB,EAAAT,EAAAhB,EAAAnB,mBACA/oB,EAAAjF,EAAAiF,OACAJ,EAAA7E,EAAA6E,OAEAkuB,EAAAxvB,EAAA,OACAyvB,EAAAzvB,EAAA,OACA0vB,EAAA1vB,EAAA,SACA2vB,EAAA3vB,EAAA,SACA4vB,EAAA5vB,EAAA,SACA6vB,EAAA7vB,EAAA,SACA8vB,EAAA9vB,EAAA,MACA+vB,EAAA/vB,EAAA,MAEAiwB,IACAX,EAAA,EAAAc,IACAd,EAAA,EAAA,EAAAc,IACAd,EAAA,GAAA,GAAAc,IACAd,EAAA,GAAA,GAAAc,IACAf,EAAA,EAAAgB,KACAhB,EAAA,EAAA,EAAAgB,KACAhB,EAAA,GAAA,GAAAgB,KACAhB,EAAA,GAAA,GAAAgB,KACAjB,EAAA,EAAAkB,KACAlB,EAAA,EAAA,EAAAkB,KACAlB,EAAA,EAAA,EAAAkB,KACAlB,EAAA,GAAA,GAAAkB,KACAnB,EAAA,EAAAoB,KACApB,EAAA,EAAA,EAAAoB,KACArB,EAAA,EAAAsB,KACAvB,EAAA,EAAAwB,KACAxB,EAAA,EAAA,EAAAwB,KACAzB,EAAA,EAAAkB,IAyEA,OAnCAzzB,GAAAiF,OAAA,SAAAjC,GACA,MAAA,IAAAukB,MAAAtiB,EAAAjC,KAGAhD,EAAA6E,OAAA,SAAAnB,GACA,MAAAC,WAAAvE,OAAAyF,EAAAqsB,EAAA/xB,KAAAuE,EAAA2uB,IAAAxtB,IAAA5C,IAAAqlB,IAGAtnB,EAAAoF,MAAA,SAAAksB,EAAAljB,GACA,GAIA7P,GAJA2D,EAAA2C,IACA6R,EAAAxU,EAAA,GACA0U,EAAA1U,EAAAA,EAAA9C,OAAA,GACAX,EAAAmY,EAAAF,CAKA,OAHAjY,KAAAF,EAAAmY,EAAAA,EAAAE,EAAAA,EAAArY,GACAA,EAAAg1B,EAAAjC,EAAA5a,EAAAE,EAAAxI,GACA7P,EAAAA,EAAAA,EAAAyG,MAAA0R,EAAAE,EAAA,MACAnY,EAAAF,EAAA4kB,UAAA5kB,GAGAyB,EAAAmxB,WAAA,SAAA9iB,EAAAuV,GACA,MAAA,OAAAA,EAAAuN,EAAA5tB,EAAAqgB,IAGA5jB,EAAAqxB,KAAA,SAAAC,EAAAljB,GACA,GAAAlM,GAAA2C,GACA,QAAAysB,EAAAiC,EAAAjC,EAAApvB,EAAA,GAAAA,EAAAA,EAAA9C,OAAA,GAAAgP,IACAvJ,EAAAwsB,EAAAnvB,EAAAovB,IACAtxB,GAGAA,EAAA0I,KAAA,WACA,MAAAA,GAAA1I,EAAAsyB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAvvB,KAGAvD,EAGA,QAAAi0B,KACA,MAAA3B,GAAAjD,EAAA6E,SAAA7E,EAAA8E,UAAA9E,EAAA+E,SAAA/E,EAAAgF,QAAAhF,EAAAiF,SAAAjF,EAAAkF,WAAAlF,EAAAmF,WAAAnF,EAAAoF,gBAAAnF,EAAAoF,YAAA7vB,QAAA,GAAA0iB,MAAA,IAAA,EAAA,GAAA,GAAAA,MAAA,IAAA,EAAA,KAGA,QAAAoN,KACA,MAAArC,GAAAjD,EAAAuF,QAAAvF,EAAAwF,SAAAxF,EAAAyF,QAAAzF,EAAA0F,OAAA1F,EAAA2F,QAAA3F,EAAA4F,UAAA5F,EAAA6F,UAAA7F,EAAA8F,eAAA7F,EAAA8F,WAAAvwB,QAAA0iB,KAAA8N,IAAA,IAAA,EAAA,GAAA9N,KAAA8N,IAAA,IAAA,EAAA,KAGA,QAAAlO,GAAAzoB,GACA,MAAAA,GAAAolB,MAAA,SAAA7hB,IAAA,SAAAa,GACA,MAAA,IAAAA,IAoBA,QAAAwyB,GAAA/2B,IACAA,EAAA,GAAAA,EAAA,KAAAA,GAAAyI,KAAAuC,MAAAhL,GACA,IAAAg3B,GAAAvuB,KAAAC,IAAA1I,EAAA,GAIA,OAHAi3B,IAAA5lB,EAAA,IAAArR,EAAA,IACAi3B,GAAA92B,EAAA,IAAA,IAAA62B,EACAC,GAAAt2B,EAAA,GAAA,GAAAq2B,EACAC,GAAA,GAGA,QAAAC,GAAAzwB,GACA,GAAAxG,GAAAwG,EAAA5F,MACA,OAAA,UAAAb,GACA,MAAAyG,GAAAgC,KAAAT,IAAA,EAAAS,KAAAyD,IAAAjM,EAAA,EAAAwI,KAAAuC,MAAAhL,EAAAC,OAYA,QAAAk3B,GAAA/I,GAKA,QAAA3sB,GAAA8C,GACA,GAAAvE,IAAAuE,EAAAqM,IAAAC,EAAAD,EACA,OAAAwd,GAAAgE,EAAA3pB,KAAAT,IAAA,EAAAS,KAAAyD,IAAA,EAAAlM,IAAAA,GANA,GAAA4Q,GAAA,EACAC,EAAA,EACAuhB,GAAA,CAuBA,OAhBA3wB,GAAA6E,OAAA,SAAAnB,GACA,MAAAC,WAAAvE,QAAA+P,GAAAzL,EAAA,GAAA0L,GAAA1L,EAAA,GAAA1D,IAAAmP,EAAAC,IAGApP,EAAA2wB,MAAA,SAAAjtB,GACA,MAAAC,WAAAvE,QAAAuxB,IAAAjtB,EAAA1D,GAAA2wB,GAGA3wB,EAAA2sB,aAAA,SAAAjpB,GACA,MAAAC,WAAAvE,QAAAutB,EAAAjpB,EAAA1D,GAAA2sB,GAGA3sB,EAAA0I,KAAA,WACA,MAAAgtB,GAAA/I,GAAA9nB,QAAAsK,EAAAC,IAAAuhB,MAAAA,IAGAS,EAAApxB,GA71BA,GAAA4N,GAAAjF,MAAA0I,UAEA6f,EAAAtjB,EAAA3L,IACAyE,EAAAkH,EAAAlH,MAEA+oB,GAAAxN,KAAA,YAyJAgP,GAAA,EAAA,GAofA0C,EAAA,IACAC,GAAA,GAAAD,EACAE,GAAA,GAAAD,GACAE,GAAA,GAAAD,GACAE,GAAA,EAAAD,GACAE,GAAA,GAAAF,GACAL,GAAA,IAAAK,GAmIA6B,GAAAxO,EAAA,gEAEAyO,GAAAzO,EAAA,4HAEA0O,GAAA1O,EAAA,4HAEA2O,GAAA3O,EAAA,4HAEAqF,GAAA2C,EAAAL,yBAAA1I,EAAAzO,UAAA,IAAA,GAAA,GAAAyO,EAAAzO,eAAA,GAAA,IAEAoe,GAAA5G,EAAAL,yBAAA1I,EAAAzO,eAAA,IAAA,KAAAyO,EAAAzO,UAAA,GAAA,IAAA,KAEAqe,GAAA7G,EAAAL,yBAAA1I,EAAAzO,UAAA,IAAA,IAAA,KAAAyO,EAAAzO,UAAA,GAAA,IAAA,KAEA6d,GAAApP,EAAAzO,YAkBAse,GAAAR,EAAAtO,EAAA,qgDAEA+O,GAAAT,EAAAtO,EAAA,qgDAEAgP,GAAAV,EAAAtO,EAAA,qgDAEAiP,GAAAX,EAAAtO,EAAA;AA+BAvpB,EAAAy4B,UAAA3G,EACA9xB,EAAA04B,WAAA5uB,EACA9J,EAAA24B,cAAAtoB,EACArQ,EAAAyF,YAAAujB,EACAhpB,EAAA44B,SAAApsB,EACAxM,EAAA64B,aAAAlH,EACA3xB,EAAA84B,cAAAjH,EACA7xB,EAAA+4B,SAAAvvB,EACAxJ,EAAAg5B,UAAAtsB,EACA1M,EAAAi5B,cAAA1E,EACAv0B,EAAAk5B,cAAApK,EACA9uB,EAAAm5B,eAAAznB,EACA1R,EAAAo5B,UAAA/C,EACAr2B,EAAAq5B,SAAAtC,EACA/2B,EAAAs5B,iBAAAvB,GACA/3B,EAAAu5B,kBAAAvB,GACAh4B,EAAAw5B,kBAAAvB,GACAj4B,EAAAy5B,iBAAAvB,GACAl4B,EAAA05B,4BAAA9K,GACA5uB,EAAA25B,mBAAAjC,EACA13B,EAAA45B,gBAAAzB,GACAn4B,EAAA65B,gBAAAzB,GACAp4B,EAAA85B,mBAAAzB,GACAr4B,EAAA+5B,iBAAAzB,GACAt4B,EAAAg6B,mBAAAzB,GACAv4B,EAAAi6B,kBAAAzB,GACAx4B,EAAAk6B,gBAAApC,EAEA1xB,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,Q3BipHG6C,WAAW,GAAGoxB,gBAAgB,GAAGhJ,WAAW,GAAG1qB,YAAY,GAAG2zB,iBAAiB,GAAGC,UAAU,GAAGC,iBAAiB,KAAKC,IAAI,SAASr5B,EAAQjB,EAAOD,I4BnhJpJ,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,EAAAkB,EAAA,YACA,kBAAAhB,IAAAA,EAAAC,IAAAD,GAAA,UAAA,WAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,OAAAlP,EAAAkP,KACAhP,KAAA,SAAAR,EAAAyxB,GAAA,YAEA,SAAA+I,GAAAl2B,GACA,GAAA,GAAAA,EAAAc,GAAAd,EAAAc,EAAA,IAAA,CACA,GAAAskB,GAAA,GAAAC,WAAArlB,EAAAqF,EAAArF,EAAAA,EAAAA,EAAAm2B,EAAAn2B,EAAAo2B,EAAAp2B,EAAA6oB,EAAA7oB,EAAAq2B,EAEA,OADAjR,GAAAkR,YAAAt2B,EAAAc,GACAskB,EAEA,MAAA,IAAAC,MAAArlB,EAAAc,EAAAd,EAAAqF,EAAArF,EAAAA,EAAAA,EAAAm2B,EAAAn2B,EAAAo2B,EAAAp2B,EAAA6oB,EAAA7oB,EAAAq2B,GAGA,QAAAE,GAAAv2B,GACA,GAAA,GAAAA,EAAAc,GAAAd,EAAAc,EAAA,IAAA,CACA,GAAAskB,GAAA,GAAAC,MAAAA,KAAA8N,OAAAnzB,EAAAqF,EAAArF,EAAAA,EAAAA,EAAAm2B,EAAAn2B,EAAAo2B,EAAAp2B,EAAA6oB,EAAA7oB,EAAAq2B,GAEA,OADAjR,GAAAoR,eAAAx2B,EAAAc,GACAskB,EAEA,MAAA,IAAAC,MAAAA,KAAA8N,IAAAnzB,EAAAc,EAAAd,EAAAqF,EAAArF,EAAAA,EAAAA,EAAAm2B,EAAAn2B,EAAAo2B,EAAAp2B,EAAA6oB,EAAA7oB,EAAAq2B,IAGA,QAAAI,GAAA31B,GACA,OAAAA,EAAAA,EAAAuE,EAAA,EAAArF,EAAA,EAAAm2B,EAAA,EAAAC,EAAA,EAAAvN,EAAA,EAAAwN,EAAA,GAGA,QAAAhU,GAAAC,GA8GA,QAAAC,GAAAb,EAAAgV,GACA,MAAA,UAAAtR,GACA,GAIAvZ,GACA8qB,EACAt1B,EANAmkB,KACA3oB,KACA2L,EAAA,EACAlM,EAAAolB,EAAAxkB,MAOA,KAFAkoB,YAAAC,QAAAD,EAAA,GAAAC,QAAAD,OAEAvoB,EAAAP,GACA,KAAAolB,EAAAmB,WAAAhmB,KACA2oB,EAAA/iB,KAAAif,EAAAld,MAAAgE,EAAA3L,IACA,OAAA85B,EAAAC,GAAA/qB,EAAA6V,EAAAmV,SAAAh6B,KAAAgP,EAAA6V,EAAAmV,SAAAh6B,GACA85B,EAAA,MAAA9qB,EAAA,IAAA,KACAxK,EAAAq1B,EAAA7qB,MAAAA,EAAAxK,EAAA+jB,EAAAuR,IACAnR,EAAA/iB,KAAAoJ,GACArD,EAAA3L,EAAA,EAKA,OADA2oB,GAAA/iB,KAAAif,EAAAld,MAAAgE,EAAA3L,IACA2oB,EAAAtE,KAAA,KAIA,QAAA4V,GAAApV,EAAAqV,GACA,MAAA,UAAAvR,GACA,GAAAxlB,GAAAy2B,EAAA,MACA55B,EAAAm6B,EAAAh3B,EAAA0hB,EAAA8D,GAAA,GAAA,EACA,IAAA3oB,GAAA2oB,EAAAtoB,OAAA,MAAA,KAMA,IAHA,KAAA8C,KAAAA,EAAAm2B,EAAAn2B,EAAAm2B,EAAA,GAAA,GAAAn2B,EAAAuG,GAGA,KAAAvG,IAAA,KAAAA,GAAA,CACA,KAAAA,KAAAA,EAAAi3B,EAAA,KAAAj3B,GAAA,EAAA,EACA,IAAAwwB,GAAA,KAAAxwB,GAAAu2B,EAAAE,EAAAz2B,EAAAc,IAAAo2B,YAAAH,EAAAN,EAAAz2B,EAAAc,IAAAq2B,QACAn3B,GAAAqF,EAAA,EACArF,EAAAA,EAAA,KAAAA,IAAAA,EAAAi3B,EAAA,GAAA,EAAA,EAAAj3B,EAAAo3B,GAAA5G,EAAA,GAAA,EAAAxwB,EAAAi3B,EAAA,EAAAj3B,EAAAq3B,GAAA7G,EAAA,GAAA,EAKA,MAAA,KAAAxwB,IACAA,EAAAm2B,GAAAn2B,EAAAs3B,EAAA,IAAA,EACAt3B,EAAAo2B,GAAAp2B,EAAAs3B,EAAA,IACAf,EAAAv2B,IAIA+2B,EAAA/2B,IAIA,QAAAg3B,GAAAh3B,EAAA0hB,EAAA8D,EAAAhd,GAOA,IANA,GAGAqD,GACAmc,EAJAnrB,EAAA,EACAP,EAAAolB,EAAAxkB,OACAmI,EAAAmgB,EAAAtoB,OAIAL,EAAAP,GAAA,CACA,GAAAkM,GAAAnD,EAAA,QAEA,IADAwG,EAAA6V,EAAAmB,WAAAhmB,KACA,KAAAgP,GAGA,GAFAA,EAAA6V,EAAAmV,OAAAh6B,KACAmrB,EAAAuP,GAAA1rB,IAAA+qB,IAAAlV,EAAAmV,OAAAh6B,KAAAgP,IACAmc,IAAAxf,EAAAwf,EAAAhoB,EAAAwlB,EAAAhd,IAAA,EAAA,aACA,IAAAqD,GAAA2Z,EAAA3C,WAAAra,KACA,SAIA,MAAAA,GAGA,QAAAgvB,GAAAx3B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAm7B,GAAAvlB,KAAAsT,EAAAhhB,MAAA3H,GACA,OAAAP,IAAA0D,EAAAuG,EAAAmxB,GAAAp7B,EAAA,GAAAoF,eAAA7E,EAAAP,EAAA,GAAAY,WAGA,QAAAy6B,GAAA33B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAs7B,GAAA1lB,KAAAsT,EAAAhhB,MAAA3H,GACA,OAAAP,IAAA0D,EAAAi3B,EAAAY,GAAAv7B,EAAA,GAAAoF,eAAA7E,EAAAP,EAAA,GAAAY,WAGA,QAAA46B,IAAA93B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAy7B,GAAA7lB,KAAAsT,EAAAhhB,MAAA3H,GACA,OAAAP,IAAA0D,EAAAi3B,EAAAe,GAAA17B,EAAA,GAAAoF,eAAA7E,EAAAP,EAAA,GAAAY,WAGA,QAAA+6B,IAAAj4B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAA47B,GAAAhmB,KAAAsT,EAAAhhB,MAAA3H,GACA,OAAAP,IAAA0D,EAAAqF,EAAA8yB,GAAA77B,EAAA,GAAAoF,eAAA7E,EAAAP,EAAA,GAAAY,WAGA,QAAAk7B,IAAAp4B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAA+7B,GAAAnmB,KAAAsT,EAAAhhB,MAAA3H,GACA,OAAAP,IAAA0D,EAAAqF,EAAAizB,GAAAh8B,EAAA,GAAAoF,eAAA7E,EAAAP,EAAA,GAAAY,WAGA,QAAAq7B,IAAAv4B,EAAAwlB,EAAA3oB,GACA,MAAAm6B,GAAAh3B,EAAAw4B,GAAAhT,EAAA3oB,GAGA,QAAA47B,IAAAz4B,EAAAwlB,EAAA3oB,GACA,MAAAm6B,GAAAh3B,EAAA04B,GAAAlT,EAAA3oB,GAGA,QAAA87B,IAAA34B,EAAAwlB,EAAA3oB,GACA,MAAAm6B,GAAAh3B,EAAA44B,GAAApT,EAAA3oB,GAGA,QAAAg8B,IAAA74B,GACA,MAAA84B,IAAA94B,EAAAm3B,UAGA,QAAA4B,IAAA/4B,GACA,MAAAg5B,IAAAh5B,EAAAm3B,UAGA,QAAA8B,IAAAj5B,GACA,MAAAk5B,IAAAl5B,EAAAm5B,YAGA,QAAAhI,IAAAnxB,GACA,MAAAo5B,IAAAp5B,EAAAm5B,YAGA,QAAAE,IAAAr5B,GACA,MAAAs5B,MAAAt5B,EAAAu5B,YAAA,KAGA,QAAAC,IAAAx5B,GACA,MAAA84B,IAAA94B,EAAAk3B,aAGA,QAAAuC,IAAAz5B,GACA,MAAAg5B,IAAAh5B,EAAAk3B,aAGA,QAAAwC,IAAA15B,GACA,MAAAk5B,IAAAl5B,EAAA25B,eAGA,QAAAC,IAAA55B,GACA,MAAAo5B,IAAAp5B,EAAA25B,eAGA,QAAAE,IAAA75B,GACA,MAAAs5B,MAAAt5B,EAAA85B,eAAA,KAvQA,GAAAtB,IAAAlW,EAAAyX,SACArB,GAAApW,EAAA8C,KACAwT,GAAAtW,EAAAyP,KACAuH,GAAAhX,EAAA0X,QACAhB,GAAA1W,EAAA2X,KACAnB,GAAAxW,EAAA4X,UACAd,GAAA9W,EAAA6X,OACAjB,GAAA5W,EAAA8X,YAEA3C,GAAA4C,EAAAf,IACA5B,GAAA4C,EAAAhB,IACAvB,GAAAsC,EAAArB,IACAhB,GAAAsC,EAAAtB,IACApB,GAAAyC,EAAAvB,IACAjB,GAAAyC,EAAAxB,IACAT,GAAAgC,EAAAjB,IACAd,GAAAgC,EAAAlB,IACAlB,GAAAmC,EAAAnB,IACAf,GAAAmC,EAAApB,IAEAxC,IACA/5B,EAAAk8B,GACAxZ,EAAA0Z,GACAzzB,EAAA2zB,GACA3Z,EAAA6R,GACAtlB,EAAA,KACA7L,EAAAu6B,EACAn+B,EAAAm+B,EACApE,EAAAqE,EACAC,EAAAC,EACAlyB,EAAAmyB,EACAtE,EAAAuE,EACAv1B,EAAAw1B,EACAzE,EAAA0E,EACAv0B,EAAA8yB,GACAxQ,EAAAkS,EACA1D,EAAA2D,EACA/D,EAAAgE,EACA7D,EAAA8D,EACAt6B,EAAA,KACAkjB,EAAA,KACAhjB,EAAAswB,EACA+J,EAAAC,EACA9D,EAAA+D,EACAzX,IAAA0X,GAGAC,IACA5+B,EAAA68B,GACAna,EAAAoa,GACAn0B,EAAAo0B,GACApa,EAAAsa,GACA/tB,EAAA,KACA7L,EAAAw7B,EACAp/B,EAAAo/B,EACArF,EAAAsF,EACAhB,EAAAiB,EACAlzB,EAAAmzB,EACAtF,EAAAuF,EACAv2B,EAAAw2B,EACAzF,EAAA0F,EACAv1B,EAAAszB,GACAhR,EAAAkT,EACA1E,EAAA2E,EACA/E,EAAAgF,EACA7E,EAAA8E,EACAt7B,EAAA,KACAkjB,EAAA,KACAhjB,EAAAq7B,EACAhB,EAAAiB,EACA9E,EAAA+E,EACAzY,IAAA0X,GAGA/D,IACA56B,EAAAg7B,EACAtY,EAAAyY,GACAxyB,EAAA2yB,GACA3Y,EAAA8Y,GACAvsB,EAAA0sB,GACAv4B,EAAAs8B,EACAlgC,EAAAkgC,EACAnG,EAAAoG,EACA9B,EAAA8B,EACA/zB,EAAAg0B,EACAnG,EAAAoG,EACAp3B,EAAAq3B,EACAtG,EAAAuG,EACAp2B,EAAAixB,EACA3O,EAAA+T,EACAvF,EAAAwF,EACA5F,EAAA6F,EACA1F,EAAA2F,EACAn8B,EAAA63B,GACA3U,EAAA6U,GACA73B,EAAAk8B,EACA7B,EAAA8B,EACA3F,EAAA4F,EACAtZ,IAAAuZ,EAwKA,OApKAzG,IAAA91B,EAAA2hB,EAAAmW,GAAAhC,IACAA,GAAA5S,EAAAvB,EAAAqW,GAAAlC,IACAA,GAAA7qB,EAAA0W,EAAAiW,GAAA9B,IACA6E,GAAA36B,EAAA2hB,EAAAmW,GAAA6C,IACAA,GAAAzX,EAAAvB,EAAAqW,GAAA2C,IACAA,GAAA1vB,EAAA0W,EAAAiW,GAAA+C,KAgKAl6B,OAAA,SAAAqgB,GACA,GAAAjmB,GAAA8mB,EAAAb,GAAA,GAAAgV,GAEA,OADAj7B,GAAAwjB,SAAA,WAAA,MAAAyC,IACAjmB,GAEAusB,MAAA,SAAAtG,GACA,GAAAnb,GAAAuwB,EAAApV,GAAA,GAAAwU,EAEA,OADA3vB,GAAA0Y,SAAA,WAAA,MAAAyC,IACAnb,GAEA2sB,UAAA,SAAAxR,GACA,GAAAjmB,GAAA8mB,EAAAb,GAAA,GAAA6Z,GAEA,OADA9/B,GAAAwjB,SAAA,WAAA,MAAAyC,IACAjmB,GAEA2hC,SAAA,SAAA1b,GACA,GAAAnb,GAAAuwB,EAAApV,EAAA6U,EAEA,OADAhwB,GAAA0Y,SAAA,WAAA,MAAAyC,IACAnb,IASA,QAAAowB,GAAA/0B,EAAAkgB,EAAAnhB,GACA,GAAAqhB,GAAApgB,EAAA,EAAA,IAAA,GACA4jB,GAAAxD,GAAApgB,EAAAA,GAAA,GACA1E,EAAAsoB,EAAAtoB,MACA,OAAA8kB,IAAA9kB,EAAAyD,EAAA,GAAA8F,OAAA9F,EAAAzD,EAAA,GAAAgkB,KAAAY,GAAA0D,EAAAA,GAGA,QAAA6X,GAAA7gC,GACA,MAAAA,GAAA8gC,QAAAC,GAAA,QAGA,QAAAlD,GAAAmD,GACA,MAAA,IAAA1S,QAAA,OAAA0S,EAAAz9B,IAAAs9B,GAAAnc,KAAA,KAAA,IAAA,KAGA,QAAAoZ,GAAAkD,GAEA,IADA,GAAAz9B,MAAAlD,KAAAP,EAAAkhC,EAAAtgC,SACAL,EAAAP,GAAAyD,EAAAy9B,EAAA3gC,GAAA6E,eAAA7E,CACA,OAAAkD,GAGA,QAAA+8B,GAAA98B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAi3B,GAAA36B,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAA2/B,GAAA78B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,GACA,OAAAP,IAAA0D,EAAAq3B,GAAA/6B,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAA6/B,GAAA/8B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,GACA,OAAAP,IAAA0D,EAAAo3B,GAAA96B,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAA+/B,GAAAj9B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAc,GAAAxE,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAA8/B,GAAAh9B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAc,GAAAxE,EAAA,KAAAA,EAAA,GAAA,GAAA,KAAA,KAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAAggC,GAAAl9B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAA,gCAAA4V,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAs3B,EAAAh7B,EAAA,GAAA,IAAAA,EAAA,IAAAA,EAAA,IAAA,OAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAAw/B,GAAA18B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAqF,EAAA/I,EAAA,GAAA,EAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAAo/B,GAAAt8B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAA,GAAA1D,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAAs/B,GAAAx8B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAqF,EAAA,EAAArF,EAAAA,GAAA1D,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAAq/B,GAAAv8B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAm2B,GAAA75B,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAAy/B,GAAA38B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAo2B,GAAA95B,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAA0/B,GAAA58B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAA6oB,GAAAvsB,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAAu/B,GAAAz8B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAmhC,GAAAvrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,IAAA0D,EAAAq2B,GAAA/5B,EAAA,GAAAO,EAAAP,EAAA,GAAAY,WAGA,QAAAigC,GAAAn9B,EAAAwlB,EAAA3oB,GACA,GAAAP,GAAAohC,GAAAxrB,KAAAsT,EAAAhhB,MAAA3H,EAAAA,EAAA,GACA,OAAAP,GAAAO,EAAAP,EAAA,GAAAY,UAGA,QAAAq9B,GAAAv6B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAA29B,UAAAp3B,EAAA,GAGA,QAAAi0B,GAAAx6B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAu5B,WAAAhzB,EAAA,GAGA,QAAAm0B,GAAA16B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAu5B,WAAA,IAAA,GAAAhzB,EAAA,GAGA,QAAAo0B,GAAA36B,EAAAuG,GACA,MAAAowB,GAAA,EAAAxJ,EAAAgF,QAAAhmB,MAAAghB,EAAA6E,SAAAhyB,GAAAA,GAAAuG,EAAA,GAGA,QAAAq0B,GAAA56B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAA49B,kBAAAr3B,EAAA,GAGA,QAAAs0B,GAAA76B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAm5B,WAAA,EAAA5yB,EAAA,GAGA,QAAAu0B,GAAA96B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAA69B,aAAAt3B,EAAA,GAGA,QAAAw0B,GAAA/6B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAA89B,aAAAv3B,EAAA,GAGA,QAAAy0B,GAAAh7B,EAAAuG,GACA,MAAAowB,GAAAxJ,EAAA4Q,WAAA5xB,MAAAghB,EAAA6E,SAAAhyB,GAAAA,GAAAuG,EAAA,GAGA,QAAA00B,GAAAj7B,GACA,MAAAA,GAAAm3B,SAGA,QAAA+D,GAAAl7B,EAAAuG,GACA,MAAAowB,GAAAxJ,EAAA6Q,WAAA7xB,MAAAghB,EAAA6E,SAAAhyB,GAAAA,GAAAuG,EAAA,GAGA,QAAA6qB,GAAApxB,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAi+B,cAAA,IAAA13B,EAAA,GAGA,QAAA60B,GAAAp7B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAi+B,cAAA,IAAA13B,EAAA,GAGA,QAAA80B,GAAAr7B,GACA,GAAAiI,GAAAjI,EAAAk+B,mBACA,QAAAj2B,EAAA,EAAA,KAAAA,MAAA,MACA0uB,EAAA1uB,EAAA,GAAA,EAAA,IAAA,GACA0uB,EAAA1uB,EAAA,GAAA,IAAA,GAGA,QAAAuzB,GAAAx7B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAm+B,aAAA53B,EAAA,GAGA,QAAAk1B,GAAAz7B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAA85B,cAAAvzB,EAAA,GAGA,QAAAm1B,GAAA17B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAA85B,cAAA,IAAA,GAAAvzB,EAAA,GAGA,QAAAo1B,GAAA37B,EAAAuG,GACA,MAAAowB,GAAA,EAAAxJ,EAAA0F,OAAA1mB,MAAAghB,EAAAuF,QAAA1yB,GAAAA,GAAAuG,EAAA,GAGA,QAAAq1B,GAAA57B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAo+B,qBAAA73B,EAAA,GAGA,QAAAs1B,GAAA77B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAA25B,cAAA,EAAApzB,EAAA,GAGA,QAAAu1B,GAAA97B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAq+B,gBAAA93B,EAAA,GAGA,QAAAw1B,GAAA/7B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAs+B,gBAAA/3B,EAAA,GAGA,QAAAy1B,GAAAh8B,EAAAuG,GACA,MAAAowB,GAAAxJ,EAAAoR,UAAApyB,MAAAghB,EAAAuF,QAAA1yB,GAAAA,GAAAuG,EAAA,GAGA,QAAA01B,GAAAj8B,GACA,MAAAA,GAAAk3B,YAGA,QAAAgF,GAAAl8B,EAAAuG,GACA,MAAAowB,GAAAxJ,EAAAqR,UAAAryB,MAAAghB,EAAAuF,QAAA1yB,GAAAA,GAAAuG,EAAA,GAGA,QAAA41B,GAAAn8B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAy+B,iBAAA,IAAAl4B,EAAA,GAGA,QAAA61B,GAAAp8B,EAAAuG,GACA,MAAAowB,GAAA32B,EAAAy+B,iBAAA,IAAAl4B,EAAA,GAGA,QAAA81B,KACA,MAAA,QAGA,QAAAf,KACA,MAAA,IAeA,QAAA/X,GAAA1R,GAMA,MALAyQ,IAAAD,EAAAxQ,GACAnW,EAAA82B,WAAAlQ,GAAAjhB,OACA3F,EAAAgjC,UAAApc,GAAA0F,MACAtsB,EAAAw3B,UAAA5Q,GAAA4Q,UACAx3B,EAAA0hC,SAAA9a,GAAA8a,SACA9a,GAKA,QAAAqc,IAAAvZ,GACA,MAAAA,GAAAwZ,cAOA,QAAAC,IAAArZ,GACA,GAAAJ,GAAA,GAAAC,MAAAG,EACA,OAAA5b,OAAAwb,GAAA,KAAAA,EAvPA,GAsNA9C,IAtNAsU,IAAAkI,IAAA,GAAAt9B,EAAA,IAAAu9B,EAAA,KACAtB,GAAA,UACAC,GAAA,KACAH,GAAA,iCAoNAha,IACAwW,SAAA,SACA3U,KAAA,aACA2M,KAAA,eACAiI,SAAA,KAAA,MACAC,MAAA,SAAA,SAAA,UAAA,YAAA,WAAA,SAAA,YACAC,WAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,OACAC,QAAA,UAAA,WAAA,QAAA,QAAA,MAAA,OAAA,OAAA,SAAA,YAAA,UAAA,WAAA,YACAC,aAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,MAAA,QAYA,IAAA4E,IAAA,wBAMAC,GAAA5Z,KAAAlW,UAAAyvB,YACAD,GACAjjC,EAAAw3B,UAAA8L,IAOAE,IAAA,GAAA7Z,MAAA,4BACAwZ,GACAnjC,EAAA0hC,SAAA4B,GAEAtjC,GAAAyjC,wBAAA5b,EACA7nB,EAAA0jC,iBAAA/c,EACA3mB,EAAA2jC,UAAAJ,GACAvjC,EAAA4jC,SAAAJ,GAEAp9B,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,Q5BwhJGm0B,UAAU,KAAKwJ,IAAI,SAAS3iC,EAAQjB,EAAOD,I6B1lK9C,SAAAM,EAAAiP,GACA,gBAAAvP,IAAA,mBAAAC,GAAAsP,EAAAvP,GACA,kBAAAE,IAAAA,EAAAC,IAAAD,GAAA,WAAAqP,GACAA,EAAAjP,EAAAkP,GAAAlP,EAAAkP,SACAhP,KAAA,SAAAR,GAAA,YAKA,SAAA8jC,GAAAC,EAAAC,EAAAvzB,EAAAwzB,GAEA,QAAAvQ,GAAAhK,GACA,MAAAqa,GAAAra,EAAA,GAAAC,QAAAD,KAAAA,EAqDA,MAlDAgK,GAAA/nB,MAAA+nB,EAEAA,EAAA1nB,KAAA,SAAA0d,GACA,MAAAqa,GAAAra,EAAA,GAAAC,MAAAD,EAAA,IAAAsa,EAAAta,EAAA,GAAAqa,EAAAra,GAAAA,GAGAgK,EAAAlQ,MAAA,SAAAkG,GACA,GAAAkJ,GAAAc,EAAAhK,GACAqE,EAAA2F,EAAA1nB,KAAA0d,EACA,OAAAA,GAAAkJ,EAAA7E,EAAArE,EAAAkJ,EAAA7E,GAGA2F,EAAAwQ,OAAA,SAAAxa,EAAAlZ,GACA,MAAAwzB,GAAAta,EAAA,GAAAC,QAAAD,IAAA,MAAAlZ,EAAA,EAAApH,KAAAuC,MAAA6E,IAAAkZ,GAGAgK,EAAAtsB,MAAA,SAAAkJ,EAAAC,EAAAC,GACA,GAAApJ,KAGA,IAFAkJ,EAAAojB,EAAA1nB,KAAAsE,GACAE,EAAA,MAAAA,EAAA,EAAApH,KAAAuC,MAAA6E,KACAF,EAAAC,GAAAC,EAAA,GAAA,MAAApJ,EACA,GAAAA,GAAAL,KAAA,GAAA4iB,QAAArZ,WAAA0zB,EAAA1zB,EAAAE,GAAAuzB,EAAAzzB,GAAAA,EAAAC,EACA,OAAAnJ,IAGAssB,EAAAyQ,OAAA,SAAAxc,GACA,MAAAmc,GAAA,SAAApa,GACA,KAAAqa,EAAAra,IAAA/B,EAAA+B,IAAAA,EAAAE,QAAAF,EAAA,IACA,SAAAA,EAAAlZ,GACA,OAAAA,GAAA,GAAA,KAAAwzB,EAAAta,EAAA,IAAA/B,EAAA+B,SAIAjZ,IACAijB,EAAAjjB,MAAA,SAAAH,EAAAme,GAGA,MAFA3V,GAAA8Q,SAAAtZ,GAAA0I,EAAA4Q,SAAA6E,GACAsV,EAAAjrB,GAAAirB,EAAA/qB,GACA5P,KAAAuC,MAAA8E,EAAAqI,EAAAE,KAGA0a,EAAAoC,MAAA,SAAAtlB,GAEA,MADAA,GAAApH,KAAAuC,MAAA6E,GACAqjB,SAAArjB,IAAAA,EAAA,EACAA,EAAA,EACAkjB,EAAAyQ,OAAAF,EACA,SAAA3/B,GAAA,MAAA2/B,GAAA3/B,GAAAkM,IAAA,GACA,SAAAlM,GAAA,MAAAovB,GAAAjjB,MAAA,EAAAnM,GAAAkM,IAAA,IAHAkjB,EADA,OAQAA,EAmFA,QAAA0Q,GAAAjjC,GACA,MAAA2iC,GAAA,SAAApa,GACAA,EAAA2a,QAAA3a,EAAAuY,WAAAvY,EAAA+R,SAAA,EAAAt6B,GAAA,GACAuoB,EAAA4a,SAAA,EAAA,EAAA,EAAA,IACA,SAAA5a,EAAAlZ,GACAkZ,EAAA2a,QAAA3a,EAAAuY,UAAA,EAAAzxB,IACA,SAAAF,EAAAme,GACA,OAAAA,EAAAne,GAAAme,EAAA+T,oBAAAlyB,EAAAkyB,qBAAAxM,GAAAG,IA6FA,QAAAoO,GAAApjC,GACA,MAAA2iC,GAAA,SAAApa,GACAA,EAAA8a,WAAA9a,EAAA+Y,cAAA/Y,EAAA8R,YAAA,EAAAr6B,GAAA,GACAuoB,EAAA+a,YAAA,EAAA,EAAA,EAAA,IACA,SAAA/a,EAAAlZ,GACAkZ,EAAA8a,WAAA9a,EAAA+Y,aAAA,EAAAjyB,IACA,SAAAF,EAAAme,GACA,OAAAA,EAAAne,GAAA6lB,IAzPA,GAAArd,GAAA,GAAA6Q,MACA3Q,EAAA,GAAA2Q,MA6DAuL,EAAA4O,EAAA,aAEA,SAAApa,EAAAlZ,GACAkZ,EAAAE,SAAAF,EAAAlZ,IACA,SAAAF,EAAAme,GACA,MAAAA,GAAAne,GAIA4kB,GAAAY,MAAA,SAAAvqB,GAEA,MADAA,GAAAnC,KAAAuC,MAAAJ,GACAsoB,SAAAtoB,IAAAA,EAAA,EACAA,EAAA,EACAu4B,EAAA,SAAApa,GACAA,EAAAE,QAAAxgB,KAAAuC,MAAA+d,EAAAne,GAAAA,IACA,SAAAme,EAAAlZ,GACAkZ,EAAAE,SAAAF,EAAAlZ,EAAAjF,IACA,SAAA+E,EAAAme,GACA,OAAAA,EAAAne,GAAA/E,IANA2pB,EADA,KAWA,IAAAwP,GAAAxP,EAAA9tB,MAEA2uB,EAAA,IACAC,EAAA,IACAC,EAAA,KACAC,EAAA,MACAC,EAAA,OAEAlB,EAAA6O,EAAA,SAAApa,GACAA,EAAAE,QAAAxgB,KAAAuC,MAAA+d,EAAAqM,GAAAA,IACA,SAAArM,EAAAlZ,GACAkZ,EAAAE,SAAAF,EAAAlZ,EAAAulB,IACA,SAAAzlB,EAAAme,GACA,OAAAA,EAAAne,GAAAylB,GACA,SAAArM,GACA,MAAAA,GAAAkZ,kBAGA+B,EAAA1P,EAAA7tB,MAEA4tB,EAAA8O,EAAA,SAAApa,GACAA,EAAAE,QAAAxgB,KAAAuC,MAAA+d,EAAAsM,GAAAA,IACA,SAAAtM,EAAAlZ,GACAkZ,EAAAE,SAAAF,EAAAlZ,EAAAwlB,IACA,SAAA1lB,EAAAme,GACA,OAAAA,EAAAne,GAAA0lB,GACA,SAAAtM,GACA,MAAAA,GAAAyY,eAGAyC,EAAA5P,EAAA5tB,MAEA2tB,EAAA+O,EAAA,SAAApa,GACA,GAAAwa,GAAAxa,EAAA8Y,oBAAAxM,EAAAC,CACAiO,GAAA,IAAAA,GAAAjO,GACAvM,EAAAE,QAAAxgB,KAAAuC,QAAA+d,EAAAwa,GAAAjO,GAAAA,EAAAiO,IACA,SAAAxa,EAAAlZ,GACAkZ,EAAAE,SAAAF,EAAAlZ,EAAAylB,IACA,SAAA3lB,EAAAme,GACA,OAAAA,EAAAne,GAAA2lB,GACA,SAAAvM,GACA,MAAAA,GAAAmU,aAGAgH,EAAA9P,EAAA3tB,MAEA0tB,EAAAgP,EAAA,SAAApa,GACAA,EAAA4a,SAAA,EAAA,EAAA,EAAA,IACA,SAAA5a,EAAAlZ,GACAkZ,EAAA2a,QAAA3a,EAAAuY,UAAAzxB,IACA,SAAAF,EAAAme,GACA,OAAAA,EAAAne,GAAAme,EAAA+T,oBAAAlyB,EAAAkyB,qBAAAxM,GAAAE,GACA,SAAAxM,GACA,MAAAA,GAAAuY,UAAA,IAGA1D,EAAAzJ,EAAA1tB,MAaA09B,EAAAV,EAAA,GACAW,EAAAX,EAAA,GACAY,EAAAZ,EAAA,GACAa,EAAAb,EAAA,GACAc,EAAAd,EAAA,GACAe,EAAAf,EAAA,GACAgB,EAAAhB,EAAA,GAEAiB,EAAAP,EAAA19B,MACAk+B,EAAAP,EAAA39B,MACAm+B,EAAAP,EAAA59B,MACAo+B,EAAAP,EAAA79B,MACAq+B,EAAAP,EAAA99B,MACAs+B,EAAAP,EAAA/9B,MACAu+B,EAAAP,EAAAh+B,MAEAwtB,EAAAkP,EAAA,SAAApa,GACAA,EAAA2a,QAAA,GACA3a,EAAA4a,SAAA,EAAA,EAAA,EAAA,IACA,SAAA5a,EAAAlZ,GACAkZ,EAAAkc,SAAAlc,EAAA+T,WAAAjtB,IACA,SAAAF,EAAAme,GACA,MAAAA,GAAAgP,WAAAntB,EAAAmtB,WAAA,IAAAhP,EAAA8T,cAAAjyB,EAAAiyB,gBACA,SAAA7Y,GACA,MAAAA,GAAA+T,aAGAgB,EAAA7J,EAAAxtB,MAEAutB,EAAAmP,EAAA,SAAApa,GACAA,EAAAkc,SAAA,EAAA,GACAlc,EAAA4a,SAAA,EAAA,EAAA,EAAA,IACA,SAAA5a,EAAAlZ,GACAkZ,EAAAkR,YAAAlR,EAAA6Y,cAAA/xB,IACA,SAAAF,EAAAme,GACA,MAAAA,GAAA8T,cAAAjyB,EAAAiyB,eACA,SAAA7Y,GACA,MAAAA,GAAA6Y,eAIA5N,GAAAmB,MAAA,SAAAvqB,GACA,MAAAsoB,UAAAtoB,EAAAnC,KAAAuC,MAAAJ,KAAAA,EAAA,EAAAu4B,EAAA,SAAApa,GACAA,EAAAkR,YAAAxxB,KAAAuC,MAAA+d,EAAA6Y,cAAAh3B,GAAAA,GACAme,EAAAkc,SAAA,EAAA,GACAlc,EAAA4a,SAAA,EAAA,EAAA,EAAA,IACA,SAAA5a,EAAAlZ,GACAkZ,EAAAkR,YAAAlR,EAAA6Y,cAAA/xB,EAAAjF,KALA,KASA,IAAAs6B,GAAAlR,EAAAvtB,MAEAiwB,EAAAyM,EAAA,SAAApa,GACAA,EAAAoc,cAAA,EAAA,IACA,SAAApc,EAAAlZ,GACAkZ,EAAAE,SAAAF,EAAAlZ,EAAAwlB,IACA,SAAA1lB,EAAAme,GACA,OAAAA,EAAAne,GAAA0lB,GACA,SAAAtM,GACA,MAAAA,GAAAiZ,kBAGAoD,EAAA1O,EAAAjwB,MAEAgwB,EAAA0M,EAAA,SAAApa,GACAA,EAAAsc,cAAA,EAAA,EAAA,IACA,SAAAtc,EAAAlZ,GACAkZ,EAAAE,SAAAF,EAAAlZ,EAAAylB,IACA,SAAA3lB,EAAAme,GACA,OAAAA,EAAAne,GAAA2lB,GACA,SAAAvM,GACA,MAAAA,GAAA0U,gBAGA6H,EAAA7O,EAAAhwB,MAEA+vB,EAAA2M,EAAA,SAAApa,GACAA,EAAA+a,YAAA,EAAA,EAAA,EAAA,IACA,SAAA/a,EAAAlZ,GACAkZ,EAAA8a,WAAA9a,EAAA+Y,aAAAjyB,IACA,SAAAF,EAAAme,GACA,OAAAA,EAAAne,GAAA4lB,GACA,SAAAxM,GACA,MAAAA,GAAA+Y,aAAA,IAGAyD,EAAA/O,EAAA/vB,MAaAy7B,EAAA0B,EAAA,GACAzB,EAAAyB,EAAA,GACA4B,EAAA5B,EAAA,GACA6B,EAAA7B,EAAA,GACA8B,EAAA9B,EAAA,GACA+B,EAAA/B,EAAA,GACAgC,EAAAhC,EAAA,GAEAiC,EAAA3D,EAAAz7B,MACAq/B,EAAA3D,EAAA17B,MACAs/B,GAAAP,EAAA/+B,MACAu/B,GAAAP,EAAAh/B,MACAw/B,GAAAP,EAAAj/B,MACAy/B,GAAAP,EAAAl/B,MACA0/B,GAAAP,EAAAn/B,MAEA6vB,GAAA6M,EAAA,SAAApa,GACAA,EAAA8a,WAAA,GACA9a,EAAA+a,YAAA,EAAA,EAAA,EAAA,IACA,SAAA/a,EAAAlZ,GACAkZ,EAAAqd,YAAArd,EAAAuU,cAAAztB,IACA,SAAAF,EAAAme,GACA,MAAAA,GAAAwP,cAAA3tB,EAAA2tB,cAAA,IAAAxP,EAAAsU,iBAAAzyB,EAAAyyB,mBACA,SAAArZ,GACA,MAAAA,GAAAuU,gBAGA+I,GAAA/P,GAAA7vB,MAEA4vB,GAAA8M,EAAA,SAAApa,GACAA,EAAAqd,YAAA,EAAA,GACArd,EAAA+a,YAAA,EAAA,EAAA,EAAA,IACA,SAAA/a,EAAAlZ,GACAkZ,EAAAoR,eAAApR,EAAAqZ,iBAAAvyB,IACA,SAAAF,EAAAme,GACA,MAAAA,GAAAsU,iBAAAzyB,EAAAyyB,kBACA,SAAArZ,GACA,MAAAA,GAAAqZ,kBAIA/L,IAAAlB,MAAA,SAAAvqB,GACA,MAAAsoB,UAAAtoB,EAAAnC,KAAAuC,MAAAJ,KAAAA,EAAA,EAAAu4B,EAAA,SAAApa,GACAA,EAAAoR,eAAA1xB,KAAAuC,MAAA+d,EAAAqZ,iBAAAx3B,GAAAA,GACAme,EAAAqd,YAAA,EAAA,GACArd,EAAA+a,YAAA,EAAA,EAAA,EAAA,IACA,SAAA/a,EAAAlZ,GACAkZ,EAAAoR,eAAApR,EAAAqZ,iBAAAvyB,EAAAjF,KALA,KASA,IAAA07B,IAAAjQ,GAAA5vB,KAEApH,GAAAknC,aAAApD,EACA9jC,EAAA62B,gBAAA3B,EACAl1B,EAAAmnC,iBAAAzC,EACA1kC,EAAAu3B,eAAArC,EACAl1B,EAAAonC,gBAAA1C,EACA1kC,EAAA42B,WAAA3B,EACAj1B,EAAAqnC,YAAA1C,EACA3kC,EAAAs3B,UAAArC,EACAj1B,EAAAsnC,WAAA3C,EACA3kC,EAAA22B,WAAA3B,EACAh1B,EAAAunC,YAAA3C,EACA5kC,EAAA02B,SAAA3B,EACA/0B,EAAAwnC,UAAA3C,EACA7kC,EAAAy2B,QAAA3B,EACA90B,EAAAynC,SAAAlJ,EACAv+B,EAAAw2B,SAAAsO,EACA9kC,EAAA0nC,UAAArC,EACArlC,EAAAqiC,WAAAyC,EACA9kC,EAAA2nC,YAAAtC,EACArlC,EAAAsiC,WAAAyC,EACA/kC,EAAA4nC,YAAAtC,EACAtlC,EAAA6nC,YAAA7C,EACAhlC,EAAA8nC,aAAAvC,EACAvlC,EAAA+nC,cAAA9C,EACAjlC,EAAAgoC,eAAAxC,EACAxlC,EAAAioC,aAAA/C,EACAllC,EAAAkoC,cAAAzC,EACAzlC,EAAAmoC,WAAAhD,EACAnlC,EAAAooC,YAAA1C,EACA1lC,EAAAqoC,aAAAjD,EACAplC,EAAAsoC,cAAA3C,EACA3lC,EAAAu2B,UAAA3B,EACA50B,EAAAuoC,WAAA9J,EACAz+B,EAAAs2B,SAAA3B,EACA30B,EAAAwoC,UAAA3C,EACA7lC,EAAAq3B,UAAAA,EACAr3B,EAAA+lC,WAAAA,EACA/lC,EAAAo3B,QAAAA,EACAp3B,EAAAimC,SAAAA,EACAjmC,EAAAm3B,OAAAA,EACAn3B,EAAAkmC,QAAAA,EACAlmC,EAAAk3B,QAAA2L,EACA7iC,EAAAyoC,SAAAjC,EACAxmC,EAAA6iC,UAAAA,EACA7iC,EAAAwmC,WAAAA,EACAxmC,EAAA8iC,UAAAA,EACA9iC,EAAAymC,WAAAA,EACAzmC,EAAAmmC,WAAAA,EACAnmC,EAAA0mC,YAAAA,GACA1mC,EAAAomC,aAAAA,EACApmC,EAAA2mC,cAAAA,GACA3mC,EAAAqmC,YAAAA,EACArmC,EAAA4mC,aAAAA,GACA5mC,EAAAsmC,UAAAA,EACAtmC,EAAA6mC,WAAAA,GACA7mC,EAAAumC,YAAAA,EACAvmC,EAAA8mC,aAAAA,GACA9mC,EAAAi3B,SAAAA,GACAj3B,EAAAgnC,UAAAA,GACAhnC,EAAAg3B,QAAAA,GACAh3B,EAAAinC,SAAAA,GAEA7gC,OAAAC,eAAArG,EAAA,cAAAkG,OAAA,W7B+lKMwiC,IAAI,SAASxnC,EAAQjB,EAAOD,GAClC,YAiBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAnBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQypC,SAAWzpC,EAAQ0pC,eAAiBtX,MAE5C,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,I8Bh+K5dM,EAAAtpC,EAAA,6BACAupC,EAAAvpC,EAAA,WAGawoC,GAFbxoC,EAAA,Y9B4+KqBlB,E8B1+KR0pC,e9B0+KiC,SAAUgB,G8Bp9KpD,QAAAhB,GAAYiB,GAAQhC,EAAAnoC,KAAAkpC,EAAA,IAAAkB,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAZ,GAAAnoC,KAAAf,MAAAoqC,GApBpBC,SAAWD,EAAKE,eAAiB,YAoBbF,EAnBpBG,YAAa,EAmBOH,EAlBpBI,aAAc,EAkBMJ,EAjBpB1lC,GACIK,MAAO,GACP2O,IAAK,EACLhO,MAAO,SAAC5B,EAAG4P,GAAJ,MAAYu2B,GAAAQ,MAAMC,SAAS5mC,GAAKA,EAAIA,EAAE4P,IAC7C9R,MAAO,UACP0C,OAAQ,SACR0C,MAAO4qB,QAWSwY,EATpBxlC,GACI8O,IAAK,EACLhO,MAAO,SAAC5B,EAAG4P,GAAJ,MAAYu2B,GAAAQ,MAAMC,SAAS5mC,GAAKA,EAAIA,EAAE4P,IAC7C3O,MAAO,GACPT,OAAQ,OACR1C,MAAO,UAISwoC,EAFpBnnC,YAAa,CAEO,OAIZknC,IACAF,EAAAQ,MAAME,WAANP,EAAuBD,GALXC,E9B6/KpB,MAxCA3B,GAAUS,EAAgBgB,GAwCnBhB,GACTc,EAAsBY,4BAETprC,G8Br/KFypC,S9Bq/KqB,SAAU4B,G8Bp/KxC,QAAA5B,GAAY6B,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAipC,GAAAV,EAAAvoC,KAAA4F,OAAAkkC,eAAAb,GAAAloC,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAI8mC,GAAe6B,K9BuuLxD,MAnPAtC,GAAUQ,EAAU4B,GAQpB1B,EAAaF,IACTv1B,IAAK,YACLhO,MAAO,S8B3/KDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAAb,EAAAh2B,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAIkpC,GAAe6B,O9B8/K1Cr3B,IAAK,WACLhO,MAAO,W8B3/KP+jC,EAAA7jC,OAAAkkC,eAAAb,EAAAh2B,WAAA,WAAAjT,MAAAe,KAAAf,KAGWA,MAAK+qC,MAWhB,OATA/qC,MAAKgrC,KAAKtmC,KACV1E,KAAKgrC,KAAKpmC,KAEV5E,KAAKirC,kBACLjrC,KAAKkrC,SACLlrC,KAAKmrC,SACLnrC,KAAKorC,mBACLprC,KAAKqrC,eAEErrC,Q9B+/KP0T,IAAK,SACLhO,MAAO,W8B1/KP,GAAIslC,GAAOhrC,KAAKgrC,KACZtmC,EAAIsmC,EAAKtmC,EACT4mC,EAAOtrC,KAAK+qC,OAAOrmC,CAQvBA,GAAEgB,MAAQ,SAAA5B,GAAA,MAAKwnC,GAAK5lC,MAAM5B,EAAGwnC,EAAK53B,MAClChP,EAAE9C,MAAQoN,GAAGipB,YAAYrxB,OAAO,EAAGokC,EAAKvmC,QAAQ+sB,aAAa,KAC7D9sB,EAAEb,IAAM,SAAAC,GAAA,MAAKY,GAAE9C,MAAM8C,EAAEgB,MAAM5B,KAE7BY,EAAE6mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAKhnC,OAAQI,EAAE9C,MAEzC,IACI6E,GADArE,EAAOpC,KAAKgrC,KAAK5oC,IAOjBqE,GALCrE,GAASA,EAAKpB,OAEPhB,KAAK+qC,OAAOU,OAGXz8B,GAAGnL,IAAIzB,EAAK,GAAGuO,OAAQjM,EAAEgB,OAAOsO,OAFhChF,GAAGnL,IAAIzB,EAAMsC,EAAEgB,OAAOsO,UAKnCg3B,EAAKtmC,EAAE9C,MAAM6E,OAAOA,M9BmgLpBiN,IAAK,SACLhO,MAAO,W8B9/KP,GAAIslC,GAAOhrC,KAAKgrC,KACZpmC,EAAIomC,EAAKpmC,EACT0mC,EAAOtrC,KAAK+qC,OAAOnmC,CACvBA,GAAEc,MAAQ,SAAA5B,GAAA,MAAKwnC,GAAK5lC,MAAM5B,EAAGwnC,EAAK53B,MAClC9O,EAAEhD,MAAQqoC,EAAAQ,MAAMiB,YAAYJ,EAAK1pC,OAAOgF,OAAOokC,EAAKzmC,OAAQ,IAC5DK,EAAEf,IAAM,SAAAC,GAAA,MAAKc,GAAEhD,MAAMgD,EAAEc,MAAM5B,KAE7Bc,EAAE2mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAKhnC,OAAQM,EAAEhD,OACrC0pC,EAAKtkC,OACLpC,EAAE2mC,KAAKvkC,MAAMskC,EAAKtkC,U9BwgLtB0M,IAAK,eACLhO,MAAO,W8BpgLP,GAEIe,GAFAukC,EAAOhrC,KAAKgrC,KAGZW,GAFO3rC,KAAKgrC,KAAK5oC,KAEL4M,GAAG7G,IAAI6iC,EAAKY,OAAQ,SAAAC,GAAA,MAAS78B,IAAG7G,IAAI0jC,EAAMC,OAAQ,SAAAhoC,GAAA,MAAKA,GAAEioC,GAAKjoC,EAAEc,OAI5EuD,EAAMwjC,CACVllC,IAAU,EAAG0B,GAEb6iC,EAAKpmC,EAAEhD,MAAM6E,OAAOA,M9B4gLpBiN,IAAK,mBACLhO,MAAO,W8BxgLP,GAAI3F,GAAOC,IACXA,MAAKgsC,WAEL,IAAIC,KACJjsC,MAAKgrC,KAAKkB,YAAYC,QAAQ,SAAA7rC,GAC1BA,EAAEwrC,OAASxrC,EAAEqQ,OAAO9M,IAAI,SAAAqK,GAAA,MAAGnO,GAAKqsC,WAAWl+B,KAC3C5N,EAAEwrC,OAAOK,QAAQ,SAAC9hC,EAAG1J,GACjB,GAAI0rC,GAASJ,EAAItrC,EACb0rC,KAAQA,EAAS,GACrBhiC,EAAE0hC,GAAKM,EACPJ,EAAItrC,GAAK0J,EAAEzF,EAAEynC,MAIrBrsC,KAAKgrC,KAAKY,OAAS5rC,KAAKgrC,KAAKkB,e9B6gL7Bx4B,IAAK,aACLhO,MAAO,S8B1gLAA,GACP,GAAIslC,GAAOhrC,KAAKgrC,IAChB,QACItmC,EAAGsmC,EAAKtmC,EAAEgB,MAAMA,GAChBd,EAAG0nC,WAAWtB,EAAKpmC,EAAEc,MAAMA,Q9B8gL/BgO,IAAK,YACLhO,MAAO,W8BzgLP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZuB,EAAWvsC,KAAK+qC,OAAOrmC,EACvB6mC,EAAOxrC,EAAKysC,KAAKC,eAAe,KAAO1sC,EAAK2sC,YAAY,UAAY,IAAM3sC,EAAK2sC,YAAY,SAAW3sC,EAAKgrC,OAAO4B,OAAS,GAAK,IAAM5sC,EAAK2sC,YAAY,eACtJnqC,KAAK,YAAa,eAAiByoC,EAAKzmC,OAAS,KAElDqoC,EAAQrB,CACRxrC,GAAKgrC,OAAO9nC,aACZ2pC,EAAQrB,EAAKtoC,aAAa4pC,KAAK79B,GAAG89B,eAGtCF,EAAM7rC,KAAKiqC,EAAKtmC,EAAE6mC,MAElBA,EAAKkB,eAAe,QAAU1sC,EAAK2sC,YAAY,UAC1CnqC,KAAK,YAAa,aAAgByoC,EAAKvmC,MAAQ,EAAK,IAAOumC,EAAK+B,OAAOC,OAAU,KACjFzqC,KAAK,KAAM,QACXW,MAAM,cAAe,UACrBQ,KAAK6oC,EAASxnC,U9BygLnB2O,IAAK,YACLhO,MAAO,W8BtgLP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZuB,EAAWvsC,KAAK+qC,OAAOnmC,EACvB2mC,EAAOxrC,EAAKysC,KAAKC,eAAe,KAAO1sC,EAAK2sC,YAAY,UAAY,IAAM3sC,EAAK2sC,YAAY,SAAW3sC,EAAKgrC,OAAO4B,OAAS,GAAK,IAAM5sC,EAAK2sC,YAAY,eAEvJE,EAAQrB,CACRxrC,GAAKgrC,OAAO9nC,aACZ2pC,EAAQrB,EAAKtoC,aAAa4pC,KAAK79B,GAAG89B,eAGtCF,EAAM7rC,KAAKiqC,EAAKpmC,EAAE2mC,MAElBA,EAAKkB,eAAe,QAAU1sC,EAAK2sC,YAAY,UAC1CnqC,KAAK,YAAa,cAAgByoC,EAAK+B,OAAO/hC,KAAO,IAAOggC,EAAKzmC,OAAS,EAAK,gBAC/EhC,KAAK,KAAM,OACXW,MAAM,cAAe,UACrBQ,KAAK6oC,EAASxnC,U9BugLnB2O,IAAK,WACLhO,MAAO,W8BngLP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KAIZiC,EAAajtC,KAAK0sC,YAAY,SAE9BQ,EAAWltC,KAAK0sC,YAAY,OAC5Bb,EAAQ9rC,EAAKysC,KAAKrqC,UAAU,IAAM8qC,GACjC7qC,KAAK4oC,EAAKY,QAEXuB,EAAatB,EAAMxpC,QAAQC,OAAO,KACjCC,KAAK,QAAS0qC,GAAYp7B,MAAMg6B,GAEjCuB,EAAMD,EAAWhrC,UAAU,IAAM+qC,GAChC9qC,KAAK,SAAA0B,GAAA,MAAKA,GAAEgoC,SAEbuB,EAAWD,EAAI/qC,QAAQC,OAAO,KAC7BC,KAAK,QAAS2qC,GACfI,EAAeD,EAAS/qC,OAAO,QAC9BC,KAAK,IAAK,GACXgrC,EAAWF,EAASx7B,MAAMu7B,GAE1BI,EAAUD,EAAS7qC,OAAO,QAE1B+qC,EAAWD,EACXE,EAAOH,EACPI,EAASR,CACTntC,MAAK4tC,sBACLH,EAAWD,EAAQvqC,aACnByqC,EAAOH,EAAStqC,aAChB0qC,EAASR,EAAWlqC,cAGxBoqC,EAAS9qC,KAAK,YAAa,SAAUuB,GACjC,MAAO,aAAeknC,EAAKtmC,EAAE9C,MAAMkC,EAAEY,GAAK,IAAOsmC,EAAKpmC,EAAEhD,MAAMkC,EAAEioC,IAAO,KAE3E,IAAI8B,GAAU7C,EAAKpmC,EAAEhD,MAAM6E,QAC3BinC,GAAKnrC,KAAK,YAAa,SAAUuB,GAC7B,MAAO,aAAeknC,EAAKtmC,EAAE9C,MAAMkC,EAAEY,GAAK,IAAOsmC,EAAKpmC,EAAEhD,MAAMkC,EAAEioC,GAAKjoC,EAAEc,GAAM,MAEjF0oC,EACK/qC,KAAK,QAASyoC,EAAKtmC,EAAE9C,MAAM8vB,aAC3BnvB,KAAK,SAAU,GACpBkrC,EACKlrC,KAAK,QAASyoC,EAAKtmC,EAAE9C,MAAM8vB,aAC3BnvB,KAAK,SAAU,SAAAuB,GAAA,MAAKknC,GAAKpmC,EAAEhD,MAAMkC,EAAEioC,IAAMf,EAAKpmC,EAAEhD,MAAMkC,EAAEioC,GAAKjoC,EAAEc,EAAIipC,EAAQ,MAG5E7tC,KAAKgrC,KAAK8C,aACVH,EACKprC,KAAK,OAAQvC,KAAKgrC,KAAK8C,aAG5B9C,EAAK+C,SACLR,EAAS9nC,GAAG,YAAa,SAAA3B,GACrB/D,EAAKyqC,YAAY1mC,EAAEc,KACpBa,GAAG,WAAY,SAAA3B,GACd/D,EAAKiuC,gBAGbnC,EAAM7oC,OAAOG,SACbiqC,EAAIpqC,OAAOG,Y9BggLXuQ,IAAK,SACLhO,MAAO,S8B9/KJuoC,GAKH,MAJAxE,GAAA7jC,OAAAkkC,eAAAb,EAAAh2B,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,GACbjuC,KAAKkuC,YACLluC,KAAKmuC,YACLnuC,KAAKouC,WACEpuC,S9BkgLJipC,GACTe,EAAsBqE,wBAErBC,4BAA4B,GAAGvoC,WAAW,GAAGwoC,UAAU,KAAKC,IAAI,SAAS9tC,EAAQjB,EAAOD,GAC3F,YAeA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAjBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQivC,YAAcjvC,EAAQkvC,kBAAoB9c,MAElD,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,I+B3xL5diF,EAAAjuC,EAAA,WACAupC,EAAAvpC,EAAA,WAEaguC,E/BoyLWlvC,E+BpyLXkvC,kB/BoyLuC,SAAUE,G+BjwL1D,QAAAF,GAAYvE,GAAOhC,EAAAnoC,KAAA0uC,EAAA,IAAAtE,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAA4E,GAAA3tC,KAAAf,MAAA,OAAAoqC,GAjCnBC,SAAWD,EAAKE,eAAiB,WAiCdF,EAhCnBG,YAAa,EAgCMH,EA/BnBI,aAAc,EA+BKJ,EA9BnB1lC,GACIK,MAAO,GACPW,MAAO,SAAApF,GAAA,MAAKA,GAAEoT,KACdi5B,QAAQ,EACRroC,OAAQ,UA0BO8lC,EAvBnBxlC,GACIG,MAAO,GACPW,MAAO,SAAA5B,GAAA,MAAKA,IACZlC,MAAO,SACP0C,OAAQ,OACRuqC,aAAc,GACdlC,QAAQ,GAiBOvC,EAfnB0E,GAAK,SAAAhrC,GAAA,MAAKA,GAAE6M,OAAOm+B,IAeA1E,EAdnB2E,GAAK,SAAAjrC,GAAA,MAAKA,GAAE6M,OAAOo+B,IAcA3E,EAbnB4E,GAAK,SAAAlrC,GAAA,MAAKA,GAAE6M,OAAOq+B,IAaA5E,EAZnB6E,GAAK,SAAAnrC,GAAA,MAAKA,GAAE6M,OAAOu+B,YAYA9E,EAXnB+E,GAAK,SAAArrC,GAAA,MAAKA,GAAE6M,OAAOy+B,aAWAhF,EAVnBiF,SAAU,SAAAvrC,GAAA,MAAIA,GAAE6M,OAAO0+B,UAUJjF,EATnBkF,aAAe,SAACxrC,EAAEnD,GAAH,MAAQmD,IASJsmC,EARnBmF,aAAe,SAACzrC,EAAEnD,GAAH,MAAQmD,IAQJsmC,EAPnBoF,YAAc,GAOKpF,EANnBqF,YAAc,IAMKrF,EAJnBnnC,YAAa,EAIMmnC,EAHnB9oC,MAASswB,OAGUwY,EAFnBsF,gBAAiB,aAIVvF,GACCF,EAAAQ,MAAME,WAANP,EAAuBD,GAHZC,E/B80LnB,MA5EA3B,GAAUiG,EAAmBE,GA4EtBF,GACTC,EAAOgB,YAESnwC,G+Bx0LLivC,Y/Bw0L2B,SAAUmB,G+Bv0L9C,QAAAnB,GAAY3D,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAyuC,GAAAlG,EAAAvoC,KAAA4F,OAAAkkC,eAAA2E,GAAA1tC,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAIssC,GAAkB3D,K/B8pM3D,MAvVAtC,GAAUgG,EAAamB,GAQvBzG,EAAasF,IACT/6B,IAAK,YACLhO,MAAO,S+B90LDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAA2E,EAAAx7B,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAI0uC,GAAkB3D,O/Bi1L7Cr3B,IAAK,WACLhO,MAAO,W+B90LP+jC,EAAA7jC,OAAAkkC,eAAA2E,EAAAx7B,WAAA,WAAAjT,MAAAe,KAAAf,MACAypC,EAAA7jC,OAAAkkC,eAAA2E,EAAAx7B,WAAA,kBAAAjT,MAAAe,KAAAf,MACAA,KAAKgrC,KAAKtmC,KACV1E,KAAKgrC,KAAKpmC,KAEV5E,KAAKgrC,KAAK5oC,KAAOpC,KAAK6vC,gBACtB7vC,KAAKkrC,SACLlrC,KAAKmrC,SAELnrC,KAAK8vC,gB/Bk1LLp8B,IAAK,gBACLhO,MAAO,W+B90LP,MAAO1F,MAAKoC,Q/Bk1LZsR,IAAK,SACLhO,MAAO,W+B90LP,GAAIslC,GAAOhrC,KAAKgrC,KACZtmC,EAAIsmC,EAAKtmC,EACT4mC,EAAOtrC,KAAK+qC,OAAOrmC,CAEvBA,GAAEgB,MAAQ4lC,EAAK5lC,MACfhB,EAAE9C,MAAQoN,GAAGipB,YAAYrxB,OAAO,EAAGokC,EAAKvmC,QACxCC,EAAEb,IAAM,SAAAC,GAAA,MAAKY,GAAE9C,MAAM8C,EAAEgB,MAAM5B,KAE7BY,EAAE6mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAKhnC,OAAQI,EAAE9C,OACtC0pC,EAAKqB,QACJjoC,EAAE6mC,KAAKwE,UAAU/E,EAAKzmC,OAG1B,IACIkC,GADArE,EAAOpC,KAAKgrC,KAAK5oC,IAKjBqE,GAHCrE,GAASA,EAAKpB,OAGNoB,EAAKyB,IAAIa,EAAEgB,UAGxBslC,EAAKtmC,EAAE9C,MAAM6E,OAAOA,M/Bq1LpBiN,IAAK,SACLhO,MAAO,W+Bl1LF,GAAAsqC,GAAAhwC,KAEDgrC,EAAOhrC,KAAKgrC,KACZpmC,EAAIomC,EAAKpmC,EACT0mC,EAAOtrC,KAAK+qC,OAAOnmC,CACvBA,GAAEc,MAAQ,SAAA5B,GAAA,MAAKwnC,GAAK5lC,MAAM3E,KAAKivC,EAAKjF,OAAQjnC,IAC5Cc,EAAEhD,MAAQqoC,EAAAQ,MAAMiB,YAAYJ,EAAK1pC,OAAOgF,OAAOokC,EAAKzmC,OAAQ,IAC5DK,EAAEf,IAAM,SAAAC,GAAA,MAAKc,GAAEhD,MAAMgD,EAAEc,MAAM5B,KAE7Bc,EAAE2mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAKhnC,OAAQM,EAAEhD,OACrC0pC,EAAKtkC,OACLpC,EAAE2mC,KAAKvkC,MAAMskC,EAAKtkC,OAEnBskC,EAAKqB,QACJ/nC,EAAE2mC,KAAKwE,UAAU/E,EAAKvmC,OAE1BzE,KAAKqrC,kB/B01LL33B,IAAK,eACLhO,MAAO,W+Bv1LP,GAIiBuqC,GAAMC,EAJnBlF,EAAOhrC,KAAKgrC,KACZ5oC,EAAOpC,KAAKgrC,KAAK5oC,KACjBuN,EAAI3P,KAAK+qC,OAETp6B,IACJvO,GAAK+pC,QAAQ,SAAUroC,EAAGnD,GACtB,GAAIwvC,GAAKxgC,EAAEm/B,GAAGhrC,GACVssC,EAAKzgC,EAAEq/B,GAAGlrC,GACVusC,EAAK1gC,EAAEs/B,GAAGnrC,GACVwsC,EAAK3gC,EAAEw/B,GAAGrrC,GACVurC,EAAW1/B,EAAE0/B,SAASvrC,EAEtBurC,IACAA,EAASlD,QAAQ,SAAU5rC,EAAGI,GAC1BgQ,EAAOpK,KAAKoJ,EAAE2/B,aAAa/uC,EAAGI,MAGlC0vC,GAAM1/B,EAAOpK,KAAK8pC,GAClBF,GAAMx/B,EAAOpK,KAAK4pC,GAClBC,GAAMz/B,EAAOpK,KAAK6pC,GAClBE,GAAM3/B,EAAOpK,KAAK+pC,KAE1BL,EAAOjhC,GAAG3C,IAAIsE,GACdu/B,EAAOlhC,GAAG7G,IAAIwI,EACd,IAAIo8B,IAAUmD,EAAKD,GAAOjwC,KAAK+qC,OAAOnmC,EAAEiqC,YACxCoB,IAAMlD,EACNmD,GAAMnD,CACN,IAAItmC,IAAWwpC,EAAMC,EAErBlF,GAAKpmC,EAAEhD,MAAM6E,OAAOA,M/Bq2LpBiN,IAAK,YACLhO,MAAO,W+Bl2LP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZuB,EAAWvsC,KAAK+qC,OAAOrmC,EACvB6mC,EAAOxrC,EAAKysC,KAAKC,eAAe,KAAO1sC,EAAK2sC,YAAY,UAAY,IAAM3sC,EAAK2sC,YAAY,SAAWH,EAASI,OAAS,GAAK,IAAM5sC,EAAK2sC,YAAY,eACnJnqC,KAAK,YAAa,eAAiByoC,EAAKzmC,OAAS,KAElDqoC,EAAQrB,CACRxrC,GAAKgrC,OAAO9nC,aACZ2pC,EAAQrB,EAAKtoC,aAAa4pC,KAAK79B,GAAG89B,eAGtCF,EAAM7rC,KAAKiqC,EAAKtmC,EAAE6mC,MAElBA,EAAKkB,eAAe,QAAQ1sC,EAAK2sC,YAAY,UACxCnqC,KAAK,YAAa,aAAeyoC,EAAKvmC,MAAM,EAAI,IAAMumC,EAAK+B,OAAOC,OAAS,KAC3EzqC,KAAK,KAAM,QACXW,MAAM,cAAe,UACrBQ,KAAK6oC,EAASgE,U/Bk2LnB78B,IAAK,YACLhO,MAAO,W+B/1LP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZuB,EAAWvsC,KAAK+qC,OAAOnmC,EACvB2mC,EAAOxrC,EAAKysC,KAAKC,eAAe,KAAO1sC,EAAK2sC,YAAY,UAAY,IAAM3sC,EAAK2sC,YAAY,SAAWH,EAASI,OAAS,GAAK,IAAM5sC,EAAK2sC,YAAY,eAEpJE,EAAQrB,CACRxrC,GAAKgrC,OAAO9nC,aACZ2pC,EAAQrB,EAAKtoC,aAAa4pC,KAAK79B,GAAG89B,eAGtCF,EAAM7rC,KAAKiqC,EAAKpmC,EAAE2mC,MAElBA,EAAKkB,eAAe,QAAU1sC,EAAK2sC,YAAY,UAC1CnqC,KAAK,YAAa,cAAgByoC,EAAK+B,OAAO/hC,KAAO,IAAOggC,EAAKzmC,OAAS,EAAK,gBAC/EhC,KAAK,KAAM,OACXW,MAAM,cAAe,UACrBQ,KAAK6oC,EAASxnC,U/Bg2LnB2O,IAAK,eACLhO,MAAO,W+B71LP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZD,EAAShrC,EAAKgrC,OACdyF,EAAezwC,EAAK2sC,YAAY,gBAEhC+D,EAAW1wC,EAAKysC,KAAKrqC,UAAU,IAAIquC,GAAcpuC,KAAK4oC,EAAK5oC,MAC3DsuC,EAAeD,EAASpuC,QACvBC,OAAO,KACPC,KAAK,QAASiuC,GACdttC,MAAM,iBAAkB,MACxBA,MAAM,eAAgB,MAEvBytC,EAAgBD,EAAa7+B,MAAM4+B,GACnC1iB,EAAW,IACX6iB,EAAYD,CACZ5wC,GAAK6tC,sBACLgD,EAAYD,EAAc1tC,aAC1B2tC,EAAUC,MAAM,SAAS/sC,EAAEnD,GAAK,MAAOA,GAAIotB,EAAWid,EAAK5oC,KAAKpB,UAGpE4vC,EACK1tC,MAAM,OAAQ8nC,EAAK1pC,OACnB4B,MAAM,iBAAkB,GACxBA,MAAM,eAAgB,KACtBX,KAAK,YAAa,SAACuB,EAAEnD,GAAH,MAAQ,cAAgBqqC,EAAKtmC,EAAEb,IAAIC,EAAEnD,GAAgC,IAA3BqqC,EAAKtmC,EAAE9C,MAAM8vB,aAAsB,SACpG+e,EAASztC,OAAOG,QAEhB,IAAI2tC,GAAY/F,EAAO0E,YAA+C7mC,KAAKyD,IAAI0+B,EAAO0E,YAAa7mC,KAAKT,IAAI4iC,EAAOyE,YAAwC,GAA3BxE,EAAKtmC,EAAE9C,MAAM8vB,cAA7E,GAA3BsZ,EAAKtmC,EAAE9C,MAAM8vB,YAC9Cqf,EAAsC,IAA3B/F,EAAKtmC,EAAE9C,MAAM8vB,YAAqBof,EAAS,EACtDE,EAAsC,IAA3BhG,EAAKtmC,EAAE9C,MAAM8vB,YAAqBof,EAAS,EAEtDG,EAAWlxC,EAAK2sC,YAAY,MAEhCgE,GAAapuC,OAAO,QACfC,KAAK,QAAS0uC,GAEdxrC,GAAG,YAAa,SAAS3B,EAAEnD,GACxBqO,GAAGtM,OAAO1C,MAAMkxC,QAAQ,SAAS,EACjC,IAAIC,GAAO,OAAOpG,EAAOiE,GAAGlrC,EAAEnD,GAAG,YAAYoqC,EAAOgE,GAAGjrC,EAAEnD,GAAG,YAAYoqC,EAAO+D,GAAGhrC,EAAEnD,EACpFZ,GAAKyqC,YAAY2G,KAEpB1rC,GAAG,WAAY,SAAS3B,EAAEnD,GACvBqO,GAAGtM,OAAO1C,MAAMkxC,QAAQ,SAAS,GACjCnxC,EAAKiuC,eAGb,IAAIoD,GAAWT,EAAcjuC,OAAO,QAAQuuC,GAExCI,EAAYD,CACZrxC,GAAKgrC,OAAO9nC,aACZouC,EAAYD,EAASnuC,cAGzBouC,EAAU9uC,KAAK,IAAK,SAACuB,EAAEnD,GAAH,MAASqqC,GAAKpmC,EAAEhD,MAAMmpC,EAAOiE,GAAGlrC,MAC/CvB,KAAK,QAASuuC,GACdvuC,KAAK,IAAKwuC,GACVxuC,KAAK,SAAU,SAACuB,EAAEnD,GAAH,MAASiI,MAAKC,IAAImiC,EAAKpmC,EAAEhD,MAAMmpC,EAAOiE,GAAGlrC,IAAMknC,EAAKpmC,EAAEhD,MAAMmpC,EAAO+D,GAAGhrC,MAAQ,IAC7FZ,MAAM,SAAU8nC,EAAK1pC,MAG1B,IAAIgwC,GAAcvxC,EAAK2sC,YAAY,SACnCgE,GAAapuC,OAAO,QAAQC,KAAK,QAAS+uC,EAE1C,IAAIC,GAAaZ,EAAcjuC,OAAO,QAAQ4uC,EAC1CvxC,GAAKgrC,OAAO9nC,aACZsuC,EAAaA,EAAWtuC,cAE5BsuC,EACKhvC,KAAK,KAAMwuC,GACXxuC,KAAK,KAAM,SAACuB,EAAEnD,GAAH,MAASqqC,GAAKpmC,EAAEhD,MAAMmpC,EAAOgE,GAAGjrC,MAC3CvB,KAAK,KAAMyuC,GACXzuC,KAAK,KAAM,SAACuB,EAAEnD,GAAH,MAASqqC,GAAKpmC,EAAEhD,MAAMmpC,EAAOgE,GAAGjrC,KAKhD,IAAI0tC,GAAczxC,EAAK2sC,YAAY,WAC/B+E,EAAY1xC,EAAK2sC,YAAY,gBAE7BgF,IAAah+B,IAAK,MAAOhO,MAAOqlC,EAAOkE,KAAMv7B,IAAK,OAAQhO,MAAOqlC,EAAOoE,IAE5EuB,GAAaj9B,KAAK,SAAS3P,EAAEnD,GACzB,GAAIgxC,GAAM3iC,GAAGtM,OAAO1C,KAEpB0xC,GAASvF,QAAQ,SAAA5sC,GACTA,EAAEmG,MAAM5B,KACR6tC,EAAIrvC,OAAO,QACNY,MAAM,SAAU8nC,EAAK1pC,MAAMwC,EAAEnD,IAC7B4B,KAAK,QAASivC,EAAa,IAAMhB,EAAa,IAAIjxC,EAAEmU,KACzDi+B,EAAIrvC,OAAO,QACNY,MAAM,SAAU8nC,EAAK1pC,MAAMwC,EAAEnD,IAC7B4B,KAAK,QAASkvC,EAAU,IAAMjB,EAAa,IAAIjxC,EAAEmU,UAKlEg+B,EAASvF,QAAQ,SAAA5sC,GACb,GAAIqyC,GAAsB,QAAVryC,EAAEmU,IAAiBq3B,EAAO+D,GAAK/D,EAAOiE,GAElD6C,EAAUlB,EAAcjuC,OAAO,IAAI8uC,EAAa,IAAIhB,EAAa,IAAIjxC,EAAEmU,KACvEo+B,EAAOnB,EAAcjuC,OAAO,IAAI+uC,EAAU,IAAIjB,EAAa,IAAIjxC,EAAEmU,IACjE3T,GAAKgrC,OAAO9nC,aACZ4uC,EAAUA,EAAQ5uC,aAClB6uC,EAAKA,EAAK7uC,cAEd4uC,EACKtvC,KAAK,KAAiC,IAA3ByoC,EAAKtmC,EAAE9C,MAAM8vB,aACxBnvB,KAAK,KAAM,SAACuB,EAAEnD,GAAH,MAASqqC,GAAKpmC,EAAEhD,MAAMrC,EAAEmG,MAAM5B,MACzCvB,KAAK,KAAiC,IAA3ByoC,EAAKtmC,EAAE9C,MAAM8vB,aACxBnvB,KAAK,KAAM,SAACuB,EAAEnD,GAAH,MAASqqC,GAAKpmC,EAAEhD,MAAMgwC,EAAS9tC,MAE/CguC,EACKvvC,KAAK,KAAMwuC,GACXxuC,KAAK,KAAM,SAACuB,EAAEnD,GAAH,MAASqqC,GAAKpmC,EAAEhD,MAAMrC,EAAEmG,MAAM5B,MACzCvB,KAAK,KAAMyuC,GACXzuC,KAAK,KAAM,SAACuB,EAAEnD,GAAH,MAASqqC,GAAKpmC,EAAEhD,MAAMrC,EAAEmG,MAAM5B,MAE9C4sC,EAAavuC,UAAU,IAAIquC,EAAa,IAAIjxC,EAAEmU,KACzCjO,GAAG,YAAa,SAAS3B,EAAEnD,EAAE2L,GAC1B0C,GAAGtM,OAAO1C,MAAMkxC,QAAQ,SAAS,GACjCnxC,EAAKyqC,YAAYjrC,EAAEmG,MAAM5B,MAE5B2B,GAAG,WAAY,SAAS3B,EAAEnD,EAAE2L,GACzB0C,GAAGtM,OAAO1C,MAAMkxC,QAAQ,SAAS,GACjCnxC,EAAKiuC,iBAMjB,IAAI+D,GAAehyC,EAAK2sC,YAAY,WAChC2C,EAAWsB,EAAcxuC,UAAU,IAAI4vC,GAAc3vC,KAAK,SAAC0B,EAAEnD,GAAH,MAASoqC,GAAOsE,SAASvrC,EAAEnD,SAErFqxC,EAAqB3C,EAAShtC,QAAQC,OAAO,UAC5CC,KAAK,QAASwvC,GACd7uC,MAAM,UAAW,IAEtB8uC,GACKvsC,GAAG,YAAa,SAAU3B,EAAGnD,EAAG2L,GAC7B0C,GAAGtM,OAAO1C,MAAMkxC,QAAQ,SAAS,GACjCnxC,EAAKyqC,YAAYO,EAAOwE,aAAazrC,EAAEnD,MAE1C8E,GAAG,WAAY,SAAU3B,EAAGnD,EAAG2L,GAC5B0C,GAAGtM,OAAO1C,MAAMkxC,QAAQ,SAAS,GACjCnxC,EAAKiuC,eAGb,IAAIiE,GAAgBD,EAAmBngC,MAAMw9B,GACzC6C,EAAYD,CACZlyC,GAAKgrC,OAAO9nC,aACZivC,EAAYD,EAAchvC,cAE9BivC,EACK3vC,KAAK,KAAiC,IAA3ByoC,EAAKtmC,EAAE9C,MAAM8vB,aACxBnvB,KAAK,KAAM,SAACuB,EAAEnD,GAAH,MAASqqC,GAAKpmC,EAAEhD,MAAMmpC,EAAOuE,aAAaxrC,EAAEnD,MACvD4B,KAAK,IAAK,KACf8sC,EAASrsC,OAAOG,Y/Bg1LhBuQ,IAAK,SACLhO,MAAO,S+B70LJuoC,GAKH,MAJAxE,GAAA7jC,OAAAkkC,eAAA2E,EAAAx7B,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,GACbjuC,KAAKkuC,YACLluC,KAAKmuC,YACLnuC,KAAKmyC,eACEnyC,Q/Bg1LP0T,IAAK,aACLhO,MAAO,W+B90LE,GAAA0sC,GAAApyC,KACLD,EAAKC,KACLsrC,EAAOtrC,KAAK+qC,MAEhB,IAAGO,EAAKoE,gBAAgB,CACpB,GAAI2C,GAAsB,SAASpI,EAAAQ,MAAM6H,sBAAsBhH,EAAKoE,gBACpE1vC,MAAKgrC,KAAKuH,cAAgBvjC,GAAGqpB,aAAarpB,GAAGqjC,IAEjD,GAAIG,GAAalH,EAAKhqC,KAClBkxC,IAAoC,gBAAfA,IAA2BA,YAAsBC,QACtEzyC,KAAKgrC,KAAK1pC,MAAQkxC,EACbxyC,KAAKgrC,KAAKuH,gBACfxyC,EAAKirC,KAAKwH,WAAWA,EACrBxyC,KAAKgrC,KAAK1pC,MAAQ,SAAAwC,GAAA,MAAM/D,GAAKirC,KAAKuH,cAAcH,EAAKpH,KAAKtmC,EAAEgB,MAAM5B,U/Bu1LnE2qC,GACTE,EAAO+D,SAENC,UAAU,GAAGpE,UAAU,KAAKqE,IAAI,SAASlyC,EAAQjB,EAAOD,GAC3D,YAiBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAnBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQqzC,QAAUrzC,EAAQszC,cAAgBlhB,MAE1C,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,IgC5tM5dqJ,EAAAryC,EAAA,mBACAupC,EAAAvpC,EAAA,WACAsyC,EAAAtyC,EAAA,sBAEaoyC,EhCsuMOtzC,EgCtuMPszC,chCsuM+B,SAAUG,GgCjtMlD,QAAAH,GAAY3I,GAAOhC,EAAAnoC,KAAA8yC,EAAA,IAAA1I,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAgJ,GAAA/xC,KAAAf,MAAA,OAAAoqC,GAnBnBC,SAAWD,EAAKE,eAAiB,WAmBdF,EAlBnBG,YAAa,EAkBMH,EAjBnBI,aAAc,EAiBKJ,EAhBnBxlC,GACI8O,IAAKke,OACLlsB,MAAO,SAAS5B,GAAK,MAAoB8tB,UAAb5xB,KAAK4E,EAAE8O,IAAkB5P,EAAIA,EAAE9D,KAAK4E,EAAE8O,MAClE9R,MAAO,SACP0C,OAAQ,OACRuqC,aAAc,GACdlC,QAAQ,GAUOvC,EARnBqB,QAAS,EAQUrB,EAPnB8I,QACIx/B,IAAKke,OACLlsB,MAAO,SAAS5B,GAAK,MAAyB8tB,UAAlB5xB,KAAKkzC,OAAOx/B,IAAkB,GAAK5P,EAAE9D,KAAKkzC,OAAOx/B,MAC7E68B,MAAO,GACP4C,aAAcvhB,QAKXuY,GACCF,EAAAQ,MAAME,WAANP,EAAuBD,GAHZC,EhCsvMnB,MApCA3B,GAAUqK,EAAeG,GAoClBH,GACTC,EAAarE,kBAEDlvC,GgCjvMDqzC,QhCivMmB,SAAUO,GgChvMtC,QAAAP,GAAY/H,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAA6yC,GAAAtK,EAAAvoC,KAAA4F,OAAAkkC,eAAA+I,GAAA9xC,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAI0wC,GAAc/H,KhCm1MvD,MAnGAtC,GAAUoK,EAASO,GAQnBjK,EAAa0J,IACTn/B,IAAK,YACLhO,MAAO,SgCvvMDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAA+I,EAAA5/B,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAI8yC,GAAc/H,OhC0vMzCr3B,IAAK,gBACLhO,MAAO,WgCvvMP,GAAI3F,GAAOC,KACPsrC,EAAOvrC,EAAKgrC,MAChBhrC,GAAKirC,KAAKqI,gBAAkBrzC,KAAKszC,mBAEjC,IAAIlxC,GAAOpC,KAAKoC,IAChB,IAAIrC,EAAKirC,KAAKqI,gBAMT,CACD,GAAGtzC,EAAKgrC,OAAOU,OACX1rC,EAAKirC,KAAKkB,YAAe9pC,EAAKyB,IAAI,SAAAvD,GAC9B,OACIoT,IAAKpT,EAAEiwC,OAASjwC,EAAEoT,KAAO,GACzB/C,OAAQrQ,EAAEqQ,cAGjB,CACD5Q,EAAKirC,KAAKuI,WAAa,SAAAzvC,GAAA,MAAKwnC,GAAK4H,OAAOxtC,MAAM3E,KAAKuqC,EAAMxnC,IACzD/D,EAAKirC,KAAKkB,YAAcl9B,GAAG4E,OAAOF,IAAI1T,KAAKgrC,KAAKuI,YAAYh/B,QAAQnS,EAEpE,IAAIoxC,GAAiB,SAAAzoC,GAAA,MAAKA,GACvBhL,GAAKgrC,OAAOmI,OAAOC,eACflJ,EAAAQ,MAAMgJ,WAAW1zC,EAAKgrC,OAAOmI,OAAOC,cACnCK,EAAkB,SAAAzoC,GAAA,MAAGhL,GAAKgrC,OAAOmI,OAAOC,aAAapoC,IAAMA,GACtDk/B,EAAAQ,MAAMiJ,SAAS3zC,EAAKgrC,OAAOmI,OAAOC,gBACvCK,EAAkB,SAAAzoC,GAAA,MAAKhL,GAAKgrC,OAAOmI,OAAOC,aAAapoC,IAAMA,KAGrEhL,EAAKirC,KAAKkB,YAAYC,QAAQ,SAAAvsC,GAC1BA,EAAE8T,IAAM8/B,EAAgB5zC,EAAE8T,OAIlC3T,EAAKirC,KAAK3hC,WAAa2F,GAAG3G,IAAIrI,KAAKgrC,KAAKkB,YAAa,SAAA5rC,GAAA,MAAGA,GAAEqQ,OAAO3P,aA9BjEjB,GAAKirC,KAAKkB,cACNx4B,IAAK,GACL/C,OAAQvO,IAEZrC,EAAKirC,KAAK3hC,WAAajH,EAAKpB,MAmDhC,OArBAjB,GAAKirC,KAAKkB,YAAYC,QAAQ,SAAA7rC,GAC1B,GAAIiK,MAAMC,QAAQlK,EAAEqQ,QAApB,CAIA,GAAIA,GAASrQ,EAAEqQ,OAAO9M,IAAI,SAAAC,GAAA,MAAGwoC,YAAWvsC,EAAKgrC,OAAOnmC,EAAEc,MAAM3E,KAAKhB,EAAKgrC,OAAQjnC,KAC9ExD,GAAEqQ,OAAOm+B,GAAKkE,EAAAW,gBAAgBxpC,SAASwG,EAAQ,KAC/CrQ,EAAEqQ,OAAOo+B,GAAKiE,EAAAW,gBAAgBxpC,SAASwG,EAAQ,IAC/CrQ,EAAEqQ,OAAOq+B,GAAKgE,EAAAW,gBAAgBxpC,SAASwG,EAAQ,IAC/C,IAAIijC,GAAOtzC,EAAEqQ,OAAOq+B,GAAK1uC,EAAEqQ,OAAOm+B,EAE9B/uC,GAAKgrC,OAAO8I,OAIZvzC,EAAEqQ,OAAOu+B,WAAa5uC,EAAEqQ,OAAOm+B,GAAK,IAAI8E,EACxCtzC,EAAEqQ,OAAOy+B,YAAc9uC,EAAEqQ,OAAOq+B,GAAK,IAAI4E,EACzCtzC,EAAEqQ,OAAO0+B,SAAW1+B,EAAOgzB,OAAO,SAAA7/B,GAAA,MAAIA,GAAExD,EAAEqQ,OAAOu+B,YAAcprC,EAAExD,EAAEqQ,OAAOy+B,gBAL1E9uC,EAAEqQ,OAAOu+B,WAAalgC,GAAG3C,IAAIsE,GAC7BrQ,EAAEqQ,OAAOy+B,YAAcpgC,GAAG7G,IAAIwI,OAQ/B5Q,EAAKirC,KAAKkB,ehCwwMjBx4B,IAAK,oBACLhO,MAAO,WgCrwMP,MAAO1F,MAAK+qC,OAAOU,WAAazrC,KAAK+qC,OAAOmI,SAAUlzC,KAAK+qC,OAAOmI,OAAOxtC,WhC0wMtEmtC,GACTE,EAAatE,eAEZqF,kBAAkB,GAAGC,qBAAqB,GAAGxF,UAAU,KAAKyF,IAAI,SAAStzC,EAAQjB,EAAOD,GAC3F,YAiBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK;AAAeD,EAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAnBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQ6uC,qBAAuB7uC,EAAQorC,2BAA6BhZ,MAEpE,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,IiCn4M5diF,EAAAjuC,EAAA,WACAupC,EAAAvpC,EAAA,WACAoF,EAAApF,EAAA,YAEakqC,EjC64MoBprC,EiC74MpBorC,2BjC64MyD,SAAUgE,GiC33M5E,QAAAhE,GAAYT,GAAOhC,EAAAnoC,KAAA4qC,EAAA,IAAAR,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAc,GAAA7pC,KAAAf,MAAA,OAAAoqC,GAhBnBG,YAAW,EAgBQH,EAfnB7oC,QACIkD,MAAO,GACPsoC,OAAQ,GACRzpC,WAAY,IAYG8mC,EAVnB8I,QACIx/B,IAAK,EACLhO,MAAO,SAAS5B,GAAK,MAAOA,GAAE9D,KAAKkzC,OAAOx/B,MAC1C68B,MAAO,GACP4C,aAAcvhB,QAMCwY,EAJnBqB,QAAS,EAIUrB,EAHnB9oC,MAASswB,OAGUwY,EAFnBsF,gBAAiB,aAIVvF,GACCF,EAAAQ,MAAME,WAANP,EAAuBD,GAHZC,EjC65MnB,MAjCA3B,GAAUmC,EAA4BgE,GAiC/BhE,GACT+D,EAAOgB,YAEkBnwC,GiCv5Md6uC,qBjCu5M6C,SAAUuB,GiCt5MhE,QAAAvB,GAAYvD,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAquC,GAAA9F,EAAAvoC,KAAA4F,OAAAkkC,eAAAuE,GAAAttC,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAIwoC,GAA2BG,KjC2pNpE,MArQAtC,GAAU4F,EAAsBuB,GAQhCzG,EAAakF,IACT36B,IAAK,YACLhO,MAAO,SiC75MDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAAuE,EAAAp7B,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAI4qC,GAA2BG,OjCg6MtDr3B,IAAK,WACLhO,MAAO,WiC75MP+jC,EAAA7jC,OAAAkkC,eAAAuE,EAAAp7B,WAAA,WAAAjT,MAAAe,KAAAf,KACA,IAEIsrC,GAAOtrC,KAAK+qC,MAOhB,IALA/qC,KAAKgrC,KAAKT,WAAae,EAAKf,WAC5BvqC,KAAKi0C,cACLj0C,KAAKgrC,KAAK5oC,KAAOpC,KAAK6vC,gBACtB7vC,KAAKgsC,YAEFhsC,KAAKgrC,KAAKT,WAAW,CACpB,GAAI3oC,GAAQ5B,KAAKgrC,KAAKuH,eAClB3wC,EAAM6E,UAAY7E,EAAM6E,SAASzF,OAAO,EACxChB,KAAKgrC,KAAKT,YAAa,EAEvBvqC,KAAKgrC,KAAK+B,OAAO9hC,MAAQqgC,EAAKyB,OAAO9hC,MAAQqgC,EAAK/pC,OAAOkD,MAAyB,EAAnB6mC,EAAK/pC,OAAOwrC,OAGnF,MAAO/sC,SjCi6MP0T,IAAK,oBACLhO,MAAO,WiC95MP,MAAO1F,MAAK+qC,OAAOU,WAAazrC,KAAK+qC,OAAOmI,SAAUlzC,KAAK+qC,OAAOmI,OAAOxtC,UjCk6MzEgO,IAAK,0BACLhO,MAAO,WiCh6Mc,GAAAsqC,GAAAhwC,KACjB6D,EAAMmL,GAAG2E,IAAI3T,KAAKoC,KAAM,SAAA0B,GAAA,MAAKksC,GAAKhF,KAAKuI,WAAWzvC,IACtD,OAAO8B,QAAOsuC,oBAAoBrwC,GAAKA,IAAI,SAAAC,GAAA,MAAGD,GAAIC,QjCy6MlD4P,IAAK,cACLhO,MAAO,WiCv6MG,GAAA0sC,GAAApyC,KACND,EAAKC,KACLsrC,EAAOtrC,KAAK+qC,MAEhB/qC,MAAKgrC,KAAKqI,gBAAkBrzC,KAAKszC,mBACjC,IAAI7sC,KACJ,IAAGzG,KAAKgrC,KAAKqI,gBAET,GADAtzC,EAAKirC,KAAKmJ,gBACPn0C,KAAK+qC,OAAOU,OACXzrC,KAAKgrC,KAAKuI,WAAa,SAAAjzC,GAAA,MAAKA,GAAEoT,KAC9BjN,EAASzG,KAAKo0C,0BAEdp0C,KAAKoC,KAAK+pC,QAAQ,SAAA7rC,GACdP,EAAKirC,KAAKmJ,aAAa7zC,EAAEoT,KAAOpT,EAAEiwC,OAAOjwC,EAAEoT,UAE9C,CACD1T,KAAKgrC,KAAKuI,WAAa,SAAAzvC,GAAA,MAAKwnC,GAAK4H,OAAOxtC,MAAM3E,KAAKuqC,EAAMxnC,IACzD2C,EAASzG,KAAKo0C,yBACd,IAAIC,GAAU,SAAAtpC,GAAA,MAAKA,GAChBhL,GAAKgrC,OAAOmI,OAAOC,eACflJ,EAAAQ,MAAMgJ,WAAW1zC,EAAKgrC,OAAOmI,OAAOC,cACnCkB,EAAW,SAAAtpC,GAAA,MAAGhL,GAAKgrC,OAAOmI,OAAOC,aAAapoC,IAAMA,GAC/Ck/B,EAAAQ,MAAMiJ,SAAS3zC,EAAKgrC,OAAOmI,OAAOC,gBACvCkB,EAAW,SAAAtpC,GAAA,MAAKhL,GAAKgrC,OAAOmI,OAAOC,aAAapoC,IAAMA,KAG9DtE,EAAO0lC,QAAQ,SAAAphC,GACXhL,EAAKirC,KAAKmJ,aAAappC,GAAKspC,EAAStpC,SAK7C/K,MAAKgrC,KAAKuI,WAAa,SAAAzvC,GAAA,MAAK,MAEhC,IAAGwnC,EAAKoE,gBAAgB,CACpB,GAAI2C,GAAsB,SAASpI,EAAAQ,MAAM6H,sBAAsBhH,EAAKoE,gBACpE1vC,MAAKgrC,KAAKuH,cAAgBvjC,GAAGqpB,aAAarpB,GAAGqjC,IAEjD,GAAIG,GAAalH,EAAKhqC,KAClBkxC,IAAoC,gBAAfA,IAA2BA,YAAsBC,SACtEzyC,KAAKgrC,KAAK1pC,MAAQkxC,EAClBxyC,KAAKgrC,KAAK8C,YAAc9tC,KAAKgrC,KAAK1pC,OAC7BtB,KAAKgrC,KAAKuH,eACfxyC,EAAKirC,KAAKwH,WAAWA,EACrBzyC,EAAKirC,KAAKuH,cAAc9rC,OAAOA,GAE/BzG,KAAKgrC,KAAK8C,YAAc,SAAAxtC,GAAA,MAAMP,GAAKirC,KAAKuH,cAAcjyC,EAAEoT,MACxD1T,KAAKgrC,KAAK1pC,MAAQ,SAAAwC,GAAA,MAAM/D,GAAKirC,KAAKuH,cAAcH,EAAKpH,KAAKuI,WAAWzvC,MAGrE9D,KAAKgrC,KAAK1pC,MAAQtB,KAAKgrC,KAAK8C,YAAc,SAAAxtC,GAAA,MAAI,YjC67MlDoT,IAAK,YACLhO,MAAO,WiCx7MP,GAAI3F,GAAKC,KACLoC,EAAOpC,KAAKgrC,KAAK5oC,IACjBrC,GAAKirC,KAAKqI,iBASPtzC,EAAKgrC,OAAOU,OACX1rC,EAAKirC,KAAKkB,YAAe9pC,EAAKyB,IAAI,SAAAvD,GAC9B,OACIoT,IAAKpT,EAAEoT,IACP68B,MAAOjwC,EAAEiwC,MACT5/B,OAAQrQ,EAAEqQ,WAIlB5Q,EAAKirC,KAAKkB,YAAcl9B,GAAG4E,OAAOF,IAAI1T,KAAKgrC,KAAKuI,YAAYh/B,QAAQnS,GACpErC,EAAKirC,KAAKkB,YAAYC,QAAQ,SAAAvsC,GAC1BA,EAAE2wC,MAAQxwC,EAAKirC,KAAKmJ,aAAav0C,EAAE8T,QAI3C3T,EAAKirC,KAAK3hC,WAAa2F,GAAG3G,IAAIrI,KAAKgrC,KAAKkB,YAAa,SAAA5rC,GAAA,MAAGA,GAAEqQ,OAAO3P,WAvBjEjB,EAAKirC,KAAKkB,cACNx4B,IAAK,KACL68B,MAAO,GACP5/B,OAAQvO,IAEZrC,EAAKirC,KAAK3hC,WAAajH,EAAKpB,WjCm9MhC0S,IAAK,gBACLhO,MAAO,WiC37MI,GAAA4uC,GAAAt0C,IACX,OAAIA,MAAKgrC,KAAKqI,iBAAoBrzC,KAAKu0C,cAGhCv0C,KAAKoC,KAAKuhC,OAAO,SAAA7/B,GAAA,MAAKwwC,GAAKC,cAAczwB,QAAQwwB,EAAKtJ,KAAKuI,WAAWzvC,SAFlE9D,KAAKoC,QjCo8MhBsR,IAAK,SACLhO,MAAO,SiC97MJuoC,GAIH,MAHAxE,GAAA7jC,OAAAkkC,eAAAuE,EAAAp7B,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,GACbjuC,KAAKw0C,eAEEx0C,QjCi8MP0T,IAAK,eACLhO,MAAO,WiC77MP,GAAI3F,GAAMC,KACNgrC,EAAOhrC,KAAKgrC,KAEZppC,EAAQopC,EAAKuH,aAQjB,MAJI3wC,EAAM6E,UAAY7E,EAAM6E,SAASzF,OAAO,KACxCgqC,EAAKT,YAAa,IAGlBS,EAAKT,WAIL,YAHGS,EAAKzpC,QAAUypC,EAAKzpC,OAAOkzC,WAC1BzJ,EAAKzpC,OAAOkzC,UAAUtxC,SAM9B,IAAIuxC,GAAU10C,KAAKgrC,KAAKvmC,MAAQzE,KAAK+qC,OAAOxpC,OAAOwrC,OAC/C4H,EAAU30C,KAAK+qC,OAAOxpC,OAAOwrC,MAEjC/B,GAAKzpC,OAAS,GAAAuE,GAAA8uC,OAAW50C,KAAKwB,IAAKxB,KAAKwsC,KAAM5qC,EAAO8yC,EAASC,GAE9D3J,EAAK6J,YAAc7J,EAAKzpC,OAAOD,QAC1BgC,WAAWtD,KAAK+qC,OAAOxpC,OAAO+B,YAC9BgB,OAAO,YACP1C,MAAMA,GACNG,OAAOH,EAAM6E,SAAS5C,IAAI,SAAAqK,GAAA,MAAG88B,GAAKmJ,aAAajmC,MAGpD88B,EAAK6J,YAAYpvC,GAAG,YAAa,SAAAkK,GAAA,MAAI5P,GAAK+0C,kBAAkBnlC,KAE5Dq7B,EAAKzpC,OAAOkzC,UACP1zC,KAAKiqC,EAAK6J,aAEf70C,KAAK+0C,8BjC67MLrhC,IAAK,oBACLhO,MAAO,SiC37MOsvC,GACdh1C,KAAKi1C,oBAAoBD,GACzBh1C,KAAKk1C,UjC87MLxhC,IAAK,2BACLhO,MAAO,WiC57MP,GAAI3F,GAAOC,IACXA,MAAKgrC,KAAKzpC,OAAOkzC,UAAUtyC,UAAU,UAAUsR,KAAK,SAAShR,GACzD,GAAI0yC,GAAap1C,EAAKw0C,eAAiBx0C,EAAKw0C,cAAczwB,QAAQrhB,GAAM,CACxEuM,IAAGtM,OAAO1C,MAAMkxC,QAAQ,eAAgBiE,QjCi8M5CzhC,IAAK,sBACLhO,MAAO,SiC97MSsvC,GACXh1C,KAAKu0C,gBACNv0C,KAAKu0C,cAAgBv0C,KAAKgrC,KAAKuH,cAAc9rC,SAAS6B,QAE1D,IAAIyhB,GAAQ/pB,KAAKu0C,cAAczwB,QAAQkxB,EAEnCjrB,GAAQ,EACR/pB,KAAKu0C,cAAchuC,KAAKyuC,GAExBh1C,KAAKu0C,cAAca,OAAOrrB,EAAO,GAGhC/pB,KAAKu0C,cAAcvzC,SACpBhB,KAAKu0C,cAAgBv0C,KAAKgrC,KAAKuH,cAAc9rC,SAAS6B,YjCk8M1DoL,IAAK,UACLhO,MAAO,SiC97MHtD,GAGJ,MAFAqnC,GAAA7jC,OAAAkkC,eAAAuE,EAAAp7B,WAAA,UAAAjT,MAAAe,KAAAf,KAAcoC,GACdpC,KAAKu0C,cAAgB,KACdv0C,SjCk8MJquC,GACTM,EAAO+D,SAENC,UAAU,GAAG5sC,WAAW,GAAGwoC,UAAU,KAAK8G,IAAI,SAAS30C,EAAQjB,EAAOD,GACzE,YAWA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAThH1iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQkzC,MAAQlzC,EAAQmwC,YAAc/d,MAEtC,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MkCvsNhiB4B,EAAAvpC,EAAA,WAGaivC,ElC0sNKnwC,EkC1sNLmwC,YAgCT,QAAAA,GAAYxF,GAAQhC,EAAAnoC,KAAA2vC,GAAA3vC,KA/BpBsqC,eAAiB,OA+BGtqC,KA9BpBqqC,SAAWrqC,KAAKsqC,eAAiB,cA8BbtqC,KA7BpByE,MAAQmtB,OA6BY5xB,KA5BpBuE,OAASqtB,OA4BW5xB,KA3BpB+sC,QACI/hC,KAAM,GACNC,MAAO,GACPqqC,IAAK,GACLtI,OAAQ,IAuBQhtC,KArBpBwqC,aAAc,EAqBMxqC,KApBpBiD,YAAa,EAoBOjD,KAlBpB+E,MAAQ6sB,OAkBY5xB,KAjBpBu1C,UAAU,GAiBUv1C,KAhBpBw1C,aACIxqC,KAAM,EACNC,MAAO,EACPqqC,IAAK,GACLtI,OAAQ,IAYQhtC,KATpBy1C,SAAW7jB,OASS5xB,KARpB01C,aAAa,GAQO11C,KAPpB21C,gBACI3qC,KAAM,EACNC,MAAO,EACPqqC,IAAK,GACLtI,OAAQ,IAIJ7C,GACAF,EAAAQ,MAAME,WAAW3qC,KAAMmqC,GlC6sNvB3qC,GkCtsNCkzC,MlCssNe,WkCvrNxB,QAAAA,GAAYnf,EAAMnxB,EAAM2oC,GAAQ5C,EAAAnoC,KAAA0yC,GAAA1yC,KAdhC41C,MAcgC3L,EAAAQ,MAAAzqC,KAVhCgrC,MACI+B,WAS4B/sC,KAPhC61C,aAOgC71C,KANhC81C,WAMgC91C,KALhC+1C,WAKgC/1C,KAHhCg2C,gBAAe,EAIXh2C,KAAKi2C,IAAMhM,EAAAQ,MAAMyL,OACjBl2C,KAAKm2C,YAAc5iB,YAAgBmf,GAEnC1yC,KAAKo2C,cAAgB7iB,EAErBvzB,KAAKq2C,UAAUtL,GAEX3oC,GACApC,KAAKs2C,QAAQl0C,GAEjBpC,KAAKk1C,OACLl1C,KAAKu2C,WlC+mOT,MAzaApN,GAAauJ,IACTh/B,IAAK,YACLhO,MAAO,SkCrsNDqlC,GAON,MANKA,GAGD/qC,KAAK+qC,OAASA,EAFd/qC,KAAK+qC,OAAS,GAAI4E,GAItB3vC,KAAKw2C,sBACEx2C,QlCwsNP0T,IAAK,UACLhO,MAAO,SkCtsNHtD,GAEJ,MADApC,MAAKoC,KAAOA,EACLpC,QlCysNP0T,IAAK,OACLhO,MAAO,WkCtsNP,GAAI3F,GAAOC,IASX,OARAD,GAAK02C,WACL12C,EAAK22C,UAED12C,KAAKg2C,gBACLj2C,EAAK42C,cAET52C,EAAK62C,OACL52C,KAAKg2C,gBAAe,EACbh2C,QlC0sNP0T,IAAK,SACLhO,MAAO,WkCvsNP,MAAO1F,MAAKk1C,UlC2sNZxhC,IAAK,WACLhO,MAAO,eAEPgO,IAAK,UACLhO,MAAO,WkCvsNP,GAAI3F,GAAOC,KACP+qC,EAAS/qC,KAAK+qC,OAEdgC,EAAShtC,EAAKirC,KAAK+B,OACnBtoC,EAAQ1E,EAAK82C,SAAW92C,EAAKirC,KAAKvmC,MAAQsoC,EAAO/hC,KAAO+hC,EAAO9hC,MAC/D1G,EAASxE,EAAK+2C,UAAa/2C,EAAKirC,KAAKzmC,OAASwoC,EAAOuI,IAAMvI,EAAOC,MAElEjtC,GAAKo2C,aAeLp2C,EAAKyB,IAAMzB,EAAKq2C,cAAc50C,IAC9BzB,EAAKysC,KAAOzsC,EAAKyB,IAAIirC,eAAe,gBAAgB1B,EAAOV,YAfvDrqC,KAAKg2C,gBACLhnC,GAAGtM,OAAO3C,EAAKq2C,eAAe1zC,OAAO,OAAOS,SAEhDpD,EAAKyB,IAAMwN,GAAGtM,OAAO3C,EAAKq2C,eAAe3J,eAAe,OAExD1sC,EAAKyB,IACAe,KAAK,QAASkC,GACdlC,KAAK,SAAUgC,GACfhC,KAAK,UAAW,QAAekC,EAAQ,IAAMF,GAC7ChC,KAAK,sBAAuB,iBAC5BA,KAAK,QAASwoC,EAAOV,UAC1BtqC,EAAKysC,KAAOzsC,EAAKyB,IAAIirC,eAAe,iBAOxC1sC,EAAKysC,KAAKjqC,KAAK,YAAa,aAAewqC,EAAO/hC,KAAO,IAAM+hC,EAAOuI,IAAM,KAEvEvK,EAAOtmC,QAASsmC,EAAOxmC,QACxByK,GAAGtM,OAAO7C,QACL4F,GAAG,UAAU1F,EAAKk2C,IAAK,WAEpB,GAAIhzC,GAAalD,EAAKgrC,OAAO9nC,UAC7BlD,GAAKgrC,OAAO9nC,YAAW,EACvBlD,EAAKm1C,OACLn1C,EAAKgrC,OAAO9nC,WAAaA,OlCusNrCyQ,IAAK,cACLhO,MAAO,WkClsNP,GAAI3F,GAAOC,IACPD,GAAKgrC,OAAOP,YACRzqC,EAAKo2C,YAILp2C,EAAKirC,KAAK+C,QAAShuC,EAAKq2C,cAAcpL,KAAK+C,QAH3ChuC,EAAKirC,KAAK+C,QAAU/+B,GAAGtM,OAAO,QAAQ+pC,eAAe,OAAO1sC,EAAKgrC,OAAOT,eAAe,WAClFpnC,MAAM,UAAW,GAM1BnD,EAAKirC,KAAK+C,QAAU,QlCqsNxBr6B,IAAK,WACLhO,MAAO,WkCjsNP,GAAIqnC,GAAS/sC,KAAK+qC,OAAOgC,MACzB/sC,MAAKgrC,KAAOhrC,KAAKgrC,SACjBhrC,KAAKgrC,KAAK+B,QACNuI,IAAKvI,EAAOuI,IACZtI,OAAQD,EAAOC,OACfhiC,KAAM+hC,EAAO/hC,KACbC,MAAO8hC,EAAO9hC,MAIlB,IAAI8rC,GAAkB,CACnB/2C,MAAK+qC,OAAOhmC,QACXgyC,EAAiB/2C,KAAK+qC,OAAOwK,UAAUv1C,KAAK+qC,OAAOyK,YAAYF,IAC3Dt1C,KAAK+qC,OAAO0K,WACZsB,GAAmB/2C,KAAK+qC,OAAOyK,YAAYxI,QAG/ChtC,KAAKgrC,KAAK+B,OAAOuI,IAAI1sC,KAAKT,IAAInI,KAAKgrC,KAAK+B,OAAOuI,IAAIyB,IAGpD/2C,KAAK+qC,OAAO0K,WAEXz1C,KAAKgrC,KAAK+B,OAAOuI,IAAI1sC,KAAKT,IAAInI,KAAKgrC,KAAK+B,OAAOuI,IAAKyB,EAAgB/2C,KAAK+qC,OAAO4K,eAAeL,IAAIt1C,KAAK+qC,OAAO2K,aAAa11C,KAAK+qC,OAAO4K,eAAe3I,YlCqsN3Jt5B,IAAK,SACLhO,MAAO,SkCjsNJtD,GACCA,GACApC,KAAKs2C,QAAQl0C,GAEjBpC,KAAKg3C,cACLh3C,KAAKi3C,gBAEL,IAAeC,EACf,KAAK,GAAIC,KAAkBn3C,MAAK61C,UAE5BqB,EAAiB90C,EAEjBpC,KAAK61C,UAAUsB,GAAgBC,OAAOF,EAE1C,OAAOl3C,SlCosNP0T,IAAK,cACLhO,MAAO,WkCjsNP,GAAI2xC,GAAar3C,KAAK0sC,YAAY,aAClC,OAAI1sC,MAAK+qC,OAAOhmC,UAKhB/E,MAAKwB,IAAIirC,eAAe,QAAQ4K,GAC3B90C,KAAK,YAAa,aAAevC,KAAK62C,SAAS,EAAI,IAAM72C,KAAK+qC,OAAOyK,YAAYF,IAAM,KACvF/yC,KAAK,KAAM,SACXW,MAAM,cAAe,UACrBA,MAAM,oBAAqB,WAC3BA,MAAM,YAAalD,KAAK+qC,OAAOwK,UAAU,MACzC7xC,KAAK1D,KAAK+qC,OAAOhmC,WAVlB/E,MAAKwB,IAAIkB,OAAO,QAAQ20C,GAAYl0C,YlC0sNxCuQ,IAAK,iBACLhO,MAAO,WkC7rNP,GAAI4xC,GAAgBt3C,KAAK0sC,YAAY,gBACrC,KAAI1sC,KAAK+qC,OAAO0K,SAEZ,WADAz1C,MAAKwB,IAAIkB,OAAO,QAAQ40C,GAAen0C,QAI3C,IAAIyB,GAAI5E,KAAK+qC,OAAO4K,eAAeL,GAChCt1C,MAAK+qC,OAAOhmC,QACXH,GAAG5E,KAAK+qC,OAAOyK,YAAYF,IAAIt1C,KAAK+qC,OAAOwK,WAG/Cv1C,KAAKwB,IAAIirC,eAAe,QAAQ6K,GAC3B/0C,KAAK,YAAa,aAAevC,KAAK62C,SAAS,EAAI,IAAMjyC,EAAI,KAC7DrC,KAAK,KAAM,SACXW,MAAM,cAAe,UACrBA,MAAM,oBAAqB,WAC3BA,MAAM,YAAalD,KAAK+qC,OAAO2K,aAAa,MAC5ChyC,KAAK1D,KAAK+qC,OAAO0K,alC4rNtB/hC,IAAK,OACLhO,MAAO,SkC1rNNtD,GAID,MAHApC,MAAKo3C,OAAOh1C,GAGLpC,QlC6sNP0T,IAAK,SACLhO,MAAO,SkC3rNJyxC,EAAgBI,GACnB,MAAyB,KAArBhyC,UAAUvE,OACHhB,KAAK61C,UAAUsB,IAG1Bn3C,KAAK61C,UAAUsB,GAAkBI,EAC1BA,MlC8rNP7jC,IAAK,KAkBLhO,MAAO,SkC5rNRme,EAAME,EAAUyzB,GACf,GAAIC,GAASz3C,KAAK+1C,QAAQlyB,KAAU7jB,KAAK+1C,QAAQlyB,MAMjD,OALA4zB,GAAOlxC,MACHwd,SAAUA,EACVyzB,QAASA,GAAWx3C,KACpB2uC,OAAQ3uC,OAELA,QlCmtNP0T,IAAK,OACLhO,MAAO,QAASgyC,GkC/rNf7zB,EAAME,EAAUyzB,GACjB,GAAIz3C,GAAOC,KACP03C,EAAO,QAAPA,KACA33C,EAAK43C,IAAI9zB,EAAM6zB,GACf3zB,EAASpe,MAAM3F,KAAMuF,WAEzB,OAAOvF,MAAKyF,GAAGoe,EAAM6zB,EAAMF,MlCstN3B9jC,IAAK,MACLhO,MAAO,SkChsNPme,EAAME,EAAUyzB,GAChB,GAAIlW,GAAOlhC,EAAGq3C,EAAQG,EAAOj3C,EAAG2L,CAGhC,IAAyB,IAArB/G,UAAUvE,OAAc,CACxB,IAAK6iB,IAAQ7jB,MAAK+1C,QACd/1C,KAAK+1C,QAAQlyB,GAAM7iB,OAAS,CAEhC,OAAOhB,MAIX,GAAyB,IAArBuF,UAAUvE,OAKV,MAJAy2C,GAASz3C,KAAK+1C,QAAQlyB,GAClB4zB,IACAA,EAAOz2C,OAAS,GAEbhB,IAMX,KADAshC,EAAQzd,GAAQA,GAAQje,OAAOoO,KAAKhU,KAAK+1C,SACpCp1C,EAAI,EAAGA,EAAI2gC,EAAMtgC,OAAQL,IAI1B,IAHAP,EAAIkhC,EAAM3gC,GACV82C,EAASz3C,KAAK+1C,QAAQ31C,GACtBkM,EAAImrC,EAAOz2C,OACJsL,KACHsrC,EAAQH,EAAOnrC,IACVyX,GAAYA,IAAa6zB,EAAM7zB,UAC/ByzB,GAAWA,IAAYI,EAAMJ,UAC9BC,EAAOrC,OAAO9oC,EAAG,EAK7B,OAAOtM,SlCksNP0T,IAAK,UAeLhO,MAAO,SkClsNHme,GACJ,GAEIljB,GAAGk3C,EAFHxzB,EAAO9Z,MAAM0I,UAAU3K,MAAMvH,KAAKwE,UAAW,GAC7CkyC,EAASz3C,KAAK+1C,QAAQlyB,EAG1B,IAAe+N,SAAX6lB,EACA,IAAK92C,EAAI,EAAGA,EAAI82C,EAAOz2C,OAAQL,IAC3Bk3C,EAAKJ,EAAO92C,GACZk3C,EAAG9zB,SAASpe,MAAMkyC,EAAGL,QAASnzB,EAItC,OAAOrkB,SlCqsNP0T,IAAK,mBACLhO,MAAO,WkCnsNP,MAAG1F,MAAKm2C,YACGn2C,KAAKo2C,cAAc50C,IAEvBwN,GAAGtM,OAAO1C,KAAKo2C,kBlCusNtB1iC,IAAK,uBACLhO,MAAO,WkCnsNP,MAAO1F,MAAK83C,mBAAmBC,UlCwsN/BrkC,IAAK,cACLhO,MAAO,SkCtsNCsyC,EAAOC,GACf,MAAOA,GAAQ,IAAK,GAAGj4C,KAAK+qC,OAAOT,eAAe0N,KlCysNlDtkC,IAAK,kBACLhO,MAAO,WkCvsNP1F,KAAKgrC,KAAKvmC,MAAQwlC,EAAAQ,MAAMyN,eAAel4C,KAAK+qC,OAAOtmC,MAAOzE,KAAK83C,mBAAoB93C,KAAKgrC,KAAK+B,QAC7F/sC,KAAKgrC,KAAKzmC,OAAS0lC,EAAAQ,MAAM0N,gBAAgBn4C,KAAK+qC,OAAOxmC,OAAQvE,KAAK83C,mBAAoB93C,KAAKgrC,KAAK+B,WlC2sNhGr5B,IAAK,oBACLhO,MAAO,WkCxsNP,MAAO1F,MAAKg2C,gBAAkBh2C,KAAK+qC,OAAO9nC,clC4sN1CyQ,IAAK,cACLhO,MAAO,SkC1sNCyrC,GACJnxC,KAAKgrC,KAAK+C,UAGd/tC,KAAKgrC,KAAK+C,QAAQ9qC,aACb8qB,SAAS,KACT7qB,MAAM,UAAW,IACtBlD,KAAKgrC,KAAK+C,QAAQoD,KAAKA,GAClBjuC,MAAM,OAAS8L,GAAG4oC,MAAMQ,MAAQ,EAAK,MACrCl1C,MAAM,MAAQ8L,GAAG4oC,MAAMS,MAAQ,GAAM,UlCysN1C3kC,IAAK,cACLhO,MAAO,WkCtsNH1F,KAAKgrC,KAAK+C,SAGd/tC,KAAKgrC,KAAK+C,QAAQ9qC,aACb8qB,SAAS,KACT7qB,MAAM,UAAW,MlCwsNtBwQ,IAAK,sBACLhO,MAAO,WkCrsNP1F,KAAKs4C,sBAAsBt4C,KAAKA,KAAMA,KAAK+qC,OAAQ,KAAK,MlCysNxDr3B,IAAK,wBACLhO,MAAO,SkCvsNW6yC,EAAOC,EAAW3pB,EAAQ5Z,EAAQwjC,GACpD,GAAI14C,GAAQC,IACZ,KAAK,GAAIW,KAAKkuB,GACV,GAAIA,EAAO/X,eAAenW,GAA1B,CAIA,GAAI+3C,GAAW34C,EAAK44C,qBAAqBJ,EAAOC,EAAW3pB,EAAQluB,EAAGsU,EAEnEwjC,IAAaxO,EAAAQ,MAAMmO,iBAAiB/pB,EAAOluB,KAC1CZ,EAAKu4C,sBAAsBI,EAAUH,EAAQ1pB,EAAOluB,GAAIsU,EAAQwjC,OlC4sNxE/kC,IAAK,uBACLhO,MAAO,SkCxsNU6yC,EAAQC,EAAW3pB,EAAQgqB,EAAa5jC,GACzD,MAAOsjC,GAAOtjC,EAAS4jC,GAAe,SAAUvzC,GAC5C,MAAKC,WAAUvE,QAGf6tB,EAAOgqB,GAAevzC,EACfkzC,GAHI3pB,EAAOgqB,QlCgtNnBnG,OAGRnE,UAAU,KAAKuK,IAAI,SAASp4C,EAAQjB,EAAOD,GAC9C,YAqBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAvBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQu5C,kBAAoBv5C,EAAQw5C,wBAA0BpnB,MAE9D,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,ImCnsO5diF,EAAAjuC,EAAA,WACAupC,EAAAvpC,EAAA,WACAsyC,EAAAtyC,EAAA,sBACAoF,EAAApF,EAAA,YACAu4C,EAAAv4C,EAAA,iBAEas4C,EnC+sOiBx5C,EmC/sOjBw5C,wBnC+sOmD,SAAUpK,GmC3qOtE,QAAAoK,GAAY7O,GAAQhC,EAAAnoC,KAAAg5C,EAAA,IAAA5O,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAkP,GAAAj4C,KAAAf,MAAA,OAAAoqC,GAlCpBC,SAAWD,EAAKE,eAAe,qBAkCXF,EAjCpBuC,QAAS,EAiCWvC,EAhCpBI,aAAc,EAgCMJ,EA/BpBG,YAAa,EA+BOH,EA9BpB8O,iBAAkB,EA8BE9O,EA7BpB+O,eAAgB,EA6BI/O,EA5BpBgP,eAAgB,EA4BIhP,EA3BpBiP,WACIt3C,OAAQ6vB,OACR5d,QACAtO,MAAO,SAAC5B,EAAGw1C,GAAJ,MAAoBx1C,GAAEw1C,IAC7B13C,MAAO,WAuBSwoC,EArBpBmP,aACI33C,MAAO,SACP6E,oBAA0B,EAAG,GAAK,IAAM,GACxCG,OAAQ,WAAY,OAAQ,eAAgB,QAAS,YAAa,UAAW,WAC7ElB,MAAO,SAAC8zC,EAASC,GAAV,MAAsBzG,GAAAW,gBAAgBjnC,kBAAkB8sC,EAASC,KAiBxDrP,EAdpB3nC,MACII,MAAO,UACPiF,KAAM8pB,OACN8nB,QAAS,GACTC,QAAS,IACT1yB,QAAS,GASOmjB,EAPpB2C,QACI/hC,KAAM,GACNC,MAAO,GACPqqC,IAAK,GACLtI,OAAQ,IAKJ7C,GACAF,EAAAQ,MAAME,WAANP,EAAuBD,GAHXC,EnCkuOpB,MAtDA3B,GAAUuQ,EAAyBpK,GAsD5BoK,GACTrK,EAAOgB,YAEenwC,GmC7tOXu5C,kBnC6tOuC,SAAUnJ,GmC5tO1D,QAAAmJ,GAAYjO,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAA+4C,GAAAxQ,EAAAvoC,KAAA4F,OAAAkkC,eAAAiP,GAAAh4C,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAI42C,GAAwBjO,KnCyqPjE,MA7cAtC,GAAUsQ,EAAmBnJ,GAQ7BzG,EAAa4P,IACTrlC,IAAK,YACLhO,MAAO,SmCnuODqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAAiP,EAAA9lC,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAIg5C,GAAwBjO,OnCsuOnDr3B,IAAK,WACLhO,MAAO,WmCluOP+jC,EAAA7jC,OAAAkkC,eAAAiP,EAAA9lC,WAAA,WAAAjT,MAAAe,KAAAf,KACA,IACI+sC,GAAS/sC,KAAK+qC,OAAOgC,OACrBzB,EAAOtrC,KAAK+qC,MAEhB/qC,MAAKgrC,KAAKtmC,KACV1E,KAAKgrC,KAAKuO,aACN3mC,OAAQgf,OACR9vB,MAAO8vB,OACPtwB,SACAuB,UAIJ7C,KAAK45C,gBACL,IAAIn1C,GAAQ6mC,EAAK7mC,MACbo1C,EAAkB75C,KAAK85C,sBAC3B95C,MAAKgrC,KAAK6O,gBAAkBA,CAE5B,IAAIE,GAAcF,EAAgBG,wBAAwBv1C,KACtDA,GAEKzE,KAAKgrC,KAAKiP,WACXj6C,KAAKgrC,KAAKiP,SAAWrxC,KAAKT,IAAImjC,EAAK7oC,KAAKi3C,QAAS9wC,KAAKyD,IAAIi/B,EAAK7oC,KAAKk3C,SAAUl1C,EAAQsoC,EAAO/hC,KAAO+hC,EAAO9hC,OAASjL,KAAKgrC,KAAKqO,UAAUr4C,WAI5IhB,KAAKgrC,KAAKiP,SAAWj6C,KAAK+qC,OAAOtoC,KAAKqF,KAEjC9H,KAAKgrC,KAAKiP,WACXj6C,KAAKgrC,KAAKiP,SAAWrxC,KAAKT,IAAImjC,EAAK7oC,KAAKi3C,QAAS9wC,KAAKyD,IAAIi/B,EAAK7oC,KAAKk3C,SAAUI,EAAchN,EAAO/hC,KAAO+hC,EAAO9hC,OAASjL,KAAKgrC,KAAKqO,UAAUr4C,UAGlJyD,EAAQzE,KAAKgrC,KAAKiP,SAAWj6C,KAAKgrC,KAAKqO,UAAUr4C,OAAS+rC,EAAO/hC,KAAO+hC,EAAO9hC,MAInF,IAAI1G,GAASE,CAab,OAZKF,KACDA,EAASs1C,EAAgBG,wBAAwBz1C,QAGrDvE,KAAKgrC,KAAKvmC,MAAQA,EAAQsoC,EAAO/hC,KAAO+hC,EAAO9hC,MAC/CjL,KAAKgrC,KAAKzmC,OAASvE,KAAKgrC,KAAKvmC,MAE7BzE,KAAKk6C,uBACLl6C,KAAKm6C,yBACLn6C,KAAKo6C,yBAGEp6C,QnCkuOP0T,IAAK,uBACLhO,MAAO,WmC9tOP,GAAIslC,GAAOhrC,KAAKgrC,KACZtmC,EAAIsmC,EAAKtmC,EACT4mC,EAAOtrC,KAAK+qC,OAAOsO,SAQvB30C,GAAEgB,MAAQ4lC,EAAK5lC,MACfhB,EAAE9C,MAAQoN,GAAGipB,YAAYrxB,OAAOokC,EAAKvmC,MAAO,IAC5CC,EAAEb,IAAM,SAAAC,GAAA,MAAKY,GAAE9C,MAAM8C,EAAEgB,MAAM5B,QnCquO7B4P,IAAK,yBACLhO,MAAO,WmCjuOP,GAAIslC,GAAOhrC,KAAKgrC,KACZqP,EAAWr6C,KAAK+qC,OAAOwO,WAE3BvO,GAAKuO,YAAYj4C,MAAMM,MAAQqoC,EAAAQ,MAAMiB,YAAY2O,EAASz4C,OAAO6E,OAAO4zC,EAAS5zC,QAAQG,MAAMyzC,EAASzzC,MACxG,IAAI/D,GAAQmoC,EAAKuO,YAAY12C,SAEzBy3C,EAAWt6C,KAAK+qC,OAAOtoC,IAC3BI,GAAMpB,KAAO64C,EAASz3C,KAEtB,IAAIc,GAAYqnC,EAAKiP,SAA8B,EAAnBK,EAASrzB,OACzC,IAAkB,UAAdpkB,EAAMpB,KAAkB,CACxB,GAAI84C,GAAY52C,EAAY,CAC5Bd,GAAM23C,YAAcxrC,GAAG/J,cAAcwB,QAAQ,EAAG,IAAIG,OAAO,EAAG2zC,IAC9D13C,EAAM43C,OAAS,SAAA9qC,GAAA,MAAI9M,GAAM23C,YAAY5xC,KAAKC,IAAI8G,EAAEjK,aAC7C,IAAkB,WAAd7C,EAAMpB,KAAmB,CAChC,GAAI84C,GAAY52C,EAAY,CAC5Bd,GAAM23C,YAAcxrC,GAAG/J,cAAcwB,QAAQ,EAAG,IAAIG,OAAO2zC,EAAW,IACtE13C,EAAM63C,QAAU,SAAA/qC,GAAA,MAAI9M,GAAM23C,YAAY5xC,KAAKC,IAAI8G,EAAEjK,SACjD7C,EAAM83C,QAAUJ,EAEhB13C,EAAM+3C,UAAY,SAAA1sC,GACd,MAAS,IAALA,EAAe,IACfA,EAAI,EAAU,MACX,UAEU,QAAdrL,EAAMpB,OACboB,EAAMiF,KAAOnE,MnC0uOjB+P,IAAK,iBACLhO,MAAO,WmCnuOP,GAAIm1C,GAAgB76C,KAAK+qC,OAAOsO,UAE5Bj3C,EAAOpC,KAAKoC,KACZ4oC,EAAOhrC,KAAKgrC,IAChBA,GAAK8P,oBACL9P,EAAKqO,UAAYwB,EAAc7mC,KAC1Bg3B,EAAKqO,WAAcrO,EAAKqO,UAAUr4C,SACnCgqC,EAAKqO,UAAYpP,EAAAQ,MAAMsQ,eAAe34C,EAAMpC,KAAK+qC,OAAOmI,OAAOx/B,IAAK1T,KAAK+qC,OAAOiQ,gBAGpFhQ,EAAKjpC,UACLipC,EAAKiQ,mBACLjQ,EAAKqO,UAAUlN,QAAQ,SAACmN,EAAavvB,GACjCihB,EAAK8P,iBAAiBxB,GAAetqC,GAAGU,OAAOtN,EAAM,SAAC0B,GAAD,MAAO+2C,GAAcn1C,MAAM5B,EAAGw1C,IACnF,IAAI/I,GAAQ+I,CACRuB,GAAc94C,QAAU84C,EAAc94C,OAAOf,OAAS+oB,IAEtDwmB,EAAQsK,EAAc94C,OAAOgoB,IAEjCihB,EAAKjpC,OAAOwE,KAAKgqC,GACjBvF,EAAKiQ,gBAAgB3B,GAAe/I,OnC6uOxC78B,IAAK,yBACLhO,MAAO,WmCruOP,GAAI3F,GAAOC,KACPoC,EAAOpC,KAAKoC,KACZwQ,EAAS5S,KAAKgrC,KAAKuO,YAAY3mC,UAC/BsoC,EAAcl7C,KAAKgrC,KAAKuO,YAAY3mC,OAAO9Q,SAC3CkpC,EAAOhrC,KAAKgrC,KAEZmQ,IACJnQ,GAAKqO,UAAUlN,QAAQ,SAACj+B,EAAGvN,GAEvBw6C,EAAiBjtC,GAAK9L,EAAKyB,IAAI,SAAAC,GAAA,MAAGknC,GAAKtmC,EAAEgB,MAAM5B,EAAGoK,OAGtD88B,EAAKqO,UAAUlN,QAAQ,SAAChkB,EAAIxnB,GACxB,GAAIkS,KACJD,GAAOrM,KAAKsM,GAEZm4B,EAAKqO,UAAUlN,QAAQ,SAAC/jB,EAAI9b,GACxB,GAAI8uC,GAAO,CACPjzB,IAAMC,IACNgzB,EAAOr7C,EAAKgrC,OAAOwO,YAAY7zC,MAAMy1C,EAAiBhzB,GAAKgzB,EAAiB/yB,IAEhF,IAAI3lB,IACA44C,OAAQlzB,EACRmzB,OAAQlzB,EACRvV,IAAKlS,EACL46C,IAAKjvC,EACL5G,MAAO01C,EAEXvoC,GAAItM,KAAK9D,GAETy4C,EAAY30C,KAAK9D,UnC6uOzBiR,IAAK,SACLhO,MAAO,SmCvuOJuoC,GACHxE,EAAA7jC,OAAAkkC,eAAAiP,EAAA9lC,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,GAEbjuC,KAAKw7C,cACLx7C,KAAKy7C,uBAGDz7C,KAAK+qC,OAAOR,YACZvqC,KAAKw0C,kBnC0uOT9gC,IAAK,uBACLhO,MAAO,WmCtuOP1F,KAAKgrC,KAAK0Q,WAAa17C,KAAK0sC,YAAY,SACxC1sC,KAAK27C,cACL37C,KAAK47C,iBnC0uOLloC,IAAK,cACLhO,MAAO,WmCvuOP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZ0Q,EAAa1Q,EAAK0Q,WAClBG,EAAcH,EAAa,KAE3B35C,EAAShC,EAAKysC,KAAKrqC,UAAU,QAAU05C,GACtCz5C,KAAK4oC,EAAKqO,UAAW,SAACv1C,EAAGnD,GAAJ,MAAQA,KAE9Bm7C,EAAc/5C,EAAOM,QAAQC,OAAO,QAAQC,KAAK,QAAS,SAACuB,EAAGnD,GAAJ,MAAU+6C,GAAa,IAAMG,EAAc,IAAMA,EAAc,IAAMl7C,IAAGkR,MAAM9P,EAE5I+5C,GACKv5C,KAAK,IAAK,SAACuB,EAAGnD,GAAJ,MAAUA,GAAIqqC,EAAKiP,SAAWjP,EAAKiP,SAAW,IACxD13C,KAAK,IAAKyoC,EAAKzmC,QACfhC,KAAK,SACLA,KAAK,KAAM,GACXA,KAAK,cAAe,OAGpBmB,KAAK,SAAAwK,GAAA,MAAG88B,GAAKiQ,gBAAgB/sC,KAE9BlO,KAAK+qC,OAAOoO,eACZ2C,EAAYv5C,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,gBAAkBA,EAAIqqC,EAAKiP,SAAWjP,EAAKiP,SAAW,GAAO,KAAOjP,EAAKzmC,OAAS,KAG9H,IAAIw3C,GAAWh8C,EAAKi8C,yBACpBF,GAAYroC,KAAK,SAAU88B,GACvBtG,EAAAQ,MAAMwR,gCAAgCjtC,GAAGtM,OAAO1C,MAAOuwC,EAAOwL,IAAUh8C,EAAKgrC,OAAOP,aAAczqC,EAAKirC,KAAK+C,WAGhHhsC,EAAOiB,OAAOG,YnC+uOduQ,IAAK,cACLhO,MAAO,WmC5uOP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZ0Q,EAAa1Q,EAAK0Q,WAClBQ,EAAclR,EAAK0Q,WAAa,KAChC35C,EAAShC,EAAKysC,KAAKrqC,UAAU,QAAU+5C,GACtC95C,KAAK4oC,EAAKqO,WAEXyC,EAAc/5C,EAAOM,QAAQC,OAAO,QAAQuP,MAAM9P,EAEtD+5C,GACKv5C,KAAK,IAAK,GACVA,KAAK,IAAK,SAACuB,EAAGnD,GAAJ,MAAUA,GAAIqqC,EAAKiP,SAAWjP,EAAKiP,SAAW,IACxD13C,KAAK,SACLA,KAAK,cAAe,OACpBA,KAAK,QAAS,SAACuB,EAAGnD,GAAJ,MAAU+6C,GAAa,IAAMQ,EAAc,IAAMA,EAAc,IAAMv7C,IAEnF+C,KAAK,SAAAwK,GAAA,MAAG88B,GAAKiQ,gBAAgB/sC,KAE9BlO,KAAK+qC,OAAOqO,eACZ0C,EACKv5C,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,mBAA6BA,EAAIqqC,EAAKiP,SAAWjP,EAAKiP,SAAW,GAAK,MAClG13C,KAAK,cAAe,MAG7B,IAAIw5C,GAAWh8C,EAAKo8C,yBACpBL,GAAYroC,KAAK,SAAU88B,GACvBtG,EAAAQ,MAAMwR,gCAAgCjtC,GAAGtM,OAAO1C,MAAOuwC,EAAOwL,IAAUh8C,EAAKgrC,OAAOP,aAAczqC,EAAKirC,KAAK+C,WAGhHhsC,EAAOiB,OAAOG,YnCgvOduQ,IAAK,0BACLhO,MAAO,WmC7uOP,GAAIq2C,GAAW/7C,KAAKgrC,KAAK+B,OAAO/hC,IAChC,KAAKhL,KAAK+qC,OAAOqO,cACb,MAAO2C,EAGXA,IAAY9R,EAAAQ,MAAM2R,MAClB,IAAIC,GAAW,EAGf,OAFAN,IAAYM,EAAW,KnCmvOvB3oC,IAAK,0BACLhO,MAAO,SmC/uOag+B,GACpB,IAAK1jC,KAAK+qC,OAAOoO,cACb,MAAOn5C,MAAKgrC,KAAKiP,SAAW,CAEhC,IAAInyC,GAAO9H,KAAKgrC,KAAK+B,OAAOC,MAC5BllC,IAAQmiC,EAAAQ,MAAM2R,MACd,IAAIC,GAAW,EAEf,OADAv0C,IAAQu0C,EAAW,KnCmvOnB3oC,IAAK,cACLhO,MAAO,WmC9uOP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZsR,EAAYv8C,EAAK2sC,YAAY,QAC7B6P,EAAYvR,EAAKuO,YAAY12C,MAAMpB,KAEnCK,EAAQ/B,EAAKysC,KAAKrqC,UAAU,KAAOm6C,GAClCl6C,KAAK4oC,EAAKuO,YAAY3mC,OAAO9Q,OAE9B06C,EAAa16C,EAAMO,QAAQC,OAAO,KACjC4uC,QAAQoL,GAAW,GACpBG,EAAaD,EAAW3qC,MAAM/P,EAClC26C,GAAWl6C,KAAK,YAAa,SAAAoN,GAAA,MAAI,cAAgBq7B,EAAKiP,SAAWtqC,EAAE4rC,IAAMvQ,EAAKiP,SAAW,GAAK,KAAOjP,EAAKiP,SAAWtqC,EAAEkD,IAAMm4B,EAAKiP,SAAW,GAAK,MAElJwC,EAAWvL,QAAQnxC,EAAKgrC,OAAOT,eAAiB,eAAgBvqC,EAAK28C,YAErE,IAAIC,GAAW,qBAAuBJ,EAAY,IAE9CK,EAAc96C,EAAMK,UAAUw6C,EAClCC,GAAYz5C,QAEZ,IAAIP,GAAS65C,EAAWhQ,eAAe8P,EAAY,eAAiBA,EAEjC,WAA/BvR,EAAKuO,YAAY12C,MAAMpB,MAEvBmB,EACKL,KAAK,IAAKyoC,EAAKuO,YAAY12C,MAAM43C,QACjCl4C,KAAK,KAAM,GACXA,KAAK,KAAM,GAGe,WAA/ByoC,EAAKuO,YAAY12C,MAAMpB,MAEvBmB,EACKL,KAAK,KAAMyoC,EAAKuO,YAAY12C,MAAM63C,SAClCn4C,KAAK,KAAMyoC,EAAKuO,YAAY12C,MAAM83C,SAClCp4C,KAAK,KAAM,GACXA,KAAK,KAAM,GAEXA,KAAK,YAAa,SAAAoN,GAAA,MAAI,UAAYq7B,EAAKuO,YAAY12C,MAAM+3C,UAAUjrC,EAAEjK,OAAS,MAIpD,QAA/BslC,EAAKuO,YAAY12C,MAAMpB,MACvBmB,EACKL,KAAK,QAASyoC,EAAKuO,YAAY12C,MAAMiF,MACrCvF,KAAK,SAAUyoC,EAAKuO,YAAY12C,MAAMiF,MACtCvF,KAAK,KAAMyoC,EAAKiP,SAAW,GAC3B13C,KAAK,KAAMyoC,EAAKiP,SAAW,GAEpCr3C,EAAOM,MAAM,OAAQ,SAAAyM,GAAA,MAAIq7B,GAAKuO,YAAYj4C,MAAMM,MAAM+N,EAAEjK,QAExD,IAAIm3C,MACAC,IAgBJ,IAdI9R,EAAK+C,UAEL8O,EAAmBt2C,KAAK,SAAAoJ,GACpB,GAAIwhC,GAAOxhC,EAAEjK,KACb3F,GAAKyqC,YAAY2G,KAGrB2L,EAAkBv2C,KAAK,SAAAoJ,GACnB5P,EAAKiuC,iBAMTjuC,EAAKgrC,OAAOmO,gBAAiB,CAC7B,GAAI6D,GAAiBh9C,EAAKgrC,OAAOT,eAAiB,YAC9C0S,EAAc,SAAArtC,GAAA,MAAGq7B,GAAK0Q,WAAa,MAAQ/rC,EAAE4rC,KAC7C0B,EAAc,SAAAttC,GAAA,MAAGq7B,GAAK0Q,WAAa,MAAQ/rC,EAAEkD,IAGjDgqC,GAAmBt2C,KAAK,SAAAoJ,GAEpB5P,EAAKysC,KAAKrqC,UAAU,QAAU66C,EAAYrtC,IAAIuhC,QAAQ6L,GAAgB,GACtEh9C,EAAKysC,KAAKrqC,UAAU,QAAU86C,EAAYttC,IAAIuhC,QAAQ6L,GAAgB,KAE1ED,EAAkBv2C,KAAK,SAAAoJ,GACnB5P,EAAKysC,KAAKrqC,UAAU,QAAU66C,EAAYrtC,IAAIuhC,QAAQ6L,GAAgB,GACtEh9C,EAAKysC,KAAKrqC,UAAU,QAAU86C,EAAYttC,IAAIuhC,QAAQ6L,GAAgB,KAK9EN,EAAWh3C,GAAG,YAAa,SAAAkK,GACvBktC,EAAmB1Q,QAAQ,SAAApoB,GAAA,MAAUA,GAASpU,OAE7ClK,GAAG,WAAY,SAAAkK,GACZmtC,EAAkB3Q,QAAQ,SAAApoB,GAAA,MAAUA,GAASpU,OAGrD8sC,EAAWh3C,GAAG,QAAS,SAAAkK,GACnB5P,EAAKm9C,QAAQ,gBAAiBvtC,KAIlC7N,EAAMkB,OAAOG,YnC2uObuQ,IAAK,eACLhO,MAAO,WmCtuOP,GAAIslC,GAAOhrC,KAAKgrC,KACZ0J,EAAU10C,KAAKgrC,KAAKvmC,MAAQ,GAC5BkwC,EAAU,EACVwI,EAAW,GACXC,EAAYp9C,KAAKgrC,KAAKzmC,OAAS,EAC/B3C,EAAQopC,EAAKuO,YAAYj4C,MAAMM,KAEnCopC,GAAKzpC,OAAS,GAAAuE,GAAA8uC,OAAW50C,KAAKwB,IAAKxB,KAAKwsC,KAAM5qC,EAAO8yC,EAASC,GAAS0I,kBAAkBF,EAAUC,MnC2uOnG1pC,IAAK,oBACLhO,MAAO,SmCxuOO43C,EAAmBvS,GAAQ,GAAAiF,GAAAhwC,KACrCD,EAAOC,IAEX+qC,GAASA,KAGT,IAAIwS,IACAh5C,OAAQxE,EAAKirC,KAAKzmC,OAASxE,EAAKgrC,OAAOgC,OAAOuI,IAAMv1C,EAAKgrC,OAAOgC,OAAOC,OACvEvoC,MAAO1E,EAAKirC,KAAKzmC,OAASxE,EAAKgrC,OAAOgC,OAAOuI,IAAMv1C,EAAKgrC,OAAOgC,OAAOC,OACtEkG,QACIx/B,IAAK3T,EAAKgrC,OAAOmI,OAAOx/B,IACxB68B,MAAOxwC,EAAKgrC,OAAOmI,OAAO3C,OAE9B5D,QAAQ,EACRpC,YAAY,EAGhBxqC,GAAK28C,aAAc,EAEnBa,EAAoBtT,EAAAQ,MAAME,WAAW4S,EAAmBxS,GACxD/qC,KAAKo3C,SAELp3C,KAAKyF,GAAG,gBAAiB,SAAAkK,GAGrB4tC,EAAkB74C,GACdgP,IAAK/D,EAAE0rC,OACP9K,MAAOxwC,EAAKirC,KAAKiQ,gBAAgBtrC,EAAE0rC,SAEvCkC,EAAkB34C,GACd8O,IAAK/D,EAAE2rC,OACP/K,MAAOxwC,EAAKirC,KAAKiQ,gBAAgBtrC,EAAE2rC,SAEnCv7C,EAAK28C,aAAe38C,EAAK28C,eAAgB,EACzC38C,EAAK28C,YAAYrG,UAAUkH,GAAmBrI,QAE9Cn1C,EAAK28C,YAAc,GAAAzD,GAAAuE,YAAgBF,EAAmBv9C,EAAKqC,KAAMm7C,GACjEvN,EAAKyN,OAAO,cAAe19C,EAAK28C,oBnC8uOrC3D,GACTpK,EAAO+D,SAENC,UAAU,GAAG5sC,WAAW,GAAG23C,gBAAgB,GAAG3J,qBAAqB,GAAGxF,UAAU,KAAKoP,IAAI,SAASj9C,EAAQjB,EAAOD,GACpH,YAWA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAThH1iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQo+C,aAAehsB,MAEvB,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MoCxuPhiB4B,EAAAvpC,EAAA,UpC8uPmBlB,GoC3uPNo+C,apC2uP6B,WACtC,QAASA,KACLzV,EAAgBnoC,KAAM49C,GAyB1B,MAtBAzU,GAAayU,EAAc,OACvBlqC,IAAK,SACLhO,MAAO,WoC9uPPsJ,GAAG6uC,UAAU5qC,UAAU5Q,MAAM4Q,UAAU6qC,eACnC9uC,GAAG6uC,UAAU5qC,UAAU6qC,eAAiB,SAASnB,EAAUoB,GACvD,MAAO9T,GAAAQ,MAAMqT,eAAe99C,KAAM28C,EAAUoB,IAIpD/uC,GAAG6uC,UAAU5qC,UAAU5Q,MAAM4Q,UAAU+qC,eACnChvC,GAAG6uC,UAAU5qC,UAAU+qC,eAAiB,SAASrB,GAC7C,MAAO1S,GAAAQ,MAAMuT,eAAeh+C,KAAM28C,IAG1C3tC,GAAG6uC,UAAU5qC,UAAU5Q,MAAM4Q,UAAUw5B,eACnCz9B,GAAG6uC,UAAU5qC,UAAUw5B,eAAiB,SAASkQ,GAC7C,MAAO1S,GAAAQ,MAAMgC,eAAezsC,KAAM28C,IAG1C3tC,GAAG6uC,UAAU5qC,UAAU5Q,MAAM4Q,UAAUgrC,eACnCjvC,GAAG6uC,UAAU5qC,UAAUgrC,eAAiB,SAAStB,EAAUoB,GACvD,MAAO9T,GAAAQ,MAAMwT,eAAej+C,KAAM28C,EAAUoB,QpCgvPjDH,OAGRrP,UAAU,KAAK2P,IAAI,SAASx9C,EAAQjB,EAAOD,GAC9C,YAmBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GArBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQ2+C,kBAAoB3+C,EAAQ4+C,wBAA0BxsB,MAE9D,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,IqCrxP5d2U,GADA39C,EAAA,WACAA,EAAA,cACAupC,EAAAvpC,EAAA,WAIa09C,GAHb19C,EAAA,sBrCmyP8BlB,EqChyPjB4+C,wBrCgyPmD,SAAUE,GqCzuPtE,QAAAF,GAAYjU,GAAQhC,EAAAnoC,KAAAo+C,EAAA,IAAAhU,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAsU,GAAAr9C,KAAAf,MAAA,OAAAoqC,GAtDpB1lC,GACI65C,aAAa,EACbrrB,SAAUtB,OACV4sB,aAAc,EACdr5C,OAAQysB,OACR6sB,cAAe7sB,OACf8sB,oBAEQ76B,KAAM,OACN2W,SAAU,QAGV3W,KAAM,QACN2W,SAAU,WAGV3W,KAAM,MACN2W,SAAU,cAGV3W,KAAM,OACN2W,SAAU,KAAM,iBAGhB3W,KAAM,SACN2W,SAAU,QAAS,oBAGnB3W,KAAM,SACN2W,SAAU,WAAY,uBAI9BmkB,eAAgB,SAAwBl+C,EAAG2I,GACvC,MAAO6gC,GAAAQ,MAAMmU,SAASn+C,GAAMA,EAAEo+C,cAAcz1C,GAAM3I,EAAI2I,GAE1D01C,UAAWltB,QAkBKwY,EAhBpBr+B,GACIwyC,aAAa,GAeGnU,EAZpB7oC,QACIu9C,UAAW,SAAU5wC,GACjB,GAAIsY,GAAS,EACTtY,GAAI,KAAW,IACfsY,EAAS,KACTtY,EAAI6wC,OAAO7wC,EAAI,KAASyZ,QAAQ,GAEpC,IAAIq3B,GAAKC,KAAKC,cACd,OAAOF,GAAG75C,OAAO+I,GAAKsY,IAOtB2jB,GACAF,EAAAQ,MAAME,WAANP,EAAuBD,GAJXC,ErCuyPpB,MA7DA3B,GAAU2V,EAAyBE,GA6D5BF,GACTC,EAASc,eAEa3/C,GqCjyPX2+C,kBrCiyPuC,SAAUiB,GqChyP1D,QAAAjB,GAAYrT,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAm+C,GAAA5V,EAAAvoC,KAAA4F,OAAAkkC,eAAAqU,GAAAp9C,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAIg8C,GAAwBrT,KrCi/PjE,MAjNAtC,GAAU0V,EAAmBiB,GAQ7BjW,EAAagV,IACTzqC,IAAK,YACLhO,MAAO,SqCvyPDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAAqU,EAAAlrC,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAIo+C,GAAwBrT,OrC0yPnDr3B,IAAK,8BACLhO,MAAO,WqCvyPmB,GAAAsqC,GAAAhwC,IAS1B,IAPAA,KAAKgrC,KAAKtmC,EAAE4xB,WAAat2B,KAAK+qC,OAAOrmC,EAAES,OACpCnF,KAAK+qC,OAAOrmC,EAAE+5C,gBAAkBz+C,KAAKgrC,KAAKtmC,EAAE4xB,YAC3Ct2B,KAAKq/C,kBAIT5V,EAAA7jC,OAAAkkC,eAAAqU,EAAAlrC,WAAA,8BAAAjT,MAAAe,KAAAf,MACKA,KAAK+qC,OAAOrmC,EAAE65C,YAAnB,CAIA,GAAIx+C,GAAOC,IAEXA,MAAKs/C,4BAELt/C,KAAKgrC,KAAKtmC,EAAE85C,aAAex+C,KAAK+qC,OAAOrmC,EAAE85C,cAAgB,EAEzDx+C,KAAKgrC,KAAKtmC,EAAE66C,WAAav/C,KAAKw/C,gBAI9Bx/C,KAAKgrC,KAAKtmC,EAAE+6C,aAAap0C,KAAKrL,KAAK+qC,OAAOrmC,EAAEi6C,eAE5C,IAAIe,GAAO,IAEX1/C,MAAKgrC,KAAKtmC,EAAE+6C,aAAatT,QAAQ,SAACznC,EAAG/D,GACjC,GAAIg/C,GAAU3P,EAAK4P,UAAUl7C,EAC7B,IAAa,OAATg7C,EAEA,YADAA,EAAOC,EAOX,KAHA,GAAIE,GAAO9/C,EAAK+/C,kBAAkBJ,GAC9BK,KACAC,EAAY,EACTjgD,EAAKkgD,kBAAkBJ,EAAMF,IAAU,IAC1CK,MACIA,EAAY,OAF6B,CAK7C,GAAIl8C,MACAo8C,EAAangD,EAAKogD,WAAWN,EACjC/7C,GAAEksC,EAAKjF,OAAOrmC,EAAEgP,KAAOwsC,EAEvBngD,EAAKqgD,aAAat8C,EAAGo8C,EAAYngD,EAAKirC,KAAKtmC,EAAEwuC,OAAQnzC,EAAKgrC,OAAOrmC,EAAEwuC,QACnE6M,EAAQx5C,KAAKs5C,GACbA,EAAO9/C,EAAK+/C,kBAAkBD,GAElCH,EAAOC,QrCyyPXjsC,IAAK,YACLhO,MAAO,SqCryPDhB,GACN,GAAI27C,GAASrgD,KAAKw/C,eAClB,OAAOa,GAAO37C,MrCwyPdgP,IAAK,aACLhO,MAAO,SqCtyPAwjB,GACP,GAAI41B,GAAY9+C,KAAKsgD,kBACrB,OAAOxB,GAAU51B,MrCyyPjBxV,IAAK,eACLhO,MAAO,SqCvyPEA,GACT,GAAI1F,KAAK+qC,OAAOrmC,EAAEo6C,UAAW,MAAO9+C,MAAK+qC,OAAOrmC,EAAEo6C,UAAU/9C,KAAKf,KAAK+qC,OAAQrlC,EAE9E,IAAG1F,KAAK+qC,OAAOrmC,EAAE+5C,cAAc,CAC3B,GAAIv1B,GAAOlpB,KAAK4/C,UAAUl6C,EAC1B,OAAOsJ,IAAGsnB,WAAWt2B,KAAK+qC,OAAOrmC,EAAE+5C,eAAev1B,GAGtD,MAAIlpB,MAAKgrC,KAAKtmC,EAAE4xB,YAEb2T,EAAAQ,MAAM8V,OAAO76C,GACL1F,KAAKmgD,WAAWz6C,GAHQA,KrCizPnCgO,IAAK,oBACLhO,MAAO,SqCzyPOjF,EAAG2I,GACjB,MAAO3I,GAAE2I,KrC4yPTsK,IAAK,kBACLhO,MAAO,SqC1yPKjF,EAAG2I,GACf,GAAIi3C,GAASrgD,KAAKgrC,KAAKtmC,EAAE66C,UACzB,OAAOc,GAAO5/C,KAAO4/C,EAAOj3C,MrC6yP5BsK,IAAK,oBACLhO,MAAO,SqC3yPOvF,GACd,GAAI+yB,GAAW,OAAO+W,EAAAQ,MAAM6H,sBAAsBtyC,KAAKgrC,KAAKtmC,EAAEwuB,SAE9D,OAAOlkB,IAAGkkB,GAAUwQ,OAAOvjC,EAAGH,KAAKgrC,KAAKtmC,EAAE85C,iBrC8yP1C9qC,IAAK,WACLhO,MAAO,WqC3yPP+jC,EAAA7jC,OAAAkkC,eAAAqU,EAAAlrC,WAAA,WAAAjT,MAAAe,KAAAf,MAEIA,KAAK+qC,OAAOh/B,EAAEwyC,aACdv+C,KAAKgrC,KAAKp4B,OAAOu5B,QAAQ,SAACt5B,EAAK2tC,GAC3B,GAAIC,GAAe7uB,MACnB/e,GAAIs5B,QAAQ,SAAC1pC,EAAMi+C,GACI9uB,SAAfnvB,EAAKiD,OAAwCksB,SAAjB6uB,IAC5Bh+C,EAAKiD,MAAQ+6C,EACbh+C,EAAKs9C,SAAU,GAEnBU,EAAeh+C,EAAKiD,arCkzPhCgO,IAAK,SACLhO,MAAO,SqC3yPJuoC,GACHxE,EAAA7jC,OAAAkkC,eAAAqU,EAAAlrC,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,MrC8yPbv6B,IAAK,4BACLhO,MAAO,WqCxyPP1F,KAAKgrC,KAAKtmC,EAAEwuB,SAAWlzB,KAAK+qC,OAAOrmC,EAAEwuB,SAEjClzB,KAAKgrC,KAAKtmC,EAAE4xB,YACZt2B,KAAKq/C,mBAGLr/C,KAAKgrC,KAAKtmC,EAAEwuB,UAAYlzB,KAAKgrC,KAAKtmC,EAAE4xB,YACpCt2B,KAAK2gD,mBrC8yPTjtC,IAAK,kBACLhO,MAAO,WqCzyPP,IAAI,GADA3F,GAAOC,KACHW,EAAE,EAAGA,EAAIZ,EAAKgrC,OAAOrmC,EAAEg6C,kBAAkB19C,OAAQL,IAAI,CACzD,GAAIigD,GAAiB7gD,EAAKgrC,OAAOrmC,EAAEg6C,kBAAkB/9C,GACjDwE,EAAS,KACT07C,EAAcD,EAAepmB,QAAQsmB,KAAK,SAAAvhD,GAC1C4F,EAAS5F,CACT,IAAI8gD,GAASrxC,GAAGwzB,UAAUjjC,EAC1B,OAAOQ,GAAKirC,KAAKtmC,EAAE+6C,aAAanqB,MAAM,SAAA5wB,GAClC,MAAqB,QAAd27C,EAAO37C,MAGtB,IAAGm8C,EAOC,MANA9gD,GAAKirC,KAAKtmC,EAAE4xB,WAAanxB,OAErBpF,EAAKirC,KAAKtmC,EAAEwuB,WACZnzB,EAAKirC,KAAKtmC,EAAEwuB,SAAW0tB,EAAe/8B,WrCmzPlDnQ,IAAK,gBACLhO,MAAO,WqC1yPP,IAAI,GADA3F,GAAOC,KACHW,EAAE,EAAGA,EAAIZ,EAAKgrC,OAAOrmC,EAAEg6C,kBAAkB19C,OAAQL,IAAK,CAC1D,GAAIigD,GAAiB7gD,EAAKgrC,OAAOrmC,EAAEg6C,kBAAkB/9C,EAErD,IAAGigD,EAAepmB,QAAQ1W,QAAQ/jB,EAAKirC,KAAKtmC,EAAE4xB,aAAe,EAGzD,YAFAv2B,EAAKirC,KAAKtmC,EAAEwuB,SAAW0tB,EAAe/8B,UrCmzP9CnQ,IAAK,mBACLhO,MAAO,WqCvyPP,MAHI1F,MAAKgrC,KAAKtmC,EAAEq8C,gBACZ/gD,KAAKgrC,KAAKtmC,EAAEq8C,cAAgB/xC,GAAGsnB,WAAWt2B,KAAKgrC,KAAKtmC,EAAE4xB,aAEnDt2B,KAAKgrC,KAAKtmC,EAAEq8C,iBrC8yPnBrtC,IAAK,gBACLhO,MAAO,WqCzyPP,MAHI1F,MAAKgrC,KAAKtmC,EAAE66C,aACZv/C,KAAKgrC,KAAKtmC,EAAE66C,WAAavwC,GAAGwzB,UAAUxiC,KAAKgrC,KAAKtmC,EAAE4xB,aAE/Ct2B,KAAKgrC,KAAKtmC,EAAE66C,erCizPhBpB,GACTE,EAAS2C,WAERrO,UAAU,GAAGsO,YAAY,GAAGlN,qBAAqB,GAAGxF,UAAU,KAAK2S,IAAI,SAASxgD,EAAQjB,EAAOD,GAClG,YAiBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAnBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQwhD,QAAUxhD,EAAQ2/C,cAAgBvtB,MAE1C,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,IsCtkQ5diF,EAAAjuC,EAAA,WACAupC,EAAAvpC,EAAA,WACAoF,EAAApF,EAAA,YAGay+C,EtC+kQO3/C,EsC/kQP2/C,ctC+kQ+B,SAAUvQ,GsC9/PlD,QAAAuQ,GAAYhV,GAAQhC,EAAAnoC,KAAAm/C,EAAA,IAAA/U,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAqV,GAAAp+C,KAAAf,MAAA,OAAAoqC,GA/EpBC,SAAW,cA+ESD,EA9EpBI,aAAc,EA8EMJ,EA7EpB2D,SACIoT,WAAY,OA4EI/W,EA1EpBG,YAAa,EA0EOH,EAzEpB7oC,QACIkD,MAAO,GACP28C,cAAc,EACdC,cAAezvB,OACfktB,UAAW,SAAA5wC,GAAA,MAAmC0jB,UAA9BwY,EAAK7oC,OAAO8/C,cAA8BnzC,EAAI6wC,OAAO7wC,GAAGyZ,QAAQyiB,EAAK7oC,OAAO8/C,iBAqE5EjX,EAnEpB8O,iBAAkB,EAmEE9O,EAlEpB1lC,GACIK,MAAO,GACP2O,IAAK,EACLhO,MAAO,SAAC5B,GAAD,MAAOA,GAAEsmC,EAAK1lC,EAAEgP,MACvB0tC,cAAc,EACdE,YAAY,EACZ3C,eAAgB,SAACl+C,EAAG2I,GAAJ,MAAS6gC,GAAAQ,MAAMC,SAASjqC,GAAKA,EAAI2I,EAAI3I,EAAEo+C,cAAcz1C,IACrE8pC,QACIl/B,QACAjS,UACA2D,MAAO,SAAC5B,EAAG4P,GAAJ,MAAY5P,GAAE4P,IACrB6tC,SACIjM,IAAK,GACLtI,OAAQ,KAGhB8R,UAAWltB,QAkDKwY,EA/CpBxlC,GACIG,MAAO,GACPq8C,cAAc,EACd1tC,IAAK,EACLhO,MAAO,SAAC5B,GAAD,MAAOA,GAAEsmC,EAAKxlC,EAAE8O,MACvB4tC,YAAY,EACZ3C,eAAgB,SAACl+C,EAAG2I,GAAJ,MAAS6gC,GAAAQ,MAAMC,SAASthC,GAAKA,EAAI3I,EAAI2I,EAAEy1C,cAAcp+C,IACrEyyC,QACIl/B,QACAjS,UACA2D,MAAO,SAAC5B,EAAG4P,GAAJ,MAAY5P,GAAE4P,IACrB6tC,SACIv2C,KAAM,GACNC,MAAO,KAGf6zC,UAAWltB,QA+BKwY,EA7BpBr+B,GACI2H,IAAK,EACLhO,MAAO,SAAC5B,GAAD,MAAOA,GAAEsmC,EAAKr+B,EAAE2H,MACvB8tC,kBAAmB,SAACtzC,GAAD,MAAa,QAANA,GAAoB0jB,SAAN1jB,GAExCmzC,cAAezvB,OACfktB,UAAW,SAAA5wC,GAAA,MAA8B0jB,UAAzBwY,EAAKr+B,EAAEs1C,cAA8BnzC,EAAI6wC,OAAO7wC,GAAGyZ,QAAQyiB,EAAKr+B,EAAEs1C,iBAuBlEjX,EApBpB9oC,OACImgD,YAAa,QACb7/C,MAAO,SACP8/C,cAAc,EACd96C,OAAQ,WAAY,eAAgB,SAAU,UAAW,YAgBzCwjC,EAdpB3nC,MACIgC,MAAOmtB,OACPrtB,OAAQqtB,OACR8nB,QAAS,GACTC,QAAS,IACT1yB,QAAS,GASOmjB,EAPpB2C,QACI/hC,KAAM,GACNC,MAAO,GACPqqC,IAAK,GACLtI,OAAQ,IAKJ7C,GACAF,EAAAQ,MAAME,WAANP,EAAuBD,GAHXC,EtCinQpB,MAlHA3B,GAAU0W,EAAevQ,GAkHlBuQ,GACTxQ,EAAOgB,asCzmQIqR,EtC8mQCxhD,EsC9mQDwhD,QtC8mQmB,SAAUpR,GsCzmQtC,QAAAoR,GAAYlW,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAghD,GAAAzY,EAAAvoC,KAAA4F,OAAAkkC,eAAAkX,GAAAjgD,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAI+8C,GAAcpU;CtCuiSvD,MA97BAtC,GAAUuY,EAASpR,GAQnBzG,EAAa6X,IACTttC,IAAK,YACLhO,MAAO,SsChnQDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAAkX,EAAA/tC,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAIm/C,GAAcpU,OtCmnQzCr3B,IAAK,WACLhO,MAAO,WsC/mQP+jC,EAAA7jC,OAAAkkC,eAAAkX,EAAA/tC,WAAA,WAAAjT,MAAAe,KAAAf,KACA,IAAID,GAAOC,KAEPsrC,GADStrC,KAAK+qC,OAAOgC,OACd/sC,KAAK+qC,OAEhB/qC,MAAKgrC,KAAKtmC,KACV1E,KAAKgrC,KAAKpmC,KACV5E,KAAKgrC,KAAKj/B,GACN41C,SAAU/vB,OACV9vB,MAAO8vB,OACPtwB,SACAuB,UAIJ7C,KAAK4hD,cACL5hD,KAAK6hD,YAEL,IAAIC,GAAiB,CAKrB,IAJA9hD,KAAKgrC,KAAKtmC,EAAE68C,SACRjM,IAAK,EACLtI,OAAQ,GAERhtC,KAAKgrC,KAAK+W,SAAU,CACpB,GAAIluC,GAAQ9T,EAAKgrC,OAAOrmC,EAAEwuC,OAAOl/B,KAAKhT,OAClCghD,EAAiBnuC,EAASiuC,CAE9B9hD,MAAKgrC,KAAKtmC,EAAE68C,QAAQvU,OAASjtC,EAAKgrC,OAAOrmC,EAAEwuC,OAAOqO,QAAQvU,OAC1DhtC,KAAKgrC,KAAKtmC,EAAE68C,QAAQjM,IAAMv1C,EAAKgrC,OAAOrmC,EAAEwuC,OAAOqO,QAAQjM,IAAM0M,EAC7DhiD,KAAKgrC,KAAK+B,OAAOuI,IAAMhK,EAAKyB,OAAO9hC,MAAQqgC,EAAK5mC,EAAEwuC,OAAOqO,QAAQjM,IACjEt1C,KAAKgrC,KAAK+B,OAAOC,OAAS1B,EAAKyB,OAAOC,OAAS1B,EAAK5mC,EAAEwuC,OAAOqO,QAAQvU,OAUzE,GANAhtC,KAAKgrC,KAAKpmC,EAAE28C,SACRv2C,KAAM,EACNC,MAAO,GAIPjL,KAAKgrC,KAAKiX,SAAU,CACpB,GAAIC,GAAQniD,EAAKgrC,OAAOnmC,EAAEsuC,OAAOl/B,KAAKhT,OAClCmhD,EAAiBD,EAASJ,CAC9B9hD,MAAKgrC,KAAKpmC,EAAE28C,QAAQt2C,MAAQlL,EAAKgrC,OAAOnmC,EAAEsuC,OAAOqO,QAAQv2C,KAAOm3C,EAChEniD,KAAKgrC,KAAKpmC,EAAE28C,QAAQv2C,KAAOjL,EAAKgrC,OAAOnmC,EAAEsuC,OAAOqO,QAAQv2C,KACxDhL,KAAKgrC,KAAK+B,OAAO/hC,KAAOsgC,EAAKyB,OAAO/hC,KAAOhL,KAAKgrC,KAAKpmC,EAAE28C,QAAQv2C,KAC/DhL,KAAKgrC,KAAK+B,OAAO9hC,MAAQqgC,EAAKyB,OAAO9hC,MAAQjL,KAAKgrC,KAAKpmC,EAAE28C,QAAQt2C,MASrE,MAPAjL,MAAKgrC,KAAKT,WAAae,EAAKf,WACxBvqC,KAAKgrC,KAAKT,aACVvqC,KAAKgrC,KAAK+B,OAAO9hC,OAASqgC,EAAK/pC,OAAOkD,OAE1CzE,KAAKirC,kBACLjrC,KAAKoiD,cAEEpiD,QtCgnQP0T,IAAK,cACLhO,MAAO,WsC9mQG,GAAAsqC,GAAAhwC,KACND,EAAOC,KACP+qC,EAAShrC,EAAKgrC,OACdrmC,EAAI3E,EAAKirC,KAAKtmC,EACdE,EAAI7E,EAAKirC,KAAKpmC,EACdmH,EAAIhM,EAAKirC,KAAKj/B,CAGlBrH,GAAEgB,MAAQ,SAAA5B,GAAA,MAAKinC,GAAOrmC,EAAEgB,MAAM3E,KAAKgqC,EAAQjnC,IAC3Cc,EAAEc,MAAQ,SAAA5B,GAAA,MAAKinC,GAAOnmC,EAAEc,MAAM3E,KAAKgqC,EAAQjnC,IAC3CiI,EAAErG,MAAQ,SAAA5B,GAAA,MAAKinC,GAAOh/B,EAAErG,MAAM3E,KAAKgqC,EAAQjnC,IAE3CY,EAAE+6C,gBACF76C,EAAE66C,gBAGF1/C,EAAKirC,KAAKiX,WAAalX,EAAOnmC,EAAEsuC,OAAOl/B,KAAKhT,OAC5CjB,EAAKirC,KAAK+W,WAAahX,EAAOrmC,EAAEwuC,OAAOl/B,KAAKhT,OAE5C4D,EAAEsuC,QACEx/B,IAAKke,OACL2e,MAAO,GACP5/B,UACA0xC,SAAU,KACVC,MAAO,EACPv4B,MAAO,EACPH,UAAW,GAEfllB,EAAEwuC,QACEx/B,IAAKke,OACL2e,MAAO,GACP5/B,UACA0xC,SAAU,KACVC,MAAO,EACPv4B,MAAO,EACPH,UAAW,EAGf,IAAI24B,MACAC,EAAO5wB,OACP6wB,EAAO7wB,MACX5xB,MAAKoC,KAAK+pC,QAAQ,SAAAroC,GAEd,GAAI4+C,GAAOh+C,EAAEgB,MAAM5B,GACf6+C,EAAO/9C,EAAEc,MAAM5B,GACf8+C,EAAU72C,EAAErG,MAAM5B,GAClB++C,EAAO9X,EAAOh/B,EAAEy1C,kBAAkBoB,GAAWhxB,OAAY0a,WAAWsW,EAGpEl+C,GAAE+6C,aAAa37B,QAAQ4+B,SACvBh+C,EAAE+6C,aAAal5C,KAAKm8C,GAGpB99C,EAAE66C,aAAa37B,QAAQ6+B,SACvB/9C,EAAE66C,aAAal5C,KAAKo8C,EAGxB,IAAIG,GAASl+C,EAAEsuC,MACXnzC,GAAKirC,KAAKiX,WACVa,EAAS9S,EAAKoQ,aAAat8C,EAAG6+C,EAAM/9C,EAAEsuC,OAAQnI,EAAOnmC,EAAEsuC,QAE3D,IAAI6P,GAASr+C,EAAEwuC,MACXnzC,GAAKirC,KAAK+W,WAEVgB,EAAS/S,EAAKoQ,aAAat8C,EAAG4+C,EAAMh+C,EAAEwuC,OAAQnI,EAAOrmC,EAAEwuC,SAGtDqP,EAASO,EAAO/4B,SACjBw4B,EAASO,EAAO/4B,WAGfw4B,EAASO,EAAO/4B,OAAOg5B,EAAOh5B,SAC/Bw4B,EAASO,EAAO/4B,OAAOg5B,EAAOh5B,WAE7Bw4B,EAASO,EAAO/4B,OAAOg5B,EAAOh5B,OAAO44B,KACtCJ,EAASO,EAAO/4B,OAAOg5B,EAAOh5B,OAAO44B,OAEzCJ,EAASO,EAAO/4B,OAAOg5B,EAAOh5B,OAAO44B,GAAMD,GAAQG,GAGtCjxB,SAAT4wB,GAAsBK,EAAOL,KAC7BA,EAAOK,IAEEjxB,SAAT6wB,GAAsBI,EAAOJ,KAC7BA,EAAOI,KAGf9iD,EAAKirC,KAAKuX,SAAWA,EAGhBxiD,EAAKirC,KAAK+W,WACXr9C,EAAEwuC,OAAOviC,OAASjM,EAAE+6C,cAGnB1/C,EAAKirC,KAAKiX,WACXr9C,EAAEsuC,OAAOviC,OAAS/L,EAAE66C,cAGxBz/C,KAAKgjD,8BAELt+C,EAAEu+C,QACFv+C,EAAEw+C,iBAAmB,EACrBx+C,EAAEy+C,iBACFnjD,KAAKojD,WAAW1+C,EAAGA,EAAEwuC,OAAQnI,EAAOrmC,GAEpCE,EAAEq+C,QACFr+C,EAAEs+C,iBAAmB,EACrBt+C,EAAEu+C,iBACFnjD,KAAKojD,WAAWx+C,EAAGA,EAAEsuC,OAAQnI,EAAOnmC,GAEpCmH,EAAEM,IAAMm2C,EACRz2C,EAAE5D,IAAMs6C,KtConQR/uC,IAAK,8BACLhO,MAAO,eAEPgO,IAAK,aACLhO,MAAO,WsChnQP,GAAI3F,GAAOC,KACP0E,EAAI3E,EAAKirC,KAAKtmC,EACdE,EAAI7E,EAAKirC,KAAKpmC,EAEd29C,GADIxiD,EAAKirC,KAAKj/B,EACHhM,EAAKirC,KAAKuX,UAErBrH,EAAcn7C,EAAKirC,KAAKlpC,SACxB8Q,EAAS7S,EAAKirC,KAAKp4B,SAEvBhO,GAAEu+C,cAAchX,QAAQ,SAAChkB,EAAIxnB,GACzB,GAAIkS,KACJD,GAAOrM,KAAKsM,GAEZnO,EAAEy+C,cAAchX,QAAQ,SAAC/jB,EAAI9b,GACzB,GAAIu2C,GAAOjxB,MACX,KACIixB,EAAON,EAASp6B,EAAGpB,MAAMgD,OAAO3B,EAAGrB,MAAMgD,OAAO5B,EAAGk7B,KAAKj7B,EAAGi7B,KAC7D,MAAOnjD,IAGT,GAAIuC,IACA44C,OAAQlzB,EACRmzB,OAAQlzB,EACRvV,IAAKlS,EACL46C,IAAKjvC,EACL5G,MAAOm9C,EAEXhwC,GAAItM,KAAK9D,GAETy4C,EAAY30C,KAAK9D,UtCqnQzBiR,IAAK,eACLhO,MAAO,SsChnQE5B,EAAGw/C,EAASC,EAAWC,GAEhC,GAAIzY,GAAS/qC,KAAK+qC,OACd0Y,EAAeF,CA6BnB,OA5BAC,GAAiBxvC,KAAKm4B,QAAQ,SAACuX,EAAUC,GACrCF,EAAa/vC,IAAMgwC,EAEdD,EAAapB,WACdoB,EAAapB,YAGjB,IAAIuB,GAAgBJ,EAAiB99C,MAAM3E,KAAKgqC,EAAQjnC,EAAG4/C,EAEtDD,GAAapB,SAASvrC,eAAe8sC,KACtCL,EAAU35B,YACV65B,EAAapB,SAASuB,IAClBjzC,UACA0xC,SAAU,KACVuB,cAAeA,EACftB,MAAOmB,EAAanB,MAAQ,EAC5Bv4B,MAAOw5B,EAAU35B,UACjBlW,IAAKgwC,IAIbD,EAAeA,EAAapB,SAASuB,KAGrCH,EAAa9yC,OAAOmT,QAAQw/B,SAC5BG,EAAa9yC,OAAOpK,KAAK+8C,GAGtBG,KtCmnQP/vC,IAAK,aACLhO,MAAO,SsCjnQA6lC,EAAMxkB,EAAO88B,EAAYZ,GAkChC,GAjCIY,EAAW3Q,OAAOnxC,QAAU8hD,EAAW3Q,OAAOnxC,OAAOf,OAAS+lB,EAAMu7B,MACpEv7B,EAAMwpB,MAAQsT,EAAW3Q,OAAOnxC,OAAOglB,EAAMu7B,OAE7Cv7B,EAAMwpB,MAAQxpB,EAAMrT,IAGnBuvC,IACDA,GAAQ,IAERA,EAAKjiD,QAAU+lB,EAAMu7B,OACrBW,EAAK18C,KAAK,GAGdwgB,EAAM+8B,eAAiB/8B,EAAM+8B,gBAAkB,EAC/C/8B,EAAMg9B,qBAAuBh9B,EAAMg9B,sBAAwB,EAE3Dh9B,EAAMk8B,KAAOA,EAAK36C,QAClBye,EAAMi9B,WAAaf,EAAK36C,QAGxBye,EAAMk9B,SAAWjD,EAAQkD,gBAAgBn9B,EAAMk8B,MAC/Cl8B,EAAMo9B,eAAiBp9B,EAAMk9B,SACzBl9B,EAAMpW,SACFkzC,EAAWvC,YACXv6B,EAAMpW,OAAOtF,KAAKw4C,EAAWlF,gBAEjC53B,EAAMpW,OAAOw7B,QAAQ,SAAAj+B,GAAA,MAAGq9B,GAAK4X,cAAc58C,MAAM88C,IAAKn1C,EAAG6Y,MAAOA,MAChEA,EAAMg9B,qBAAuBxY,EAAK2X,iBAClC3X,EAAK2X,kBAAoBn8B,EAAMpW,OAAO3P,OACtC+lB,EAAM+8B,gBAAkB/8B,EAAMpW,OAAO3P,QAGzC+lB,EAAMq9B,gBACFr9B,EAAMs7B,SAAU,CAChB,GAAIgC,GAAgB,CAEpB,KAAK,GAAIC,KAAav9B,GAAMs7B,SACxB,GAAIt7B,EAAMs7B,SAASvrC,eAAewtC,GAAY,CAC1C,GAAIC,GAAQx9B,EAAMs7B,SAASiC,EAC3Bv9B,GAAMq9B,aAAa79C,KAAKg+C,GACxBF,IAEArkD,KAAKojD,WAAW7X,EAAMgZ,EAAOV,EAAYZ,GACzCl8B,EAAM+8B,gBAAkBS,EAAMT,eAC9Bb,EAAKl8B,EAAMu7B,QAAU,EAIzBW,GAAQoB,EAAgB,IACxBpB,EAAKl8B,EAAMu7B,QAAU,GAGzBv7B,EAAMy9B,cACNvB,EAAK9W,QAAQ,SAACroC,EAAGnD,GACbomB,EAAMy9B,WAAWj+C,KAAKzC,GAAKijB,EAAMi9B,WAAWrjD,IAAM,MAEtDomB,EAAM09B,eAAiBzD,EAAQkD,gBAAgBn9B,EAAMy9B,YAEjDjZ,EAAK0X,KAAKjiD,OAASiiD,EAAKjiD,SACxBuqC,EAAK0X,KAAOA,OtCunQpBvvC,IAAK,0BACLhO,MAAO,SsClnQag+B,GACpB,GAAIqY,GAAW/7C,KAAKgrC,KAAK+B,OAAO/hC,IAQhC,IAPIhL,KAAK+qC,OAAOnmC,EAAEG,QACdg3C,GAAY,IAEZrY,GAAUA,EAAOh/B,IACjBq3C,GAAYrY,EAAOh/B,GAGnB1E,KAAK+qC,OAAOnmC,EAAEw8C,aAAc,CAC5BrF,GAAY9R,EAAAQ,MAAM2R,MAClB,IAAIC,GAAW,EACfN,IAAWM,EAAS,EAGxB,MAAON,MtCqnQProC,IAAK,0BACLhO,MAAO,SsCnnQag+B,GACpB,IAAK1jC,KAAK+qC,OAAOrmC,EAAE08C,aACf,MAAOphD,MAAKgrC,KAAK0Z,UAAY,CAEjC,IAAI58C,GAAO9H,KAAKgrC,KAAK+B,OAAOC,MACxBhtC,MAAK+qC,OAAOrmC,EAAEK,QACd+C,GAAQ,IAER47B,GAAUA,EAAO9+B,IACjBkD,GAAQ47B,EAAO9+B,GAGnBkD,GAAQmiC,EAAAQ,MAAM2R,MAEd,IAAIC,GAAW,EAGf,OAFAv0C,IAAOu0C,EAAS,KtCwnQhB3oC,IAAK,kBACLhO,MAAO,WsCxmQP,GAAIslC,GAAOhrC,KAAKgrC,KACZM,EAAOtrC,KAAK+qC,OACZgC,EAAS/B,EAAK+B,OACdmL,EAAiBjO,EAAAQ,MAAMyN,eAAel4C,KAAK+qC,OAAOtmC,MAAOzE,KAAK83C,mBAAoB93C,KAAKgrC,KAAK+B,QAC5FoL,EAAkBlO,EAAAQ,MAAM0N,gBAAgBn4C,KAAK+qC,OAAOxmC,OAAQvE,KAAK83C,mBAAoB93C,KAAKgrC,KAAK+B,QAC/FtoC,EAAQyzC,EACR3zC,EAAS4zC,EAETwM,EAAY3D,EAAQkD,gBAAgBlZ,EAAKtmC,EAAEu+C,MAG3C2B,EAAoBh8C,KAAKT,IAAImjC,EAAK7oC,KAAKi3C,QAAS9wC,KAAKyD,IAAIi/B,EAAK7oC,KAAKk3C,SAAUzB,EAAiByM,GAAa3kD,KAAKgrC,KAAKtmC,EAAEw+C,kBACvHljD,MAAK+qC,OAAOtmC,MAEPzE,KAAK+qC,OAAOtoC,KAAKgC,QAClBzE,KAAKgrC,KAAK0Z,UAAYE,IAI1B5kD,KAAKgrC,KAAK0Z,UAAY1kD,KAAK+qC,OAAOtoC,KAAKgC,MAElCzE,KAAKgrC,KAAK0Z,YACX1kD,KAAKgrC,KAAK0Z,UAAYE,IAI9BngD,EAAQzE,KAAKgrC,KAAK0Z,UAAY1kD,KAAKgrC,KAAKtmC,EAAEw+C,iBAAmBnW,EAAO/hC,KAAO+hC,EAAO9hC,MAAQ05C,CAE1F,IAAIE,GAAY7D,EAAQkD,gBAAgBlZ,EAAKpmC,EAAEq+C,MAC3C6B,EAAqBl8C,KAAKT,IAAImjC,EAAK7oC,KAAKi3C,QAAS9wC,KAAKyD,IAAIi/B,EAAK7oC,KAAKk3C,SAAUxB,EAAkB0M,GAAa7kD,KAAKgrC,KAAKpmC,EAAEs+C,kBACzHljD,MAAK+qC,OAAOxmC,OACPvE,KAAK+qC,OAAOtoC,KAAK8B,SAClBvE,KAAKgrC,KAAK+Z,WAAaD,IAG3B9kD,KAAKgrC,KAAK+Z,WAAa/kD,KAAK+qC,OAAOtoC,KAAK8B,OAEnCvE,KAAKgrC,KAAK+Z,aACX/kD,KAAKgrC,KAAK+Z,WAAaD,IAK/BvgD,EAASvE,KAAKgrC,KAAK+Z,WAAa/kD,KAAKgrC,KAAKpmC,EAAEs+C,iBAAmBnW,EAAOuI,IAAMvI,EAAOC,OAAS6X,EAG5F7kD,KAAKgrC,KAAKvmC,MAAQA,EAAQsoC,EAAO/hC,KAAO+hC,EAAO9hC,MAC/CjL,KAAKgrC,KAAKzmC,OAASA,EAASwoC,EAAOuI,IAAMvI,EAAOC,UtCwmQhDt5B,IAAK,cACLhO,MAAO,WsCnmQP,GAKI9D,GALA7B,EAAOC,KACP+qC,EAAShrC,EAAKgrC,OACdh/B,EAAIhM,EAAKirC,KAAKj/B,EACdnF,EAAQmkC,EAAOzpC,MAAMsF,MACrB8I,EAAS3D,EAAE5D,IAAM4D,EAAEM,GAGvB,IADAN,EAAEtF,UACwB,OAAtBskC,EAAOzpC,MAAMM,MAAgB,CAC7B,GAAI8iB,GAAW,EACf9d,GAAMulC,QAAQ,SAACx8B,EAAGhP,GACd,GAAIuN,GAAInC,EAAE5D,IAAOuH,EAAS9G,KAAKI,IAAI,GAAIrI,EACvCoL,GAAEtF,OAAOF,KAAK2H,KAElBtM,EAAQoN,GAAGupB,WAAW7T,SAASA,OACF,OAAtBqmB,EAAOzpC,MAAMM,OAEpBgF,EAAMulC,QAAQ,SAACx8B,EAAGhP,GACd,GAAIuN,GAAInC,EAAEM,IAAOqD,EAAS9G,KAAKI,IAAI,GAAIrI,EACvCoL,GAAEtF,OAAOu+C,QAAQ92C,KAIrBtM,EAAQoN,GAAGopB,aAEXxxB,EAAMulC,QAAQ,SAACx8B,EAAGhP,GACd,GAAIuN,GAAInC,EAAEM,IAAOqD,GAAU/O,GAAKiG,EAAM5F,OAAS,GAC/C+K,GAAEtF,OAAOF,KAAK2H,KAElBtM,EAAQqoC,EAAAQ,MAAMiB,YAAYX,EAAOzpC,MAAMM,OAK3CmK,GAAEtF,OAAO,GAAKsF,EAAEM,IAChBN,EAAEtF,OAAOsF,EAAEtF,OAAOzF,OAAS,GAAK+K,EAAE5D,IAG9B4iC,EAAOzpC,MAAMogD,cACb31C,EAAEtF,OAAOse,SAGb,IAAIimB,GAAOhrC,KAAKgrC,IAIhBA,GAAKj/B,EAAEzK,MAAMM,MAAQA,EAAM6E,OAAOsF,EAAEtF,QAAQG,MAAMA,EAClD,IAAI/D,GAAQmoC,EAAKj/B,EAAElJ,SAEfy3C,EAAWt6C,KAAK+qC,OAAOtoC,IAC3BI,GAAMpB,KAAO,OAEbupC,EAAKj/B,EAAElJ,MAAM4B,MAAQumC,EAAK0Z,UAA+B,EAAnBpK,EAASrzB,QAC/C+jB,EAAKj/B,EAAElJ,MAAM0B,OAASymC,EAAK+Z,WAAgC,EAAnBzK,EAASrzB,WtCqmQjDvT,IAAK,SACLhO,MAAO,SsClmQJuoC,GACHxE,EAAA7jC,OAAAkkC,eAAAkX,EAAA/tC,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,GACTjuC,KAAKgrC,KAAKiX,UACVjiD,KAAKilD,YAAYjlD,KAAKgrC,KAAKpmC,EAAEsuC,OAAQlzC,KAAKwsC,MAE1CxsC,KAAKgrC,KAAK+W,UACV/hD,KAAKklD,YAAYllD,KAAKgrC,KAAKtmC,EAAEwuC,OAAQlzC,KAAKwsC,MAG9CxsC,KAAKw7C,cAILx7C,KAAK27C,cACL37C,KAAK47C,cAED57C,KAAK+qC,OAAOR,YACZvqC,KAAKw0C,eAGTx0C,KAAKmlD,sBtCqmQLzxC,IAAK,mBACLhO,MAAO,WsClmQP,GAAI3F,GAAOC,IACAD,GAAKirC,QtCsmQhBt3B,IAAK,cACLhO,MAAO,WsChmQP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZ0Q,EAAa37C,EAAK2sC,YAAY,SAC9BmP,EAAcH,EAAa,IAE/B1Q,GAAK0Q,WAAaA,CAElB,IAAI0J,IACA1gD,EAAG,EACHE,EAAG,GAEHygD,EAAUrE,EAAQsE,eAAe,EACrC,IAAIta,EAAK+W,SAAU,CACf,GAAIR,GAAUxhD,EAAKgrC,OAAOrmC,EAAEwuC,OAAOqO,OAEnC6D,GAAQ1gD,EAAI2gD,EAAU,EACtBD,EAAQxgD,EAAI28C,EAAQvU,OAASqY,EAAU,EAAI,MACpCra,GAAKiX,WACZmD,EAAQxgD,EAAIygD,EAIhB,IAAItjD,GAAShC,EAAKysC,KAAKrqC,UAAU,QAAU05C,GACtCz5C,KAAK4oC,EAAKtmC,EAAEy+C,cAAe,SAACr/C,EAAGnD,GAAJ,MAAQA,KAEpCm7C,EAAc/5C,EAAOM,QAAQC,OAAO,QAAQC,KAAK,QAAS,SAACuB,EAAGnD,GAAJ,MAAU+6C,GAAa,IAAMG,EAAc,IAAMA,EAAc,IAAMl7C,IAAGkR,MAAM9P,EAE5I+5C,GACKv5C,KAAK,IAAK,SAACuB,EAAGnD,GAAJ,MAAWA,GAAIqqC,EAAK0Z,UAAY1Z,EAAK0Z,UAAY,EAAM5gD,EAAEijB,MAAMk9B,SAAYmB,EAAQ1gD,IAC7FnC,KAAK,IAAKyoC,EAAKzmC,OAAS6gD,EAAQxgD,GAChCrC,KAAK,KAAM,IAEXA,KAAK,cAAe,UACpBmB,KAAK,SAAAI,GAAA,MAAG/D,GAAKwlD,aAAazhD,EAAEu/C,MAIjC,IAAItH,GAAWh8C,EAAKi8C,wBAAwBoJ,EAE5CtJ,GAAYroC,KAAK,SAAU88B,GACvB,GAAIiV,GAAOx2C,GAAGtM,OAAO1C,MACjB0D,EAAO3D,EAAKwlD,aAAahV,EAAM8S,IACnCpZ,GAAAQ,MAAMwR,gCAAgCuJ,EAAM9hD,EAAMq4C,IAAUh8C,EAAKgrC,OAAOP,aAAczqC,EAAKirC,KAAK+C,WAGhGhuC,EAAKgrC,OAAOrmC,EAAE08C,cACdtF,EAAYv5C,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,gBAAmBA,EAAIqqC,EAAK0Z,UAAY1Z,EAAK0Z,UAAY,EAAK5gD,EAAEijB,MAAMk9B,SAAWmB,EAAQ1gD,GAAM,MAASsmC,EAAKzmC,OAAS6gD,EAAQxgD,GAAK,MACtKrC,KAAK,SACLA,KAAK,KAAM,GACXA,KAAK,cAAe,OAI7BR,EAAOiB,OAAOG,SAGdpD,EAAKysC,KAAKC,eAAe,KAAO1sC,EAAK2sC,YAAY,WAC5CnqC,KAAK,YAAa,aAAgByoC,EAAKvmC,MAAQ,EAAK,KAAOumC,EAAKzmC,OAASymC,EAAK+B,OAAOC,QAAU,KAC/FP,eAAe,QAAU1sC,EAAK2sC,YAAY,UAE1CnqC,KAAK,KAAM,UACXW,MAAM,cAAe,UACrBQ,KAAK3D,EAAKgrC,OAAOrmC,EAAEK,UtCylQxB2O,IAAK,cACLhO,MAAO,WsCtlQP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZ0Q,EAAa37C,EAAK2sC,YAAY,SAC9BwP,EAAcR,EAAa,IAC/B1Q,GAAK0Q,WAAaA,CAGlB,IAAI35C,GAAShC,EAAKysC,KAAKrqC,UAAU,QAAU+5C,GACtC95C,KAAK4oC,EAAKpmC,EAAEu+C,eAEbsC,EAAc1jD,EAAOM,QAAQC,OAAO,QACpCw5C,EAAc2J,EAAY5zC,MAAM9P,GAEhC2jD,GACAhhD,EAAG,EACHE,EAAG,EAEP,IAAIomC,EAAKiX,SAAU,CACf,GAAIV,GAAUxhD,EAAKgrC,OAAOnmC,EAAEsuC,OAAOqO,QAC/B8D,EAAUrE,EAAQsE,eAAe,EACrCI,GAAQhhD,GAAK68C,EAAQv2C,KAErB06C,EAAQ9gD,EAAIygD,EAAU,EAE1BvJ,EACKv5C,KAAK,IAAKmjD,EAAQhhD,GAClBnC,KAAK,IAAK,SAACuB,EAAGnD,GAAJ,MAAWA,GAAIqqC,EAAK+Z,WAAa/Z,EAAK+Z,WAAa,EAAKjhD,EAAEijB,MAAMk9B,SAAWyB,EAAQ9gD,IAC7FrC,KAAK,SACLA,KAAK,cAAe,OACpBA,KAAK,QAAS,SAACuB,EAAGnD,GAAJ,MAAU+6C,GAAa,IAAMQ,EAAc,IAAMA,EAAc,IAAMv7C,IAEnF+C,KAAK,SAAUI,GACZ,GAAI6hD,GAAY5lD,EAAK6lD,aAAa9hD,EAAEu/C,IACpC,OAAOsC,IAGf,IAAI5J,GAAWh8C,EAAKo8C,wBAAwBuJ,EAE5C5J,GAAYroC,KAAK,SAAU88B,GACvB,GAAIiV,GAAOx2C,GAAGtM,OAAO1C,MACjB0D,EAAO3D,EAAK6lD,aAAarV,EAAM8S,IACnCpZ,GAAAQ,MAAMwR,gCAAgCuJ,EAAM9hD,EAAMq4C,IAAUh8C,EAAKgrC,OAAOP,aAAczqC,EAAKirC,KAAK+C,WAGhGhuC,EAAKgrC,OAAOnmC,EAAEw8C,aACdtF,EACKv5C,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,eAAkB+kD,EAAQhhD,EAAO,MAAQZ,EAAEijB,MAAMk9B,UAAYtjD,EAAIqqC,EAAK+Z,WAAa/Z,EAAK+Z,WAAa,GAAKW,EAAQ9gD,GAAK,MACnJrC,KAAK,cAAe,OAGzBu5C,EAAYv5C,KAAK,oBAAqB,UAI1CR,EAAOiB,OAAOG,SAGdpD,EAAKysC,KAAKC,eAAe,KAAO1sC,EAAK2sC,YAAY,WAC5CD,eAAe,QAAU1sC,EAAK2sC,YAAY,UAC1CnqC,KAAK,YAAa,cAAgByoC,EAAK+B,OAAO/hC,KAAO,IAAOggC,EAAKzmC,OAAS,EAAK,gBAC/EhC,KAAK,KAAM,OACXW,MAAM,cAAe,UACrBQ,KAAK3D,EAAKgrC,OAAOnmC,EAAEG,UtC8kQxB2O,IAAK,cACLhO,MAAO,SsC1kQCmgD,EAAapR,EAAWyD,GAEhC,GAAIn4C,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KAEZ8a,EAAa/lD,EAAK2sC,YAAY,SAC9BqZ,EAAcD,EAAa,KAC3B5S,EAASuB,EAAUtyC,UAAU,KAAO2jD,EAAa,IAAMC,GACtD3jD,KAAKyjD,EAAYzB,cAElB4B,EAAoB,EACpB7B,EAAiB,EAEjB8B,EAAc/S,EAAO7wC,QAAQC,OAAO,IACxC2jD,GACK/U,QAAQ4U,GAAY,GACpB5U,QAAQ6U,GAAa,GACrBzjD,OAAO,QAAQ4uC,QAAQ,cAAc,EAE1C,IAAIgV,GAAkBD,EAAYjI,eAAe,UACjDkI,GAAgB5jD,OAAO,QACvB4jD,EAAgB5jD,OAAO,OAEvB,IAAI+iD,GAAUrE,EAAQsE,eAAeO,EAAYvD,OAC7Cr7B,EAAUo+B,EAAU,EAEpBvD,EAAiBd,EAAQmF,qBAEzB5E,GADQxhD,EAAKgrC,OAAOnmC,EAAEsuC,OAAOl/B,KAAKhT,OAAS6kD,EAAYvD,OAEvDt3C,KAAM,EACNC,MAAO,GAGNitC,KACDqJ,EAAQt2C,MAAQ+/B,EAAKpmC,EAAE28C,QAAQv2C,KAC/Bu2C,EAAQv2C,KAAOggC,EAAKpmC,EAAE28C,QAAQv2C,KAC9BktC,EAAiBlN,EAAKvmC,MAAQ4gD,EAAU9D,EAAQv2C,KAAOu2C,EAAQt2C,MAInE,IAAIm7C,GAAcH,EAAYp0C,MAAMqhC,EAEpCkT,GACK7jD,KAAK,YAAa,SAACuB,EAAGnD,GACnB,GAAIurB,GAAY,cAAgBjF,EAAUs6B,EAAQv2C,MAAQ,KAAQggC,EAAK+Z,WAAaiB,EAAqBrlD,EAAI0kD,EAAUlB,EAAiBl9B,GAAW,GAGnJ,OAFAk9B,IAAmBrgD,EAAE2gD,gBAAkB,EACvCuB,GAAqBliD,EAAEggD,gBAAkB,EAClC53B,GAIf,IAAIm6B,GAAanO,EAA2B,EAAVjxB,EAE9Bq/B,EAAcF,EAAYjkD,UAAU,WACnCI,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,cAAgB0lD,EAAavE,GAAkB,SAE5EyE,EAAYD,EAAYnkD,UAAU,QACjCI,KAAK,QAASu/C,GACdv/C,KAAK,SAAU,SAAAuB,GACZ,OAAQA,EAAE2gD,gBAAkB,GAAKzZ,EAAK+Z,WAAajhD,EAAEggD,eAA2B,EAAV78B,IAEzE1kB,KAAK,IAAK,GACVA,KAAK,IAAK,GAEVA,KAAK,eAAgB,EAE1BvC,MAAKwmD,uBAAuBX,EAAaU,GAGzCH,EAAYjkD,UAAU,mBACjBI,KAAK,QAAS,SAAAuB,GAAA,MAAI,yBAA2BA,EAAEimB,QAC/CxnB,KAAK,QAAS8jD,GACd9jD,KAAK,SAAU,SAAAuB,GACZ,OAAQA,EAAE2gD,gBAAkB,GAAKzZ,EAAK+Z,WAAajhD,EAAEggD,eAA2B,EAAV78B,IAEzE1kB,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,OAAQ,SACbA,KAAK,eAAgB,GACrBA,KAAK,eAAgB,IACrBA,KAAK,SAAU,SAGpB6jD,EAAY3yC,KAAK,SAAUsT,GAEvBhnB,EAAKklD,YAAYlkD,KAAKhB,EAAMgnB,EAAO/X,GAAGtM,OAAO1C,MAAOqmD,EAAavE,KAGrE5O,EAAOlwC,OAAOG,YtC0jQduQ,IAAK,cACLhO,MAAO,SsCxjQCmgD,EAAapR,EAAW0D,GAEhC,GAAIp4C,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KAEZ8a,EAAa/lD,EAAK2sC,YAAY,SAC9B+Z,EAAcX,EAAa,KAC3B5S,EAASuB,EAAUtyC,UAAU,KAAO2jD,EAAa,IAAMW,GACtDrkD,KAAKyjD,EAAYzB,cAElB4B,EAAoB,EACpB7B,EAAiB,EAEjB8B,EAAc/S,EAAO7wC,QAAQC,OAAO,IACxC2jD,GACK/U,QAAQ4U,GAAY,GACpB5U,QAAQuV,GAAa,GACrBnkD,OAAO,QAAQ4uC,QAAQ,cAAc,EAE1C,IAAIgV,GAAkBD,EAAYjI,eAAe,UACjDkI,GAAgB5jD,OAAO,QACvB4jD,EAAgB5jD,OAAO,OAEvB,IAAI+iD,GAAUrE,EAAQsE,eAAeO,EAAYvD,OAC7Cr7B,EAAUo+B,EAAU,EACpBqB,EAAkB1F,EAAQmF,qBAI1B5E,GAFQxhD,EAAKgrC,OAAOrmC,EAAEwuC,OAAOl/B,KAAKhT,OAAS6kD,EAAYvD,OAGvDhN,IAAK,EACLtI,OAAQ,GAGPmL,GAMDoJ,EAAQjM,KAAOoR,GALfnF,EAAQvU,OAAShC,EAAKtmC,EAAE68C,QAAQvU,OAChCuU,EAAQjM,IAAMtK,EAAKtmC,EAAE68C,QAAQjM,IAC7B6C,EAAkBnN,EAAKzmC,OAAS8gD,EAAU9D,EAAQjM,IAAMiM,EAAQvU,OAOpE,IAAIoZ,GAAcH,EAAYp0C,MAAMqhC,EAEpCkT,GACK7jD,KAAK,YAAa,SAACuB,EAAGnD,GACnB,GAAIurB,GAAY,cAAiB8e,EAAK0Z,UAAYsB,EAAqBrlD,EAAI0kD,EAAUlB,EAAiBl9B,GAAW,MAAQA,EAAUs6B,EAAQjM,KAAO,GAGlJ,OAFA6O,IAAmBrgD,EAAE2gD,gBAAkB,EACvCuB,GAAqBliD,EAAEggD,gBAAkB,EAClC53B,GAGf,IAAIy6B,GAAcxO,EAA4B,EAAVlxB,EAEhCq/B,EAAcF,EAAYjkD,UAAU,WACnCI,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,oBAG7B4lD,EAAYD,EAAYnkD,UAAU,QACjCI,KAAK,SAAUmkD,GACfnkD,KAAK,QAAS,SAAAuB,GACX,OAAQA,EAAE2gD,gBAAkB,GAAKzZ,EAAK0Z,UAAY5gD,EAAEggD,eAA2B,EAAV78B,IAExE1kB,KAAK,IAAK,GACVA,KAAK,IAAK,GAEVA,KAAK,eAAgB,EAE1BvC,MAAKwmD,uBAAuBX,EAAaU,GAGzCH,EAAYjkD,UAAU,mBACjBI,KAAK,QAAS,SAAAuB,GAAA,MAAI,yBAA2BA,EAAEimB,QAC/CxnB,KAAK,SAAUokD,GACfpkD,KAAK,QAAS,SAAAuB,GACX,OAAQA,EAAE2gD,gBAAkB,GAAKzZ,EAAK0Z,UAAY5gD,EAAEggD,eAA2B,EAAV78B,IAExE1kB,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,OAAQ,SACbA,KAAK,eAAgB,GACrBA,KAAK,eAAgB,IACrBA,KAAK,SAAU,SAEpB6jD,EAAY3yC,KAAK,SAAUsT,GACvBhnB,EAAKmlD,YAAYnkD,KAAKhB,EAAMgnB,EAAO/X,GAAGtM,OAAO1C,MAAO2mD,EAAcD,KAGtExT,EAAOlwC,OAAOG,YtCyiQduQ,IAAK,yBACLhO,MAAO,SsCtiQYmgD,EAAaU,GAChC,GAAIvb,GAAOhrC,KAAKgrC,KACZjrC,EAAOC,KACP68C,IACJA,GAAmBt2C,KAAK,SAAUzC,GAC9BkL,GAAGtM,OAAO1C,MAAMkxC,QAAQ,eAAe,GACvCliC,GAAGtM,OAAO1C,KAAK4mD,WAAWA,YAAYzkD,UAAU,mBAAqB2B,EAAEimB,OAAOmnB,QAAQ,eAAe,IAGzG,IAAI4L,KACJA,GAAkBv2C,KAAK,SAAUzC,GAC7BkL,GAAGtM,OAAO1C,MAAMkxC,QAAQ,eAAe,GACvCliC,GAAGtM,OAAO1C,KAAK4mD,WAAWA,YAAYzkD,UAAU,mBAAqB2B,EAAEimB,OAAOmnB,QAAQ,eAAe,KAErGlG,EAAK+C,UAEL8O,EAAmBt2C,KAAK,SAAAzC,GACpB,GAAIqtC,GAAO0U,EAAYtV,MAAQ,KAAOzsC,EAAE8/C,aACxC7jD,GAAKyqC,YAAY2G,KAGrB2L,EAAkBv2C,KAAK,SAAAzC,GACnB/D,EAAKiuC,iBAKbuY,EAAU9gD,GAAG,YAAa,SAAU3B,GAChC,GAAI/D,GAAOC,IACX68C,GAAmB1Q,QAAQ,SAAUpoB,GACjCA,EAAShjB,KAAKhB,EAAM+D,OAG5ByiD,EAAU9gD,GAAG,WAAY,SAAU3B,GAC/B,GAAI/D,GAAOC,IACX88C,GAAkB3Q,QAAQ,SAAUpoB,GAChCA,EAAShjB,KAAKhB,EAAM+D,UtCyiQ5B4P,IAAK,cACLhO,MAAO,WsCniQP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZ6b,EAAqB9mD,EAAK2sC,YAAY,SACtC2Y,EAAUrE,EAAQsE,eAAe,GACjCwB,EAAW9b,EAAKtmC,EAAEwuC,OAAOkR,aAAapjD,OAASqkD,EAAU,EAAI,EAC7D0B,EAAW/b,EAAKpmC,EAAEsuC,OAAOkR,aAAapjD,OAASqkD,EAAU,EAAI,EAC7D2B,EAAgBjnD,EAAKysC,KAAKC,eAAe,KAAOoa,EACpDG,GAAczkD,KAAK,YAAa,aAAeukD,EAAW,KAAOC,EAAW,IAE5E,IAAIzK,GAAYv8C,EAAK2sC,YAAY,QAC7B6P,EAAYvR,EAAKj/B,EAAElJ,MAAMpB,KAEzBK,EAAQklD,EAAc7kD,UAAU,KAAOm6C,GACtCl6C,KAAKrC,EAAKirC,KAAKlpC,OAEhBa,EAAYb,EAAMO,QAAQC,OAAO,KAChC4uC,QAAQoL,GAAW,GAEpBG,EAAa95C,EAAUkP,MAAM/P,EACjC26C,GAAWl6C,KAAK,YAAa,SAAAoN,GAAA,MAAI,cAAiBq7B,EAAK0Z,UAAY/0C,EAAE4rC,IAAMvQ,EAAK0Z,UAAY,EAAK/0C,EAAE2rC,OAAOv0B,MAAMk9B,UAAY,KAAQjZ,EAAK+Z,WAAap1C,EAAEkD,IAAMm4B,EAAK+Z,WAAa,EAAKp1C,EAAE0rC,OAAOt0B,MAAMk9B,UAAY,KAEhN,IAAIrhD,GAAS65C,EAAWhQ,eAAe8P,EAAY,eAAiBA,EAEpE35C,GACKL,KAAK,QAASyoC,EAAKj/B,EAAElJ,MAAM4B,OAC3BlC,KAAK,SAAUyoC,EAAKj/B,EAAElJ,MAAM0B,QAC5BhC,KAAK,KAAMyoC,EAAK0Z,UAAY,GAC5BniD,KAAK,KAAMyoC,EAAK+Z,WAAa,GAElCniD,EAAOM,MAAM,OAAQ,SAAAyM,GAAA,MAAgBiiB,UAAZjiB,EAAEjK,MAAsB3F,EAAKgrC,OAAOzpC,MAAMmgD,YAAczW,EAAKj/B,EAAEzK,MAAMM,MAAM+N,EAAEjK,SACtG9C,EAAOL,KAAK,eAAgB,SAAAuB,GAAA,MAAgB8tB,UAAZ9tB,EAAE4B,MAAsB,EAAI,GAE5D,IAAIm3C,MACAC,IAeJ,IAbI9R,EAAK+C,UAEL8O,EAAmBt2C,KAAK,SAAAoJ,GACpB,GAAIwhC,GAAmBvf,SAAZjiB,EAAEjK,MAAsB3F,EAAKgrC,OAAOgD,QAAQoT,WAAaphD,EAAKknD,aAAat3C,EAAEjK,MACxF3F,GAAKyqC,YAAY2G,KAIrB2L,EAAkBv2C,KAAK,SAAAoJ,GACnB5P,EAAKiuC,iBAITjuC,EAAKgrC,OAAOmO,gBAAiB,CAC7B,GAAI6D,GAAiBh9C,EAAKgrC,OAAOT,eAAiB,YAC9C0S,EAAc,SAAArtC,GAAA,MAAGq7B,GAAK0Q,WAAa,MAAQ/rC,EAAE4rC,KAC7C0B,EAAc,SAAAttC,GAAA,MAAGq7B,GAAK0Q,WAAa,MAAQ/rC,EAAEkD,IAGjDgqC,GAAmBt2C,KAAK,SAAAoJ,GAEpB5P,EAAKysC,KAAKrqC,UAAU,QAAU66C,EAAYrtC,IAAIuhC,QAAQ6L,GAAgB,GACtEh9C,EAAKysC,KAAKrqC,UAAU,QAAU86C,EAAYttC,IAAIuhC,QAAQ6L,GAAgB,KAE1ED,EAAkBv2C,KAAK,SAAAoJ,GACnB5P,EAAKysC,KAAKrqC,UAAU,QAAU66C,EAAYrtC,IAAIuhC,QAAQ6L,GAAgB,GACtEh9C,EAAKysC,KAAKrqC,UAAU,QAAU86C,EAAYttC,IAAIuhC,QAAQ6L,GAAgB,KAK9EN,EAAWh3C,GAAG,YAAa,SAAAkK,GACvBktC,EAAmB1Q,QAAQ,SAAApoB,GAAA,MAAUA,GAASpU,OAE7ClK,GAAG,WAAY,SAAAkK,GACZmtC,EAAkB3Q,QAAQ,SAAApoB,GAAA,MAAUA,GAASpU,OAGrD8sC,EAAWh3C,GAAG,QAAS,SAAAkK,GACnB5P,EAAKm9C,QAAQ,gBAAiBvtC,KAIlC7N,EAAMkB,OAAOG,YtC2iQbuQ,IAAK,eACLhO,MAAO,SsCziQEA,GACT,MAAK1F,MAAK+qC,OAAOrmC,EAAEo6C,UAEZ9+C,KAAK+qC,OAAOrmC,EAAEo6C,UAAU/9C,KAAKf,KAAK+qC,OAAQrlC,GAFZA,KtC8iQrCgO,IAAK,eACLhO,MAAO,SsC1iQEA,GACT,MAAK1F,MAAK+qC,OAAOnmC,EAAEk6C,UAEZ9+C,KAAK+qC,OAAOnmC,EAAEk6C,UAAU/9C,KAAKf,KAAK+qC,OAAQrlC,GAFZA,KtC+iQrCgO,IAAK,eACLhO,MAAO,SsC3iQEA,GACT,MAAK1F,MAAK+qC,OAAOh/B,EAAE+yC,UAEZ9+C,KAAK+qC,OAAOh/B,EAAE+yC,UAAU/9C,KAAKf,KAAK+qC,OAAQrlC,GAFZA,KtCgjQrCgO,IAAK,oBACLhO,MAAO,SsC5iQOA,GACd,MAAK1F,MAAK+qC,OAAOxpC,OAAOu9C,UAEjB9+C,KAAK+qC,OAAOxpC,OAAOu9C,UAAU/9C,KAAKf,KAAK+qC,OAAQrlC,GAFZA,KtCijQ1CgO,IAAK,eACLhO,MAAO,WsC5iQP,GAAI3F,GAAOC,KACPgrC,EAAOhrC,KAAKgrC,KACZ0J,EAAU10C,KAAKgrC,KAAKvmC,MAAQ,GAC5B4gD,EAAUrE,EAAQsE,eAAe,EACjCtlD,MAAKgrC,KAAKiX,SACVvN,GAAW2Q,EAAU,EAAIra,EAAKpmC,EAAE28C,QAAQt2C,MACjCjL,KAAKgrC,KAAK+W,WACjBrN,GAAW2Q,EAEf,IAAI1Q,GAAU,GACV30C,KAAKgrC,KAAK+W,UAAY/hD,KAAKgrC,KAAKiX,YAChCtN,GAAW0Q,EAAU,EAGzB,IAAIlI,GAAW,GACXC,EAAYp9C,KAAKgrC,KAAKzmC,OAAS,EAC/B3C,EAAQopC,EAAKj/B,EAAEzK,MAAMM,KAEzBopC,GAAKzpC,OAAS,GAAAuE,GAAA8uC,OAAW50C,KAAKwB,IAAKxB,KAAKwsC,KAAM5qC,EAAO8yC,EAASC,EAAS,SAAAzmC,GAAA,MAAKnO,GAAKmnD,kBAAkBh5C,KAAIi5C,gBAAgBpnD,EAAKgrC,OAAOxpC,OAAO6/C,cAAc/D,kBAAkBF,EAAUC,QtCkjQpL1pC,IAAK,iBACLhO,MAAO,SsCjrRW0hD,GAClB,MAAOpG,GAAQqG,iBAAmBD,EAAW,MtCorR7C1zC,IAAK,kBACLhO,MAAO,SsClrRYu9C,GACnB,GAAIgB,GAAW,CAEf,OADAhB,GAAK9W,QAAQ,SAACmb,EAAYC,GAAb,MAA0BtD,IAAYqD,EAAatG,EAAQsE,eAAeiC,KAChFtD,MtCwrRJjD,GACTrS,EAAO+D,MsC9iSIsO,GAEFqG,gBAAkB,GAFhBrG,EAGFmF,qBAAuB,ItCgjS/BxT,UAAU,GAAG5sC,WAAW,GAAGwoC,UAAU,KAAKiZ,IAAI,SAAS9mD,EAAQjB,EAAOD,GACzE,YAeA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAjBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQioD,UAAYjoD,EAAQkoD,gBAAkB91B,MAE9C,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,IuC5pS5dM,EAAAtpC,EAAA,6BACAupC,EAAAvpC,EAAA,WAEagnD,EvCqqSSloD,EuCrqSTkoD,gBvCqqSmC,SAAUxd,GuC7oStD,QAAAwd,GAAYvd,GAAOhC,EAAAnoC,KAAA0nD,EAAA,IAAAtd,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAA4d,GAAA3mD,KAAAf,MAAA,OAAAoqC,GAtBnBC,SAAUD,EAAKE,eAAe,YAsBXF,EArBnBG,YAAW,EAqBQH,EApBnBI,aAAa,EAoBMJ,EAnBnB1lC,GACIK,MAAO,GACP2O,IAAK,EACLhO,MAAO,SAAC5B,EAAG4P,GAAJ,MAAYu2B,GAAAQ,MAAMC,SAAS5mC,GAAKA,EAAIwoC,WAAWxoC,EAAE4P,KACxD9R,MAAO,SACP0C,OAAQ,SACR0C,MAAO4qB,QAaQwY,EAXnBxlC,GACIG,MAAO,GACPT,OAAQ,OACR1C,MAAO,UAQQwoC,EANnBud,WAAU,EAMSvd,EALnB8I,QACIx/B,IAAK,GAIU02B,EAFnBnnC,YAAY,EAKLknC,GACCF,EAAAQ,MAAME,WAANP,EAAuBD,GAJZC,EvCqrSnB,MAvCA3B,GAAUif,EAAiBxd,GAuCpBwd,GACT1d,EAAsBY,2BAERprC,GuC9qSHioD,UvC8qSuB,SAAU5c,GuC7qS1C,QAAA4c,GAAY3c,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAynD,GAAAlf,EAAAvoC,KAAA4F,OAAAkkC,eAAA2d,GAAA1mD,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAIslD,GAAgB3c,KvCy5SzD,MA5OAtC,GAAUgf,EAAW5c,GAQrB1B,EAAase,IACT/zC,IAAK,YACLhO,MAAO,SuCprSDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAA2d,EAAAx0C,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAI0nD,GAAgB3c,OvCurS3Cr3B,IAAK,WACLhO,MAAO,WuCprSP+jC,EAAA7jC,OAAAkkC,eAAA2d,EAAAx0C,WAAA,WAAAjT,MAAAe,KAAAf,KAGWA,MAAK+qC,MAchB,OAZA/qC,MAAKgrC,KAAKtmC,KACV1E,KAAKgrC,KAAKpmC,KACV5E,KAAKgrC,KAAKoC,KACN9rC,MAAO,MAGXtB,KAAKirC,kBAELjrC,KAAKmrC,SACLnrC,KAAK4nD,iBACL5nD,KAAKorC,mBACLprC,KAAKkrC,SACElrC,QvCwrSP0T,IAAK,SACLhO,MAAO,WuCprSP,GAAIslC,GAAOhrC,KAAKgrC,KACZtmC,EAAIsmC,EAAKtmC,EACT4mC,EAAOtrC,KAAK+qC,OAAOrmC,CAQvBA,GAAEgB,MAAQ,SAAA5B,GAAA,MAAKwnC,GAAK5lC,MAAM5B,EAAGwnC,EAAK53B,MAClChP,EAAE9C,MAAQqoC,EAAAQ,MAAMiB,YAAYJ,EAAK1pC,OAAOgF,OAAO,EAAGokC,EAAKvmC,QACvDC,EAAEb,IAAM,SAAAC,GAAA,MAAKY,GAAE9C,MAAM8C,EAAEgB,MAAM5B,KAE7BY,EAAE6mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAKhnC,OAAQI,EAAE9C,OAEtC0pC,EAAKtkC,OACJtC,EAAE6mC,KAAKvkC,MAAMskC,EAAKtkC,MAEtB,IAAI5E,GAAOpC,KAAKgrC,KAAKkB,WACrBlB,GAAKtmC,EAAE9C,MAAM6E,QAAQuI,GAAG3C,IAAIjK,EAAM,SAAA9B,GAAA,MAAG0O,IAAG3C,IAAI/L,EAAEqQ,OAAQq6B,EAAKtmC,EAAEgB,SAASsJ,GAAG7G,IAAI/F,EAAM,SAAA9B,GAAA,MAAG0O,IAAG7G,IAAI7H,EAAEqQ,OAAQq6B,EAAKtmC,EAAEgB,cvCisS9GgO,IAAK,SACLhO,MAAO,WuC5rSP,GAAIslC,GAAOhrC,KAAKgrC,KACZpmC,EAAIomC,EAAKpmC,EACT0mC,EAAOtrC,KAAK+qC,OAAOnmC,CACvBA,GAAEhD,MAAQqoC,EAAAQ,MAAMiB,YAAYJ,EAAK1pC,OAAOgF,OAAOokC,EAAKzmC,OAAQ,IAE5DK,EAAE2mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAKhnC,OAAQM,EAAEhD,MACzC,IACI+pC,IADO3rC,KAAKgrC,KAAK5oC,KACL4M,GAAG7G,IAAI6iC,EAAK6c,kBAAmB,SAAAhc,GAAA,MAAS78B,IAAG7G,IAAI0jC,EAAMic,cAAe,SAAAhkD,GAAA,MAAKA,GAAEioC,GAAKjoC,EAAEc,MAClGomC,GAAKpmC,EAAEhD,MAAM6E,QAAQ,EAAGklC,OvCqsSxBj4B,IAAK,iBACLhO,MAAO,WuChsSP,GAAIslC,GAAOhrC,KAAKgrC,KACZtmC,EAAIsmC,EAAKtmC,EAETsC,GADIgkC,EAAKpmC,EACD5E,KAAK+qC,OAAOrmC,EAAEsC,MAAQtC,EAAE9C,MAAMoF,MAAMhH,KAAK+qC,OAAOrmC,EAAEsC,OAAStC,EAAE9C,MAAMoF,QAE/EgkC,GAAKn6B,UAAY7B,GAAG6B,YACfpK,OAAO/B,EAAE9C,MAAM6E,UACff,MAAMhB,EAAEgB,OACR6L,WAAWvK,MvCisShB0M,IAAK,mBACLhO,MAAO,WuC/rSQ,GAAAsqC,GAAAhwC,KAEXisC,IACJjsC,MAAKgrC,KAAKkB,YAAYC,QAAQ,SAAAroC,GAC1BA,EAAEgkD,cAAgB9X,EAAKhF,KAAKn6B,UAAU/M,EAAE6M,QAEpC7M,EAAEgkD,cAAc3b,QAAQ,SAAC/iC,EAAEzI,GACvByI,EAAE1E,EAAG0E,EAAE2H,GACP3H,EAAE8jB,GAAK9jB,EAAE4H,GAAG5H,EAAE2H,GACd3H,EAAExE,EAAIwE,EAAEpI,MACR,IAAIqrC,GAASJ,EAAItrC,EACb0rC,KAAQA,EAAS,GACrBjjC,EAAE2iC,GAAKM,EAEH2D,EAAKjF,OAAO4c,YACZv+C,EAAExE,GAAGorC,EAAKhF,KAAK3hC,YAEnB4iC,EAAItrC,GAAKyI,EAAExE,EAAEynC,KAKzB,IAAIr4B,GAAOhU,KAAKgrC,KAAKkB,YAAYroC,IAAI,SAAAC,GAAA,MAAGA,GAAE4P,KAG1C1T,MAAKgrC,KAAKz/B,MAAQyD,GAAGzD,QAAQyI,KAAKA,GAAMtO,MAAM,SAAA5B,GAAA,MAAGA,GAAEgkD,gBACnD9nD,KAAKgrC,KAAK6c,kBAAoB7nD,KAAKgrC,KAAKkB,evCssSxCx4B,IAAK,YACLhO,MAAO,WuCnsSP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZuB,EAAWvsC,KAAK+qC,OAAOrmC,EACvB6mC,EAAOxrC,EAAKysC,KAAKC,eAAe,KAAK1sC,EAAK2sC,YAAY,UAAU,IAAI3sC,EAAK2sC,YAAY,SAAS3sC,EAAKgrC,OAAO4B,OAAS,GAAK,IAAI5sC,EAAK2sC,YAAY,eAC5InqC,KAAK,YAAa,eAAiByoC,EAAKzmC,OAAS,KAElDqoC,EAAQrB,CACRxrC,GAAKgrC,OAAO9nC,aACZ2pC,EAAQrB,EAAKtoC,aAAa4pC,KAAK79B,GAAG89B,eAGtCF,EAAM7rC,KAAKiqC,EAAKtmC,EAAE6mC,MAElBA,EAAKkB,eAAe,QAAQ1sC,EAAK2sC,YAAY,UACxCnqC,KAAK,YAAa,aAAeyoC,EAAKvmC,MAAM,EAAI,IAAMumC,EAAK+B,OAAOC,OAAS,KAC3EzqC,KAAK,KAAM,QACXW,MAAM,cAAe,UACrBQ,KAAK6oC,EAASxnC,UvCmsSnB2O,IAAK,YACLhO,MAAO,WuChsSP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZuB,EAAWvsC,KAAK+qC,OAAOnmC,EACvB2mC,EAAOxrC,EAAKysC,KAAKC,eAAe,KAAK1sC,EAAK2sC,YAAY,UAAU,IAAI3sC,EAAK2sC,YAAY,SAAS3sC,EAAKgrC,OAAO4B,OAAS,GAAK,IAAI5sC,EAAK2sC,YAAY,eAE7IE,EAAQrB,CACRxrC,GAAKgrC,OAAO9nC,aACZ2pC,EAAQrB,EAAKtoC,aAAa4pC,KAAK79B,GAAG89B,eAGtCF,EAAM7rC,KAAKiqC,EAAKpmC,EAAE2mC,MAElBA,EAAKkB,eAAe,QAAQ1sC,EAAK2sC,YAAY,UACxCnqC,KAAK,YAAa,cAAeyoC,EAAK+B,OAAO/hC,KAAM,IAAKggC,EAAKzmC,OAAO,EAAG,gBACvEhC,KAAK,KAAM,OACXW,MAAM,cAAe,UACrBQ,KAAK6oC,EAASxnC,UvCisSnB2O,IAAK,gBACLhO,MAAO,WuC7rSP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KAEZiC,EAAajtC,KAAK0sC,YAAY,SAE9BQ,EAAWltC,KAAK0sC,YAAY,OAC5Bb,EAAQ9rC,EAAKysC,KAAKrqC,UAAU,IAAI8qC,GAC/B7qC,KAAK4oC,EAAK6c,mBAEX1a,EAAatB,EAAMxpC,QAAQC,OAAO,KACjCC,KAAK,QAAS0qC,GAAYp7B,MAAMg6B,GAGjCuB,EAAMD,EAAWhrC,UAAU,IAAI+qC,GAC9B9qC,KAAK,SAAA0B,GAAA,MAAKA,GAAEgkD,gBAEbza,EAAWD,EAAI/qC,QAAQC,OAAO,IAClC+qC,GACK9qC,KAAK,QAAS2qC,GACd5qC,OAAO,QACPC,KAAK,IAAK,EAEf,IAAIgrC,GAAWF,EAASx7B,MAAMu7B,GAC1BI,EAAUD,EAAS7qC,OAAO,QAE1B+qC,EAAWD,EACXE,EAAOH,EACPI,EAASR,CACTntC,MAAK4tC,sBACLH,EAAWD,EAAQvqC,aACnByqC,EAAOH,EAAStqC,aAChB0qC,EAAQR,EAAWlqC,cAGvByqC,EAAKnrC,KAAK,YAAa,SAASuB,GAAK,MAAO,aAAeknC,EAAKtmC,EAAE9C,MAAMkC,EAAEY,GAAK,IAAOsmC,EAAKpmC,EAAEhD,MAAMkC,EAAEioC,GAAIjoC,EAAEc,GAAM,KACjGomC,GAAK6c,kBAAkB7mD,QAAUgqC,EAAK6c,kBAAkB,GAAGC,cAAc9mD,OAAUgqC,EAAKtmC,EAAE9C,MAAMopC,EAAK6c,kBAAkB,GAAGC,cAAc,GAAG92C,IAAIg6B,EAAKtmC,EAAE9C,MAAMopC,EAAK6c,kBAAkB,GAAGC,cAAc,GAAG/2C,IAAI,EAAS,CAGpO08B,GACKlrC,KAAK,QAAU,SAAAuB,GAAA,MAAKknC,GAAKtmC,EAAE9C,MAAMkC,EAAEkN,IAAIg6B,EAAKtmC,EAAE9C,MAAMkC,EAAEiN,IAAI,IAC1DxO,KAAK,SAAU,SAAAuB,GAAA,MAAOknC,GAAKzmC,OAASymC,EAAKpmC,EAAEhD,MAAMkC,EAAEc,KAErD5E,KAAKgrC,KAAK1pC,OACTqsC,EACKprC,KAAK,OAAQvC,KAAKgrC,KAAK8C,aAG5B9C,EAAK+C,SACLR,EAAS9nC,GAAG,YAAa,SAAA3B,GACrB/D,EAAKyqC,YAAY1mC,EAAEc,KACpBa,GAAG,WAAY,SAAA3B,GACd/D,EAAKiuC,gBAGbnC,EAAM7oC,OAAOG,SACbiqC,EAAIpqC,OAAOG,YvC8rSXuQ,IAAK,SACLhO,MAAO,SuC5rSJuoC,GAMH,MALAxE,GAAA7jC,OAAAkkC,eAAA2d,EAAAx0C,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,GACbjuC,KAAKkuC,YACLluC,KAAKmuC,YAELnuC,KAAK+nD,gBACE/nD,SvCgsSJynD,GACTzd,EAAsBqE,wBAErBC,4BAA4B,GAAGC,UAAU,KAAKyZ,IAAI,SAAStnD,EAAQjB,EAAOD,GAC7E,YAEAoG,QAAOC,eAAerG,EAAS,cAC7BkG,OAAO,IAETlG,EAAQo1C,OAASp1C,EAAQm0C,gBAAkBn0C,EAAQszC,cAAgBtzC,EAAQqzC,QAAUrzC,EAAQkvC,kBAAoBlvC,EAAQivC,YAAcjvC,EAAQ0pC,eAAiB1pC,EAAQypC,SAAWzpC,EAAQkoD,gBAAkBloD,EAAQioD,UAAYjoD,EAAQ4+C,wBAA0B5+C,EAAQ2+C,kBAAoB3+C,EAAQ2/C,cAAgB3/C,EAAQwhD,QAAUxhD,EAAQw5C,wBAA0Bx5C,EAAQu5C,kBAAoBv5C,EAAQyoD,iBAAmBzoD,EAAQ0oD,WAAa1oD,EAAQ2oD,wBAA0B3oD,EAAQ4oD,kBAAoB5oD,EAAQ6oD,kBAAoB7oD,EAAQg+C,YAAc5rB,MAEviB,IAAIqnB,GAAev4C,EAAQ,gBAE3BkF,QAAOC,eAAerG,EAAS,eAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAO2kC,GwC78SHuE,exCg9SR53C,OAAOC,eAAerG,EAAS,qBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAO2kC,GwCn9SUoP,oBxCu9SrB,IAAIC,GAAqB5nD,EAAQ,uBAEjCkF,QAAOC,eAAerG,EAAS,qBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOg0C,GwC39SHF,qBxC89SRxiD,OAAOC,eAAerG,EAAS,2BAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOg0C,GwCj+SgBH,0BxCq+S3B,IAAII,GAAc7nD,EAAQ,eAE1BkF,QAAOC,eAAerG,EAAS,cAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOi0C,GwCz+SHL,cxC4+SRtiD,OAAOC,eAAerG,EAAS,oBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOi0C,GwC/+SSN,mBxCm/SpB,IAAIO,GAAqB9nD,EAAQ,uBAEjCkF,QAAOC,eAAerG,EAAS,qBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOk0C,GwCv/SHzP,qBxC0/SRnzC,OAAOC,eAAerG,EAAS,2BAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOk0C,GwC7/SgBxP,0BxCigT3B,IAAIqF,GAAW39C,EAAQ,YAEvBkF,QAAOC,eAAerG,EAAS,WAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAO+pC,GwCrgTH2C,WxCwgTRp7C,OAAOC,eAAerG,EAAS,iBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAO+pC,GwC3gTMc,gBxC+gTjB,IAAIsJ,GAAqB/nD,EAAQ,uBAEjCkF,QAAOC,eAAerG,EAAS,qBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOm0C,GwCnhTHtK,qBxCshTRv4C,OAAOC,eAAerG,EAAS,2BAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOm0C,GwCzhTgBrK,0BxC6hT3B,IAAIsK,GAAahoD,EAAQ,cAEzBkF,QAAOC,eAAerG,EAAS,aAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOo0C,GwCjiTHjB,axCoiTR7hD,OAAOC,eAAerG,EAAS,mBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOo0C,GwCviTQhB,kBxC2iTnB,IAAIiB,GAAYjoD,EAAQ,cAExBkF,QAAOC,eAAerG,EAAS,YAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOq0C,GwC/iTH1f,YxCkjTRrjC,OAAOC,eAAerG,EAAS,kBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOq0C,GwCrjTOzf,iBxCyjTlB,IAAI6J,GAAeryC,EAAQ,kBAE3BkF,QAAOC,eAAerG,EAAS,eAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOy+B,GwC7jTHtE,exCgkTR7oC,OAAOC,eAAerG,EAAS,qBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOy+B,GwCnkTUrE,oBxCukTrB,IAAIka,GAAWloD,EAAQ,aAEvBkF,QAAOC,eAAerG,EAAS,WAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOs0C,GwC3kTH/V,WxC8kTRjtC,OAAOC,eAAerG,EAAS,iBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOs0C,GwCjlTM9V,gBxCqlTjB,IAAIE,GAAmBtyC,EAAQ,qBAE/BkF,QAAOC,eAAerG,EAAS,mBAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAO0+B,GwCzlTHW,kBxC6lTR,IAAI7tC,GAAUpF,EAAQ,WAEtBkF,QAAOC,eAAerG,EAAS,UAC7BopC,YAAY,EACZt0B,IAAK,WACH,MAAOxO,GwCjmTH8uC,SAdR,IAAAiU,GAAAnoD,EAAA,kBACAmoD,GAAAjL,aAAanoC,WxCsnTVqzC,cAAc,GAAGC,aAAa,GAAGjV,kBAAkB,GAAGkV,uBAAuB,GAAGC,kBAAkB,GAAGhI,YAAY,GAAGiI,uBAAuB,GAAGC,cAAc,GAAGpjD,WAAW,GAAGqjD,eAAe,GAAG1L,gBAAgB,GAAG2L,uBAAuB,GAAGtV,qBAAqB,KAAKuV,IAAI,SAAS5oD,EAAQjB,EAAOD,GACrS,YAuBA,SAAS0B,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASgnC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAvBhH1iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQo1C,OAAShjB,MAEjB,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MyC/nThiB4B,EAAAvpC,EAAA,WAEA6oD,EAAA7oD,EAAA,2CzCmoTI8oD,EAAUtoD,EAAuBqoD,GyCloTrCE,EAAA/oD,EAAA,0CzCsoTIgpD,EAASxoD,EAAuBuoD,GyCroTpCE,EAAAjpD,EAAA,4CzCyoTIkpD,EAAW1oD,EAAuByoD,EAYzBnqD,GyC5oTAo1C,OzC4oTiB,WyC/nT1B,QAAAA,GAAYpzC,EAAKqoD,EAAcjoD,EAAO8yC,EAASC,EAAS3yC,GAAYmmC,EAAAnoC,KAAA40C,GAAA50C,KAXpEsqC,eAAe,OAWqDtqC,KAVpE8pD,YAAY9pD,KAAKsqC,eAAe,SAUoCtqC,KAPpEsB,MAOoEkoD,EAAAA,WAAAxpD,KANpE8H,KAMoE4hD,EAAAA,WAAA1pD,KALpEyI,OAKoEmhD,EAAAA,WAAA5pD,KAFpEgC,YAAc4vB,OAGV5xB,KAAK4B,MAAMA,EACX5B,KAAKwB,IAAMA,EACXxB,KAAKk2C,KAAOjM,EAAAQ,MAAMyL,OAClBl2C,KAAKy0C,UAAaxK,EAAAQ,MAAMgC,eAAeod,EAAc,KAAK7pD,KAAK8pD,YAAa,KACvEvnD,KAAK,YAAa,aAAamyC,EAAQ,IAAIC,EAAQ,KACnDzD,QAAQlxC,KAAK8pD,aAAa,GAE/B9pD,KAAKgC,YAAcA,EzCmrTvB,MAzCAmnC,GAAayL,IACTlhC,IAAK,oBACLhO,MAAO,SyCvoTOy3C,EAAUC,EAAWr4C,GACnC,GAAIglD,GAAa/pD,KAAKsqC,eAAe,mBAAsBtqC,KAAKk2C,KAC5Dt0C,EAAO5B,KAAK4B,MACZ7B,EAAOC,IAEXA,MAAKgqD,eAAiB/f,EAAAQ,MAAMuf,eAAehqD,KAAKwB,IAAKuoD,EAAY/pD,KAAK4B,MAAMgF,QAAS,EAAG,IAAK,EAAG,GAEhG5G,KAAKy0C,UAAUnyC,OAAO,QACjBC,KAAK,QAAS46C,GACd56C,KAAK,SAAU66C,GACf76C,KAAK,IAAK,GACVA,KAAK,IAAK,GACVW,MAAM,OAAQ,QAAQ6mD,EAAW,IAGtC,IAAI/iD,GAAQhH,KAAKy0C,UAAUtyC,UAAU,QAChCC,KAAMR,EAAM6E,UACbwjD,EAAaroD,EAAM6E,SAASzF,OAAO,CAuBvC,OAtBAgG,GAAM3E,QAAQC,OAAO,QAErB0E,EAAMzE,KAAK,IAAK46C,GACX56C,KAAK,IAAM,SAACuB,EAAGnD,GAAJ,MAAWy8C,GAAYz8C,EAAEy8C,EAAU6M,IAC9C1nD,KAAK,KAAM,GAEXA,KAAK,qBAAsB,UAC3BmB,KAAK,SAAAI,GAAA,MAAI/D,GAAKiC,YAAcjC,EAAKiC,YAAY8B,GAAKA,IACvDkD,EAAMzE,KAAK,oBAAqB,UAC7BvC,KAAKohD,cACJp6C,EACKzE,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,eAAiBw8C,EAAW,MAAQC,EAAYz8C,EAAEy8C,EAAU6M,GAAgB,MACxG1nD,KAAK,cAAe,SACpBA,KAAK,KAAM,GACXA,KAAK,KAAM,GAMpByE,EAAMhE,OAAOG,SAENnD,QzC+nTP0T,IAAK,kBACLhO,MAAO,SyC7nTK07C,GAEZ,MADAphD,MAAKohD,aAAeA,EACbphD,SzCioTJ40C,OAGRsV,0CAA0C,EAAEC,yCAAyC,EAAEC,2CAA2C,EAAE7b,UAAU,KAAK8b,IAAI,SAAS3pD,EAAQjB,EAAOD,GAClL,YAmBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GArBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQ0oD,WAAa1oD,EAAQyoD,iBAAmBr2B,MAEhD,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,I0CjuT5duP,GADAv4C,EAAA,WACAA,EAAA,kBACAupC,EAAAvpC,EAAA,WACAsyC,EAAAtyC,EAAA,sBAGaunD,E1C4uTUzoD,E0C5uTVyoD,iB1C4uTqC,SAAUqC,G0CluTxD,QAAArC,GAAY9d,GAAOhC,EAAAnoC,KAAAioD,EAAA,IAAA7d,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAme,GAAAlnD,KAAAf,MAAA,OAAAoqC,GARnBmgB,gBAAiB,EAQEngB,EAPnBogB,iBAAkB,EAOCpgB,EANnBqgB,YACInI,MAAO,IACPoI,cAAe,SAACC,EAAkBC,GAAnB,MAA2C5X,GAAAW,gBAAgBkX,OAAOF,EAAkBC,IACnGE,cAAel5B,QAMZuY,GACCF,EAAAQ,MAAME,WAANP,EAAuBD,GAJZC,E1C4vTnB,MAzBA3B,GAAUwf,EAAkBqC,GAyBrBrC,GACThP,EAAaoP,kBAEE7oD,G0CrvTJ0oD,W1CqvTyB,SAAU6C,G0CpvT5C,QAAA7C,GAAYpd,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAkoD,GAAA3f,EAAAvoC,KAAA4F,OAAAkkC,eAAAoe,GAAAnnD,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAI6lD,GAAiBld,K1Co/T1D,MAhQAtC,GAAUyf,EAAY6C,GAQtB5hB,EAAa+e,IACTx0C,IAAK,YACLhO,MAAO,S0C3vTDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAAoe,EAAAj1C,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAIioD,GAAiBld,O1C8vT5Cr3B,IAAK,WACLhO,MAAO,W0C3vTP+jC,EAAA7jC,OAAAkkC,eAAAoe,EAAAj1C,WAAA,WAAAjT,MAAAe,KAAAf,MACAA,KAAKgrD,yB1C+vTLt3C,IAAK,sBACLhO,MAAO,W0C3vTP,GAAI3F,GAAOC,KACPirD,EAAkBlrD,EAAKirC,KAAKqI,eAKhC,IAHAtzC,EAAKirC,KAAKkgB,eAGPD,GAAmBlrD,EAAKgrC,OAAOwf,eAAe,CAC7C,GAAIY,GAAanrD,KAAKorD,eAAeprD,KAAKgrC,KAAK5oC,MAAM,EACrDrC,GAAKirC,KAAKkgB,YAAY3kD,KAAK4kD,GAG5BprD,EAAKgrC,OAAOyf,iBACXxqD,KAAKqrD,yB1CgwTT33C,IAAK,sBACLhO,MAAO,W0C5vTW,GAAAsqC,GAAAhwC,KACdD,EAAOC,IAEXD,GAAKirC,KAAKkB,YAAYC,QAAQ,SAAAplB,GAC1B,GAAIokC,GAAanb,EAAKob,eAAerkC,EAAMpW,OAAQoW,EAAMrT,IACzD3T,GAAKirC,KAAKkgB,YAAY3kD,KAAK4kD,Q1CkwT/Bz3C,IAAK,iBACLhO,MAAO,S0C/vTIiL,EAAQ26C,GACnB,GAAIvrD,GAAOC,KAEP8rC,EAASn7B,EAAO9M,IAAI,SAAAC,GACpB,OAAQwoC,WAAWvsC,EAAKirC,KAAKtmC,EAAEgB,MAAM5B,IAAKwoC,WAAWvsC,EAAKirC,KAAKpmC,EAAEc,MAAM5B,OAKvEoF,EAAoB8pC,EAAAW,gBAAgBzqC,iBAAiB4iC,GACrDliC,EAAuBopC,EAAAW,gBAAgB/pC,qBAAqBV,GAG5DqiD,EAAUv8C,GAAGU,OAAOo8B,EAAQ,SAAAhoC,GAAA,MAAGA,GAAE,KAGjC0nD,IAEI9mD,EAAG6mD,EAAQ,GACX3mD,EAAGgF,EAAqB2hD,EAAQ,MAGhC7mD,EAAG6mD,EAAQ,GACX3mD,EAAGgF,EAAqB2hD,EAAQ,MAIpCE,EAAOz8C,GAAGy8C,OACTC,MAAM18C,GAAG28C,YACTjnD,EAAE,SAAAZ,GAAA,MAAK/D,GAAKirC,KAAKtmC,EAAE9C,MAAMkC,EAAEY,KAC3BE,EAAE,SAAAd,GAAA,MAAK/D,GAAKirC,KAAKpmC,EAAEhD,MAAMkC,EAAEc,KAE5BtD,EAAQvB,EAAKirC,KAAK1pC,MAElBsqD,EAAe,OAChB3hB,GAAAQ,MAAMgJ,WAAWnyC,GAGRA,EAFLqP,EAAO3P,QAAUsqD,KAAW,EACxBvrD,EAAKgrC,OAAOU,OACJ1rC,EAAKirC,KAAKuH,cAAc+Y,GAEvBhqD,EAAMqP,EAAO,IAIjBi7C,EAENtqD,GAASgqD,KAAW,IAC1BhqD,EAAQsqD,EAIZ,IAAInB,GAAazqD,KAAK6rD,kBAAkB/f,EAAQyf,EAAUriD,EAAiBU,EAC3E,QACImd,MAAOukC,IAAY,EACnBG,KAAMA,EACND,WAAYA,EACZlqD,MAAOA,EACPmpD,WAAYA,M1C+vThB/2C,IAAK,oBACLhO,MAAO,S0C5vTOomC,EAAQyf,EAASriD,EAAiBU,GAChD,GAAI7J,GAAOC,KAEPI,GADQ8I,EAAiBC,EACrB2iC,EAAO9qC,QACX2pD,EAAmB/hD,KAAKT,IAAI,EAAG/H,EAAE,GAEjC0rD,EAAQ,EAAI/rD,EAAKgrC,OAAO0f,WAAWnI,MACnCsI,EAAuB,EAAIkB,EAAM,EACjCpB,EAAgB3qD,EAAKgrC,OAAO0f,WAAWC,cAAcC,EAAiBC,GAEtEpR,EAAU1N,EAAOjoC,IAAI,SAAAC,GAAA,MAAGA,GAAE,KAC1BioD,EAAQ/Y,EAAAW,gBAAgB5pC,KAAKyvC,GAC7BwS,EAAO,EACPC,EAAK,EACLC,EAAQ,EACRC,EAAK,EACLC,EAAQ,CACZtgB,GAAOK,QAAQ,SAAA9hC,GACX,GAAI3F,GAAI2F,EAAE,GACNzF,EAAIyF,EAAE,EAEV2hD,IAAUtnD,EAAEE,EACZqnD,GAAMvnD,EACNynD,GAAMvnD,EACNsnD,GAAUxnD,EAAEA,EACZ0nD,GAAUxnD,EAAEA,GAEhB,IAAInE,GAAIyI,EAAiBC,EACrBC,EAAIF,EAAiBE,EAErBijD,EAAMjsD,GAAGA,EAAE,KAAOgsD,EAAQ3rD,EAAEurD,EAAO5iD,EAAE+iD,IAAO/rD,EAAE8rD,EAASD,EAAKA,IAC5DK,GAAOF,EAAU3rD,EAAEurD,EAAO5iD,EAAE+iD,IAAO/rD,GAAGA,EAAE,IAExCmsD,EAAU,SAAA7nD,GAAA,MAAIkE,MAAKsD,KAAKogD,EAAM1jD,KAAKI,IAAItE,EAAEqnD,EAAM,GAAGM,IAClDvB,EAAiB,SAAApmD,GAAA,MAAIgmD,GAAe6B,EAAQ7nD,IAQ5C8nD,EAA6B,SAAA9nD,GAC7B,GAAIwE,GAAmBU,EAAqBlF,GACxC+nD,EAAM3B,EAAcpmD,GACpBgoD,EAAWxjD,EAAmBujD,EAC9BE,EAASzjD,EAAmBujD,CAChC,QACI/nD,EAAGA,EACHqnC,GAAI2gB,EACJE,GAAID,IAKRE,GAAWtB,EAAQ,GAAGA,EAAQ,IAAI,EAGlCuB,GAAwBvB,EAAQ,GAAIsB,EAAUtB,EAAQ,IAAI1nD,IAAI2oD,GAE9DO,EAAY,SAAAnoD,GAAA,MAAKA,IAEjBooD,EAAkBh+C,GAAGi+C,OACxBvB,MAAM18C,GAAGk+C,cACLxoD,EAAE,SAAAZ,GAAA,MAAK/D,GAAKirC,KAAKtmC,EAAE9C,MAAMkC,EAAEY,KAC3BqnC,GAAG,SAAAjoC,GAAA,MAAKipD,GAAUhtD,EAAKirC,KAAKpmC,EAAEhD,MAAMkC,EAAEioC,OACtC6gB,GAAG,SAAA9oD,GAAA,MAAKipD,GAAUhtD,EAAKirC,KAAKpmC,EAAEhD,MAAMkC,EAAE8oD,MAE3C,QACIK,KAAKD,EACLlhB,OAAOghB,M1CuwTXp5C,IAAK,SACLhO,MAAO,S0CpwTJuoC,GACHxE,EAAA7jC,OAAAkkC,eAAAoe,EAAAj1C,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,GACbjuC,KAAKmtD,2B1CuwTLz5C,IAAK,wBACLhO,MAAO,W0CnwTP,GAAI3F,GAAOC,KACPotD,EAA2BptD,KAAK0sC,YAAY,wBAC5C2gB,EAA8B,KAAKD,EAEnCE,EAAavtD,EAAK2sC,YAAY,QAE9B6gB,EAAsBxtD,EAAKysC,KAAKyR,eAAeoP,EAA6B,IAAIttD,EAAKytD,oBACrFC,EAA0BF,EAAoB9gB,eAAe,YAC5DlqC,KAAK,KAAM+qD,EAGhBG,GAAwBhhB,eAAe,QAClClqC,KAAK,QAASxC,EAAKirC,KAAKvmC,OACxBlC,KAAK,SAAUxC,EAAKirC,KAAKzmC,QACzBhC,KAAK,IAAK,GACVA,KAAK,IAAK,GAEfgrD,EAAoBhrD,KAAK,YAAa,SAACuB,EAAEnD,GAAH,MAAS,QAAQ2sD,EAAW,KAElE,IAAII,GAAkB1tD,KAAK0sC,YAAY,cACnCihB,EAAsB5tD,EAAK2sC,YAAY,cACvCkhB,EAAqB,KAAKF,EAC1BvC,EAAaoC,EAAoBprD,UAAUyrD,GAC1CxrD,KAAKrC,EAAKirC,KAAKkgB,YAAa,SAACpnD,EAAEnD;AAAH,MAAQmD,GAAEijB,QAGvC8mC,EAAkB1C,EAAW9oD,QAAQ27C,eAAe4P,GACpDE,EAAkBD,EAAgBh8C,MAAMs5C,GACxC4C,EAAYhuD,EAAK2sC,YAAY,OACjCmhB,GACKvrD,OAAO,QACPC,KAAK,QAASwrD,GACdxrD,KAAK,kBAAmB,kBAE7B,IAAIkpD,GAAOqC,EAAgBprD,OAAO,QAAQqrD,GACrC7qD,MAAM,SAAU,SAAA7C,GAAA,MAAKA,GAAEiB,QAExB0sD,EAAQvC,CACR1rD,GAAK6tC,sBACLogB,EAAQvC,EAAKxoD,cAGjB+qD,EAAMzrD,KAAK,IAAK,SAAAlC,GAAA,MAAKA,GAAEorD,KAAKprD,EAAEmrD,cAG9BqC,EACKvrD,OAAO,QACPC,KAAK,QAASorD,GACdprD,KAAK,kBAAmB,mBACxBW,MAAM,UAAW,MAItB,IAAI+pD,GAAOa,EAAgBprD,OAAO,QAAQirD,GAEtCM,EAAQhB,CACRltD,GAAK6tC,sBACLqgB,EAAQhB,EAAKhqD,cAEjBgrD,EAAM1rD,KAAK,IAAK,SAAAlC,GAAA,MAAKA,GAAEoqD,WAAWwC,KAAK5sD,EAAEoqD,WAAW3e,UACpDmiB,EAAM/qD,MAAM,OAAQ,SAAA7C,GAAA,MAAKA,GAAEiB,QAC3B6pD,EAAWnoD,OAAOG,a1CiwTf+kD,GACTjP,EAAauE,eAEZ7K,UAAU,GAAG+K,gBAAgB,GAAG3J,qBAAqB,GAAGxF,UAAU,KAAK2f,IAAI,SAASxtD,EAAQjB,EAAOD,GACtG,YAmBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GArBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQ4oD,kBAAoB5oD,EAAQ2oD,wBAA0Bv2B,MAE9D,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,I2C7hU5dM,EAAAtpC,EAAA,6BACAu4C,EAAAv4C,EAAA,iBACAupC,EAAAvpC,EAAA,WAGaynD,GAFbznD,EAAA,Y3C0iU8BlB,E2CxiUjB2oD,wB3CwiUmD,SAAUmC,G2C3gUtE,QAAAnC,GAAYhe,GAAOhC,EAAAnoC,KAAAmoD,EAAA,IAAA/d,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAqe,GAAApnD,KAAAf,MAAA,OAAAoqC,GA3BnBC,SAAUD,EAAKE,eAAe,qBA2BXF,EA1BnBtiC,KAAM8pB,OA0BawY,EAzBnB+jB,YAAc,GAyBK/jB,EAxBnBgkB,YAAc,IAwBKhkB,EAvBnBnjB,QAAS,GAuBUmjB,EAtBnBikB,OAAO,EAsBYjkB,EArBnBuC,QAAQ,EAqBWvC,EApBnBI,aAAa,EAoBMJ,EAnBnBpjC,MAAO4qB,OAmBYwY,EAlBnB1lC,GACIJ,OAAQ,SACR1C,MAAO,UAgBQwoC,EAdnBxlC,GACIN,OAAQ,OACR1C,MAAO,UAYQwoC,EAVnB8I,QACIx/B,IAAKke,OACLopB,eAAe,GAQA5Q,EANnBiP,WACIt3C,UACAiS,QACAtO,MAAO,SAAC5B,EAAGw1C,GAAJ,MAAoBx1C,GAAEw1C,KAK7BrP,EAAAQ,MAAME,WAANP,EAAuBD,GAFRC,E3CyjUnB,MA7CA3B,GAAU0f,EAAyBmC,GA6C5BnC,GACTlP,EAAaoP,mBAES7oD,G2CpjUX4oD,kB3CojUuC,SAAUle,G2CnjU1D,QAAAke,GAAYtd,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAooD,GAAA7f,EAAAvoC,KAAA4F,OAAAkkC,eAAAse,GAAArnD,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAI+lD,GAAwBpd,K3Cu4UjE,MApVAtC,GAAU2f,EAAmBle,GAQ7Bf,EAAaif,IACT10C,IAAK,YACLhO,MAAO,S2C1jUDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAAse,EAAAn1C,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAImoD,GAAwBpd,O3C6jUnDr3B,IAAK,WACLhO,MAAO,W2CzjUP+jC,EAAA7jC,OAAAkkC,eAAAse,EAAAn1C,WAAA,WAAAjT,MAAAe,KAAAf,KAEA,IACI+sC,GAAS/sC,KAAKgrC,KAAK+B,OACnBzB,EAAOtrC,KAAK+qC,MAChB/qC,MAAKgrC,KAAKtmC,KACV1E,KAAKgrC,KAAKpmC,KACV5E,KAAKgrC,KAAKsjB,KACNhtD,MAAO,MAGXtB,KAAK45C,iBAEL55C,KAAKgrC,KAAKljC,KAAOwjC,EAAKxjC,IAGtB,IAAIrD,GAAQ6mC,EAAK7mC,MACbyzC,EAAiBjO,EAAAQ,MAAMyN,eAAel4C,KAAK+qC,OAAOtmC,MAAOzE,KAAK83C,mBAAoB/K,GAClFoL,EAAkBlO,EAAAQ,MAAM0N,gBAAgBn4C,KAAK+qC,OAAOxmC,OAAQvE,KAAK83C,mBAAoB/K,EACpFtoC,KACGzE,KAAKgrC,KAAKljC,OACV9H,KAAKgrC,KAAKljC,KAAQc,KAAKyD,IAAIi/B,EAAK8iB,YAAaxlD,KAAKT,IAAImjC,EAAK6iB,YAAajW,EAAel4C,KAAKgrC,KAAKqO,UAAUr4C,UAE/GyD,EAAQsoC,EAAO/hC,KAAO+hC,EAAO9hC,MAAQjL,KAAKgrC,KAAKqO,UAAUr4C,OAAOhB,KAAKgrC,KAAKljC,MAE1E9H,KAAKgrC,KAAKljC,OACV9H,KAAKgrC,KAAKljC,MAAQrD,GAASsoC,EAAO/hC,KAAO+hC,EAAO9hC,QAAUjL,KAAKgrC,KAAKqO,UAAUr4C,OAGlF,IAAIuD,GAASE,CAkBb,OAjBKF,KACDA,EAAS4zC,GAGbn4C,KAAKgrC,KAAKvmC,MAAQA,EAAQsoC,EAAO/hC,KAAO+hC,EAAO9hC,MAC/CjL,KAAKgrC,KAAKzmC,OAASA,EAASwoC,EAAOuI,IAAMvI,EAAOC,OAGhDhtC,KAAKgrC,KAAKhkC,MAAQskC,EAAKtkC,MAEF4qB,SAAlB5xB,KAAKgrC,KAAKhkC,QACThH,KAAKgrC,KAAKhkC,MAAQhH,KAAKgrC,KAAKljC,KAAO,IAGvC9H,KAAKmrC,SACLnrC,KAAKkrC,SAEElrC,Q3C2jUP0T,IAAK,iBACLhO,MAAO,W2CvjUP,GAAIm1C,GAAgB76C,KAAK+qC,OAAOsO,UAE5Bj3C,EAAOpC,KAAKgrC,KAAKkB,YACjBlB,EAAOhrC,KAAKgrC,IAChBA,GAAK8P,oBACL9P,EAAKqO,UAAYwB,EAAc7mC,KAC3Bg3B,EAAKqO,WAAcrO,EAAKqO,UAAUr4C,SAElCgqC,EAAKqO,UAAYj3C,EAAKpB,OAASipC,EAAAQ,MAAMsQ,eAAe34C,EAAK,GAAGuO,OAAQ3Q,KAAK+qC,OAAOmI,OAAOx/B,IAAK1T,KAAK+qC,OAAOiQ,mBAG5GhQ,EAAKjpC,UACLipC,EAAKiQ,mBACLjQ,EAAKqO,UAAUlN,QAAQ,SAACmN,EAAavvB,GACjC,GAAI1d,GAAM2C,GAAG3C,IAAIjK,EAAM,SAAA9B,GAAA,MAAG0O,IAAG3C,IAAI/L,EAAEqQ,OAAQ,SAAA7M,GAAA,MAAG+2C,GAAcn1C,MAAM5B,EAAGw1C,OACjEnxC,EAAM6G,GAAG7G,IAAI/F,EAAM,SAAA9B,GAAA,MAAG0O,IAAG7G,IAAI7H,EAAEqQ,OAAQ,SAAA7M,GAAA,MAAG+2C,GAAcn1C,MAAM5B,EAAGw1C,MACrEtO,GAAK8P,iBAAiBxB,IAAgBjtC,EAAIlE,EAC1C,IAAIooC,GAAQ+I,CACTuB,GAAc94C,QAAU84C,EAAc94C,OAAOf,OAAO+oB,IAEnDwmB,EAAQsK,EAAc94C,OAAOgoB,IAEjCihB,EAAKjpC,OAAOwE,KAAKgqC,GACjBvF,EAAKiQ,gBAAgB3B,GAAe/I,IAGxCvF,EAAKujB,e3CmkUL76C,IAAK,SACLhO,MAAO,W2C/jUP,GAAIslC,GAAOhrC,KAAKgrC,KACZtmC,EAAIsmC,EAAKtmC,EACT4mC,EAAOtrC,KAAK+qC,MAGhBrmC,GAAEgB,MAAQ4lC,EAAK+N,UAAU3zC,MACzBhB,EAAE9C,MAAQqoC,EAAAQ,MAAMiB,YAAYJ,EAAK5mC,EAAE9C,OAAOgF,OAAO0kC,EAAKrkB,QAAU,EAAG+jB,EAAKljC,KAAOwjC,EAAKrkB,QAAU,IAC9FviB,EAAEb,IAAM,SAACC,EAAG0qD,GAAJ,MAAiB9pD,GAAE9C,MAAM8C,EAAEgB,MAAM5B,EAAG0qD,KAE5C9pD,EAAE6mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAK5mC,EAAEJ,OAAQI,EAAE9C,OAAOoF,MAAMgkC,EAAKhkC,OAC7DtC,EAAE6mC,KAAKwE,SAAS/E,EAAKljC,KAAOkjC,EAAKqO,UAAUr4C,W3CqkU3C0S,IAAK,SACLhO,MAAO,W2ChkUP,GAAIslC,GAAOhrC,KAAKgrC,KACZpmC,EAAIomC,EAAKpmC,EACT0mC,EAAOtrC,KAAK+qC,MAEhBnmC,GAAEc,MAAQ4lC,EAAK+N,UAAU3zC,MACzBd,EAAEhD,MAAQqoC,EAAAQ,MAAMiB,YAAYJ,EAAK1mC,EAAEhD,OAAOgF,OAAQokC,EAAKljC,KAAOwjC,EAAKrkB,QAAU,EAAGqkB,EAAKrkB,QAAU,IAE/FriB,EAAEf,IAAM,SAACC,EAAG0qD,GAAJ,MAAiB5pD,GAAEhD,MAAMgD,EAAEc,MAAM5B,EAAG0qD,KAC5C5pD,EAAE2mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAK1mC,EAAEN,OAAQM,EAAEhD,OAAOoF,MAAMgkC,EAAKhkC,OAC7DpC,EAAE2mC,KAAKwE,UAAU/E,EAAKljC,KAAOkjC,EAAKqO,UAAUr4C,W3CukU5C0S,IAAK,SACLhO,MAAO,S2CrkUHuoC,GA8EJ,QAASwgB,GAAYpkD,GACjB,GAAI2gC,GAAOjrC,EAAKirC,IAChBA,GAAKujB,SAAShoD,KAAK8D,EACnB,IAAI5H,GAAOuM,GAAGtM,OAAO1C,KAErBgrC,GAAKtmC,EAAE9C,MAAM6E,OAAOukC,EAAK8P,iBAAiBzwC,EAAE3F,IAC5CsmC,EAAKpmC,EAAEhD,MAAM6E,OAAOukC,EAAK8P,iBAAiBzwC,EAAEzF,GAE5C,IAAI8pD,GAAc3uD,EAAK2sC,YAAY,QACnCjqC,GAAKgqC,eAAe,QAAQiiB,GACvBnsD,KAAK,QAASmsD,GACdnsD,KAAK,IAAK+oC,EAAKrkB,QAAU,GACzB1kB,KAAK,IAAK+oC,EAAKrkB,QAAU,GACzB1kB,KAAK,QAASyoC,EAAKljC,KAAOwjC,EAAKrkB,SAC/B1kB,KAAK,SAAUyoC,EAAKljC,KAAOwjC,EAAKrkB,SAErC5c,EAAE+sC,OAAS,WAEP,GAAIuX,GAAU3uD,KACVitC,EAAaltC,EAAK2sC,YAAY,SAG9Bb,EAAQppC,EAAKN,UAAU,KAAK8qC,GAAY7qC,KAAKrC,EAAKirC,KAAKkB,aAEvDiB,EAAatB,EAAMxpC,QAAQ27C,eAAe,KAAK/Q,GAAYp7B,MAAMg6B,GAEjE+iB,EAAOzhB,EAAWhrC,UAAU,UAC3BC,KAAK,SAAA0B,GAAA,MAAGA,GAAE6M,SAEXk+C,EAAYD,EAAKvsD,QAAQC,OAAO,UAAUuP,MAAM+8C,GAEhDE,EAAQD,CACR9uD,GAAK6tC,sBACLkhB,EAAQD,EAAU5rD,cAGtB6rD,EAAMvsD,KAAK,KAAM,SAACuB,GAAD,MAAOknC,GAAKtmC,EAAEb,IAAIC,EAAG6qD,EAAQjqD,KACzCnC,KAAK,KAAM,SAACuB,GAAD,MAAOknC,GAAKpmC,EAAEf,IAAIC,EAAG6qD,EAAQ/pD,KACxCrC,KAAK,IAAKxC,EAAKgrC,OAAOgkB,WAGvB/jB,EAAK8C,YACLX,EAAWjqC,MAAM,OAAQ8nC,EAAK8C,aACzB9C,EAAK1pC,OACVutD,EAAU3rD,MAAM,OAAQ8nC,EAAK1pC,OAI7B0pC,EAAK+C,SACL8gB,EAAUppD,GAAG,YAAa,SAAC3B,GAEvB,GAAIqtC,GAAO,IAAMnG,EAAKtmC,EAAEgB,MAAM5B,EAAG6qD,EAAQjqD,GAAK,KAAOsmC,EAAKpmC,EAAEc,MAAM5B,EAAG6qD,EAAQ/pD,GAAK,IAC9EmiB,EAAQhnB,EAAKgrC,OAAOmI,OAASnzC,EAAKgrC,OAAOmI,OAAOxtC,MAAM3E,KAAKhB,EAAKgrC,OAAQjnC,GAAK,IACjF,IAAIijB,GAAmB,IAAVA,EAAa,CACtBA,EAAQikB,EAAKmJ,aAAaptB,GAC1BoqB,GAAQ,OACR,IAAIZ,GAAQxwC,EAAKgrC,OAAOmI,OAAO3C,KAC3BA,KACAY,GAAQZ,EAAQ,MAEpBY,GAAQpqB,EAEZhnB,EAAKyqC,YAAY2G,KAEhB1rC,GAAG,WAAY,SAAC3B,GACb/D,EAAKiuC,gBAIjB4gB,EAAK5rD,OAAOG,SACZ0oC,EAAM7oC,OAAOG,UAEjBkH,EAAE+sC,SArJN3N,EAAA7jC,OAAAkkC,eAAAse,EAAAn1C,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,EAEb,IAAIluC,GAAMC,KACNI,EAAIL,EAAKirC,KAAKqO,UAAUr4C,OACxBsqC,EAAOtrC,KAAK+qC,OAEZikB,EAAYjvD,EAAK2sC,YAAY,QAC7BuiB,EAAaD,EAAU,KACvBE,EAAaF,EAAU,KAEvBG,EAAgB,KAAKF,EAAW,IAAID,EACpCI,EAAgB,KAAKF,EAAW,IAAIF,EAEpCK,EAAgBtvD,EAAK2sC,YAAY,aACjC4iB,EAAQvvD,EAAKysC,KAAKrqC,UAAUgtD,GAC3B/sD,KAAKrC,EAAKirC,KAAKqO,WAEhBkW,EAAaD,EAAMjtD,QAAQ27C,eAAemR,GACzCje,QAAQme,GAAgB/jB,EAAKqB,QAAQ96B,MAAMy9C,EAGhDC,GAAWhtD,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,cAAgBP,EAAIO,EAAI,GAAKZ,EAAKirC,KAAKljC,KAAO,QAChF2L,KAAK,SAAS3P,GACX/D,EAAKirC,KAAKtmC,EAAE9C,MAAM6E,OAAO1G,EAAKirC,KAAK8P,iBAAiBh3C,GACpD,IAAIynC,GAAOv8B,GAAGtM,OAAO1C,KACjBD,GAAK6tC,sBACLrC,EAAOA,EAAKtoC,cAEhBsoC,EAAKxqC,KAAKhB,EAAKirC,KAAKtmC,EAAE6mC,QAI9B+jB,EAAMtsD,OAAOG,QAEb,IAAIqsD,GAAQzvD,EAAKysC,KAAKrqC,UAAUitD,GAC3BhtD,KAAKrC,EAAKirC,KAAKqO,WAChBoW,EAAaD,EAAMntD,QAAQ27C,eAAeoR,GAAev9C,MAAM29C,EACnEC,GAAWve,QAAQme,GAAgB/jB,EAAKqB,QACnCpqC,KAAK,YAAa,SAACuB,EAAGnD,GAAJ,MAAU,eAAiBA,EAAIZ,EAAKirC,KAAKljC,KAAO,MACvE2nD,EAAWh8C,KAAK,SAAS3P,GACrB/D,EAAKirC,KAAKpmC,EAAEhD,MAAM6E,OAAO1G,EAAKirC,KAAK8P,iBAAiBh3C,GACpD,IAAIynC,GAAOv8B,GAAGtM,OAAO1C,KACjBD,GAAK6tC,sBACLrC,EAAOA,EAAKtoC,cAEhBsoC,EAAKxqC,KAAKhB,EAAKirC,KAAKpmC,EAAE2mC,QAI1BikB,EAAMxsD,OAAOG,QAEb,IAAIm5C,GAAav8C,EAAK2sC,YAAY,QAC9BjqC,EAAO1C,EAAKysC,KAAKrqC,UAAU,IAAIm6C,GAC9Bl6C,KAAKrC,EAAK61C,MAAM8Z,MAAM3vD,EAAKirC,KAAKqO,UAAWt5C,EAAKirC,KAAKqO,YAEtD12C,EAAaF,EAAKJ,QAAQ27C,eAAe,KAAK1B,EAClD35C,GAAUghC,OAAO,SAAA7/B,GAAA,MAAKA,GAAEnD,IAAMmD,EAAEwI,IAAGhK,OAAO,OAE1C,IAAIqtD,GAAYhtD,EAAUkP,MAAMpP,EAChCktD,GAAUptD,KAAK,YAAa,SAAAuB,GAAA,MAAK,cAAgB1D,EAAI0D,EAAEnD,EAAI,GAAKZ,EAAKirC,KAAKljC,KAAO,IAAMhE,EAAEwI,EAAIvM,EAAKirC,KAAKljC,KAAO,MAE3GwjC,EAAK+iB,OACJruD,KAAK4vD,UAAUD,GAInBA,EAAUl8C,KAAKg7C,GAGfkB,EAAUjtD,OAAO,QACZH,KAAK,IAAK+oC,EAAKrkB,SACf1kB,KAAK,IAAK+oC,EAAKrkB,SACf1kB,KAAK,KAAM,SACXmB,KAAM,SAAAI,GAAA,MAAK/D,GAAKirC,KAAKiQ,gBAAgBn3C,EAAEY,KAE5CjC,EAAKO,OAAOG,Y3CyoUZuQ,IAAK,YACLhO,MAAO,S2C3jUDjD,GAeN,QAASotD,GAAWxlD,GACZtK,EAAKirC,KAAK8kB,YAAc9vD,OACxBD,EAAKgwD,aACLhwD,EAAKirC,KAAKtmC,EAAE9C,MAAM6E,OAAO1G,EAAKirC,KAAK8P,iBAAiBzwC,EAAE3F,IACtD3E,EAAKirC,KAAKpmC,EAAEhD,MAAM6E,OAAO1G,EAAKirC,KAAK8P,iBAAiBzwC,EAAEzF,IACtD7E,EAAKirC,KAAK8kB,UAAY9vD,KACtBD,EAAKirC,KAAKqjB,MAAQA,GAK1B,QAAS2B,GAAU3lD,GACf,GAAI/J,GAAI0O,GAAG4oC,MAAMiG,SACjB,IAAIv9C,EAAJ,CACA,GAAIJ,GAAII,EAAEuD,IAAI,SAAAyB,GAAA,OAAKvF,EAAKirC,KAAKtmC,EAAE9C,MAAMiF,OAAOvB,EAAE,IAAKvF,EAAKirC,KAAKpmC,EAAEhD,MAAMiF,OAAOvB,EAAE,MAE9EvF,GAAKysC,KAAKrqC,UAAU,UAAU+uC,QAAQ,SAAU,SAAUptC,GACtD,GAAIY,GAAI4nC,WAAWxoC,EAAEuG,EAAE3F,IACnBE,EAAI0nC,WAAWxoC,EAAEuG,EAAEzF,GAEvB,OAAO1E,GAAE,GAAG,GAAKwE,GAAKA,EAAIxE,EAAE,GAAG,IACxBA,EAAE,GAAG,GAAK0E,GAAKA,EAAI1E,EAAE,GAAG,MAIvC,QAAS+vD,KACAjhD,GAAG4oC,MAAMiG,WAAW99C,EAAKysC,KAAKrqC,UAAU,WAAW+uC,QAAQ,UAAU,GAxC9E,GAAInxC,GAAOC,KACPquD,EAAQr/C,GAAGq/C,QAGV5oD,GAAG,QAASoqD,GACZpqD,GAAG,QAASuqD,GACZvqD,GAAG,MAAOwqD,EAEf5B,GAAM3+C,SAAS,EAAG,IAAK3P,EAAKirC,KAAKljC,KAAM/H,EAAKirC,KAAKljC,QACjDrF,EAAKgqC,eAAe,qBAAqB1rC,KAAKstD,GAE9CtuD,EAAKgwD,gB3C2lULr8C,IAAK,aACLhO,MAAO,W2C1jUP,GAAI3F,GAAOC,IACPD,GAAKirC,KAAK8kB,YAId/vD,EAAKirC,KAAKqjB,MAAM6B,KAAKlhD,GAAGtM,OAAO3C,EAAKirC,KAAK8kB,WAAY,MACrD/vD,EAAKysC,KAAKrqC,UAAU,WAAW+uC,QAAQ,UAAU,GACjDnxC,EAAKirC,KAAK8kB,UAAU,U3C+jUjB1H,GACTpe,EAAsBqE,wBAErBC,4BAA4B,GAAGvoC,WAAW,GAAG23C,gBAAgB,GAAGnP,UAAU,KAAK4hB,IAAI,SAASzvD,EAAQjB,EAAOD,GAC9G,YAiBA,SAAS2oC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BxoC,EAAMgB,GAAQ,IAAKhB,EAAQ,KAAM,IAAIyoC,gBAAe,4DAAgE,QAAOznC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BhB,EAAPgB,EAElO,QAAS0nC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIL,WAAU,iEAAoEK,GAAeD,GAASz1B,UAAYrN,OAAOgQ,OAAO+yB,GAAcA,EAAW11B,WAAaiC,aAAexP,MAAOgjC,EAAUE,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeH,IAAY/iC,OAAOmjC,eAAiBnjC,OAAOmjC,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAnBje/iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,IAEXlG,EAAQg+C,YAAch+C,EAAQ6oD,kBAAoBz2B,MAElD,IAAIuX,GAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,MAE5hBoB,EAAO,QAASn1B,GAAId,EAAQ4B,EAAUs0B,GAA2B,OAAXl2B,IAAiBA,EAASm2B,SAAS12B,UAAW,IAAI22B,GAAOhkC,OAAOikC,yBAAyBr2B,EAAQ4B,EAAW,IAAawc,SAATgY,EAAoB,CAAE,GAAIl0B,GAAS9P,OAAOkkC,eAAet2B,EAAS,OAAe,QAAXkC,EAAmB,OAAkCpB,EAAIoB,EAAQN,EAAUs0B,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKlkC,KAAgB,IAAIqkC,GAASH,EAAKt1B,GAAK,IAAesd,SAAXmY,EAA4C,MAAOA,GAAOhpC,KAAK2oC,I4Ch8U5dM,EAAAtpC,EAAA,6BACAupC,EAAAvpC,EAAA,WAGa2nD,GAFb3nD,EAAA,Y5C48UwBlB,E4C18UX6oD,kB5C08UuC,SAAUne,G4C96U1D,QAAAme,GAAYle,GAAOhC,EAAAnoC,KAAAqoD,EAAA,IAAAje,GAAA7B,EAAAvoC,KAAA4F,OAAAkkC,eAAAue,GAAAtnD,KAAAf,MAAA,OAAAoqC,GA1BnBC,SAAUD,EAAKE,eAAe,cA0BXF,EAzBnBuC,QAAQ,EAyBWvC,EAxBnBI,aAAa,EAwBMJ,EAtBnB1lC,GACIK,MAAO,GACP2O,IAAK,EACLhO,MAAO,SAAC5B,EAAG4P,GAAJ,MAAY5P,GAAE4P,IACrBpP,OAAQ,SACR1C,MAAO,SACPitC,aAAc,KAgBCzE,EAdnBxlC,GACIG,MAAO,GACP2O,IAAK,EACLhO,MAAO,SAAC5B,EAAG4P,GAAJ,MAAY5P,GAAE4P,IACrBpP,OAAQ,OACR1C,MAAO,SACPitC,aAAc,KAQCzE,EANnB8I,QACIx/B,IAAK,GAKU02B,EAHnB2kB,UAAY,EAGO3kB,EAFnBnnC,YAAY,EAOLknC,GACCF,EAAAQ,MAAME,WAANP,EAAuBD,GANZC,E5C69UnB,MA9CA3B,GAAU4f,EAAmBne,GA8CtBme,GACTre,EAAsBY,4BAENprC,G4Cp9ULg+C,Y5Co9U2B,SAAU3S,G4Cn9U9C,QAAA2S,GAAY1S,EAAqB1oC,EAAM2oC,GAAQ,MAAA5C,GAAAnoC,KAAAw9C,GAAAjV,EAAAvoC,KAAA4F,OAAAkkC,eAAA0T,GAAAz8C,KAAAf,KACrC8qC,EAAqB1oC,EAAM,GAAIimD,GAAkBtd,K5CgrV3D,MA7NAtC,GAAU+U,EAAa3S,GAQvB1B,EAAaqU,IACT9pC,IAAK,YACLhO,MAAO,S4C19UDqlC,GACN,MAAAtB,GAAA7jC,OAAAkkC,eAAA0T,EAAAvqC,WAAA,YAAAjT,MAAAe,KAAAf,KAAuB,GAAIqoD,GAAkBtd,O5C69U7Cr3B,IAAK,WACLhO,MAAO,W4C19UP+jC,EAAA7jC,OAAAkkC,eAAA0T,EAAAvqC,WAAA,WAAAjT,MAAAe,KAAAf,KAGWA,MAAK+qC,MAShB,OAPA/qC,MAAKgrC,KAAKtmC,KACV1E,KAAKgrC,KAAKpmC,KAEV5E,KAAKirC,kBACLjrC,KAAKmrC,SACLnrC,KAAKkrC,SAEElrC,Q5C89UP0T,IAAK,SACLhO,MAAO,W4C19UP,GAAIslC,GAAOhrC,KAAKgrC,KACZtmC,EAAIsmC,EAAKtmC,EACT4mC,EAAOtrC,KAAK+qC,OAAOrmC,CAQvBA,GAAEgB,MAAQ,SAAA5B,GAAA,MAAKwnC,GAAK5lC,MAAM5B,EAAGwnC,EAAK53B,MAElChP,EAAE9C,MAAQqoC,EAAAQ,MAAMiB,YAAYJ,EAAK1pC,OAAOgF,OAAO,EAAGokC,EAAKvmC,QACvDC,EAAEb,IAAM,SAAAC,GAAA,MAAKY,GAAE9C,MAAM8C,EAAEgB,MAAM5B,KAE7BY,EAAE6mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAKhnC,OAAQI,EAAE9C,MAEzC,IAAIQ,GAAOpC,KAAKgrC,KAAKkB,YAEjBzlC,GAAU6lC,WAAWt9B,GAAG3C,IAAIjK,EAAM,SAAA9B,GAAA,MAAG0O,IAAG3C,IAAI/L,EAAEqQ,OAAQq6B,EAAKtmC,EAAEgB,UAAU4mC,WAAWt9B,GAAG7G,IAAI/F,EAAM,SAAA9B,GAAA,MAAG0O,IAAG7G,IAAI7H,EAAEqQ,OAAQq6B,EAAKtmC,EAAEgB,WAC1HqnC,GAAUtmC,EAAO,GAAGA,EAAO,IAAK6kC,EAAKuD,YACzCpoC,GAAO,IAAIsmC,EACXtmC,EAAO,IAAIsmC,EACX/B,EAAKtmC,EAAE9C,MAAM6E,OAAOA,GACjBzG,KAAK+qC,OAAO4B,QACXjoC,EAAE6mC,KAAKwE,UAAU/E,EAAKzmC,W5Cw+U1BmP,IAAK,SACLhO,MAAO,W4Cl+UP,GAAIslC,GAAOhrC,KAAKgrC,KACZpmC,EAAIomC,EAAKpmC,EACT0mC,EAAOtrC,KAAK+qC,OAAOnmC,CAQvBA,GAAEc,MAAQ,SAAA5B,GAAA,MAAKwnC,GAAK5lC,MAAM5B,EAAGwnC,EAAK53B,MAElC9O,EAAEhD,MAAQqoC,EAAAQ,MAAMiB,YAAYJ,EAAK1pC,OAAOgF,OAAOokC,EAAKzmC,OAAQ,IAE5DK,EAAEf,IAAM,SAAAC,GAAA,MAAKc,GAAEhD,MAAMgD,EAAEc,MAAM5B,KAE7Bc,EAAE2mC,KAAOtB,EAAAQ,MAAMe,WAAWF,EAAKhnC,OAAQM,EAAEhD,OAEtC5B,KAAK+qC,OAAO4B,QACX/nC,EAAE2mC,KAAKwE,UAAU/E,EAAKvmC,MAI1B,IAAIrC,GAAOpC,KAAKgrC,KAAKkB,YAEjBzlC,GAAU6lC,WAAWt9B,GAAG3C,IAAIjK,EAAM,SAAA9B,GAAA,MAAG0O,IAAG3C,IAAI/L,EAAEqQ,OAAQq6B,EAAKpmC,EAAEc,UAAU4mC,WAAWt9B,GAAG7G,IAAI/F,EAAM,SAAA9B,GAAA,MAAG0O,IAAG7G,IAAI7H,EAAEqQ,OAAQq6B,EAAKpmC,EAAEc,WAC1HqnC,GAAUtmC,EAAO,GAAGA,EAAO,IAAK6kC,EAAKuD,YACzCpoC,GAAO,IAAIsmC,EACXtmC,EAAO,IAAIsmC,EACX/B,EAAKpmC,EAAEhD,MAAM6E,OAAOA,M5C++UpBiN,IAAK,YACLhO,MAAO,W4C3+UP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZuB,EAAWvsC,KAAK+qC,OAAOrmC,EACvB6mC,EAAOxrC,EAAKysC,KAAKC,eAAe,KAAK1sC,EAAK2sC,YAAY,UAAU,IAAI3sC,EAAK2sC,YAAY,SAAS3sC,EAAKgrC,OAAO4B,OAAS,GAAK,IAAI5sC,EAAK2sC,YAAY,eAC5InqC,KAAK,YAAa,eAAiByoC,EAAKzmC,OAAS,KAElDqoC,EAAQrB,CACRxrC,GAAK6tC,sBACLhB,EAAQrB,EAAKtoC,aAAa4pC,KAAK79B,GAAG89B,eAGtCF,EAAM7rC,KAAKiqC,EAAKtmC,EAAE6mC,MAElBA,EAAKkB,eAAe,QAAQ1sC,EAAK2sC,YAAY,UACxCnqC,KAAK,YAAa,aAAeyoC,EAAKvmC,MAAM,EAAI,IAAMumC,EAAK+B,OAAOC,OAAS,KAC3EzqC,KAAK,KAAM,QACXW,MAAM,cAAe,UACrBQ,KAAK6oC,EAASxnC,U5C2+UnB2O,IAAK,YACLhO,MAAO,W4Cx+UP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KACZuB,EAAWvsC,KAAK+qC,OAAOnmC,EACvB2mC,EAAOxrC,EAAKysC,KAAKC,eAAe,KAAK1sC,EAAK2sC,YAAY,UAAU,IAAI3sC,EAAK2sC,YAAY,SAAS3sC,EAAKgrC,OAAO4B,OAAS,GAAK,IAAI5sC,EAAK2sC,YAAY,eAE7IE,EAAQrB,CACRxrC,GAAK6tC,sBACLhB,EAAQrB,EAAKtoC,aAAa4pC,KAAK79B,GAAG89B,eAGtCF,EAAM7rC,KAAKiqC,EAAKpmC,EAAE2mC,MAElBA,EAAKkB,eAAe,QAAQ1sC,EAAK2sC,YAAY,UACxCnqC,KAAK,YAAa,cAAeyoC,EAAK+B,OAAO/hC,KAAM,IAAKggC,EAAKzmC,OAAO,EAAG,gBACvEhC,KAAK,KAAM,OACXW,MAAM,cAAe,UACrBQ,KAAK6oC,EAASxnC,U5Cy+UnB2O,IAAK,SACLhO,MAAO,S4Cv+UJuoC,GACHxE,EAAA7jC,OAAAkkC,eAAA0T,EAAAvqC,WAAA,SAAAjT,MAAAe,KAAAf,KAAaiuC,GACbjuC,KAAKkuC,YACLluC,KAAKmuC,YAELnuC,KAAKowD,gB5C0+UL18C,IAAK,aACLhO,MAAO,W4Cv+UP,GAAI3F,GAAOC,KACPgrC,EAAOjrC,EAAKirC,KAEZiC,GADOjC,EAAK5oC,KACCrC,EAAK2sC,YAAY,UAC9B2jB,EAAWtwD,EAAK2sC,YAAY,MAChC3sC,GAAKytD,mBAAqBztD,EAAK2sC,YAAY,iBAE3C,IAAI4jB,GAAgBvwD,EAAKysC,KAAKC,eAAe,KAAO1sC,EAAKytD,oBAErD3hB,EAAQykB,EAAcnuD,UAAU,KAAK8qC,GAAY7qC,KAAK4oC,EAAKkB,aAE3DqkB,EAAa1kB,EAAMxpC,QAAQ27C,eAAe,KAAK/Q,GAE/CE,EAAaojB,EAAW1+C,MAAMg6B,GAE9B+iB,EAAOzhB,EAAWhrC,UAAU,IAAMkuD,GACjCjuD,KAAK,SAAA0B,GAAA,MAAGA,GAAE6M,SAEX6/C,EAAY5B,EAAKvsD,QAAQC,OAAO,UAC/BC,KAAK,QAAS8tD,GAEfxB,EAAY2B,EAAU3+C,MAAM+8C,GAE5BE,EAAQD,CACR9uD,GAAK6tC,sBACLkhB,EAAQD,EAAU5rD,cAGtB6rD,EAAMvsD,KAAK,IAAKxC,EAAKgrC,OAAOgkB,WACvBxsD,KAAK,KAAMyoC,EAAKtmC,EAAEb,KAClBtB,KAAK,KAAMyoC,EAAKpmC,EAAEf,KAEnBmnC,EAAK+C,SACL8gB,EAAUppD,GAAG,YAAa,SAAA3B,GACtB,GAAIqtC,GAAO,IAAMnG,EAAKtmC,EAAEgB,MAAM5B,GAAK,KAAOknC,EAAKpmC,EAAEc,MAAM5B,GAAK,IACxDijB,EAAQhnB,EAAKgrC,OAAOmI,OAAUnzC,EAAKgrC,OAAOmI,OAAOxtC,MAAM3E,KAAKhB,EAAKgrC,OAAOjnC,GAAK,IACjF,IAAIijB,GAAmB,IAAVA,EAAa,CACtBA,EAAQikB,EAAKmJ,aAAaptB,GAC1BoqB,GAAQ,OACR,IAAIZ,GAAQxwC,EAAKgrC,OAAOmI,OAAO3C,KAC3BA,KACAY,GAAQZ,EAAQ,MAEpBY,GAAQpqB,EAEZhnB,EAAKyqC,YAAY2G,KAEhB1rC,GAAG,WAAY,SAAA3B,GACZ/D,EAAKiuC,gBAIbhD,EAAK8C,YACLX,EAAWjqC,MAAM,OAAQ8nC,EAAK8C,aACzB9C,EAAK1pC,OACVutD,EAAU3rD,MAAM,OAAQ8nC,EAAK1pC,OAGjCstD,EAAK5rD,OAAOG,SACZ0oC,EAAM7oC,OAAOG,a5Cy+UVq6C,GACTxT,EAAsBqE,wBAErBC,4BAA4B,GAAGvoC,WAAW,GAAGwoC,UAAU,KAAKkiB,IAAI,SAAS/vD,EAAQjB,EAAOD,GAC3F,Y6C1nVO,SAASkxD,GAAQC,EAAIC,GAC3B,GAAID,GAAM,GAAK/nD,KAAKC,IAAI8nD,GAAM/nD,KAAKC,IAAIgoD,EAAQF,KAAQ,EACtD,KAAM,iBAEP,IAAIC,GAAM,GAAKA,GAAM,EACpB,KAAM,iBAEP,OAAOE,GAAiBC,EAAMJ,EAAG,EAAGC,EAAG,IAwHxC,QAASI,GAAOJ,GACf,GAAIK,IAAMroD,KAAKoD,IAAI,EAAI4kD,GAAM,EAAIA,IAC7BM,EAAKtoD,KAAKsD,KACb+kD,GAAM,YACFA,GAAM,aACLA,mBACAA,mBACCA,GAAM,eACNA,GAAM,eACPA,kBACEA,GAAM,eACPA,mBACEA,GAAM,gBACH,gBAAJA,YAGR,OAFIL,GAAG,KACQM,GAAMA,GACdA,EA6BR,QAASH,GAAOJ,EAAIC,GAEnB,GAAIA,GAAM,GAAKA,GAAM,EACpB,KAAM,iBAGP,IAAU,IAANA,EACH,MAAO,EACD,IAAIA,EAAK,GACf,OAASG,EAAMJ,EAAI,EAAIC,EAGxB,IAAIO,GAAKH,EAAMJ,GACXQ,EAAMxoD,KAAKI,IAAImoD,EAAI,GAEnBE,GAAMD,EAAM,GAAK,EACjBE,IAAO,EAAIF,EAAM,IAAMA,EAAM,GAAK,GAClCG,KAAQ,EAAIH,EAAM,IAAMA,EAAM,IAAMA,EAAM,IAAM,IAChDI,MAAS,GAAKJ,EAAM,KAAOA,EAAM,MAAQA,EAAM,MAAQA,EAAM,KAC5D,MACDK,OAAU,GAAKL,EAAM,KAAOA,EAAM,KAAOA,EAAM,MAAQA,EAAM,KAAOA,EACpE,OAAS,OAETF,EAAKC,GAAM,GAAKE,GAAMC,GAAMC,GAAMC,EAAKC,EAAKd,GAAMA,GAAMA,GAAMA,GAAMA,EAExE,IAAIA,GAAM/nD,KAAKI,IAAIyqB,EAAMm9B,GAAK,GAAK,EAAG,CACrC,GAAIc,EACJ,GAAG,CACF,GAAIC,GAAMC,EAAUjB,EAAIO,GACpBW,EAAMlB,EAAK,EACXmB,GAAUH,EAAMf,GACjBhoD,KAAKG,KAAK8oD,EAAMjpD,KAAKoD,IAAI6lD,GAAOlB,EAAKO,EAAKA,IACzCtoD,KAAKoD,IAAI2kD,EAAGkB,EAAI,EAAEjpD,KAAKqa,IAAM,GAC5B,EAAE4uC,EAAM,EAAElB,GAAM,GAAK,EAC1BO,IAAMY,EACNJ,EAASK,EAAmBD,EAAQlpD,KAAKC,IAAIgoD,EAAQp9B,EAAM7qB,KAAKC,IAAIqoD,IAAK,WAChEA,GAAkB,GAAVQ,GAEnB,MAAOR,GAGR,QAASU,GAAWjB,EAAIO,GAQvB,IAAK,GANDG,GACOC,EACPU,EAAKppD,KAAK+P,MAAMu4C,EAAKtoD,KAAKsD,KAAKykD,GAAK,GACpCsB,EAAKrpD,KAAKI,IAAIJ,KAAKgP,IAAIo6C,GAAK,GAC5Bf,EAAK,EAEAiB,EAAKvB,EAAG,EAAGuB,GAAM,EAAGA,GAAM,EAClCjB,EAAK,GAAKiB,EAAG,GAAKA,EAAKD,EAAKhB,CAU7B,OAPIN,GAAK,GAAK,GACbU,EAAKzoD,KAAKiP,IAAIm6C,GAAI,EAClBV,EAAK,KAELD,EAAY,GAANV,EAAW,EAAI/nD,KAAKiP,IAAIm6C,GAAIppD,KAAKgP,IAAIo6C,GAAIppD,KAAKqa,GACpDquC,EAAI,GAAKU,EAAGppD,KAAKqa,IAEX9a,EAAI,EAAG,EAAImpD,EAAKD,EAAKJ,GAuH7B,QAASx9B,GAAOk9B,GACf,MAAO/nD,MAAKoD,IAAI2kD,GAAM/nD,KAAKoD,IAAI,IAGhC,QAAS7D,KAER,IAAK,GADDgqD,GAAO5sD,UAAU,GACZ2sD,EAAK,EAAGvxD,EAAI4E,UAAUvE,OAAQL,IACpBwxD,EAAO5sD,UAAU2sD,KACbC,EAAO5sD,UAAU2sD,GAExC,OAAOC,GAYR,QAASlsC,GAAWirC,GACnB,MAAOtoD,MAAKC,IAAIgoD,EAAQp9B,EAAM7qB,KAAKC,IAAIqoD,IAAOkB,IAG/C,QAAStB,GAAkBI,GAC1B,MAAIA,GACIa,EAAmBb,EAAIjrC,EAAUirC,IAEjC,IAIT,QAASa,GAAoBb,EAAIN,GAGzB,MAFAM,IAAUtoD,KAAKI,IAAI,GAAI4nD,GACvBM,EAAKtoD,KAAKoa,MAAMkuC,GACTA,EAAKtoD,KAAKI,IAAI,GAAI4nD,GAGjC,QAASC,GAASqB,GACV,MAAIA,GAAK,EACMtpD,KAAKuC,MAAM+mD,GAEXtpD,KAAK4C,KAAK0mD,G7CivUjCtsD,OAAOC,eAAerG,EAAS,cAC9BkG,OAAO,IAERlG,E6C/nVgBkxD,OAAAA,CAnBhB,IAAI0B,GAAc,O7C+kWZC,IAAI,SAAS3xD,EAAQjB,EAAOD,GAClC,Y8CrqWA,IAAA8yD,GAAA5xD,EAAA,8BAEI6xD,EAAK9yD,EAAOD,QAAQm0C,kBACxB4e,GAAG7lD,kBAAoBhM,EAAQ,gEAC/B6xD,EAAGrpD,iBAAmBxI,EAAQ,+DAC9B6xD,EAAG3oD,qBAAuBlJ,EAAQ,oEAClC6xD,EAAG5pD,cAAgBjI,EAAQ,4DAC3B6xD,EAAGtkD,kBAAoBvN,EAAQ,gEAC/B6xD,EAAGzlD,wBAA0BpM,EAAQ,uEACrC6xD,EAAGpkD,SAAWzN,EAAQ,sDACtB6xD,EAAGxoD,KAAOrJ,EAAQ,kDAClB6xD,EAAG1jD,OAASnO,EAAQ,qDACpB6xD,EAAGC,cAAe,SAAAtrD,GAAA,MAAO0B,MAAKsD,KAAKqmD,EAAGpkD,SAASjH,IAAMA,EAAIlG,OAAO,KAChEuxD,EAAGpoD,SAAWzJ,EAAQ,sDAEtB6xD,EAAG1H,OAAQ,SAACF,EAAkBC,GAC1B,OAAO,EAAA0H,EAAA5B,QAAO/F,EAAkBC,M9C6qWjC6H,2DAA2D,EAAEC,8DAA8D,EAAEC,mEAAmE,EAAEC,iDAAiD,EAAEC,qDAAqD,EAAEC,+DAA+D,GAAGC,sEAAsE,GAAGC,+DAA+D,GAAGC,qDAAqD,GAAGC,oDAAoD,GAAGC,6BAA6B,KAAKC,IAAI,SAAS1yD,EAAQjB,EAAOD,GACzqB,YAUA,SAAS6zD,GAAgBlyD,EAAKuS,EAAKhO,GAAiK,MAApJgO,KAAOvS,GAAOyE,OAAOC,eAAe1E,EAAKuS,GAAOhO,MAAOA,EAAOkjC,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkB1nC,EAAIuS,GAAOhO,EAAgBvE,EAE3M,QAASgnC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAVhH1iC,OAAOC,eAAerG,EAAS,cAC3BkG,OAAO,GAGX,IAAI4tD,GAA4B,kBAAXC,SAAoD,gBAApBA,QAAOC,SAAwB,SAAUryD,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAXoyD,SAAyBpyD,EAAI+T,cAAgBq+C,OAAS,eAAkBpyD,IAEtOgoC,EAAe,WAAc,QAASC,GAAiB9W,EAAQ+W,GAAS,IAAK,GAAI1oC,GAAI,EAAGA,EAAI0oC,EAAMroC,OAAQL,IAAK,CAAE,GAAI2oC,GAAaD,EAAM1oC,EAAI2oC,GAAWV,WAAaU,EAAWV,aAAc,EAAOU,EAAWR,cAAe,EAAU,SAAWQ,KAAYA,EAAWT,UAAW,GAAMjjC,OAAOC,eAAeysB,EAAQgX,EAAW51B,IAAK41B,IAAiB,MAAO,UAAUjB,EAAakB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBf,EAAYp1B,UAAWs2B,GAAiBC,GAAaJ,EAAiBf,EAAamB,GAAqBnB,M+CtsWnhBoC,E/C4sWDjrC,E+C5sWCirC,M/C4sWe,WACxB,QAASA,KACLtC,EAAgBnoC,KAAMyqC,GAuR1B,MApRAtB,GAAasB,EAAO,OAChB/2B,IAAK,aAGLhO,MAAO,S+CltWOyf,GAEd,GAAIywB,GAAQ51C,MAIPmlB,GAAO5f,UAAUvE,OAAS,GAAKuJ,MAAMC,QAAQjF,UAAU,MACxD4f,MAEJA,EAAMA,KAEN,KAAK,GAAIxkB,GAAI,EAAGA,EAAI4E,UAAUvE,OAAQL,IAAK,CACvC,GAAIkuB,GAAStpB,UAAU5E,EACvB,IAAKkuB,EAGL,IAAK,GAAInb,KAAOmb,GACZ,GAAKA,EAAO/X,eAAepD,GAA3B,CAGA,GAAIlJ,GAAUD,MAAMC,QAAQ2a,EAAIzR,IAC5BggC,EAAWkC,EAAMlC,SAASvuB,EAAIzR,IAC9B+/C,EAAS7d,EAAMlC,SAAS7kB,EAAOnb,GAE/BggC,KAAalpC,GAAWipD,EACxB7d,EAAMjL,WAAWxlB,EAAIzR,GAAMmb,EAAOnb,IAElCyR,EAAIzR,GAAOmb,EAAOnb,IAK9B,MAAOyR,M/CmtWPzR,IAAK,YACLhO,MAAO,S+CjtWM4sB,EAAQzD,GACrB,GAAI8D,GAAS/sB,OAAO8tD,UAAWphC,EAa/B,OAZImY,GAAMmO,iBAAiBtmB,IAAWmY,EAAMmO,iBAAiB/pB,IACzDjpB,OAAOoO,KAAK6a,GAAQsd,QAAQ,SAAAz4B,GACpB+2B,EAAMmO,iBAAiB/pB,EAAOnb,KACxBA,IAAO4e,GAGTK,EAAOjf,GAAO+2B,EAAMkpB,UAAUrhC,EAAO5e,GAAMmb,EAAOnb,IAEtD9N,OAAO8tD,OAAO/gC,EAAd0gC,KAAwB3/C,EAAMmb,EAAOnb,OAI1Cif,K/CitWPjf,IAAK,QACLhO,MAAO,S+C/sWEjF,EAAG2I,GACZ,GAAwCzI,GAAG2L,EAAvCqD,KAAQvP,EAAIK,EAAEO,OAAQmI,EAAIC,EAAEpI,MAChC,KAAKL,OAAUA,EAAIP,GAAI,IAAKkM,OAAUA,EAAInD,GAAIwG,EAAEpJ,MAAM7B,EAAGjE,EAAEE,GAAIA,EAAGA,EAAGiE,EAAGwE,EAAEkD,GAAIA,EAAGA,GACjF,OAAOqD,M/CytWP+D,IAAK,iBACLhO,MAAO,S+CvtWWtD,EAAMshD,EAAUkQ,GAClC,GAAIC,KACJ,KAAIzxD,EACA,MAAOyxD,EAGX,IAAIzxD,EAAKpB,OAAQ,CACb,GAAI8C,GAAI1B,EAAK,EACb,IAAI0B,YAAayG,OACbspD,EAAM/vD,EAAED,IAAI,SAAUqK,EAAGvN,GACrB,MAAOA,SAER,IAAiB,YAAb,mBAAOmD,GAAP,YAAAwvD,EAAOxvD,IAEd,IAAK,GAAIgwD,KAAQhwD,GACRA,EAAEgT,eAAeg9C,IAEtBD,EAAIttD,KAAKutD,GAIrB,GAAiB,OAAbpQ,GAAkC9xB,SAAb8xB,IAA2BkQ,EAAc,CAC9D,GAAI7pC,GAAQ8pC,EAAI/vC,QAAQ4/B,EACpB35B,OACA8pC,EAAIze,OAAOrrB,EAAO,GAG1B,MAAO8pC,M/C0tWPngD,IAAK,mBACLhO,MAAO,S+CxtWaquD,GACpB,MAAQA,IAAwB,YAAhB,mBAAOA,GAAP,YAAAT,EAAOS,MAAsBxpD,MAAMC,QAAQupD,IAAkB,OAATA,K/C2tWpErgD,IAAK,WACLhO,MAAO,S+CztWKjF,GACZ,MAAa,QAANA,GAA2B,YAAb,mBAAOA,GAAP,YAAA6yD,EAAO7yD,O/C4tW5BiT,IAAK,WACLhO,MAAO,S+C1tWKjF,GACZ,OAAQiN,MAAMjN,IAAmB,gBAANA,M/C6tW3BiT,IAAK,aACLhO,MAAO,S+C3tWOjF,GACd,MAAoB,kBAANA,M/C8tWdiT,IAAK,SACLhO,MAAO,S+C5tWGjF,GACV,MAA6C,kBAAtCmF,OAAOqN,UAAU8P,SAAShiB,KAAKN,M/C+tWtCiT,IAAK,WACLhO,MAAO,S+C7tWKjF,GACZ,MAAoB,gBAANA,IAAkBA,YAAagyC,W/CguW7C/+B,IAAK,yBACLhO,MAAO,S+C9tWmBgQ,EAAQinC,EAAUqX,EAAWjW,GAKvD,IAHA,GAAIkW,GAAgBtX,EAAS/4B,MAAM,YAC/BswC,EAAUx+C,EAAOs+C,GAAWC,EAAc9iD,QAAS4sC,GAEhDkW,EAAcjzD,OAAS,GAAG,CAC7B,GAAImzD,GAAmBF,EAAc9iD,QACjCijD,EAAeH,EAAc9iD,OACR,OAArBgjD,EACAD,EAAUA,EAAQhjB,QAAQkjB,GAAc,GACZ,MAArBD,IACPD,EAAUA,EAAQ3xD,KAAK,KAAM6xD,IAGrC,MAAOF,M/CiuWPxgD,IAAK,iBACLhO,MAAO,S+C/tWWgQ,EAAQinC,EAAUoB,GACpC,MAAOtT,GAAM4pB,uBAAuB3+C,EAAQinC,EAAU,SAAUoB,M/CkuWhErqC,IAAK,iBACLhO,MAAO,S+ChuWWgQ,EAAQinC,GAC1B,MAAOlS,GAAM4pB,uBAAuB3+C,EAAQinC,EAAU,a/CmuWtDjpC,IAAK,iBACLhO,MAAO,S+CjuWWgQ,EAAQinC,EAAUuX,GACpC,GAAIrW,GAAYnoC,EAAOhT,OAAOi6C,EAC9B,OAAIkB,GAAUvoC,QACN4+C,EACOx+C,EAAOpT,OAAO4xD,GAElBzpB,EAAMuT,eAAetoC,EAAQinC,GAGjCkB,K/CmuWPnqC,IAAK,iBACLhO,MAAO,S+CjuWWgQ,EAAQinC,EAAUoB,GACpC,GAAIF,GAAYnoC,EAAOhT,OAAOi6C,EAC9B,OAAIkB,GAAUvoC,QACHm1B,EAAMqT,eAAepoC,EAAQinC,EAAUoB,GAE3CF,K/CouWPnqC,IAAK,iBACLhO,MAAO,QAASskD,G+CluWExoD,EAAKuoD,EAAYnjD,EAAOoK,EAAI47C,EAAI0H,EAAIC,GACtD,GAAIC,GAAO/pB,EAAMgC,eAAejrC,EAAK,QACjCwoD,EAAiBwK,EAAKlyD,OAAO,kBAC5BC,KAAK,KAAMwnD,EAEhBC,GACKznD,KAAK,KAAMyO,EAAK,KAChBzO,KAAK,KAAMqqD,EAAK,KAChBrqD,KAAK,KAAM+xD,EAAK,KAChB/xD,KAAK,KAAMgyD,EAAK,IAGrB,IAAIE,GAAQzK,EAAe7nD,UAAU,QAChCC,KAAKwE,GAEN8tD,EAAaD,EAAMpyD,QAAQC,OAAO,QAAQuP,MAAM4iD,EAEpDC,GAAWnyD,KAAK,SAAU,SAACuB,EAAGnD,GAAJ,MAAUA,IAAKiG,EAAM5F,OAAS,KACnDuB,KAAK,aAAc,SAAAuB,GAAA,MAAKA,KAE7B2wD,EAAMzxD,OAAOG,Y/CkuWbuQ,IAAK,OACLhO,MAAO,W+C/sWP,QAASivD,KACL,MAAO/rD,MAAKuC,MAA4B,OAArB,EAAIvC,KAAK8J,WACvBqQ,SAAS,IACT+B,UAAU,GAGnB,MAAO6vC,KAAOA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAC3CA,IAAO,IAAMA,IAAOA,IAAOA,O/CmtW/BjhD,IAAK,wBACLhO,MAAO,S+ChtWkBkvD,EAAWC,EAAYpwD,GAChD,GAAIqwD,GAAUF,EAAU7c,MACxB+c,GAAQC,YAAYF,CAEpB,IAAI9nB,GAAS,EACTioB,EAAiB,CAErB,IAAIF,EAAQG,wBAAwBxwD,EAAMsoC,EAAO,CAC7C,IAAK,GAAIroC,GAAEmwD,EAAW7zD,OAAO,EAAE0D,EAAE,EAAEA,GAAG,EAClC,GAAIowD,EAAQI,mBAAmB,EAAExwD,GAAGswD,GAAgBvwD,EAAMsoC,EAEtD,MADA+nB,GAAQC,YAAYF,EAAW/vC,UAAU,EAAEpgB,GAAG,OACvC,CAIf,OADAowD,GAAQC,YAAY,OACb,EAEX,OAAO,K/CmtWPrhD,IAAK,kCACLhO,MAAO,S+CjtW4BkvD,EAAWC,EAAYpwD,EAAOspC,GACjE,GAAIonB,GAAiB1qB,EAAM2qB,sBAAsBR,EAAWC,EAAYpwD,EACrE0wD,IAAkBpnB,IACjB6mB,EAAUnvD,GAAG,YAAa,SAAU3B,GAChCiqC,EAAQ9qC,aACH8qB,SAAS,KACT7qB,MAAM,UAAW,IACtB6qC,EAAQoD,KAAK0jB,GACR3xD,MAAM,OAAS8L,GAAG4oC,MAAMQ,MAAQ,EAAK,MACrCl1C,MAAM,MAAQ8L,GAAG4oC,MAAMS,MAAQ,GAAM,QAG9Cuc,EAAUnvD,GAAG,WAAY,SAAU3B,GAC/BiqC,EAAQ9qC,aACH8qB,SAAS,KACT7qB,MAAM,UAAW,S/CgtW9BwQ,IAAK,cACLhO,MAAO,S+C3sWQwuD,GACf,MAAOr0D,QAAOsrB,iBAAiB+oC,EAAS,MAAM7oC,iBAAiB,gB/C8sW/D3X,IAAK,wBACLhO,MAAO,S+C5sWkB4jB,GACzB,MAAOA,GAAOqR,OAAO,GAAG9S,cAAgByB,EAAOhhB,MAAM,M/C+sWrDoL,IAAK,cACLhO,MAAO,S+C7sWQ2vD,GACf,GAAIC,GAAoB,QAAQ7qB,EAAM6H,sBAAsB+iB,EAC5D,KACI,MAAOrmD,IAAGsmD,KACb,MAAOp1D,GACJ,KAAM,iCAAiCm1D,EAAW,KAAKC,EAAkB,Q/CitW7E5hD,IAAK,aACLhO,MAAO,S+C9sWOpB,EAAQ1C,GACtB,GAAI2zD,GAAa,OAAO9qB,EAAM6H,sBAAsBhuC,EACpD,KACI,MAAO0K,IAAGumD,GAAY3zD,GACzB,MAAO1B,GACJ,KAAM,uCAAuCoE,O/CmtW9CmmC,I+Cr+WEA,GACF2R,OAAS,cADP3R,EAuLF+qB,eAAiB,SAAUjxD,EAAQkwC,GACtC,MAAQlwC,IAAU0R,SAASw+B,EAAUvxC,MAAM,UAAW,KAAO,KAxLxDunC,EA2LFgrB,cAAgB,SAAUhxD,EAAOgwC,GACpC,MAAQhwC,IAASwR,SAASw+B,EAAUvxC,MAAM,SAAU,KAAO,KA5LtDunC,EA+LF0N,gBAAkB,SAAU5zC,EAAQkwC,EAAW1H,GAClD,MAAOnkC,MAAKT,IAAI,EAAGsiC,EAAM+qB,eAAejxD,EAAQkwC,GAAa1H,EAAOuI,IAAMvI,EAAOC,SAhM5EvC,EAmMFyN,eAAiB,SAAUzzC,EAAOgwC,EAAW1H,GAChD,MAAOnkC,MAAKT,IAAI,EAAGsiC,EAAMgrB,cAAchxD,EAAOgwC,GAAa1H,EAAO/hC,KAAO+hC,EAAO9hC,kB/CszW7E,KAAK","file":"odc-d3.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.ODCD3 = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = color;\n\nvar _legend = require('./legend');\n\nvar _legend2 = _interopRequireDefault(_legend);\n\nvar _d3Dispatch = require('d3-dispatch');\n\nvar _d3Scale = require('d3-scale');\n\nvar _d3Format = require('d3-format');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction color() {\n\n  var scale = (0, _d3Scale.scaleLinear)(),\n      shape = \"rect\",\n      shapeWidth = 15,\n      shapeHeight = 15,\n      shapeRadius = 10,\n      shapePadding = 2,\n      cells = [5],\n      labels = [],\n      classPrefix = \"\",\n      useClass = false,\n      title = \"\",\n      labelFormat = (0, _d3Format.format)(\".01f\"),\n      labelOffset = 10,\n      labelAlign = \"middle\",\n      labelDelimiter = \"to\",\n      orient = \"vertical\",\n      ascending = false,\n      path,\n      legendDispatcher = (0, _d3Dispatch.dispatch)(\"cellover\", \"cellout\", \"cellclick\");\n\n  function legend(svg) {\n\n    var type = _legend2.default.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\n        legendG = svg.selectAll('g').data([scale]);\n\n    legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\n\n    var cell = svg.select('.' + classPrefix + 'legendCells').selectAll(\".\" + classPrefix + \"cell\").data(type.data),\n        cellEnter = cell.enter().append(\"g\").attr(\"class\", classPrefix + \"cell\"),\n        //.merge(cell).style(\"opacity\", 1e-6),\n    shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\n        shapes = svg.selectAll(\"g.\" + classPrefix + \"cell \" + shape);\n\n    //add event handlers\n    _legend2.default.d3_addEvents(cellEnter, legendDispatcher);\n\n    cell.exit().transition().style(\"opacity\", 0).remove();\n\n    _legend2.default.d3_drawShapes(shape, shapes, shapeHeight, shapeWidth, shapeRadius, path);\n\n    _legend2.default.d3_addText(svg, cellEnter, type.labels, classPrefix);\n\n    // sets placement\n    var text = cellEnter.selectAll(\"text\"),\n        shapeSize = shapes.nodes().map(function (d) {\n      return d.getBBox();\n    });\n\n    //sets scale\n    //everything is fill except for line which is stroke,\n    if (!useClass) {\n      if (shape == \"line\") {\n        shapes.style(\"stroke\", type.feature);\n      } else {\n        shapes.style(\"fill\", type.feature);\n      }\n    } else {\n      shapes.attr(\"class\", function (d) {\n        return classPrefix + \"swatch \" + type.feature(d);\n      });\n    }\n\n    var cellTrans,\n        textTrans,\n        textAlign = labelAlign == \"start\" ? 0 : labelAlign == \"middle\" ? 0.5 : 1;\n\n    //positions cells and text\n    if (orient === \"vertical\") {\n      cellTrans = function cellTrans(d, i) {\n        return \"translate(0, \" + i * (shapeSize[i].height + shapePadding) + \")\";\n      };\n      textTrans = function textTrans(d, i) {\n        return \"translate(\" + (shapeSize[i].width + shapeSize[i].x + labelOffset) + \",\" + (shapeSize[i].y + shapeSize[i].height / 2 + 5) + \")\";\n      };\n    } else if (orient === \"horizontal\") {\n      cellTrans = function cellTrans(d, i) {\n        return \"translate(\" + i * (shapeSize[i].width + shapePadding) + \",0)\";\n      };\n      textTrans = function textTrans(d, i) {\n        return \"translate(\" + (shapeSize[i].width * textAlign + shapeSize[i].x) + \",\" + (shapeSize[i].height + shapeSize[i].y + labelOffset + 8) + \")\";\n      };\n    }\n\n    _legend2.default.d3_placement(orient, cellEnter, cellTrans, text, textTrans, labelAlign);\n    _legend2.default.d3_title(svg, title, classPrefix);\n\n    cell.transition().style(\"opacity\", 1);\n  }\n\n  legend.scale = function (_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return legend;\n  };\n\n  legend.cells = function (_) {\n    if (!arguments.length) return cells;\n    if (_.length > 1 || _ >= 2) {\n      cells = _;\n    }\n    return legend;\n  };\n\n  legend.shape = function (_, d) {\n    if (!arguments.length) return shape;\n    if (_ == \"rect\" || _ == \"circle\" || _ == \"line\" || _ == \"path\" && typeof d === 'string') {\n      shape = _;\n      path = d;\n    }\n    return legend;\n  };\n\n  legend.shapeWidth = function (_) {\n    if (!arguments.length) return shapeWidth;\n    shapeWidth = +_;\n    return legend;\n  };\n\n  legend.shapeHeight = function (_) {\n    if (!arguments.length) return shapeHeight;\n    shapeHeight = +_;\n    return legend;\n  };\n\n  legend.shapeRadius = function (_) {\n    if (!arguments.length) return shapeRadius;\n    shapeRadius = +_;\n    return legend;\n  };\n\n  legend.shapePadding = function (_) {\n    if (!arguments.length) return shapePadding;\n    shapePadding = +_;\n    return legend;\n  };\n\n  legend.labels = function (_) {\n    if (!arguments.length) return labels;\n    labels = _;\n    return legend;\n  };\n\n  legend.labelAlign = function (_) {\n    if (!arguments.length) return labelAlign;\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _;\n    }\n    return legend;\n  };\n\n  legend.labelFormat = function (_) {\n    if (!arguments.length) return labelFormat;\n    labelFormat = _;\n    return legend;\n  };\n\n  legend.labelOffset = function (_) {\n    if (!arguments.length) return labelOffset;\n    labelOffset = +_;\n    return legend;\n  };\n\n  legend.labelDelimiter = function (_) {\n    if (!arguments.length) return labelDelimiter;\n    labelDelimiter = _;\n    return legend;\n  };\n\n  legend.useClass = function (_) {\n    if (!arguments.length) return useClass;\n    if (_ === true || _ === false) {\n      useClass = _;\n    }\n    return legend;\n  };\n\n  legend.orient = function (_) {\n    if (!arguments.length) return orient;\n    _ = _.toLowerCase();\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _;\n    }\n    return legend;\n  };\n\n  legend.ascending = function (_) {\n    if (!arguments.length) return ascending;\n    ascending = !!_;\n    return legend;\n  };\n\n  legend.classPrefix = function (_) {\n    if (!arguments.length) return classPrefix;\n    classPrefix = _;\n    return legend;\n  };\n\n  legend.title = function (_) {\n    if (!arguments.length) return title;\n    title = _;\n    return legend;\n  };\n\n  legend.on = function () {\n    var value = legendDispatcher.on.apply(legendDispatcher, arguments);\n    return value === legendDispatcher ? legend : value;\n  };\n\n  return legend;\n};\n\n},{\"./legend\":2,\"d3-dispatch\":24,\"d3-format\":25,\"d3-scale\":27}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n\n  d3_identity: function d3_identity(d) {\n    return d;\n  },\n\n  d3_mergeLabels: function d3_mergeLabels(gen, labels) {\n\n    if (labels.length === 0) return gen;\n\n    gen = gen ? gen : [];\n\n    var i = labels.length;\n    for (; i < gen.length; i++) {\n      labels.push(gen[i]);\n    }\n    return labels;\n  },\n\n  d3_linearLegend: function d3_linearLegend(scale, cells, labelFormat) {\n    var data = [];\n\n    if (cells.length > 1) {\n      data = cells;\n    } else {\n      var domain = scale.domain(),\n          increment = (domain[domain.length - 1] - domain[0]) / (cells - 1),\n          i = 0;\n\n      for (; i < cells; i++) {\n        data.push(domain[0] + i * increment);\n      }\n    }\n\n    var labels = data.map(labelFormat);\n\n    return { data: data,\n      labels: labels,\n      feature: function feature(d) {\n        return scale(d);\n      } };\n  },\n\n  d3_quantLegend: function d3_quantLegend(scale, labelFormat, labelDelimiter) {\n    var labels = scale.range().map(function (d) {\n      var invert = scale.invertExtent(d),\n          a = labelFormat(invert[0]),\n          b = labelFormat(invert[1]);\n\n      return labelFormat(invert[0]) + \" \" + labelDelimiter + \" \" + labelFormat(invert[1]);\n    });\n\n    return { data: scale.range(),\n      labels: labels,\n      feature: this.d3_identity\n    };\n  },\n\n  d3_ordinalLegend: function d3_ordinalLegend(scale) {\n    return { data: scale.domain(),\n      labels: scale.domain(),\n      feature: function feature(d) {\n        return scale(d);\n      } };\n  },\n\n  d3_drawShapes: function d3_drawShapes(shape, shapes, shapeHeight, shapeWidth, shapeRadius, path) {\n    if (shape === \"rect\") {\n      shapes.attr(\"height\", shapeHeight).attr(\"width\", shapeWidth);\n    } else if (shape === \"circle\") {\n      shapes.attr(\"r\", shapeRadius); //.attr(\"cx\", shapeRadius).attr(\"cy\", shapeRadius);\n    } else if (shape === \"line\") {\n      shapes.attr(\"x1\", 0).attr(\"x2\", shapeWidth).attr(\"y1\", 0).attr(\"y2\", 0);\n    } else if (shape === \"path\") {\n      shapes.attr(\"d\", path);\n    }\n  },\n\n  d3_addText: function d3_addText(svg, enter, labels, classPrefix) {\n    enter.append(\"text\").attr(\"class\", classPrefix + \"label\");\n    svg.selectAll(\"g.\" + classPrefix + \"cell text\").data(labels).text(this.d3_identity);\n  },\n\n  d3_calcType: function d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter) {\n    var type = scale.invertExtent ? this.d3_quantLegend(scale, labelFormat, labelDelimiter) : scale.ticks ? this.d3_linearLegend(scale, cells, labelFormat) : this.d3_ordinalLegend(scale);\n\n    type.labels = this.d3_mergeLabels(type.labels, labels);\n\n    if (ascending) {\n      type.labels = this.d3_reverse(type.labels);\n      type.data = this.d3_reverse(type.data);\n    }\n\n    return type;\n  },\n\n  d3_reverse: function d3_reverse(arr) {\n    var mirror = [];\n    for (var i = 0, l = arr.length; i < l; i++) {\n      mirror[i] = arr[l - i - 1];\n    }\n    return mirror;\n  },\n\n  d3_placement: function d3_placement(orient, cell, cellTrans, text, textTrans, labelAlign) {\n    cell.attr(\"transform\", cellTrans);\n    text.attr(\"transform\", textTrans);\n    if (orient === \"horizontal\") {\n      text.style(\"text-anchor\", labelAlign);\n    }\n  },\n\n  d3_addEvents: function d3_addEvents(cells, dispatcher) {\n    var _ = this;\n\n    cells.on(\"mouseover.legend\", function (d) {\n      _.d3_cellOver(dispatcher, d, this);\n    }).on(\"mouseout.legend\", function (d) {\n      _.d3_cellOut(dispatcher, d, this);\n    }).on(\"click.legend\", function (d) {\n      _.d3_cellClick(dispatcher, d, this);\n    });\n  },\n\n  d3_cellOver: function d3_cellOver(cellDispatcher, d, obj) {\n    cellDispatcher.call(\"cellover\", obj, d);\n  },\n\n  d3_cellOut: function d3_cellOut(cellDispatcher, d, obj) {\n    cellDispatcher.call(\"cellout\", obj, d);\n  },\n\n  d3_cellClick: function d3_cellClick(cellDispatcher, d, obj) {\n    cellDispatcher.call(\"cellclick\", obj, d);\n  },\n\n  d3_title: function d3_title(svg, title, classPrefix) {\n    if (title !== \"\") {\n\n      var titleText = svg.selectAll('text.' + classPrefix + 'legendTitle');\n\n      titleText.data([title]).enter().append('text').attr('class', classPrefix + 'legendTitle');\n\n      svg.selectAll('text.' + classPrefix + 'legendTitle').text(title);\n\n      var cellsSvg = svg.select('.' + classPrefix + 'legendCells');\n\n      var yOffset = svg.select('.' + classPrefix + 'legendTitle').nodes().map(function (d) {\n        return d.getBBox().height;\n      })[0],\n          xOffset = -cellsSvg.nodes().map(function (d) {\n        return d.getBBox().x;\n      })[0];\n\n      cellsSvg.attr('transform', 'translate(' + xOffset + ',' + (yOffset + 10) + ')');\n    }\n  }\n};\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = size;\n\nvar _legend = require('./legend');\n\nvar _legend2 = _interopRequireDefault(_legend);\n\nvar _d3Dispatch = require('d3-dispatch');\n\nvar _d3Scale = require('d3-scale');\n\nvar _d3Format = require('d3-format');\n\nvar _d3Array = require('d3-array');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction size() {\n\n  var scale = (0, _d3Scale.scaleLinear)(),\n      shape = \"rect\",\n      shapeWidth = 15,\n      shapePadding = 2,\n      cells = [5],\n      labels = [],\n      useStroke = false,\n      classPrefix = \"\",\n      title = \"\",\n      labelFormat = (0, _d3Format.format)(\".01f\"),\n      labelOffset = 10,\n      labelAlign = \"middle\",\n      labelDelimiter = \"to\",\n      orient = \"vertical\",\n      ascending = false,\n      path,\n      legendDispatcher = (0, _d3Dispatch.dispatch)(\"cellover\", \"cellout\", \"cellclick\");\n\n  function legend(svg) {\n\n    var type = _legend2.default.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\n        legendG = svg.selectAll('g').data([scale]);\n\n    legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\n\n    var cell = svg.select('.' + classPrefix + 'legendCells').selectAll(\".\" + classPrefix + \"cell\").data(type.data),\n        cellEnter = cell.enter().append(\"g\").attr(\"class\", classPrefix + \"cell\"),\n        //.merge(cell).style(\"opacity\", 1e-6),\n    shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\n        shapes = svg.selectAll(\"g.\" + classPrefix + \"cell \" + shape);\n\n    //add event handlers\n    _legend2.default.d3_addEvents(cellEnter, legendDispatcher);\n\n    cell.exit().transition().style(\"opacity\", 0).remove();\n\n    //creates shape\n    if (shape === \"line\") {\n      _legend2.default.d3_drawShapes(shape, shapes, 0, shapeWidth);\n      shapes.attr(\"stroke-width\", type.feature);\n    } else {\n      _legend2.default.d3_drawShapes(shape, shapes, type.feature, type.feature, type.feature, path);\n    }\n\n    _legend2.default.d3_addText(svg, cellEnter, type.labels, classPrefix);\n\n    //sets placement\n    var text = cellEnter.selectAll(\"text\"),\n        shapeSize = shapes.nodes().map(function (d, i) {\n      var bbox = d.getBBox();\n      var stroke = scale(type.data[i]);\n\n      if (shape === \"line\" && orient === \"horizontal\") {\n        bbox.height = bbox.height + stroke;\n      } else if (shape === \"line\" && orient === \"vertical\") {\n        bbox.width = bbox.width;\n      }\n\n      return bbox;\n    });\n\n    var maxH = (0, _d3Array.max)(shapeSize, function (d) {\n      return d.height + d.y;\n    }),\n        maxW = (0, _d3Array.max)(shapeSize, function (d) {\n      return d.width + d.x;\n    });\n\n    var cellTrans,\n        textTrans,\n        textAlign = labelAlign == \"start\" ? 0 : labelAlign == \"middle\" ? 0.5 : 1;\n\n    //positions cells and text\n    if (orient === \"vertical\") {\n\n      cellTrans = function cellTrans(d, i) {\n        var height = (0, _d3Array.sum)(shapeSize.slice(0, i + 1), function (d) {\n          return d.height;\n        });\n        return \"translate(0, \" + (height + i * shapePadding) + \")\";\n      };\n\n      textTrans = function textTrans(d, i) {\n        return \"translate(\" + (maxW + labelOffset) + \",\" + (shapeSize[i].y + shapeSize[i].height / 2 + 5) + \")\";\n      };\n    } else if (orient === \"horizontal\") {\n      cellTrans = function cellTrans(d, i) {\n        var width = (0, _d3Array.sum)(shapeSize.slice(0, i + 1), function (d) {\n          return d.width;\n        });\n        return \"translate(\" + (width + i * shapePadding) + \",0)\";\n      };\n\n      textTrans = function textTrans(d, i) {\n        return \"translate(\" + (shapeSize[i].width * textAlign + shapeSize[i].x) + \",\" + (maxH + labelOffset) + \")\";\n      };\n    }\n\n    _legend2.default.d3_placement(orient, cellEnter, cellTrans, text, textTrans, labelAlign);\n    _legend2.default.d3_title(svg, title, classPrefix);\n\n    cell.transition().style(\"opacity\", 1);\n  }\n\n  legend.scale = function (_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return legend;\n  };\n\n  legend.cells = function (_) {\n    if (!arguments.length) return cells;\n    if (_.length > 1 || _ >= 2) {\n      cells = _;\n    }\n    return legend;\n  };\n\n  legend.shape = function (_, d) {\n    if (!arguments.length) return shape;\n    if (_ == \"rect\" || _ == \"circle\" || _ == \"line\") {\n      shape = _;\n      path = d;\n    }\n    return legend;\n  };\n\n  legend.shapeWidth = function (_) {\n    if (!arguments.length) return shapeWidth;\n    shapeWidth = +_;\n    return legend;\n  };\n\n  legend.shapePadding = function (_) {\n    if (!arguments.length) return shapePadding;\n    shapePadding = +_;\n    return legend;\n  };\n\n  legend.labels = function (_) {\n    if (!arguments.length) return labels;\n    labels = _;\n    return legend;\n  };\n\n  legend.labelAlign = function (_) {\n    if (!arguments.length) return labelAlign;\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _;\n    }\n    return legend;\n  };\n\n  legend.labelFormat = function (_) {\n    if (!arguments.length) return labelFormat;\n    labelFormat = _;\n    return legend;\n  };\n\n  legend.labelOffset = function (_) {\n    if (!arguments.length) return labelOffset;\n    labelOffset = +_;\n    return legend;\n  };\n\n  legend.labelDelimiter = function (_) {\n    if (!arguments.length) return labelDelimiter;\n    labelDelimiter = _;\n    return legend;\n  };\n\n  legend.orient = function (_) {\n    if (!arguments.length) return orient;\n    _ = _.toLowerCase();\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _;\n    }\n    return legend;\n  };\n\n  legend.ascending = function (_) {\n    if (!arguments.length) return ascending;\n    ascending = !!_;\n    return legend;\n  };\n\n  legend.classPrefix = function (_) {\n    if (!arguments.length) return classPrefix;\n    classPrefix = _;\n    return legend;\n  };\n\n  legend.title = function (_) {\n    if (!arguments.length) return title;\n    title = _;\n    return legend;\n  };\n\n  legend.on = function () {\n    var value = legendDispatcher.on.apply(legendDispatcher, arguments);\n    return value === legendDispatcher ? legend : value;\n  };\n\n  return legend;\n};\n\n},{\"./legend\":2,\"d3-array\":21,\"d3-dispatch\":24,\"d3-format\":25,\"d3-scale\":27}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = symbol;\n\nvar _legend = require('./legend');\n\nvar _legend2 = _interopRequireDefault(_legend);\n\nvar _d3Dispatch = require('d3-dispatch');\n\nvar _d3Scale = require('d3-scale');\n\nvar _d3Format = require('d3-format');\n\nvar _d3Array = require('d3-array');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction symbol() {\n\n  var scale = (0, _d3Scale.scaleLinear)(),\n      shape = \"path\",\n      shapeWidth = 15,\n      shapeHeight = 15,\n      shapeRadius = 10,\n      shapePadding = 5,\n      cells = [5],\n      labels = [],\n      classPrefix = \"\",\n      useClass = false,\n      title = \"\",\n      labelFormat = (0, _d3Format.format)(\".01f\"),\n      labelAlign = \"middle\",\n      labelOffset = 10,\n      labelDelimiter = \"to\",\n      orient = \"vertical\",\n      ascending = false,\n      legendDispatcher = (0, _d3Dispatch.dispatch)(\"cellover\", \"cellout\", \"cellclick\");\n\n  function legend(svg) {\n\n    var type = _legend2.default.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\n        legendG = svg.selectAll('g').data([scale]);\n\n    legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\n\n    var cell = svg.select('.' + classPrefix + 'legendCells').selectAll(\".\" + classPrefix + \"cell\").data(type.data),\n        cellEnter = cell.enter().append(\"g\").attr(\"class\", classPrefix + \"cell\"),\n        //.style(\"opacity\", 1e-6),\n    shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\n        shapes = svg.selectAll(\"g.\" + classPrefix + \"cell \" + shape);\n\n    //add event handlers\n    _legend2.default.d3_addEvents(cellEnter, legendDispatcher);\n\n    //remove old shapes\n    cell.exit().transition().style(\"opacity\", 0).remove();\n\n    _legend2.default.d3_drawShapes(shape, shapes, shapeHeight, shapeWidth, shapeRadius, type.feature);\n    _legend2.default.d3_addText(svg, cellEnter, type.labels, classPrefix);\n\n    // sets placement\n    var text = cellEnter.selectAll(\"text\"),\n        shapeSize = shapes.nodes().map(function (d) {\n      return d.getBBox();\n    });\n\n    var maxH = (0, _d3Array.max)(shapeSize, function (d) {\n      return d.height;\n    }),\n        maxW = (0, _d3Array.max)(shapeSize, function (d) {\n      return d.width;\n    });\n\n    var cellTrans,\n        textTrans,\n        textAlign = labelAlign == \"start\" ? 0 : labelAlign == \"middle\" ? 0.5 : 1;\n\n    //positions cells and text\n    if (orient === \"vertical\") {\n      cellTrans = function cellTrans(d, i) {\n        return \"translate(0, \" + i * (maxH + shapePadding) + \")\";\n      };\n      textTrans = function textTrans(d, i) {\n        return \"translate(\" + (maxW + labelOffset) + \",\" + (shapeSize[i].y + shapeSize[i].height / 2 + 5) + \")\";\n      };\n    } else if (orient === \"horizontal\") {\n      cellTrans = function cellTrans(d, i) {\n        return \"translate(\" + i * (maxW + shapePadding) + \",0)\";\n      };\n      textTrans = function textTrans(d, i) {\n        return \"translate(\" + (shapeSize[i].width * textAlign + shapeSize[i].x) + \",\" + (maxH + labelOffset) + \")\";\n      };\n    }\n\n    _legend2.default.d3_placement(orient, cellEnter, cellTrans, text, textTrans, labelAlign);\n    _legend2.default.d3_title(svg, title, classPrefix);\n    cell.transition().style(\"opacity\", 1);\n  }\n\n  legend.scale = function (_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return legend;\n  };\n\n  legend.cells = function (_) {\n    if (!arguments.length) return cells;\n    if (_.length > 1 || _ >= 2) {\n      cells = _;\n    }\n    return legend;\n  };\n\n  legend.shapePadding = function (_) {\n    if (!arguments.length) return shapePadding;\n    shapePadding = +_;\n    return legend;\n  };\n\n  legend.labels = function (_) {\n    if (!arguments.length) return labels;\n    labels = _;\n    return legend;\n  };\n\n  legend.labelAlign = function (_) {\n    if (!arguments.length) return labelAlign;\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\n      labelAlign = _;\n    }\n    return legend;\n  };\n\n  legend.labelFormat = function (_) {\n    if (!arguments.length) return labelFormat;\n    labelFormat = _;\n    return legend;\n  };\n\n  legend.labelOffset = function (_) {\n    if (!arguments.length) return labelOffset;\n    labelOffset = +_;\n    return legend;\n  };\n\n  legend.labelDelimiter = function (_) {\n    if (!arguments.length) return labelDelimiter;\n    labelDelimiter = _;\n    return legend;\n  };\n\n  legend.orient = function (_) {\n    if (!arguments.length) return orient;\n    _ = _.toLowerCase();\n    if (_ == \"horizontal\" || _ == \"vertical\") {\n      orient = _;\n    }\n    return legend;\n  };\n\n  legend.ascending = function (_) {\n    if (!arguments.length) return ascending;\n    ascending = !!_;\n    return legend;\n  };\n\n  legend.classPrefix = function (_) {\n    if (!arguments.length) return classPrefix;\n    classPrefix = _;\n    return legend;\n  };\n\n  legend.title = function (_) {\n    if (!arguments.length) return title;\n    title = _;\n    return legend;\n  };\n\n  legend.on = function () {\n    var value = legendDispatcher.on.apply(legendDispatcher, arguments);\n    return value === legendDispatcher ? legend : value;\n  };\n\n  return legend;\n};\n\n},{\"./legend\":2,\"d3-array\":21,\"d3-dispatch\":24,\"d3-format\":25,\"d3-scale\":27}],5:[function(require,module,exports){\n'use strict';\n/* @flow */\n\n/**\r\n * **[Gaussian error function](http://en.wikipedia.org/wiki/Error_function)**\r\n *\r\n * The `errorFunction(x/(sd * Math.sqrt(2)))` is the probability that a value in a\r\n * normal distribution with standard deviation sd is within x of the mean.\r\n *\r\n * This function returns a numerical approximation to the exact value.\r\n *\r\n * @param {number} x input\r\n * @return {number} error estimation\r\n * @example\r\n * errorFunction(1).toFixed(2); // => '0.84'\r\n */\n\nfunction errorFunction(x /*: number */) /*: number */{\n    var t = 1 / (1 + 0.5 * Math.abs(x));\n    var tau = t * Math.exp(-Math.pow(x, 2) - 1.26551223 + 1.00002368 * t + 0.37409196 * Math.pow(t, 2) + 0.09678418 * Math.pow(t, 3) - 0.18628806 * Math.pow(t, 4) + 0.27886807 * Math.pow(t, 5) - 1.13520398 * Math.pow(t, 6) + 1.48851587 * Math.pow(t, 7) - 0.82215223 * Math.pow(t, 8) + 0.17087277 * Math.pow(t, 9));\n    if (x >= 0) {\n        return 1 - tau;\n    } else {\n        return tau - 1;\n    }\n}\n\nmodule.exports = errorFunction;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n/* @flow */\n\n/**\r\n * [Simple linear regression](http://en.wikipedia.org/wiki/Simple_linear_regression)\r\n * is a simple way to find a fitted line\r\n * between a set of coordinates. This algorithm finds the slope and y-intercept of a regression line\r\n * using the least sum of squares.\r\n *\r\n * @param {Array<Array<number>>} data an array of two-element of arrays,\r\n * like `[[0, 1], [2, 3]]`\r\n * @returns {Object} object containing slope and intersect of regression line\r\n * @example\r\n * linearRegression([[0, 0], [1, 1]]); // => { m: 1, b: 0 }\r\n */\n\nfunction linearRegression(data /*: Array<Array<number>> */) /*: { m: number, b: number } */{\n\n    var m, b;\n\n    // Store data length in a local variable to reduce\n    // repeated object property lookups\n    var dataLength = data.length;\n\n    //if there's only one point, arbitrarily choose a slope of 0\n    //and a y-intercept of whatever the y of the initial point is\n    if (dataLength === 1) {\n        m = 0;\n        b = data[0][1];\n    } else {\n        // Initialize our sums and scope the `m` and `b`\n        // variables that define the line.\n        var sumX = 0,\n            sumY = 0,\n            sumXX = 0,\n            sumXY = 0;\n\n        // Use local variables to grab point values\n        // with minimal object property lookups\n        var point, x, y;\n\n        // Gather the sum of all x values, the sum of all\n        // y values, and the sum of x^2 and (x*y) for each\n        // value.\n        //\n        // In math notation, these would be SS_x, SS_y, SS_xx, and SS_xy\n        for (var i = 0; i < dataLength; i++) {\n            point = data[i];\n            x = point[0];\n            y = point[1];\n\n            sumX += x;\n            sumY += y;\n\n            sumXX += x * x;\n            sumXY += x * y;\n        }\n\n        // `m` is the slope of the regression line\n        m = (dataLength * sumXY - sumX * sumY) / (dataLength * sumXX - sumX * sumX);\n\n        // `b` is the y-intercept of the line.\n        b = sumY / dataLength - m * sumX / dataLength;\n    }\n\n    // Return both values as an object.\n    return {\n        m: m,\n        b: b\n    };\n}\n\nmodule.exports = linearRegression;\n\n},{}],7:[function(require,module,exports){\n'use strict';\n/* @flow */\n\n/**\r\n * Given the output of `linearRegression`: an object\r\n * with `m` and `b` values indicating slope and intercept,\r\n * respectively, generate a line function that translates\r\n * x values into y values.\r\n *\r\n * @param {Object} mb object with `m` and `b` members, representing\r\n * slope and intersect of desired line\r\n * @returns {Function} method that computes y-value at any given\r\n * x-value on the line.\r\n * @example\r\n * var l = linearRegressionLine(linearRegression([[0, 0], [1, 1]]));\r\n * l(0) // = 0\r\n * l(2) // = 2\r\n * linearRegressionLine({ b: 0, m: 1 })(1); // => 1\r\n * linearRegressionLine({ b: 1, m: 1 })(1); // => 2\r\n */\n\nfunction linearRegressionLine(mb /*: { b: number, m: number }*/) /*: Function */{\n    // Return a function that computes a `y` value for each\n    // x value it is given, based on the values of `b` and `a`\n    // that we just computed.\n    return function (x) {\n        return mb.b + mb.m * x;\n    };\n}\n\nmodule.exports = linearRegressionLine;\n\n},{}],8:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar sum = require('./sum');\n\n/**\r\n * The mean, _also known as average_,\r\n * is the sum of all values over the number of values.\r\n * This is a [measure of central tendency](https://en.wikipedia.org/wiki/Central_tendency):\r\n * a method of finding a typical or central value of a set of numbers.\r\n *\r\n * This runs on `O(n)`, linear time in respect to the array\r\n *\r\n * @param {Array<number>} x input values\r\n * @returns {number} mean\r\n * @example\r\n * mean([0, 10]); // => 5\r\n */\nfunction mean(x /*: Array<number> */) /*:number*/{\n    // The mean of no numbers is null\n    if (x.length === 0) {\n        return NaN;\n    }\n\n    return sum(x) / x.length;\n}\n\nmodule.exports = mean;\n\n},{\"./sum\":17}],9:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar quantileSorted = require('./quantile_sorted');\nvar quickselect = require('./quickselect');\n\n/**\r\n * The [quantile](https://en.wikipedia.org/wiki/Quantile):\r\n * this is a population quantile, since we assume to know the entire\r\n * dataset in this library. This is an implementation of the\r\n * [Quantiles of a Population](http://en.wikipedia.org/wiki/Quantile#Quantiles_of_a_population)\r\n * algorithm from wikipedia.\r\n *\r\n * Sample is a one-dimensional array of numbers,\r\n * and p is either a decimal number from 0 to 1 or an array of decimal\r\n * numbers from 0 to 1.\r\n * In terms of a k/q quantile, p = k/q - it's just dealing with fractions or dealing\r\n * with decimal values.\r\n * When p is an array, the result of the function is also an array containing the appropriate\r\n * quantiles in input order\r\n *\r\n * @param {Array<number>} sample a sample from the population\r\n * @param {number} p the desired quantile, as a number between 0 and 1\r\n * @returns {number} quantile\r\n * @example\r\n * quantile([3, 6, 7, 8, 8, 9, 10, 13, 15, 16, 20], 0.5); // => 9\r\n */\nfunction quantile(sample /*: Array<number> */, p /*: Array<number> | number */) {\n    var copy = sample.slice();\n\n    if (Array.isArray(p)) {\n        // rearrange elements so that each element corresponding to a requested\n        // quantile is on a place it would be if the array was fully sorted\n        multiQuantileSelect(copy, p);\n        // Initialize the result array\n        var results = [];\n        // For each requested quantile\n        for (var i = 0; i < p.length; i++) {\n            results[i] = quantileSorted(copy, p[i]);\n        }\n        return results;\n    } else {\n        var idx = quantileIndex(copy.length, p);\n        quantileSelect(copy, idx, 0, copy.length - 1);\n        return quantileSorted(copy, p);\n    }\n}\n\nfunction quantileSelect(arr, k, left, right) {\n    if (k % 1 === 0) {\n        quickselect(arr, k, left, right);\n    } else {\n        k = Math.floor(k);\n        quickselect(arr, k, left, right);\n        quickselect(arr, k + 1, k + 1, right);\n    }\n}\n\nfunction multiQuantileSelect(arr, p) {\n    var indices = [0];\n    for (var i = 0; i < p.length; i++) {\n        indices.push(quantileIndex(arr.length, p[i]));\n    }\n    indices.push(arr.length - 1);\n    indices.sort(compare);\n\n    var stack = [0, indices.length - 1];\n\n    while (stack.length) {\n        var r = Math.ceil(stack.pop());\n        var l = Math.floor(stack.pop());\n        if (r - l <= 1) continue;\n\n        var m = Math.floor((l + r) / 2);\n        quantileSelect(arr, indices[m], indices[l], indices[r]);\n\n        stack.push(l, m, m, r);\n    }\n}\n\nfunction compare(a, b) {\n    return a - b;\n}\n\nfunction quantileIndex(len /*: number */, p /*: number */) /*:number*/{\n    var idx = len * p;\n    if (p === 1) {\n        // If p is 1, directly return the last index\n        return len - 1;\n    } else if (p === 0) {\n        // If p is 0, directly return the first index\n        return 0;\n    } else if (idx % 1 !== 0) {\n        // If index is not integer, return the next index in array\n        return Math.ceil(idx) - 1;\n    } else if (len % 2 === 0) {\n        // If the list has even-length, we'll return the middle of two indices\n        // around quantile to indicate that we need an average value of the two\n        return idx - 0.5;\n    } else {\n        // Finally, in the simple case of an integer index\n        // with an odd-length list, return the index\n        return idx;\n    }\n}\n\nmodule.exports = quantile;\n\n},{\"./quantile_sorted\":10,\"./quickselect\":11}],10:[function(require,module,exports){\n'use strict';\n/* @flow */\n\n/**\r\n * This is the internal implementation of quantiles: when you know\r\n * that the order is sorted, you don't need to re-sort it, and the computations\r\n * are faster.\r\n *\r\n * @param {Array<number>} sample input data\r\n * @param {number} p desired quantile: a number between 0 to 1, inclusive\r\n * @returns {number} quantile value\r\n * @example\r\n * quantileSorted([3, 6, 7, 8, 8, 9, 10, 13, 15, 16, 20], 0.5); // => 9\r\n */\n\nfunction quantileSorted(sample /*: Array<number> */, p /*: number */) /*:number*/{\n    var idx = sample.length * p;\n    if (p < 0 || p > 1) {\n        return NaN;\n    } else if (p === 1) {\n        // If p is 1, directly return the last element\n        return sample[sample.length - 1];\n    } else if (p === 0) {\n        // If p is 0, directly return the first element\n        return sample[0];\n    } else if (idx % 1 !== 0) {\n        // If p is not integer, return the next element in array\n        return sample[Math.ceil(idx) - 1];\n    } else if (sample.length % 2 === 0) {\n        // If the list has even-length, we'll take the average of this number\n        // and the next value, if there is one\n        return (sample[idx - 1] + sample[idx]) / 2;\n    } else {\n        // Finally, in the simple case of an integer value\n        // with an odd-length list, return the sample value at the index.\n        return sample[idx];\n    }\n}\n\nmodule.exports = quantileSorted;\n\n},{}],11:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nmodule.exports = quickselect;\n\n/**\r\n * Rearrange items in `arr` so that all items in `[left, k]` range are the smallest.\r\n * The `k`-th element will have the `(k - left + 1)`-th smallest value in `[left, right]`.\r\n *\r\n * Implements Floyd-Rivest selection algorithm https://en.wikipedia.org/wiki/Floyd-Rivest_algorithm\r\n *\r\n * @private\r\n * @param {Array<number>} arr input array\r\n * @param {number} k pivot index\r\n * @param {number} left left index\r\n * @param {number} right right index\r\n * @returns {undefined}\r\n * @example\r\n * var arr = [65, 28, 59, 33, 21, 56, 22, 95, 50, 12, 90, 53, 28, 77, 39];\r\n * quickselect(arr, 8);\r\n * // = [39, 28, 28, 33, 21, 12, 22, 50, 53, 56, 59, 65, 90, 77, 95]\r\n */\nfunction quickselect(arr /*: Array<number> */, k /*: number */, left /*: number */, right /*: number */) {\n    left = left || 0;\n    right = right || arr.length - 1;\n\n    while (right > left) {\n        // 600 and 0.5 are arbitrary constants chosen in the original paper to minimize execution time\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n);\n            if (m - n / 2 < 0) sd *= -1;\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselect(arr, k, newLeft, newRight);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (arr[right] > t) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (arr[i] < t) {\n                i++;\n            }while (arr[j] > t) {\n                j--;\n            }\n        }\n\n        if (arr[left] === t) swap(arr, left, j);else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\n},{}],12:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar sampleCovariance = require('./sample_covariance');\nvar sampleStandardDeviation = require('./sample_standard_deviation');\n\n/**\r\n * The [correlation](http://en.wikipedia.org/wiki/Correlation_and_dependence) is\r\n * a measure of how correlated two datasets are, between -1 and 1\r\n *\r\n * @param {Array<number>} x first input\r\n * @param {Array<number>} y second input\r\n * @returns {number} sample correlation\r\n * @example\r\n * sampleCorrelation([1, 2, 3, 4, 5, 6], [2, 2, 3, 4, 5, 60]).toFixed(2);\r\n * // => '0.69'\r\n */\nfunction sampleCorrelation(x /*: Array<number> */, y /*: Array<number> */) /*:number*/{\n    var cov = sampleCovariance(x, y),\n        xstd = sampleStandardDeviation(x),\n        ystd = sampleStandardDeviation(y);\n\n    return cov / xstd / ystd;\n}\n\nmodule.exports = sampleCorrelation;\n\n},{\"./sample_covariance\":13,\"./sample_standard_deviation\":14}],13:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar mean = require('./mean');\n\n/**\r\n * [Sample covariance](https://en.wikipedia.org/wiki/Sample_mean_and_sampleCovariance) of two datasets:\r\n * how much do the two datasets move together?\r\n * x and y are two datasets, represented as arrays of numbers.\r\n *\r\n * @param {Array<number>} x first input\r\n * @param {Array<number>} y second input\r\n * @returns {number} sample covariance\r\n * @example\r\n * sampleCovariance([1, 2, 3, 4, 5, 6], [6, 5, 4, 3, 2, 1]); // => -3.5\r\n */\nfunction sampleCovariance(x /*:Array<number>*/, y /*:Array<number>*/) /*:number*/{\n\n    // The two datasets must have the same length which must be more than 1\n    if (x.length <= 1 || x.length !== y.length) {\n        return NaN;\n    }\n\n    // determine the mean of each dataset so that we can judge each\n    // value of the dataset fairly as the difference from the mean. this\n    // way, if one dataset is [1, 2, 3] and [2, 3, 4], their covariance\n    // does not suffer because of the difference in absolute values\n    var xmean = mean(x),\n        ymean = mean(y),\n        sum = 0;\n\n    // for each pair of values, the covariance increases when their\n    // difference from the mean is associated - if both are well above\n    // or if both are well below\n    // the mean, the covariance increases significantly.\n    for (var i = 0; i < x.length; i++) {\n        sum += (x[i] - xmean) * (y[i] - ymean);\n    }\n\n    // this is Bessels' Correction: an adjustment made to sample statistics\n    // that allows for the reduced degree of freedom entailed in calculating\n    // values from samples rather than complete populations.\n    var besselsCorrection = x.length - 1;\n\n    // the covariance is weighted by the length of the datasets.\n    return sum / besselsCorrection;\n}\n\nmodule.exports = sampleCovariance;\n\n},{\"./mean\":8}],14:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar sampleVariance = require('./sample_variance');\n\n/**\r\n * The [standard deviation](http://en.wikipedia.org/wiki/Standard_deviation)\r\n * is the square root of the variance.\r\n *\r\n * @param {Array<number>} x input array\r\n * @returns {number} sample standard deviation\r\n * @example\r\n * sampleStandardDeviation([2, 4, 4, 4, 5, 5, 7, 9]).toFixed(2);\r\n * // => '2.14'\r\n */\nfunction sampleStandardDeviation(x /*:Array<number>*/) /*:number*/{\n  // The standard deviation of no numbers is null\n  var sampleVarianceX = sampleVariance(x);\n  if (isNaN(sampleVarianceX)) {\n    return NaN;\n  }\n  return Math.sqrt(sampleVarianceX);\n}\n\nmodule.exports = sampleStandardDeviation;\n\n},{\"./sample_variance\":15}],15:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar sumNthPowerDeviations = require('./sum_nth_power_deviations');\n\n/*\r\n * The [sample variance](https://en.wikipedia.org/wiki/Variance#Sample_variance)\r\n * is the sum of squared deviations from the mean. The sample variance\r\n * is distinguished from the variance by the usage of [Bessel's Correction](https://en.wikipedia.org/wiki/Bessel's_correction):\r\n * instead of dividing the sum of squared deviations by the length of the input,\r\n * it is divided by the length minus one. This corrects the bias in estimating\r\n * a value from a set that you don't know if full.\r\n *\r\n * References:\r\n * * [Wolfram MathWorld on Sample Variance](http://mathworld.wolfram.com/SampleVariance.html)\r\n *\r\n * @param {Array<number>} x input array\r\n * @return {number} sample variance\r\n * @example\r\n * sampleVariance([1, 2, 3, 4, 5]); // => 2.5\r\n */\nfunction sampleVariance(x /*: Array<number> */) /*:number*/{\n    // The variance of no numbers is null\n    if (x.length <= 1) {\n        return NaN;\n    }\n\n    var sumSquaredDeviationsValue = sumNthPowerDeviations(x, 2);\n\n    // this is Bessels' Correction: an adjustment made to sample statistics\n    // that allows for the reduced degree of freedom entailed in calculating\n    // values from samples rather than complete populations.\n    var besselsCorrection = x.length - 1;\n\n    // Find the mean value of that list\n    return sumSquaredDeviationsValue / besselsCorrection;\n}\n\nmodule.exports = sampleVariance;\n\n},{\"./sum_nth_power_deviations\":18}],16:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar variance = require('./variance');\n\n/**\r\n * The [standard deviation](http://en.wikipedia.org/wiki/Standard_deviation)\r\n * is the square root of the variance. It's useful for measuring the amount\r\n * of variation or dispersion in a set of values.\r\n *\r\n * Standard deviation is only appropriate for full-population knowledge: for\r\n * samples of a population, {@link sampleStandardDeviation} is\r\n * more appropriate.\r\n *\r\n * @param {Array<number>} x input\r\n * @returns {number} standard deviation\r\n * @example\r\n * variance([2, 4, 4, 4, 5, 5, 7, 9]); // => 4\r\n * standardDeviation([2, 4, 4, 4, 5, 5, 7, 9]); // => 2\r\n */\nfunction standardDeviation(x /*: Array<number> */) /*:number*/{\n  // The standard deviation of no numbers is null\n  var v = variance(x);\n  if (isNaN(v)) {\n    return 0;\n  }\n  return Math.sqrt(v);\n}\n\nmodule.exports = standardDeviation;\n\n},{\"./variance\":19}],17:[function(require,module,exports){\n'use strict';\n/* @flow */\n\n/**\r\n * Our default sum is the [Kahan summation algorithm](https://en.wikipedia.org/wiki/Kahan_summation_algorithm) is\r\n * a method for computing the sum of a list of numbers while correcting\r\n * for floating-point errors. Traditionally, sums are calculated as many\r\n * successive additions, each one with its own floating-point roundoff. These\r\n * losses in precision add up as the number of numbers increases. This alternative\r\n * algorithm is more accurate than the simple way of calculating sums by simple\r\n * addition.\r\n *\r\n * This runs on `O(n)`, linear time in respect to the array\r\n *\r\n * @param {Array<number>} x input\r\n * @return {number} sum of all input numbers\r\n * @example\r\n * sum([1, 2, 3]); // => 6\r\n */\n\nfunction sum(x /*: Array<number> */) /*: number */{\n\n    // like the traditional sum algorithm, we keep a running\n    // count of the current sum.\n    var sum = 0;\n\n    // but we also keep three extra variables as bookkeeping:\n    // most importantly, an error correction value. This will be a very\n    // small number that is the opposite of the floating point precision loss.\n    var errorCompensation = 0;\n\n    // this will be each number in the list corrected with the compensation value.\n    var correctedCurrentValue;\n\n    // and this will be the next sum\n    var nextSum;\n\n    for (var i = 0; i < x.length; i++) {\n        // first correct the value that we're going to add to the sum\n        correctedCurrentValue = x[i] - errorCompensation;\n\n        // compute the next sum. sum is likely a much larger number\n        // than correctedCurrentValue, so we'll lose precision here,\n        // and measure how much precision is lost in the next step\n        nextSum = sum + correctedCurrentValue;\n\n        // we intentionally didn't assign sum immediately, but stored\n        // it for now so we can figure out this: is (sum + nextValue) - nextValue\n        // not equal to 0? ideally it would be, but in practice it won't:\n        // it will be some very small number. that's what we record\n        // as errorCompensation.\n        errorCompensation = nextSum - sum - correctedCurrentValue;\n\n        // now that we've computed how much we'll correct for in the next\n        // loop, start treating the nextSum as the current sum.\n        sum = nextSum;\n    }\n\n    return sum;\n}\n\nmodule.exports = sum;\n\n},{}],18:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar mean = require('./mean');\n\n/**\r\n * The sum of deviations to the Nth power.\r\n * When n=2 it's the sum of squared deviations.\r\n * When n=3 it's the sum of cubed deviations.\r\n *\r\n * @param {Array<number>} x\r\n * @param {number} n power\r\n * @returns {number} sum of nth power deviations\r\n * @example\r\n * var input = [1, 2, 3];\r\n * // since the variance of a set is the mean squared\r\n * // deviations, we can calculate that with sumNthPowerDeviations:\r\n * var variance = sumNthPowerDeviations(input) / input.length;\r\n */\nfunction sumNthPowerDeviations(x /*: Array<number> */, n /*: number */) /*:number*/{\n    var meanValue = mean(x),\n        sum = 0;\n\n    for (var i = 0; i < x.length; i++) {\n        sum += Math.pow(x[i] - meanValue, n);\n    }\n\n    return sum;\n}\n\nmodule.exports = sumNthPowerDeviations;\n\n},{\"./mean\":8}],19:[function(require,module,exports){\n'use strict';\n/* @flow */\n\nvar sumNthPowerDeviations = require('./sum_nth_power_deviations');\n\n/**\r\n * The [variance](http://en.wikipedia.org/wiki/Variance)\r\n * is the sum of squared deviations from the mean.\r\n *\r\n * This is an implementation of variance, not sample variance:\r\n * see the `sampleVariance` method if you want a sample measure.\r\n *\r\n * @param {Array<number>} x a population\r\n * @returns {number} variance: a value greater than or equal to zero.\r\n * zero indicates that all values are identical.\r\n * @example\r\n * variance([1, 2, 3, 4, 5, 6]); // => 2.9166666666666665\r\n */\nfunction variance(x /*: Array<number> */) /*:number*/{\n    // The variance of no numbers is null\n    if (x.length === 0) {\n        return NaN;\n    }\n\n    // Find the mean of squared deviations between the\n    // mean value and each value.\n    return sumNthPowerDeviations(x, 2) / x.length;\n}\n\nmodule.exports = variance;\n\n},{\"./sum_nth_power_deviations\":18}],20:[function(require,module,exports){\n'use strict';\n/* @flow */\n\n/**\r\n * The [Z-Score, or Standard Score](http://en.wikipedia.org/wiki/Standard_score).\r\n *\r\n * The standard score is the number of standard deviations an observation\r\n * or datum is above or below the mean. Thus, a positive standard score\r\n * represents a datum above the mean, while a negative standard score\r\n * represents a datum below the mean. It is a dimensionless quantity\r\n * obtained by subtracting the population mean from an individual raw\r\n * score and then dividing the difference by the population standard\r\n * deviation.\r\n *\r\n * The z-score is only defined if one knows the population parameters;\r\n * if one only has a sample set, then the analogous computation with\r\n * sample mean and sample standard deviation yields the\r\n * Student's t-statistic.\r\n *\r\n * @param {number} x\r\n * @param {number} mean\r\n * @param {number} standardDeviation\r\n * @return {number} z score\r\n * @example\r\n * zScore(78, 80, 5); // => -0.4\r\n */\n\nfunction zScore(x /*:number*/, mean /*:number*/, standardDeviation /*:number*/) /*:number*/{\n  return (x - mean) / standardDeviation;\n}\n\nmodule.exports = zScore;\n\n},{}],21:[function(require,module,exports){\n// https://d3js.org/d3-array/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  function ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function bisector(compare) {\n    if (compare.length === 1) compare = ascendingComparator(compare);\n    return {\n      left: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) < 0) lo = mid + 1;\n          else hi = mid;\n        }\n        return lo;\n      },\n      right: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) > 0) hi = mid;\n          else lo = mid + 1;\n        }\n        return lo;\n      }\n    };\n  }\n\n  function ascendingComparator(f) {\n    return function(d, x) {\n      return ascending(f(d), x);\n    };\n  }\n\n  var ascendingBisect = bisector(ascending);\n  var bisectRight = ascendingBisect.right;\n  var bisectLeft = ascendingBisect.left;\n\n  function descending(a, b) {\n    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  }\n\n  function number(x) {\n    return x === null ? NaN : +x;\n  }\n\n  function variance(array, f) {\n    var n = array.length,\n        m = 0,\n        a,\n        d,\n        s = 0,\n        i = -1,\n        j = 0;\n\n    if (f == null) {\n      while (++i < n) {\n        if (!isNaN(a = number(array[i]))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    else {\n      while (++i < n) {\n        if (!isNaN(a = number(f(array[i], i, array)))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    if (j > 1) return s / (j - 1);\n  }\n\n  function deviation(array, f) {\n    var v = variance(array, f);\n    return v ? Math.sqrt(v) : v;\n  }\n\n  function extent(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b,\n        c;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = array[i]) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    return [a, c];\n  }\n\n  var array = Array.prototype;\n\n  var slice = array.slice;\n  var map = array.map;\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function identity(x) {\n    return x;\n  }\n\n  function range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n    var i = -1,\n        n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n        range = new Array(n);\n\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n\n    return range;\n  }\n\n  var e10 = Math.sqrt(50);\n  var e5 = Math.sqrt(10);\n  var e2 = Math.sqrt(2);\n  function ticks(start, stop, count) {\n    var step = tickStep(start, stop, count);\n    return range(\n      Math.ceil(start / step) * step,\n      Math.floor(stop / step) * step + step / 2, // inclusive\n      step\n    );\n  }\n\n  function tickStep(start, stop, count) {\n    var step0 = Math.abs(stop - start) / Math.max(0, count),\n        step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n        error = step0 / step1;\n    if (error >= e10) step1 *= 10;\n    else if (error >= e5) step1 *= 5;\n    else if (error >= e2) step1 *= 2;\n    return stop < start ? -step1 : step1;\n  }\n\n  function sturges(values) {\n    return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n  }\n\n  function histogram() {\n    var value = identity,\n        domain = extent,\n        threshold = sturges;\n\n    function histogram(data) {\n      var i,\n          n = data.length,\n          x,\n          values = new Array(n);\n\n      for (i = 0; i < n; ++i) {\n        values[i] = value(data[i], i, data);\n      }\n\n      var xz = domain(values),\n          x0 = xz[0],\n          x1 = xz[1],\n          tz = threshold(values, x0, x1);\n\n      // Convert number of thresholds into uniform thresholds.\n      if (!Array.isArray(tz)) tz = ticks(x0, x1, tz);\n\n      // Remove any thresholds outside the domain.\n      var m = tz.length;\n      while (tz[0] <= x0) tz.shift(), --m;\n      while (tz[m - 1] >= x1) tz.pop(), --m;\n\n      var bins = new Array(m + 1),\n          bin;\n\n      // Initialize bins.\n      for (i = 0; i <= m; ++i) {\n        bin = bins[i] = [];\n        bin.x0 = i > 0 ? tz[i - 1] : x0;\n        bin.x1 = i < m ? tz[i] : x1;\n      }\n\n      // Assign data to bins by value, ignoring any outside the domain.\n      for (i = 0; i < n; ++i) {\n        x = values[i];\n        if (x0 <= x && x <= x1) {\n          bins[bisectRight(tz, x, 0, m)].push(data[i]);\n        }\n      }\n\n      return bins;\n    }\n\n    histogram.value = function(_) {\n      return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n    };\n\n    histogram.domain = function(_) {\n      return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n    };\n\n    histogram.thresholds = function(_) {\n      return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;\n    };\n\n    return histogram;\n  }\n\n  function quantile(array, p, f) {\n    if (f == null) f = number;\n    if (!(n = array.length)) return;\n    if ((p = +p) <= 0 || n < 2) return +f(array[0], 0, array);\n    if (p >= 1) return +f(array[n - 1], n - 1, array);\n    var n,\n        h = (n - 1) * p,\n        i = Math.floor(h),\n        a = +f(array[i], i, array),\n        b = +f(array[i + 1], i + 1, array);\n    return a + (b - a) * (h - i);\n  }\n\n  function freedmanDiaconis(values, min, max) {\n    values = map.call(values, number).sort(ascending);\n    return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function scott(values, min, max) {\n    return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function max(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && b > a) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b > a) a = b;\n    }\n\n    return a;\n  }\n\n  function mean(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1,\n        j = n;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number(array[i]))) s += a; else --j;\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number(f(array[i], i, array)))) s += a; else --j;\n    }\n\n    if (j) return s / j;\n  }\n\n  function median(array, f) {\n    var numbers = [],\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number(array[i]))) numbers.push(a);\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number(f(array[i], i, array)))) numbers.push(a);\n    }\n\n    return quantile(numbers.sort(ascending), 0.5);\n  }\n\n  function merge(arrays) {\n    var n = arrays.length,\n        m,\n        i = -1,\n        j = 0,\n        merged,\n        array;\n\n    while (++i < n) j += arrays[i].length;\n    merged = new Array(j);\n\n    while (--n >= 0) {\n      array = arrays[n];\n      m = array.length;\n      while (--m >= 0) {\n        merged[--j] = array[m];\n      }\n    }\n\n    return merged;\n  }\n\n  function min(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && a > b) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && a > b) a = b;\n    }\n\n    return a;\n  }\n\n  function pairs(array) {\n    var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);\n    while (i < n) pairs[i] = [p, p = array[++i]];\n    return pairs;\n  }\n\n  function permute(array, indexes) {\n    var i = indexes.length, permutes = new Array(i);\n    while (i--) permutes[i] = array[indexes[i]];\n    return permutes;\n  }\n\n  function scan(array, compare) {\n    if (!(n = array.length)) return;\n    var i = 0,\n        n,\n        j = 0,\n        xi,\n        xj = array[j];\n\n    if (!compare) compare = ascending;\n\n    while (++i < n) if (compare(xi = array[i], xj) < 0 || compare(xj, xj) !== 0) xj = xi, j = i;\n\n    if (compare(xj, xj) === 0) return j;\n  }\n\n  function shuffle(array, i0, i1) {\n    var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),\n        t,\n        i;\n\n    while (m) {\n      i = Math.random() * m-- | 0;\n      t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n\n    return array;\n  }\n\n  function sum(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (a = +array[i]) s += a; // Note: zero and null are equivalent.\n    }\n\n    else {\n      while (++i < n) if (a = +f(array[i], i, array)) s += a;\n    }\n\n    return s;\n  }\n\n  function transpose(matrix) {\n    if (!(n = matrix.length)) return [];\n    for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n      for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n        row[j] = matrix[j][i];\n      }\n    }\n    return transpose;\n  }\n\n  function length(d) {\n    return d.length;\n  }\n\n  function zip() {\n    return transpose(arguments);\n  }\n\n  exports.bisect = bisectRight;\n  exports.bisectRight = bisectRight;\n  exports.bisectLeft = bisectLeft;\n  exports.ascending = ascending;\n  exports.bisector = bisector;\n  exports.descending = descending;\n  exports.deviation = deviation;\n  exports.extent = extent;\n  exports.histogram = histogram;\n  exports.thresholdFreedmanDiaconis = freedmanDiaconis;\n  exports.thresholdScott = scott;\n  exports.thresholdSturges = sturges;\n  exports.max = max;\n  exports.mean = mean;\n  exports.median = median;\n  exports.merge = merge;\n  exports.min = min;\n  exports.pairs = pairs;\n  exports.permute = permute;\n  exports.quantile = quantile;\n  exports.range = range;\n  exports.scan = scan;\n  exports.shuffle = shuffle;\n  exports.sum = sum;\n  exports.ticks = ticks;\n  exports.tickStep = tickStep;\n  exports.transpose = transpose;\n  exports.variance = variance;\n  exports.zip = zip;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n},{}],22:[function(require,module,exports){\n// https://d3js.org/d3-collection/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  var prefix = \"$\";\n\n  function Map() {}\n\n  Map.prototype = map.prototype = {\n    constructor: Map,\n    has: function(key) {\n      return (prefix + key) in this;\n    },\n    get: function(key) {\n      return this[prefix + key];\n    },\n    set: function(key, value) {\n      this[prefix + key] = value;\n      return this;\n    },\n    remove: function(key) {\n      var property = prefix + key;\n      return property in this && delete this[property];\n    },\n    clear: function() {\n      for (var property in this) if (property[0] === prefix) delete this[property];\n    },\n    keys: function() {\n      var keys = [];\n      for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n      return keys;\n    },\n    values: function() {\n      var values = [];\n      for (var property in this) if (property[0] === prefix) values.push(this[property]);\n      return values;\n    },\n    entries: function() {\n      var entries = [];\n      for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n      return entries;\n    },\n    size: function() {\n      var size = 0;\n      for (var property in this) if (property[0] === prefix) ++size;\n      return size;\n    },\n    empty: function() {\n      for (var property in this) if (property[0] === prefix) return false;\n      return true;\n    },\n    each: function(f) {\n      for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n    }\n  };\n\n  function map(object, f) {\n    var map = new Map;\n\n    // Copy constructor.\n    if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n    // Index array by numeric index or specified key function.\n    else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n\n      if (f == null) while (++i < n) map.set(i, object[i]);\n      else while (++i < n) map.set(f(o = object[i], i, object), o);\n    }\n\n    // Convert object to map.\n    else if (object) for (var key in object) map.set(key, object[key]);\n\n    return map;\n  }\n\n  function nest() {\n    var keys = [],\n        sortKeys = [],\n        sortValues,\n        rollup,\n        nest;\n\n    function apply(array, depth, createResult, setResult) {\n      if (depth >= keys.length) return rollup != null\n          ? rollup(array) : (sortValues != null\n          ? array.sort(sortValues)\n          : array);\n\n      var i = -1,\n          n = array.length,\n          key = keys[depth++],\n          keyValue,\n          value,\n          valuesByKey = map(),\n          values,\n          result = createResult();\n\n      while (++i < n) {\n        if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n          values.push(value);\n        } else {\n          valuesByKey.set(keyValue, [value]);\n        }\n      }\n\n      valuesByKey.each(function(values, key) {\n        setResult(result, key, apply(values, depth, createResult, setResult));\n      });\n\n      return result;\n    }\n\n    function entries(map, depth) {\n      if (++depth > keys.length) return map;\n      var array, sortKey = sortKeys[depth - 1];\n      if (rollup != null && depth >= keys.length) array = map.entries();\n      else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n      return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n    }\n\n    return nest = {\n      object: function(array) { return apply(array, 0, createObject, setObject); },\n      map: function(array) { return apply(array, 0, createMap, setMap); },\n      entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n      key: function(d) { keys.push(d); return nest; },\n      sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n      sortValues: function(order) { sortValues = order; return nest; },\n      rollup: function(f) { rollup = f; return nest; }\n    };\n  }\n\n  function createObject() {\n    return {};\n  }\n\n  function setObject(object, key, value) {\n    object[key] = value;\n  }\n\n  function createMap() {\n    return map();\n  }\n\n  function setMap(map, key, value) {\n    map.set(key, value);\n  }\n\n  function Set() {}\n\n  var proto = map.prototype;\n\n  Set.prototype = set.prototype = {\n    constructor: Set,\n    has: proto.has,\n    add: function(value) {\n      value += \"\";\n      this[prefix + value] = value;\n      return this;\n    },\n    remove: proto.remove,\n    clear: proto.clear,\n    values: proto.keys,\n    size: proto.size,\n    empty: proto.empty,\n    each: proto.each\n  };\n\n  function set(object, f) {\n    var set = new Set;\n\n    // Copy constructor.\n    if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n    // Otherwise, assume its an array.\n    else if (object) {\n      var i = -1, n = object.length;\n      if (f == null) while (++i < n) set.add(object[i]);\n      else while (++i < n) set.add(f(object[i], i, object));\n    }\n\n    return set;\n  }\n\n  function keys(map) {\n    var keys = [];\n    for (var key in map) keys.push(key);\n    return keys;\n  }\n\n  function values(map) {\n    var values = [];\n    for (var key in map) values.push(map[key]);\n    return values;\n  }\n\n  function entries(map) {\n    var entries = [];\n    for (var key in map) entries.push({key: key, value: map[key]});\n    return entries;\n  }\n\n  exports.nest = nest;\n  exports.set = set;\n  exports.map = map;\n  exports.keys = keys;\n  exports.values = values;\n  exports.entries = entries;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n},{}],23:[function(require,module,exports){\n// https://d3js.org/d3-color/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  function define(constructor, factory, prototype) {\n    constructor.prototype = factory.prototype = prototype;\n    prototype.constructor = constructor;\n  }\n\n  function extend(parent, definition) {\n    var prototype = Object.create(parent.prototype);\n    for (var key in definition) prototype[key] = definition[key];\n    return prototype;\n  }\n\n  function Color() {}\n\n  var darker = 0.7;\n  var brighter = 1 / darker;\n\n  var reHex3 = /^#([0-9a-f]{3})$/;\n  var reHex6 = /^#([0-9a-f]{6})$/;\n  var reRgbInteger = /^rgb\\(\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*\\)$/;\n  var reRgbPercent = /^rgb\\(\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n  var reRgbaInteger = /^rgba\\(\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var reRgbaPercent = /^rgba\\(\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var reHslPercent = /^hsl\\(\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n  var reHslaPercent = /^hsla\\(\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var named = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32\n  };\n\n  define(Color, color, {\n    displayable: function() {\n      return this.rgb().displayable();\n    },\n    toString: function() {\n      return this.rgb() + \"\";\n    }\n  });\n\n  function color(format) {\n    var m;\n    format = (format + \"\").trim().toLowerCase();\n    return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n        : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n        : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n        : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n        : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n        : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n        : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n        : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n        : named.hasOwnProperty(format) ? rgbn(named[format])\n        : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n        : null;\n  }\n\n  function rgbn(n) {\n    return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n  }\n\n  function rgba(r, g, b, a) {\n    if (a <= 0) r = g = b = NaN;\n    return new Rgb(r, g, b, a);\n  }\n\n  function rgbConvert(o) {\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Rgb;\n    o = o.rgb();\n    return new Rgb(o.r, o.g, o.b, o.opacity);\n  }\n\n  function rgb(r, g, b, opacity) {\n    return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n  }\n\n  function Rgb(r, g, b, opacity) {\n    this.r = +r;\n    this.g = +g;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n\n  define(Rgb, rgb, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    rgb: function() {\n      return this;\n    },\n    displayable: function() {\n      return (0 <= this.r && this.r <= 255)\n          && (0 <= this.g && this.g <= 255)\n          && (0 <= this.b && this.b <= 255)\n          && (0 <= this.opacity && this.opacity <= 1);\n    },\n    toString: function() {\n      var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n      return (a === 1 ? \"rgb(\" : \"rgba(\")\n          + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n          + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n          + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n          + (a === 1 ? \")\" : \", \" + a + \")\");\n    }\n  }));\n\n  function hsla(h, s, l, a) {\n    if (a <= 0) h = s = l = NaN;\n    else if (l <= 0 || l >= 1) h = s = NaN;\n    else if (s <= 0) h = NaN;\n    return new Hsl(h, s, l, a);\n  }\n\n  function hslConvert(o) {\n    if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Hsl;\n    if (o instanceof Hsl) return o;\n    o = o.rgb();\n    var r = o.r / 255,\n        g = o.g / 255,\n        b = o.b / 255,\n        min = Math.min(r, g, b),\n        max = Math.max(r, g, b),\n        h = NaN,\n        s = max - min,\n        l = (max + min) / 2;\n    if (s) {\n      if (r === max) h = (g - b) / s + (g < b) * 6;\n      else if (g === max) h = (b - r) / s + 2;\n      else h = (r - g) / s + 4;\n      s /= l < 0.5 ? max + min : 2 - max - min;\n      h *= 60;\n    } else {\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n    return new Hsl(h, s, l, o.opacity);\n  }\n\n  function hsl(h, s, l, opacity) {\n    return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n  }\n\n  function Hsl(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Hsl, hsl, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb: function() {\n      var h = this.h % 360 + (this.h < 0) * 360,\n          s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n          l = this.l,\n          m2 = l + (l < 0.5 ? l : 1 - l) * s,\n          m1 = 2 * l - m2;\n      return new Rgb(\n        hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n        hsl2rgb(h, m1, m2),\n        hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n        this.opacity\n      );\n    },\n    displayable: function() {\n      return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n          && (0 <= this.l && this.l <= 1)\n          && (0 <= this.opacity && this.opacity <= 1);\n    }\n  }));\n\n  /* From FvD 13.37, CSS Color Module Level 3 */\n  function hsl2rgb(h, m1, m2) {\n    return (h < 60 ? m1 + (m2 - m1) * h / 60\n        : h < 180 ? m2\n        : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n        : m1) * 255;\n  }\n\n  var deg2rad = Math.PI / 180;\n  var rad2deg = 180 / Math.PI;\n\n  var Kn = 18;\n  var Xn = 0.950470;\n  var Yn = 1;\n  var Zn = 1.088830;\n  var t0 = 4 / 29;\n  var t1 = 6 / 29;\n  var t2 = 3 * t1 * t1;\n  var t3 = t1 * t1 * t1;\n  function labConvert(o) {\n    if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n    if (o instanceof Hcl) {\n      var h = o.h * deg2rad;\n      return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n    }\n    if (!(o instanceof Rgb)) o = rgbConvert(o);\n    var b = rgb2xyz(o.r),\n        a = rgb2xyz(o.g),\n        l = rgb2xyz(o.b),\n        x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n        y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n        z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n    return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n  }\n\n  function lab(l, a, b, opacity) {\n    return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n  }\n\n  function Lab(l, a, b, opacity) {\n    this.l = +l;\n    this.a = +a;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n\n  define(Lab, lab, extend(Color, {\n    brighter: function(k) {\n      return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n    },\n    darker: function(k) {\n      return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n    },\n    rgb: function() {\n      var y = (this.l + 16) / 116,\n          x = isNaN(this.a) ? y : y + this.a / 500,\n          z = isNaN(this.b) ? y : y - this.b / 200;\n      y = Yn * lab2xyz(y);\n      x = Xn * lab2xyz(x);\n      z = Zn * lab2xyz(z);\n      return new Rgb(\n        xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n        xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n        xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n        this.opacity\n      );\n    }\n  }));\n\n  function xyz2lab(t) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n  }\n\n  function lab2xyz(t) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n  }\n\n  function xyz2rgb(x) {\n    return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n  }\n\n  function rgb2xyz(x) {\n    return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n  }\n\n  function hclConvert(o) {\n    if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n    if (!(o instanceof Lab)) o = labConvert(o);\n    var h = Math.atan2(o.b, o.a) * rad2deg;\n    return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n  }\n\n  function hcl(h, c, l, opacity) {\n    return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n  }\n\n  function Hcl(h, c, l, opacity) {\n    this.h = +h;\n    this.c = +c;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Hcl, hcl, extend(Color, {\n    brighter: function(k) {\n      return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n    },\n    darker: function(k) {\n      return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n    },\n    rgb: function() {\n      return labConvert(this).rgb();\n    }\n  }));\n\n  var A = -0.14861;\n  var B = +1.78277;\n  var C = -0.29227;\n  var D = -0.90649;\n  var E = +1.97294;\n  var ED = E * D;\n  var EB = E * B;\n  var BC_DA = B * C - D * A;\n  function cubehelixConvert(o) {\n    if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Rgb)) o = rgbConvert(o);\n    var r = o.r / 255,\n        g = o.g / 255,\n        b = o.b / 255,\n        l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n        bl = b - l,\n        k = (E * (g - l) - C * bl) / D,\n        s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n        h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n    return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n  }\n\n  function cubehelix(h, s, l, opacity) {\n    return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n  }\n\n  function Cubehelix(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Cubehelix, cubehelix, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb: function() {\n      var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n          l = +this.l,\n          a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n          cosh = Math.cos(h),\n          sinh = Math.sin(h);\n      return new Rgb(\n        255 * (l + a * (A * cosh + B * sinh)),\n        255 * (l + a * (C * cosh + D * sinh)),\n        255 * (l + a * (E * cosh)),\n        this.opacity\n      );\n    }\n  }));\n\n  exports.color = color;\n  exports.rgb = rgb;\n  exports.hsl = hsl;\n  exports.lab = lab;\n  exports.hcl = hcl;\n  exports.cubehelix = cubehelix;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n},{}],24:[function(require,module,exports){\n// https://d3js.org/d3-dispatch/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  var noop = {value: function() {}};\n\n  function dispatch() {\n    for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n      if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n      _[t] = [];\n    }\n    return new Dispatch(_);\n  }\n\n  function Dispatch(_) {\n    this._ = _;\n  }\n\n  function parseTypenames(typenames, types) {\n    return typenames.trim().split(/^|\\s+/).map(function(t) {\n      var name = \"\", i = t.indexOf(\".\");\n      if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n      if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n      return {type: t, name: name};\n    });\n  }\n\n  Dispatch.prototype = dispatch.prototype = {\n    constructor: Dispatch,\n    on: function(typename, callback) {\n      var _ = this._,\n          T = parseTypenames(typename + \"\", _),\n          t,\n          i = -1,\n          n = T.length;\n\n      // If no callback was specified, return the callback of the given type and name.\n      if (arguments.length < 2) {\n        while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n        return;\n      }\n\n      // If a type was specified, set the callback for the given type and name.\n      // Otherwise, if a null callback was specified, remove callbacks of the given name.\n      if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n      while (++i < n) {\n        if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n        else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n      }\n\n      return this;\n    },\n    copy: function() {\n      var copy = {}, _ = this._;\n      for (var t in _) copy[t] = _[t].slice();\n      return new Dispatch(copy);\n    },\n    call: function(type, that) {\n      if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n      if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n      for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n    },\n    apply: function(type, that, args) {\n      if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n      for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n    }\n  };\n\n  function get(type, name) {\n    for (var i = 0, n = type.length, c; i < n; ++i) {\n      if ((c = type[i]).name === name) {\n        return c.value;\n      }\n    }\n  }\n\n  function set(type, name, callback) {\n    for (var i = 0, n = type.length; i < n; ++i) {\n      if (type[i].name === name) {\n        type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n        break;\n      }\n    }\n    if (callback != null) type.push({name: name, value: callback});\n    return type;\n  }\n\n  exports.dispatch = dispatch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n},{}],25:[function(require,module,exports){\n// https://d3js.org/d3-format/ Version 1.0.2. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  // Computes the decimal coefficient and exponent of the specified number x with\n  // significant digits p, where x is positive and p is in [1, 21] or undefined.\n  // For example, formatDecimal(1.23) returns [\"123\", 0].\n  function formatDecimal(x, p) {\n    if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n    var i, coefficient = x.slice(0, i);\n\n    // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n    // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n    return [\n      coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n      +x.slice(i + 1)\n    ];\n  }\n\n  function exponent(x) {\n    return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n  }\n\n  function formatGroup(grouping, thousands) {\n    return function(value, width) {\n      var i = value.length,\n          t = [],\n          j = 0,\n          g = grouping[0],\n          length = 0;\n\n      while (i > 0 && g > 0) {\n        if (length + g + 1 > width) g = Math.max(1, width - length);\n        t.push(value.substring(i -= g, i + g));\n        if ((length += g + 1) > width) break;\n        g = grouping[j = (j + 1) % grouping.length];\n      }\n\n      return t.reverse().join(thousands);\n    };\n  }\n\n  function formatDefault(x, p) {\n    x = x.toPrecision(p);\n\n    out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n      switch (x[i]) {\n        case \".\": i0 = i1 = i; break;\n        case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n        case \"e\": break out;\n        default: if (i0 > 0) i0 = 0; break;\n      }\n    }\n\n    return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n  }\n\n  var prefixExponent;\n\n  function formatPrefixAuto(x, p) {\n    var d = formatDecimal(x, p);\n    if (!d) return x + \"\";\n    var coefficient = d[0],\n        exponent = d[1],\n        i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n        n = coefficient.length;\n    return i === n ? coefficient\n        : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n        : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n        : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n  }\n\n  function formatRounded(x, p) {\n    var d = formatDecimal(x, p);\n    if (!d) return x + \"\";\n    var coefficient = d[0],\n        exponent = d[1];\n    return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n        : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n        : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n  }\n\n  var formatTypes = {\n    \"\": formatDefault,\n    \"%\": function(x, p) { return (x * 100).toFixed(p); },\n    \"b\": function(x) { return Math.round(x).toString(2); },\n    \"c\": function(x) { return x + \"\"; },\n    \"d\": function(x) { return Math.round(x).toString(10); },\n    \"e\": function(x, p) { return x.toExponential(p); },\n    \"f\": function(x, p) { return x.toFixed(p); },\n    \"g\": function(x, p) { return x.toPrecision(p); },\n    \"o\": function(x) { return Math.round(x).toString(8); },\n    \"p\": function(x, p) { return formatRounded(x * 100, p); },\n    \"r\": formatRounded,\n    \"s\": formatPrefixAuto,\n    \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n    \"x\": function(x) { return Math.round(x).toString(16); }\n  };\n\n  // [[fill]align][sign][symbol][0][width][,][.precision][type]\n  var re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\n  function formatSpecifier(specifier) {\n    return new FormatSpecifier(specifier);\n  }\n\n  function FormatSpecifier(specifier) {\n    if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n    var match,\n        fill = match[1] || \" \",\n        align = match[2] || \">\",\n        sign = match[3] || \"-\",\n        symbol = match[4] || \"\",\n        zero = !!match[5],\n        width = match[6] && +match[6],\n        comma = !!match[7],\n        precision = match[8] && +match[8].slice(1),\n        type = match[9] || \"\";\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // Map invalid types to the default format.\n    else if (!formatTypes[type]) type = \"\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    this.fill = fill;\n    this.align = align;\n    this.sign = sign;\n    this.symbol = symbol;\n    this.zero = zero;\n    this.width = width;\n    this.comma = comma;\n    this.precision = precision;\n    this.type = type;\n  }\n\n  FormatSpecifier.prototype.toString = function() {\n    return this.fill\n        + this.align\n        + this.sign\n        + this.symbol\n        + (this.zero ? \"0\" : \"\")\n        + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n        + (this.comma ? \",\" : \"\")\n        + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n        + this.type;\n  };\n\n  var prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\n  function identity(x) {\n    return x;\n  }\n\n  function formatLocale(locale) {\n    var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n        currency = locale.currency,\n        decimal = locale.decimal;\n\n    function newFormat(specifier) {\n      specifier = formatSpecifier(specifier);\n\n      var fill = specifier.fill,\n          align = specifier.align,\n          sign = specifier.sign,\n          symbol = specifier.symbol,\n          zero = specifier.zero,\n          width = specifier.width,\n          comma = specifier.comma,\n          precision = specifier.precision,\n          type = specifier.type;\n\n      // Compute the prefix and suffix.\n      // For SI-prefix, the suffix is lazily computed.\n      var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n          suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? \"%\" : \"\";\n\n      // What format function should we use?\n      // Is this an integer type?\n      // Can this type generate exponential notation?\n      var formatType = formatTypes[type],\n          maybeSuffix = !type || /[defgprs%]/.test(type);\n\n      // Set the default precision if not specified,\n      // or clamp the specified precision to the supported range.\n      // For significant precision, it must be in [1, 21].\n      // For fixed precision, it must be in [0, 20].\n      precision = precision == null ? (type ? 6 : 12)\n          : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n          : Math.max(0, Math.min(20, precision));\n\n      function format(value) {\n        var valuePrefix = prefix,\n            valueSuffix = suffix,\n            i, n, c;\n\n        if (type === \"c\") {\n          valueSuffix = formatType(value) + valueSuffix;\n          value = \"\";\n        } else {\n          value = +value;\n\n          // Convert negative to positive, and compute the prefix.\n          // Note that -0 is not less than 0, but 1 / -0 is!\n          var valueNegative = (value < 0 || 1 / value < 0) && (value *= -1, true);\n\n          // Perform the initial formatting.\n          value = formatType(value, precision);\n\n          // If the original value was negative, it may be rounded to zero during\n          // formatting; treat this as (positive) zero.\n          if (valueNegative) {\n            i = -1, n = value.length;\n            valueNegative = false;\n            while (++i < n) {\n              if (c = value.charCodeAt(i), (48 < c && c < 58)\n                  || (type === \"x\" && 96 < c && c < 103)\n                  || (type === \"X\" && 64 < c && c < 71)) {\n                valueNegative = true;\n                break;\n              }\n            }\n          }\n\n          // Compute the prefix and suffix.\n          valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n          valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n          // Break the formatted value into the integer value part that can be\n          // grouped, and fractional or exponential suffix part that is not.\n          if (maybeSuffix) {\n            i = -1, n = value.length;\n            while (++i < n) {\n              if (c = value.charCodeAt(i), 48 > c || c > 57) {\n                valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n                value = value.slice(0, i);\n                break;\n              }\n            }\n          }\n        }\n\n        // If the fill character is not \"0\", grouping is applied before padding.\n        if (comma && !zero) value = group(value, Infinity);\n\n        // Compute the padding.\n        var length = valuePrefix.length + value.length + valueSuffix.length,\n            padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n        // If the fill character is \"0\", grouping is applied after padding.\n        if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n        // Reconstruct the final output based on the desired alignment.\n        switch (align) {\n          case \"<\": return valuePrefix + value + valueSuffix + padding;\n          case \"=\": return valuePrefix + padding + value + valueSuffix;\n          case \"^\": return padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n        }\n        return padding + valuePrefix + value + valueSuffix;\n      }\n\n      format.toString = function() {\n        return specifier + \"\";\n      };\n\n      return format;\n    }\n\n    function formatPrefix(specifier, value) {\n      var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n          e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n          k = Math.pow(10, -e),\n          prefix = prefixes[8 + e / 3];\n      return function(value) {\n        return f(k * value) + prefix;\n      };\n    }\n\n    return {\n      format: newFormat,\n      formatPrefix: formatPrefix\n    };\n  }\n\n  var locale;\n  defaultLocale({\n    decimal: \".\",\n    thousands: \",\",\n    grouping: [3],\n    currency: [\"$\", \"\"]\n  });\n\n  function defaultLocale(definition) {\n    locale = formatLocale(definition);\n    exports.format = locale.format;\n    exports.formatPrefix = locale.formatPrefix;\n    return locale;\n  }\n\n  function precisionFixed(step) {\n    return Math.max(0, -exponent(Math.abs(step)));\n  }\n\n  function precisionPrefix(step, value) {\n    return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n  }\n\n  function precisionRound(step, max) {\n    step = Math.abs(step), max = Math.abs(max) - step;\n    return Math.max(0, exponent(max) - exponent(step)) + 1;\n  }\n\n  exports.formatDefaultLocale = defaultLocale;\n  exports.formatLocale = formatLocale;\n  exports.formatSpecifier = formatSpecifier;\n  exports.precisionFixed = precisionFixed;\n  exports.precisionPrefix = precisionPrefix;\n  exports.precisionRound = precisionRound;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n},{}],26:[function(require,module,exports){\n// https://d3js.org/d3-interpolate/ Version 1.1.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-color')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-color'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3));\n}(this, function (exports,d3Color) { 'use strict';\n\n  function basis(t1, v0, v1, v2, v3) {\n    var t2 = t1 * t1, t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n        + (4 - 6 * t2 + 3 * t3) * v1\n        + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n        + t3 * v3) / 6;\n  }\n\n  function basis$1(values) {\n    var n = values.length - 1;\n    return function(t) {\n      var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n          v1 = values[i],\n          v2 = values[i + 1],\n          v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n          v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n      return basis((t - i / n) * n, v0, v1, v2, v3);\n    };\n  }\n\n  function basisClosed(values) {\n    var n = values.length;\n    return function(t) {\n      var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n          v0 = values[(i + n - 1) % n],\n          v1 = values[i % n],\n          v2 = values[(i + 1) % n],\n          v3 = values[(i + 2) % n];\n      return basis((t - i / n) * n, v0, v1, v2, v3);\n    };\n  }\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function linear(a, d) {\n    return function(t) {\n      return a + t * d;\n    };\n  }\n\n  function exponential(a, b, y) {\n    return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n      return Math.pow(a + t * b, y);\n    };\n  }\n\n  function hue(a, b) {\n    var d = b - a;\n    return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n  }\n\n  function gamma(y) {\n    return (y = +y) === 1 ? nogamma : function(a, b) {\n      return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n    };\n  }\n\n  function nogamma(a, b) {\n    var d = b - a;\n    return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n  }\n\n  var rgb$1 = (function rgbGamma(y) {\n    var color = gamma(y);\n\n    function rgb(start, end) {\n      var r = color((start = d3Color.rgb(start)).r, (end = d3Color.rgb(end)).r),\n          g = color(start.g, end.g),\n          b = color(start.b, end.b),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.r = r(t);\n        start.g = g(t);\n        start.b = b(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    rgb.gamma = rgbGamma;\n\n    return rgb;\n  })(1);\n\n  function rgbSpline(spline) {\n    return function(colors) {\n      var n = colors.length,\n          r = new Array(n),\n          g = new Array(n),\n          b = new Array(n),\n          i, color;\n      for (i = 0; i < n; ++i) {\n        color = d3Color.rgb(colors[i]);\n        r[i] = color.r || 0;\n        g[i] = color.g || 0;\n        b[i] = color.b || 0;\n      }\n      r = spline(r);\n      g = spline(g);\n      b = spline(b);\n      color.opacity = 1;\n      return function(t) {\n        color.r = r(t);\n        color.g = g(t);\n        color.b = b(t);\n        return color + \"\";\n      };\n    };\n  }\n\n  var rgbBasis = rgbSpline(basis$1);\n  var rgbBasisClosed = rgbSpline(basisClosed);\n\n  function array(a, b) {\n    var nb = b ? b.length : 0,\n        na = a ? Math.min(nb, a.length) : 0,\n        x = new Array(nb),\n        c = new Array(nb),\n        i;\n\n    for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n    for (; i < nb; ++i) c[i] = b[i];\n\n    return function(t) {\n      for (i = 0; i < na; ++i) c[i] = x[i](t);\n      return c;\n    };\n  }\n\n  function date(a, b) {\n    var d = new Date;\n    return a = +a, b -= a, function(t) {\n      return d.setTime(a + b * t), d;\n    };\n  }\n\n  function number(a, b) {\n    return a = +a, b -= a, function(t) {\n      return a + b * t;\n    };\n  }\n\n  function object(a, b) {\n    var i = {},\n        c = {},\n        k;\n\n    if (a === null || typeof a !== \"object\") a = {};\n    if (b === null || typeof b !== \"object\") b = {};\n\n    for (k in b) {\n      if (k in a) {\n        i[k] = value(a[k], b[k]);\n      } else {\n        c[k] = b[k];\n      }\n    }\n\n    return function(t) {\n      for (k in i) c[k] = i[k](t);\n      return c;\n    };\n  }\n\n  var reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g;\n  var reB = new RegExp(reA.source, \"g\");\n  function zero(b) {\n    return function() {\n      return b;\n    };\n  }\n\n  function one(b) {\n    return function(t) {\n      return b(t) + \"\";\n    };\n  }\n\n  function string(a, b) {\n    var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n        am, // current match in a\n        bm, // current match in b\n        bs, // string preceding current number in b, if any\n        i = -1, // index in s\n        s = [], // string constants and placeholders\n        q = []; // number interpolators\n\n    // Coerce inputs to strings.\n    a = a + \"\", b = b + \"\";\n\n    // Interpolate pairs of numbers in a & b.\n    while ((am = reA.exec(a))\n        && (bm = reB.exec(b))) {\n      if ((bs = bm.index) > bi) { // a string precedes the next number in b\n        bs = b.slice(bi, bs);\n        if (s[i]) s[i] += bs; // coalesce with previous string\n        else s[++i] = bs;\n      }\n      if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n        if (s[i]) s[i] += bm; // coalesce with previous string\n        else s[++i] = bm;\n      } else { // interpolate non-matching numbers\n        s[++i] = null;\n        q.push({i: i, x: number(am, bm)});\n      }\n      bi = reB.lastIndex;\n    }\n\n    // Add remains of b.\n    if (bi < b.length) {\n      bs = b.slice(bi);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n\n    // Special optimization for only a single match.\n    // Otherwise, interpolate each of the numbers and rejoin the string.\n    return s.length < 2 ? (q[0]\n        ? one(q[0].x)\n        : zero(b))\n        : (b = q.length, function(t) {\n            for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n            return s.join(\"\");\n          });\n  }\n\n  function value(a, b) {\n    var t = typeof b, c;\n    return b == null || t === \"boolean\" ? constant(b)\n        : (t === \"number\" ? number\n        : t === \"string\" ? ((c = d3Color.color(b)) ? (b = c, rgb$1) : string)\n        : b instanceof d3Color.color ? rgb$1\n        : b instanceof Date ? date\n        : Array.isArray(b) ? array\n        : isNaN(b) ? object\n        : number)(a, b);\n  }\n\n  function round(a, b) {\n    return a = +a, b -= a, function(t) {\n      return Math.round(a + b * t);\n    };\n  }\n\n  var degrees = 180 / Math.PI;\n\n  var identity = {\n    translateX: 0,\n    translateY: 0,\n    rotate: 0,\n    skewX: 0,\n    scaleX: 1,\n    scaleY: 1\n  };\n\n  function decompose(a, b, c, d, e, f) {\n    var scaleX, scaleY, skewX;\n    if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n    if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n    if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n    if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n    return {\n      translateX: e,\n      translateY: f,\n      rotate: Math.atan2(b, a) * degrees,\n      skewX: Math.atan(skewX) * degrees,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var cssNode;\n  var cssRoot;\n  var cssView;\n  var svgNode;\n  function parseCss(value) {\n    if (value === \"none\") return identity;\n    if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n    cssNode.style.transform = value;\n    value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n    cssRoot.removeChild(cssNode);\n    value = value.slice(7, -1).split(\",\");\n    return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n  }\n\n  function parseSvg(value) {\n    if (value == null) return identity;\n    if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n    svgNode.setAttribute(\"transform\", value);\n    if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n    value = value.matrix;\n    return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n  }\n\n  function interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n    function pop(s) {\n      return s.length ? s.pop() + \" \" : \"\";\n    }\n\n    function translate(xa, ya, xb, yb, s, q) {\n      if (xa !== xb || ya !== yb) {\n        var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n        q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n      } else if (xb || yb) {\n        s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n      }\n    }\n\n    function rotate(a, b, s, q) {\n      if (a !== b) {\n        if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n        q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n      } else if (b) {\n        s.push(pop(s) + \"rotate(\" + b + degParen);\n      }\n    }\n\n    function skewX(a, b, s, q) {\n      if (a !== b) {\n        q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n      } else if (b) {\n        s.push(pop(s) + \"skewX(\" + b + degParen);\n      }\n    }\n\n    function scale(xa, ya, xb, yb, s, q) {\n      if (xa !== xb || ya !== yb) {\n        var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n        q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n      } else if (xb !== 1 || yb !== 1) {\n        s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n      }\n    }\n\n    return function(a, b) {\n      var s = [], // string constants and placeholders\n          q = []; // number interpolators\n      a = parse(a), b = parse(b);\n      translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n      rotate(a.rotate, b.rotate, s, q);\n      skewX(a.skewX, b.skewX, s, q);\n      scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n      a = b = null; // gc\n      return function(t) {\n        var i = -1, n = q.length, o;\n        while (++i < n) s[(o = q[i]).i] = o.x(t);\n        return s.join(\"\");\n      };\n    };\n  }\n\n  var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\n  var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n\n  var rho = Math.SQRT2;\n  var rho2 = 2;\n  var rho4 = 4;\n  var epsilon2 = 1e-12;\n  function cosh(x) {\n    return ((x = Math.exp(x)) + 1 / x) / 2;\n  }\n\n  function sinh(x) {\n    return ((x = Math.exp(x)) - 1 / x) / 2;\n  }\n\n  function tanh(x) {\n    return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n  }\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000;\n\n    return i;\n  }\n\n  function hsl$1(hue) {\n    return function(start, end) {\n      var h = hue((start = d3Color.hsl(start)).h, (end = d3Color.hsl(end)).h),\n          s = nogamma(start.s, end.s),\n          l = nogamma(start.l, end.l),\n          opacity = nogamma(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n  }\n\n  var hsl$2 = hsl$1(hue);\n  var hslLong = hsl$1(nogamma);\n\n  function lab$1(start, end) {\n    var l = nogamma((start = d3Color.lab(start)).l, (end = d3Color.lab(end)).l),\n        a = nogamma(start.a, end.a),\n        b = nogamma(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.l = l(t);\n      start.a = a(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  function hcl$1(hue) {\n    return function(start, end) {\n      var h = hue((start = d3Color.hcl(start)).h, (end = d3Color.hcl(end)).h),\n          c = nogamma(start.c, end.c),\n          l = nogamma(start.l, end.l),\n          opacity = nogamma(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.c = c(t);\n        start.l = l(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n  }\n\n  var hcl$2 = hcl$1(hue);\n  var hclLong = hcl$1(nogamma);\n\n  function cubehelix$1(hue) {\n    return (function cubehelixGamma(y) {\n      y = +y;\n\n      function cubehelix(start, end) {\n        var h = hue((start = d3Color.cubehelix(start)).h, (end = d3Color.cubehelix(end)).h),\n            s = nogamma(start.s, end.s),\n            l = nogamma(start.l, end.l),\n            opacity = nogamma(start.opacity, end.opacity);\n        return function(t) {\n          start.h = h(t);\n          start.s = s(t);\n          start.l = l(Math.pow(t, y));\n          start.opacity = opacity(t);\n          return start + \"\";\n        };\n      }\n\n      cubehelix.gamma = cubehelixGamma;\n\n      return cubehelix;\n    })(1);\n  }\n\n  var cubehelix$2 = cubehelix$1(hue);\n  var cubehelixLong = cubehelix$1(nogamma);\n\n  function quantize(interpolator, n) {\n    var samples = new Array(n);\n    for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n    return samples;\n  }\n\n  exports.interpolate = value;\n  exports.interpolateArray = array;\n  exports.interpolateBasis = basis$1;\n  exports.interpolateBasisClosed = basisClosed;\n  exports.interpolateDate = date;\n  exports.interpolateNumber = number;\n  exports.interpolateObject = object;\n  exports.interpolateRound = round;\n  exports.interpolateString = string;\n  exports.interpolateTransformCss = interpolateTransformCss;\n  exports.interpolateTransformSvg = interpolateTransformSvg;\n  exports.interpolateZoom = zoom;\n  exports.interpolateRgb = rgb$1;\n  exports.interpolateRgbBasis = rgbBasis;\n  exports.interpolateRgbBasisClosed = rgbBasisClosed;\n  exports.interpolateHsl = hsl$2;\n  exports.interpolateHslLong = hslLong;\n  exports.interpolateLab = lab$1;\n  exports.interpolateHcl = hcl$2;\n  exports.interpolateHclLong = hclLong;\n  exports.interpolateCubehelix = cubehelix$2;\n  exports.interpolateCubehelixLong = cubehelixLong;\n  exports.quantize = quantize;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n},{\"d3-color\":23}],27:[function(require,module,exports){\n// https://d3js.org/d3-scale/ Version 1.0.3. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-collection'), require('d3-interpolate'), require('d3-format'), require('d3-time'), require('d3-time-format'), require('d3-color')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-collection', 'd3-interpolate', 'd3-format', 'd3-time', 'd3-time-format', 'd3-color'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3,global.d3,global.d3,global.d3,global.d3,global.d3,global.d3));\n}(this, function (exports,d3Array,d3Collection,d3Interpolate,d3Format,d3Time,d3TimeFormat,d3Color) { 'use strict';\n\n  var array = Array.prototype;\n\n  var map$1 = array.map;\n  var slice = array.slice;\n\n  var implicit = {name: \"implicit\"};\n\n  function ordinal(range) {\n    var index = d3Collection.map(),\n        domain = [],\n        unknown = implicit;\n\n    range = range == null ? [] : slice.call(range);\n\n    function scale(d) {\n      var key = d + \"\", i = index.get(key);\n      if (!i) {\n        if (unknown !== implicit) return unknown;\n        index.set(key, i = domain.push(d));\n      }\n      return range[(i - 1) % range.length];\n    }\n\n    scale.domain = function(_) {\n      if (!arguments.length) return domain.slice();\n      domain = [], index = d3Collection.map();\n      var i = -1, n = _.length, d, key;\n      while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n      return scale;\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), scale) : range.slice();\n    };\n\n    scale.unknown = function(_) {\n      return arguments.length ? (unknown = _, scale) : unknown;\n    };\n\n    scale.copy = function() {\n      return ordinal()\n          .domain(domain)\n          .range(range)\n          .unknown(unknown);\n    };\n\n    return scale;\n  }\n\n  function band() {\n    var scale = ordinal().unknown(undefined),\n        domain = scale.domain,\n        ordinalRange = scale.range,\n        range = [0, 1],\n        step,\n        bandwidth,\n        round = false,\n        paddingInner = 0,\n        paddingOuter = 0,\n        align = 0.5;\n\n    delete scale.unknown;\n\n    function rescale() {\n      var n = domain().length,\n          reverse = range[1] < range[0],\n          start = range[reverse - 0],\n          stop = range[1 - reverse];\n      step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n      if (round) step = Math.floor(step);\n      start += (stop - start - step * (n - paddingInner)) * align;\n      bandwidth = step * (1 - paddingInner);\n      if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n      var values = d3Array.range(n).map(function(i) { return start + step * i; });\n      return ordinalRange(reverse ? values.reverse() : values);\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain(_), rescale()) : domain();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n    };\n\n    scale.rangeRound = function(_) {\n      return range = [+_[0], +_[1]], round = true, rescale();\n    };\n\n    scale.bandwidth = function() {\n      return bandwidth;\n    };\n\n    scale.step = function() {\n      return step;\n    };\n\n    scale.round = function(_) {\n      return arguments.length ? (round = !!_, rescale()) : round;\n    };\n\n    scale.padding = function(_) {\n      return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n    };\n\n    scale.paddingInner = function(_) {\n      return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n    };\n\n    scale.paddingOuter = function(_) {\n      return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;\n    };\n\n    scale.align = function(_) {\n      return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n    };\n\n    scale.copy = function() {\n      return band()\n          .domain(domain())\n          .range(range)\n          .round(round)\n          .paddingInner(paddingInner)\n          .paddingOuter(paddingOuter)\n          .align(align);\n    };\n\n    return rescale();\n  }\n\n  function pointish(scale) {\n    var copy = scale.copy;\n\n    scale.padding = scale.paddingOuter;\n    delete scale.paddingInner;\n    delete scale.paddingOuter;\n\n    scale.copy = function() {\n      return pointish(copy());\n    };\n\n    return scale;\n  }\n\n  function point() {\n    return pointish(band().paddingInner(1));\n  }\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function number(x) {\n    return +x;\n  }\n\n  var unit = [0, 1];\n\n  function deinterpolate(a, b) {\n    return (b -= (a = +a))\n        ? function(x) { return (x - a) / b; }\n        : constant(b);\n  }\n\n  function deinterpolateClamp(deinterpolate) {\n    return function(a, b) {\n      var d = deinterpolate(a = +a, b = +b);\n      return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n    };\n  }\n\n  function reinterpolateClamp(reinterpolate) {\n    return function(a, b) {\n      var r = reinterpolate(a = +a, b = +b);\n      return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n    };\n  }\n\n  function bimap(domain, range, deinterpolate, reinterpolate) {\n    var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n    if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n    else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n    return function(x) { return r0(d0(x)); };\n  }\n\n  function polymap(domain, range, deinterpolate, reinterpolate) {\n    var j = Math.min(domain.length, range.length) - 1,\n        d = new Array(j),\n        r = new Array(j),\n        i = -1;\n\n    // Reverse descending domains.\n    if (domain[j] < domain[0]) {\n      domain = domain.slice().reverse();\n      range = range.slice().reverse();\n    }\n\n    while (++i < j) {\n      d[i] = deinterpolate(domain[i], domain[i + 1]);\n      r[i] = reinterpolate(range[i], range[i + 1]);\n    }\n\n    return function(x) {\n      var i = d3Array.bisect(domain, x, 1, j) - 1;\n      return r[i](d[i](x));\n    };\n  }\n\n  function copy(source, target) {\n    return target\n        .domain(source.domain())\n        .range(source.range())\n        .interpolate(source.interpolate())\n        .clamp(source.clamp());\n  }\n\n  // deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n  // reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\n  function continuous(deinterpolate$$, reinterpolate) {\n    var domain = unit,\n        range = unit,\n        interpolate = d3Interpolate.interpolate,\n        clamp = false,\n        piecewise,\n        output,\n        input;\n\n    function rescale() {\n      piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n      output = input = null;\n      return scale;\n    }\n\n    function scale(x) {\n      return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate$$) : deinterpolate$$, interpolate)))(+x);\n    }\n\n    scale.invert = function(y) {\n      return (input || (input = piecewise(range, domain, deinterpolate, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain = map$1.call(_, number), rescale()) : domain.slice();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n    };\n\n    scale.rangeRound = function(_) {\n      return range = slice.call(_), interpolate = d3Interpolate.interpolateRound, rescale();\n    };\n\n    scale.clamp = function(_) {\n      return arguments.length ? (clamp = !!_, rescale()) : clamp;\n    };\n\n    scale.interpolate = function(_) {\n      return arguments.length ? (interpolate = _, rescale()) : interpolate;\n    };\n\n    return rescale();\n  }\n\n  function tickFormat(domain, count, specifier) {\n    var start = domain[0],\n        stop = domain[domain.length - 1],\n        step = d3Array.tickStep(start, stop, count == null ? 10 : count),\n        precision;\n    specifier = d3Format.formatSpecifier(specifier == null ? \",f\" : specifier);\n    switch (specifier.type) {\n      case \"s\": {\n        var value = Math.max(Math.abs(start), Math.abs(stop));\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionPrefix(step, value))) specifier.precision = precision;\n        return d3Format.formatPrefix(specifier, value);\n      }\n      case \"\":\n      case \"e\":\n      case \"g\":\n      case \"p\":\n      case \"r\": {\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n        break;\n      }\n      case \"f\":\n      case \"%\": {\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n        break;\n      }\n    }\n    return d3Format.format(specifier);\n  }\n\n  function linearish(scale) {\n    var domain = scale.domain;\n\n    scale.ticks = function(count) {\n      var d = domain();\n      return d3Array.ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      return tickFormat(domain(), count, specifier);\n    };\n\n    scale.nice = function(count) {\n      var d = domain(),\n          i = d.length - 1,\n          n = count == null ? 10 : count,\n          start = d[0],\n          stop = d[i],\n          step = d3Array.tickStep(start, stop, n);\n\n      if (step) {\n        step = d3Array.tickStep(Math.floor(start / step) * step, Math.ceil(stop / step) * step, n);\n        d[0] = Math.floor(start / step) * step;\n        d[i] = Math.ceil(stop / step) * step;\n        domain(d);\n      }\n\n      return scale;\n    };\n\n    return scale;\n  }\n\n  function linear() {\n    var scale = continuous(deinterpolate, d3Interpolate.interpolateNumber);\n\n    scale.copy = function() {\n      return copy(scale, linear());\n    };\n\n    return linearish(scale);\n  }\n\n  function identity() {\n    var domain = [0, 1];\n\n    function scale(x) {\n      return +x;\n    }\n\n    scale.invert = scale;\n\n    scale.domain = scale.range = function(_) {\n      return arguments.length ? (domain = map$1.call(_, number), scale) : domain.slice();\n    };\n\n    scale.copy = function() {\n      return identity().domain(domain);\n    };\n\n    return linearish(scale);\n  }\n\n  function nice(domain, interval) {\n    domain = domain.slice();\n\n    var i0 = 0,\n        i1 = domain.length - 1,\n        x0 = domain[i0],\n        x1 = domain[i1],\n        t;\n\n    if (x1 < x0) {\n      t = i0, i0 = i1, i1 = t;\n      t = x0, x0 = x1, x1 = t;\n    }\n\n    domain[i0] = interval.floor(x0);\n    domain[i1] = interval.ceil(x1);\n    return domain;\n  }\n\n  function deinterpolate$1(a, b) {\n    return (b = Math.log(b / a))\n        ? function(x) { return Math.log(x / a) / b; }\n        : constant(b);\n  }\n\n  function reinterpolate(a, b) {\n    return a < 0\n        ? function(t) { return -Math.pow(-b, t) * Math.pow(-a, 1 - t); }\n        : function(t) { return Math.pow(b, t) * Math.pow(a, 1 - t); };\n  }\n\n  function pow10(x) {\n    return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n  }\n\n  function powp(base) {\n    return base === 10 ? pow10\n        : base === Math.E ? Math.exp\n        : function(x) { return Math.pow(base, x); };\n  }\n\n  function logp(base) {\n    return base === Math.E ? Math.log\n        : base === 10 && Math.log10\n        || base === 2 && Math.log2\n        || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n  }\n\n  function reflect(f) {\n    return function(x) {\n      return -f(-x);\n    };\n  }\n\n  function log() {\n    var scale = continuous(deinterpolate$1, reinterpolate).domain([1, 10]),\n        domain = scale.domain,\n        base = 10,\n        logs = logp(10),\n        pows = powp(10);\n\n    function rescale() {\n      logs = logp(base), pows = powp(base);\n      if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);\n      return scale;\n    }\n\n    scale.base = function(_) {\n      return arguments.length ? (base = +_, rescale()) : base;\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain(_), rescale()) : domain();\n    };\n\n    scale.ticks = function(count) {\n      var d = domain(),\n          u = d[0],\n          v = d[d.length - 1],\n          r;\n\n      if (r = v < u) i = u, u = v, v = i;\n\n      var i = logs(u),\n          j = logs(v),\n          p,\n          k,\n          t,\n          n = count == null ? 10 : +count,\n          z = [];\n\n      if (!(base % 1) && j - i < n) {\n        i = Math.round(i) - 1, j = Math.round(j) + 1;\n        if (u > 0) for (; i < j; ++i) {\n          for (k = 1, p = pows(i); k < base; ++k) {\n            t = p * k;\n            if (t < u) continue;\n            if (t > v) break;\n            z.push(t);\n          }\n        } else for (; i < j; ++i) {\n          for (k = base - 1, p = pows(i); k >= 1; --k) {\n            t = p * k;\n            if (t < u) continue;\n            if (t > v) break;\n            z.push(t);\n          }\n        }\n      } else {\n        z = d3Array.ticks(i, j, Math.min(j - i, n)).map(pows);\n      }\n\n      return r ? z.reverse() : z;\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n      if (typeof specifier !== \"function\") specifier = d3Format.format(specifier);\n      if (count === Infinity) return specifier;\n      if (count == null) count = 10;\n      var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n      return function(d) {\n        var i = d / pows(Math.round(logs(d)));\n        if (i * base < base - 0.5) i *= base;\n        return i <= k ? specifier(d) : \"\";\n      };\n    };\n\n    scale.nice = function() {\n      return domain(nice(domain(), {\n        floor: function(x) { return pows(Math.floor(logs(x))); },\n        ceil: function(x) { return pows(Math.ceil(logs(x))); }\n      }));\n    };\n\n    scale.copy = function() {\n      return copy(scale, log().base(base));\n    };\n\n    return scale;\n  }\n\n  function raise(x, exponent) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  }\n\n  function pow() {\n    var exponent = 1,\n        scale = continuous(deinterpolate, reinterpolate),\n        domain = scale.domain;\n\n    function deinterpolate(a, b) {\n      return (b = raise(b, exponent) - (a = raise(a, exponent)))\n          ? function(x) { return (raise(x, exponent) - a) / b; }\n          : constant(b);\n    }\n\n    function reinterpolate(a, b) {\n      b = raise(b, exponent) - (a = raise(a, exponent));\n      return function(t) { return raise(a + b * t, 1 / exponent); };\n    }\n\n    scale.exponent = function(_) {\n      return arguments.length ? (exponent = +_, domain(domain())) : exponent;\n    };\n\n    scale.copy = function() {\n      return copy(scale, pow().exponent(exponent));\n    };\n\n    return linearish(scale);\n  }\n\n  function sqrt() {\n    return pow().exponent(0.5);\n  }\n\n  function quantile$1() {\n    var domain = [],\n        range = [],\n        thresholds = [];\n\n    function rescale() {\n      var i = 0, n = Math.max(1, range.length);\n      thresholds = new Array(n - 1);\n      while (++i < n) thresholds[i - 1] = d3Array.quantile(domain, i / n);\n      return scale;\n    }\n\n    function scale(x) {\n      if (!isNaN(x = +x)) return range[d3Array.bisect(thresholds, x)];\n    }\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return i < 0 ? [NaN, NaN] : [\n        i > 0 ? thresholds[i - 1] : domain[0],\n        i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n      ];\n    };\n\n    scale.domain = function(_) {\n      if (!arguments.length) return domain.slice();\n      domain = [];\n      for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);\n      domain.sort(d3Array.ascending);\n      return rescale();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n    };\n\n    scale.quantiles = function() {\n      return thresholds.slice();\n    };\n\n    scale.copy = function() {\n      return quantile$1()\n          .domain(domain)\n          .range(range);\n    };\n\n    return scale;\n  }\n\n  function quantize() {\n    var x0 = 0,\n        x1 = 1,\n        n = 1,\n        domain = [0.5],\n        range = [0, 1];\n\n    function scale(x) {\n      if (x <= x) return range[d3Array.bisect(domain, x, 0, n)];\n    }\n\n    function rescale() {\n      var i = -1;\n      domain = new Array(n);\n      while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n      return scale;\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (n = (range = slice.call(_)).length - 1, rescale()) : range.slice();\n    };\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return i < 0 ? [NaN, NaN]\n          : i < 1 ? [x0, domain[0]]\n          : i >= n ? [domain[n - 1], x1]\n          : [domain[i - 1], domain[i]];\n    };\n\n    scale.copy = function() {\n      return quantize()\n          .domain([x0, x1])\n          .range(range);\n    };\n\n    return linearish(scale);\n  }\n\n  function threshold() {\n    var domain = [0.5],\n        range = [0, 1],\n        n = 1;\n\n    function scale(x) {\n      if (x <= x) return range[d3Array.bisect(domain, x, 0, n)];\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n    };\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return [domain[i - 1], domain[i]];\n    };\n\n    scale.copy = function() {\n      return threshold()\n          .domain(domain)\n          .range(range);\n    };\n\n    return scale;\n  }\n\n  var durationSecond = 1000;\n  var durationMinute = durationSecond * 60;\n  var durationHour = durationMinute * 60;\n  var durationDay = durationHour * 24;\n  var durationWeek = durationDay * 7;\n  var durationMonth = durationDay * 30;\n  var durationYear = durationDay * 365;\n  function date(t) {\n    return new Date(t);\n  }\n\n  function number$1(t) {\n    return t instanceof Date ? +t : +new Date(+t);\n  }\n\n  function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n    var scale = continuous(deinterpolate, d3Interpolate.interpolateNumber),\n        invert = scale.invert,\n        domain = scale.domain;\n\n    var formatMillisecond = format(\".%L\"),\n        formatSecond = format(\":%S\"),\n        formatMinute = format(\"%I:%M\"),\n        formatHour = format(\"%I %p\"),\n        formatDay = format(\"%a %d\"),\n        formatWeek = format(\"%b %d\"),\n        formatMonth = format(\"%B\"),\n        formatYear = format(\"%Y\");\n\n    var tickIntervals = [\n      [second,  1,      durationSecond],\n      [second,  5,  5 * durationSecond],\n      [second, 15, 15 * durationSecond],\n      [second, 30, 30 * durationSecond],\n      [minute,  1,      durationMinute],\n      [minute,  5,  5 * durationMinute],\n      [minute, 15, 15 * durationMinute],\n      [minute, 30, 30 * durationMinute],\n      [  hour,  1,      durationHour  ],\n      [  hour,  3,  3 * durationHour  ],\n      [  hour,  6,  6 * durationHour  ],\n      [  hour, 12, 12 * durationHour  ],\n      [   day,  1,      durationDay   ],\n      [   day,  2,  2 * durationDay   ],\n      [  week,  1,      durationWeek  ],\n      [ month,  1,      durationMonth ],\n      [ month,  3,  3 * durationMonth ],\n      [  year,  1,      durationYear  ]\n    ];\n\n    function tickFormat(date) {\n      return (second(date) < date ? formatMillisecond\n          : minute(date) < date ? formatSecond\n          : hour(date) < date ? formatMinute\n          : day(date) < date ? formatHour\n          : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n          : year(date) < date ? formatMonth\n          : formatYear)(date);\n    }\n\n    function tickInterval(interval, start, stop, step) {\n      if (interval == null) interval = 10;\n\n      // If a desired tick count is specified, pick a reasonable tick interval\n      // based on the extent of the domain and a rough estimate of tick size.\n      // Otherwise, assume interval is already a time interval and use it.\n      if (typeof interval === \"number\") {\n        var target = Math.abs(stop - start) / interval,\n            i = d3Array.bisector(function(i) { return i[2]; }).right(tickIntervals, target);\n        if (i === tickIntervals.length) {\n          step = d3Array.tickStep(start / durationYear, stop / durationYear, interval);\n          interval = year;\n        } else if (i) {\n          i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n          step = i[1];\n          interval = i[0];\n        } else {\n          step = d3Array.tickStep(start, stop, interval);\n          interval = millisecond;\n        }\n      }\n\n      return step == null ? interval : interval.every(step);\n    }\n\n    scale.invert = function(y) {\n      return new Date(invert(y));\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? domain(map$1.call(_, number$1)) : domain().map(date);\n    };\n\n    scale.ticks = function(interval, step) {\n      var d = domain(),\n          t0 = d[0],\n          t1 = d[d.length - 1],\n          r = t1 < t0,\n          t;\n      if (r) t = t0, t0 = t1, t1 = t;\n      t = tickInterval(interval, t0, t1, step);\n      t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n      return r ? t.reverse() : t;\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      return specifier == null ? tickFormat : format(specifier);\n    };\n\n    scale.nice = function(interval, step) {\n      var d = domain();\n      return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\n          ? domain(nice(d, interval))\n          : scale;\n    };\n\n    scale.copy = function() {\n      return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n    };\n\n    return scale;\n  }\n\n  function time() {\n    return calendar(d3Time.timeYear, d3Time.timeMonth, d3Time.timeWeek, d3Time.timeDay, d3Time.timeHour, d3Time.timeMinute, d3Time.timeSecond, d3Time.timeMillisecond, d3TimeFormat.timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);\n  }\n\n  function utcTime() {\n    return calendar(d3Time.utcYear, d3Time.utcMonth, d3Time.utcWeek, d3Time.utcDay, d3Time.utcHour, d3Time.utcMinute, d3Time.utcSecond, d3Time.utcMillisecond, d3TimeFormat.utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]);\n  }\n\n  function colors(s) {\n    return s.match(/.{6}/g).map(function(x) {\n      return \"#\" + x;\n    });\n  }\n\n  var category10 = colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n\n  var category20b = colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n\n  var category20c = colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n\n  var category20 = colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n\n  var cubehelix$1 = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(300, 0.5, 0.0), d3Color.cubehelix(-240, 0.5, 1.0));\n\n  var warm = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(-100, 0.75, 0.35), d3Color.cubehelix(80, 1.50, 0.8));\n\n  var cool = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(260, 0.75, 0.35), d3Color.cubehelix(80, 1.50, 0.8));\n\n  var rainbow = d3Color.cubehelix();\n\n  function rainbow$1(t) {\n    if (t < 0 || t > 1) t -= Math.floor(t);\n    var ts = Math.abs(t - 0.5);\n    rainbow.h = 360 * t - 100;\n    rainbow.s = 1.5 - 1.5 * ts;\n    rainbow.l = 0.8 - 0.9 * ts;\n    return rainbow + \"\";\n  }\n\n  function ramp(range) {\n    var n = range.length;\n    return function(t) {\n      return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n    };\n  }\n\n  var viridis = ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\n  var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\n  var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\n  var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n\n  function sequential(interpolator) {\n    var x0 = 0,\n        x1 = 1,\n        clamp = false;\n\n    function scale(x) {\n      var t = (x - x0) / (x1 - x0);\n      return interpolator(clamp ? Math.max(0, Math.min(1, t)) : t);\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (x0 = +_[0], x1 = +_[1], scale) : [x0, x1];\n    };\n\n    scale.clamp = function(_) {\n      return arguments.length ? (clamp = !!_, scale) : clamp;\n    };\n\n    scale.interpolator = function(_) {\n      return arguments.length ? (interpolator = _, scale) : interpolator;\n    };\n\n    scale.copy = function() {\n      return sequential(interpolator).domain([x0, x1]).clamp(clamp);\n    };\n\n    return linearish(scale);\n  }\n\n  exports.scaleBand = band;\n  exports.scalePoint = point;\n  exports.scaleIdentity = identity;\n  exports.scaleLinear = linear;\n  exports.scaleLog = log;\n  exports.scaleOrdinal = ordinal;\n  exports.scaleImplicit = implicit;\n  exports.scalePow = pow;\n  exports.scaleSqrt = sqrt;\n  exports.scaleQuantile = quantile$1;\n  exports.scaleQuantize = quantize;\n  exports.scaleThreshold = threshold;\n  exports.scaleTime = time;\n  exports.scaleUtc = utcTime;\n  exports.schemeCategory10 = category10;\n  exports.schemeCategory20b = category20b;\n  exports.schemeCategory20c = category20c;\n  exports.schemeCategory20 = category20;\n  exports.interpolateCubehelixDefault = cubehelix$1;\n  exports.interpolateRainbow = rainbow$1;\n  exports.interpolateWarm = warm;\n  exports.interpolateCool = cool;\n  exports.interpolateViridis = viridis;\n  exports.interpolateMagma = magma;\n  exports.interpolateInferno = inferno;\n  exports.interpolatePlasma = plasma;\n  exports.scaleSequential = sequential;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n},{\"d3-array\":21,\"d3-collection\":22,\"d3-color\":23,\"d3-format\":25,\"d3-interpolate\":26,\"d3-time\":29,\"d3-time-format\":28}],28:[function(require,module,exports){\n// https://d3js.org/d3-time-format/ Version 2.0.2. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-time')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-time'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3));\n}(this, function (exports,d3Time) { 'use strict';\n\n  function localDate(d) {\n    if (0 <= d.y && d.y < 100) {\n      var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n      date.setFullYear(d.y);\n      return date;\n    }\n    return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n  }\n\n  function utcDate(d) {\n    if (0 <= d.y && d.y < 100) {\n      var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n      date.setUTCFullYear(d.y);\n      return date;\n    }\n    return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n  }\n\n  function newYear(y) {\n    return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n  }\n\n  function formatLocale(locale) {\n    var locale_dateTime = locale.dateTime,\n        locale_date = locale.date,\n        locale_time = locale.time,\n        locale_periods = locale.periods,\n        locale_weekdays = locale.days,\n        locale_shortWeekdays = locale.shortDays,\n        locale_months = locale.months,\n        locale_shortMonths = locale.shortMonths;\n\n    var periodRe = formatRe(locale_periods),\n        periodLookup = formatLookup(locale_periods),\n        weekdayRe = formatRe(locale_weekdays),\n        weekdayLookup = formatLookup(locale_weekdays),\n        shortWeekdayRe = formatRe(locale_shortWeekdays),\n        shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n        monthRe = formatRe(locale_months),\n        monthLookup = formatLookup(locale_months),\n        shortMonthRe = formatRe(locale_shortMonths),\n        shortMonthLookup = formatLookup(locale_shortMonths);\n\n    var formats = {\n      \"a\": formatShortWeekday,\n      \"A\": formatWeekday,\n      \"b\": formatShortMonth,\n      \"B\": formatMonth,\n      \"c\": null,\n      \"d\": formatDayOfMonth,\n      \"e\": formatDayOfMonth,\n      \"H\": formatHour24,\n      \"I\": formatHour12,\n      \"j\": formatDayOfYear,\n      \"L\": formatMilliseconds,\n      \"m\": formatMonthNumber,\n      \"M\": formatMinutes,\n      \"p\": formatPeriod,\n      \"S\": formatSeconds,\n      \"U\": formatWeekNumberSunday,\n      \"w\": formatWeekdayNumber,\n      \"W\": formatWeekNumberMonday,\n      \"x\": null,\n      \"X\": null,\n      \"y\": formatYear,\n      \"Y\": formatFullYear,\n      \"Z\": formatZone,\n      \"%\": formatLiteralPercent\n    };\n\n    var utcFormats = {\n      \"a\": formatUTCShortWeekday,\n      \"A\": formatUTCWeekday,\n      \"b\": formatUTCShortMonth,\n      \"B\": formatUTCMonth,\n      \"c\": null,\n      \"d\": formatUTCDayOfMonth,\n      \"e\": formatUTCDayOfMonth,\n      \"H\": formatUTCHour24,\n      \"I\": formatUTCHour12,\n      \"j\": formatUTCDayOfYear,\n      \"L\": formatUTCMilliseconds,\n      \"m\": formatUTCMonthNumber,\n      \"M\": formatUTCMinutes,\n      \"p\": formatUTCPeriod,\n      \"S\": formatUTCSeconds,\n      \"U\": formatUTCWeekNumberSunday,\n      \"w\": formatUTCWeekdayNumber,\n      \"W\": formatUTCWeekNumberMonday,\n      \"x\": null,\n      \"X\": null,\n      \"y\": formatUTCYear,\n      \"Y\": formatUTCFullYear,\n      \"Z\": formatUTCZone,\n      \"%\": formatLiteralPercent\n    };\n\n    var parses = {\n      \"a\": parseShortWeekday,\n      \"A\": parseWeekday,\n      \"b\": parseShortMonth,\n      \"B\": parseMonth,\n      \"c\": parseLocaleDateTime,\n      \"d\": parseDayOfMonth,\n      \"e\": parseDayOfMonth,\n      \"H\": parseHour24,\n      \"I\": parseHour24,\n      \"j\": parseDayOfYear,\n      \"L\": parseMilliseconds,\n      \"m\": parseMonthNumber,\n      \"M\": parseMinutes,\n      \"p\": parsePeriod,\n      \"S\": parseSeconds,\n      \"U\": parseWeekNumberSunday,\n      \"w\": parseWeekdayNumber,\n      \"W\": parseWeekNumberMonday,\n      \"x\": parseLocaleDate,\n      \"X\": parseLocaleTime,\n      \"y\": parseYear,\n      \"Y\": parseFullYear,\n      \"Z\": parseZone,\n      \"%\": parseLiteralPercent\n    };\n\n    // These recursive directive definitions must be deferred.\n    formats.x = newFormat(locale_date, formats);\n    formats.X = newFormat(locale_time, formats);\n    formats.c = newFormat(locale_dateTime, formats);\n    utcFormats.x = newFormat(locale_date, utcFormats);\n    utcFormats.X = newFormat(locale_time, utcFormats);\n    utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n    function newFormat(specifier, formats) {\n      return function(date) {\n        var string = [],\n            i = -1,\n            j = 0,\n            n = specifier.length,\n            c,\n            pad,\n            format;\n\n        if (!(date instanceof Date)) date = new Date(+date);\n\n        while (++i < n) {\n          if (specifier.charCodeAt(i) === 37) {\n            string.push(specifier.slice(j, i));\n            if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n            else pad = c === \"e\" ? \" \" : \"0\";\n            if (format = formats[c]) c = format(date, pad);\n            string.push(c);\n            j = i + 1;\n          }\n        }\n\n        string.push(specifier.slice(j, i));\n        return string.join(\"\");\n      };\n    }\n\n    function newParse(specifier, newDate) {\n      return function(string) {\n        var d = newYear(1900),\n            i = parseSpecifier(d, specifier, string += \"\", 0);\n        if (i != string.length) return null;\n\n        // The am-pm flag is 0 for AM, and 1 for PM.\n        if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n        // Convert day-of-week and week-of-year to day-of-year.\n        if (\"W\" in d || \"U\" in d) {\n          if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n          var day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n          d.m = 0;\n          d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n        }\n\n        // If a time zone is specified, all fields are interpreted as UTC and then\n        // offset according to the specified time zone.\n        if (\"Z\" in d) {\n          d.H += d.Z / 100 | 0;\n          d.M += d.Z % 100;\n          return utcDate(d);\n        }\n\n        // Otherwise, all fields are in local time.\n        return newDate(d);\n      };\n    }\n\n    function parseSpecifier(d, specifier, string, j) {\n      var i = 0,\n          n = specifier.length,\n          m = string.length,\n          c,\n          parse;\n\n      while (i < n) {\n        if (j >= m) return -1;\n        c = specifier.charCodeAt(i++);\n        if (c === 37) {\n          c = specifier.charAt(i++);\n          parse = parses[c in pads ? specifier.charAt(i++) : c];\n          if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n        } else if (c != string.charCodeAt(j++)) {\n          return -1;\n        }\n      }\n\n      return j;\n    }\n\n    function parsePeriod(d, string, i) {\n      var n = periodRe.exec(string.slice(i));\n      return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseShortWeekday(d, string, i) {\n      var n = shortWeekdayRe.exec(string.slice(i));\n      return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseWeekday(d, string, i) {\n      var n = weekdayRe.exec(string.slice(i));\n      return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseShortMonth(d, string, i) {\n      var n = shortMonthRe.exec(string.slice(i));\n      return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseMonth(d, string, i) {\n      var n = monthRe.exec(string.slice(i));\n      return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseLocaleDateTime(d, string, i) {\n      return parseSpecifier(d, locale_dateTime, string, i);\n    }\n\n    function parseLocaleDate(d, string, i) {\n      return parseSpecifier(d, locale_date, string, i);\n    }\n\n    function parseLocaleTime(d, string, i) {\n      return parseSpecifier(d, locale_time, string, i);\n    }\n\n    function formatShortWeekday(d) {\n      return locale_shortWeekdays[d.getDay()];\n    }\n\n    function formatWeekday(d) {\n      return locale_weekdays[d.getDay()];\n    }\n\n    function formatShortMonth(d) {\n      return locale_shortMonths[d.getMonth()];\n    }\n\n    function formatMonth(d) {\n      return locale_months[d.getMonth()];\n    }\n\n    function formatPeriod(d) {\n      return locale_periods[+(d.getHours() >= 12)];\n    }\n\n    function formatUTCShortWeekday(d) {\n      return locale_shortWeekdays[d.getUTCDay()];\n    }\n\n    function formatUTCWeekday(d) {\n      return locale_weekdays[d.getUTCDay()];\n    }\n\n    function formatUTCShortMonth(d) {\n      return locale_shortMonths[d.getUTCMonth()];\n    }\n\n    function formatUTCMonth(d) {\n      return locale_months[d.getUTCMonth()];\n    }\n\n    function formatUTCPeriod(d) {\n      return locale_periods[+(d.getUTCHours() >= 12)];\n    }\n\n    return {\n      format: function(specifier) {\n        var f = newFormat(specifier += \"\", formats);\n        f.toString = function() { return specifier; };\n        return f;\n      },\n      parse: function(specifier) {\n        var p = newParse(specifier += \"\", localDate);\n        p.toString = function() { return specifier; };\n        return p;\n      },\n      utcFormat: function(specifier) {\n        var f = newFormat(specifier += \"\", utcFormats);\n        f.toString = function() { return specifier; };\n        return f;\n      },\n      utcParse: function(specifier) {\n        var p = newParse(specifier, utcDate);\n        p.toString = function() { return specifier; };\n        return p;\n      }\n    };\n  }\n\n  var pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"};\n  var numberRe = /^\\s*\\d+/;\n  var percentRe = /^%/;\n  var requoteRe = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n  function pad(value, fill, width) {\n    var sign = value < 0 ? \"-\" : \"\",\n        string = (sign ? -value : value) + \"\",\n        length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n  }\n\n  function requote(s) {\n    return s.replace(requoteRe, \"\\\\$&\");\n  }\n\n  function formatRe(names) {\n    return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n  }\n\n  function formatLookup(names) {\n    var map = {}, i = -1, n = names.length;\n    while (++i < n) map[names[i].toLowerCase()] = i;\n    return map;\n  }\n\n  function parseWeekdayNumber(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 1));\n    return n ? (d.w = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberSunday(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.U = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberMonday(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.W = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseFullYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 4));\n    return n ? (d.y = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n  }\n\n  function parseZone(d, string, i) {\n    var n = /^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(string.slice(i, i + 6));\n    return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n  }\n\n  function parseMonthNumber(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n  }\n\n  function parseDayOfMonth(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseDayOfYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseHour24(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.H = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMinutes(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.M = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseSeconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.S = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMilliseconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.L = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseLiteralPercent(d, string, i) {\n    var n = percentRe.exec(string.slice(i, i + 1));\n    return n ? i + n[0].length : -1;\n  }\n\n  function formatDayOfMonth(d, p) {\n    return pad(d.getDate(), p, 2);\n  }\n\n  function formatHour24(d, p) {\n    return pad(d.getHours(), p, 2);\n  }\n\n  function formatHour12(d, p) {\n    return pad(d.getHours() % 12 || 12, p, 2);\n  }\n\n  function formatDayOfYear(d, p) {\n    return pad(1 + d3Time.timeDay.count(d3Time.timeYear(d), d), p, 3);\n  }\n\n  function formatMilliseconds(d, p) {\n    return pad(d.getMilliseconds(), p, 3);\n  }\n\n  function formatMonthNumber(d, p) {\n    return pad(d.getMonth() + 1, p, 2);\n  }\n\n  function formatMinutes(d, p) {\n    return pad(d.getMinutes(), p, 2);\n  }\n\n  function formatSeconds(d, p) {\n    return pad(d.getSeconds(), p, 2);\n  }\n\n  function formatWeekNumberSunday(d, p) {\n    return pad(d3Time.timeSunday.count(d3Time.timeYear(d), d), p, 2);\n  }\n\n  function formatWeekdayNumber(d) {\n    return d.getDay();\n  }\n\n  function formatWeekNumberMonday(d, p) {\n    return pad(d3Time.timeMonday.count(d3Time.timeYear(d), d), p, 2);\n  }\n\n  function formatYear(d, p) {\n    return pad(d.getFullYear() % 100, p, 2);\n  }\n\n  function formatFullYear(d, p) {\n    return pad(d.getFullYear() % 10000, p, 4);\n  }\n\n  function formatZone(d) {\n    var z = d.getTimezoneOffset();\n    return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n        + pad(z / 60 | 0, \"0\", 2)\n        + pad(z % 60, \"0\", 2);\n  }\n\n  function formatUTCDayOfMonth(d, p) {\n    return pad(d.getUTCDate(), p, 2);\n  }\n\n  function formatUTCHour24(d, p) {\n    return pad(d.getUTCHours(), p, 2);\n  }\n\n  function formatUTCHour12(d, p) {\n    return pad(d.getUTCHours() % 12 || 12, p, 2);\n  }\n\n  function formatUTCDayOfYear(d, p) {\n    return pad(1 + d3Time.utcDay.count(d3Time.utcYear(d), d), p, 3);\n  }\n\n  function formatUTCMilliseconds(d, p) {\n    return pad(d.getUTCMilliseconds(), p, 3);\n  }\n\n  function formatUTCMonthNumber(d, p) {\n    return pad(d.getUTCMonth() + 1, p, 2);\n  }\n\n  function formatUTCMinutes(d, p) {\n    return pad(d.getUTCMinutes(), p, 2);\n  }\n\n  function formatUTCSeconds(d, p) {\n    return pad(d.getUTCSeconds(), p, 2);\n  }\n\n  function formatUTCWeekNumberSunday(d, p) {\n    return pad(d3Time.utcSunday.count(d3Time.utcYear(d), d), p, 2);\n  }\n\n  function formatUTCWeekdayNumber(d) {\n    return d.getUTCDay();\n  }\n\n  function formatUTCWeekNumberMonday(d, p) {\n    return pad(d3Time.utcMonday.count(d3Time.utcYear(d), d), p, 2);\n  }\n\n  function formatUTCYear(d, p) {\n    return pad(d.getUTCFullYear() % 100, p, 2);\n  }\n\n  function formatUTCFullYear(d, p) {\n    return pad(d.getUTCFullYear() % 10000, p, 4);\n  }\n\n  function formatUTCZone() {\n    return \"+0000\";\n  }\n\n  function formatLiteralPercent() {\n    return \"%\";\n  }\n\n  var locale;\n  defaultLocale({\n    dateTime: \"%x, %X\",\n    date: \"%-m/%-d/%Y\",\n    time: \"%-I:%M:%S %p\",\n    periods: [\"AM\", \"PM\"],\n    days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n    shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n    months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n    shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n  });\n\n  function defaultLocale(definition) {\n    locale = formatLocale(definition);\n    exports.timeFormat = locale.format;\n    exports.timeParse = locale.parse;\n    exports.utcFormat = locale.utcFormat;\n    exports.utcParse = locale.utcParse;\n    return locale;\n  }\n\n  var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\n  function formatIsoNative(date) {\n    return date.toISOString();\n  }\n\n  var formatIso = Date.prototype.toISOString\n      ? formatIsoNative\n      : exports.utcFormat(isoSpecifier);\n\n  function parseIsoNative(string) {\n    var date = new Date(string);\n    return isNaN(date) ? null : date;\n  }\n\n  var parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n      ? parseIsoNative\n      : exports.utcParse(isoSpecifier);\n\n  exports.timeFormatDefaultLocale = defaultLocale;\n  exports.timeFormatLocale = formatLocale;\n  exports.isoFormat = formatIso;\n  exports.isoParse = parseIso;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n},{\"d3-time\":29}],29:[function(require,module,exports){\n// https://d3js.org/d3-time/ Version 1.0.3. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, (function (exports) { 'use strict';\n\nvar t0 = new Date;\nvar t1 = new Date;\n\nfunction newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(new Date(+start)); while (offseti(start, step), floori(start), start < stop)\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      while (--step >= 0) while (offseti(date, 1), !test(date)) {} // eslint-disable-line no-empty\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n\nvar millisecond = newInterval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return newInterval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nvar milliseconds = millisecond.range;\n\nvar durationSecond = 1e3;\nvar durationMinute = 6e4;\nvar durationHour = 36e5;\nvar durationDay = 864e5;\nvar durationWeek = 6048e5;\n\nvar second = newInterval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nvar seconds = second.range;\n\nvar minute = newInterval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nvar minutes = minute.range;\n\nvar hour = newInterval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nvar hours = hour.range;\n\nvar day = newInterval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nvar days = day.range;\n\nfunction weekday(i) {\n  return newInterval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nvar sunday = weekday(0);\nvar monday = weekday(1);\nvar tuesday = weekday(2);\nvar wednesday = weekday(3);\nvar thursday = weekday(4);\nvar friday = weekday(5);\nvar saturday = weekday(6);\n\nvar sundays = sunday.range;\nvar mondays = monday.range;\nvar tuesdays = tuesday.range;\nvar wednesdays = wednesday.range;\nvar thursdays = thursday.range;\nvar fridays = friday.range;\nvar saturdays = saturday.range;\n\nvar month = newInterval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nvar months = month.range;\n\nvar year = newInterval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nvar years = year.range;\n\nvar utcMinute = newInterval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nvar utcMinutes = utcMinute.range;\n\nvar utcHour = newInterval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nvar utcHours = utcHour.range;\n\nvar utcDay = newInterval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nvar utcDays = utcDay.range;\n\nfunction utcWeekday(i) {\n  return newInterval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nvar utcSunday = utcWeekday(0);\nvar utcMonday = utcWeekday(1);\nvar utcTuesday = utcWeekday(2);\nvar utcWednesday = utcWeekday(3);\nvar utcThursday = utcWeekday(4);\nvar utcFriday = utcWeekday(5);\nvar utcSaturday = utcWeekday(6);\n\nvar utcSundays = utcSunday.range;\nvar utcMondays = utcMonday.range;\nvar utcTuesdays = utcTuesday.range;\nvar utcWednesdays = utcWednesday.range;\nvar utcThursdays = utcThursday.range;\nvar utcFridays = utcFriday.range;\nvar utcSaturdays = utcSaturday.range;\n\nvar utcMonth = newInterval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nvar utcMonths = utcMonth.range;\n\nvar utcYear = newInterval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nvar utcYears = utcYear.range;\n\nexports.timeInterval = newInterval;\nexports.timeMillisecond = millisecond;\nexports.timeMilliseconds = milliseconds;\nexports.utcMillisecond = millisecond;\nexports.utcMilliseconds = milliseconds;\nexports.timeSecond = second;\nexports.timeSeconds = seconds;\nexports.utcSecond = second;\nexports.utcSeconds = seconds;\nexports.timeMinute = minute;\nexports.timeMinutes = minutes;\nexports.timeHour = hour;\nexports.timeHours = hours;\nexports.timeDay = day;\nexports.timeDays = days;\nexports.timeWeek = sunday;\nexports.timeWeeks = sundays;\nexports.timeSunday = sunday;\nexports.timeSundays = sundays;\nexports.timeMonday = monday;\nexports.timeMondays = mondays;\nexports.timeTuesday = tuesday;\nexports.timeTuesdays = tuesdays;\nexports.timeWednesday = wednesday;\nexports.timeWednesdays = wednesdays;\nexports.timeThursday = thursday;\nexports.timeThursdays = thursdays;\nexports.timeFriday = friday;\nexports.timeFridays = fridays;\nexports.timeSaturday = saturday;\nexports.timeSaturdays = saturdays;\nexports.timeMonth = month;\nexports.timeMonths = months;\nexports.timeYear = year;\nexports.timeYears = years;\nexports.utcMinute = utcMinute;\nexports.utcMinutes = utcMinutes;\nexports.utcHour = utcHour;\nexports.utcHours = utcHours;\nexports.utcDay = utcDay;\nexports.utcDays = utcDays;\nexports.utcWeek = utcSunday;\nexports.utcWeeks = utcSundays;\nexports.utcSunday = utcSunday;\nexports.utcSundays = utcSundays;\nexports.utcMonday = utcMonday;\nexports.utcMondays = utcMondays;\nexports.utcTuesday = utcTuesday;\nexports.utcTuesdays = utcTuesdays;\nexports.utcWednesday = utcWednesday;\nexports.utcWednesdays = utcWednesdays;\nexports.utcThursday = utcThursday;\nexports.utcThursdays = utcThursdays;\nexports.utcFriday = utcFriday;\nexports.utcFridays = utcFridays;\nexports.utcSaturday = utcSaturday;\nexports.utcSaturdays = utcSaturdays;\nexports.utcMonth = utcMonth;\nexports.utcMonths = utcMonths;\nexports.utcYear = utcYear;\nexports.utcYears = utcYears;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n},{}],30:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.BarChart = exports.BarChartConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chartWithColorGroups = require(\"./chart-with-color-groups\");\n\nvar _utils = require(\"./utils\");\n\nvar _legend = require(\"./legend\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BarChartConfig = exports.BarChartConfig = function (_ChartWithColorGroups) {\n    _inherits(BarChartConfig, _ChartWithColorGroups);\n\n    function BarChartConfig(custom) {\n        _classCallCheck(this, BarChartConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(BarChartConfig).call(this));\n\n        _this.svgClass = _this.cssClassPrefix + 'bar-chart';\n        _this.showLegend = true;\n        _this.showTooltip = true;\n        _this.x = { // X axis config\n            title: '', // axis label\n            key: 0,\n            value: function value(d, key) {\n                return _utils.Utils.isNumber(d) ? d : d[key];\n            }, // x value accessor\n            scale: \"ordinal\",\n            orient: \"bottom\",\n            ticks: undefined\n        };\n        _this.y = { // Y axis config\n            key: 1,\n            value: function value(d, key) {\n                return _utils.Utils.isNumber(d) ? d : d[key];\n            }, // x value accessor\n            title: '', // axis label,\n            orient: \"left\",\n            scale: \"linear\"\n        };\n        _this.transition = true;\n\n        var config = _this;\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n\n        return _this;\n    }\n\n    return BarChartConfig;\n}(_chartWithColorGroups.ChartWithColorGroupsConfig);\n\nvar BarChart = exports.BarChart = function (_ChartWithColorGroups2) {\n    _inherits(BarChart, _ChartWithColorGroups2);\n\n    function BarChart(placeholderSelector, data, config) {\n        _classCallCheck(this, BarChart);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(BarChart).call(this, placeholderSelector, data, new BarChartConfig(config)));\n    }\n\n    _createClass(BarChart, [{\n        key: \"setConfig\",\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(BarChart.prototype), \"setConfig\", this).call(this, new BarChartConfig(config));\n        }\n    }, {\n        key: \"initPlot\",\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(BarChart.prototype), \"initPlot\", this).call(this);\n            var self = this;\n\n            var conf = this.config;\n\n            this.plot.x = {};\n            this.plot.y = {};\n\n            this.computePlotSize();\n            this.setupY();\n            this.setupX();\n            this.setupGroupStacks();\n            this.setupYDomain();\n\n            return this;\n        }\n    }, {\n        key: \"setupX\",\n        value: function setupX() {\n\n            var plot = this.plot;\n            var x = plot.x;\n            var conf = this.config.x;\n\n            /* *\r\n             * value accessor - returns the value to encode for a given data object.\r\n             * scale - maps value to a visual display encoding, such as a pixel position.\r\n             * map function - maps from data value to display value\r\n             * axis - sets up axis\r\n             **/\n            x.value = function (d) {\n                return conf.value(d, conf.key);\n            };\n            x.scale = d3.scaleBand().range([0, plot.width]).paddingInner(.08);\n            x.map = function (d) {\n                return x.scale(x.value(d));\n            };\n\n            x.axis = _utils.Utils.createAxis(conf.orient, x.scale);\n\n            var data = this.plot.data;\n            var domain;\n            if (!data || !data.length) {\n                domain = [];\n            } else if (!this.config.series) {\n                domain = d3.map(data, x.value).keys();\n            } else {\n                domain = d3.map(data[0].values, x.value).keys();\n            }\n\n            plot.x.scale.domain(domain);\n        }\n    }, {\n        key: \"setupY\",\n        value: function setupY() {\n\n            var plot = this.plot;\n            var y = plot.y;\n            var conf = this.config.y;\n            y.value = function (d) {\n                return conf.value(d, conf.key);\n            };\n            y.scale = _utils.Utils.createScale(conf.scale).range([plot.height, 0]);\n            y.map = function (d) {\n                return y.scale(y.value(d));\n            };\n\n            y.axis = _utils.Utils.createAxis(conf.orient, y.scale);\n            if (conf.ticks) {\n                y.axis.ticks(conf.ticks);\n            }\n        }\n    }, {\n        key: \"setupYDomain\",\n        value: function setupYDomain() {\n            var plot = this.plot;\n            var data = this.plot.data;\n            var domain;\n            var yStackMax = d3.max(plot.layers, function (layer) {\n                return d3.max(layer.points, function (d) {\n                    return d.y0 + d.y;\n                });\n            });\n\n            // var min = d3.min(data, s=>d3.min(s.values, plot.y.value));\n            var max = yStackMax;\n            domain = [0, max];\n\n            plot.y.scale.domain(domain);\n            void 0;\n        }\n    }, {\n        key: \"setupGroupStacks\",\n        value: function setupGroupStacks() {\n            var self = this;\n            this.groupData();\n\n            var y0s = [];\n            this.plot.groupedData.forEach(function (s) {\n                s.points = s.values.map(function (v) {\n                    return self.mapToPoint(v);\n                });\n                s.points.forEach(function (p, i) {\n                    var prevY0 = y0s[i];\n                    if (!prevY0) prevY0 = 0;\n                    p.y0 = prevY0;\n                    y0s[i] = p.y + prevY0;\n                });\n            });\n            this.plot.layers = this.plot.groupedData;\n        }\n    }, {\n        key: \"mapToPoint\",\n        value: function mapToPoint(value) {\n            var plot = this.plot;\n            return {\n                x: plot.x.value(value),\n                y: parseFloat(plot.y.value(value))\n            };\n        }\n    }, {\n        key: \"drawAxisX\",\n        value: function drawAxisX() {\n            var self = this;\n            var plot = self.plot;\n            var axisConf = this.config.x;\n            var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-x') + \".\" + self.prefixClass('axis') + (self.config.guides ? '' : '.' + self.prefixClass('no-guides'))).attr(\"transform\", \"translate(0,\" + plot.height + \")\");\n\n            var axisT = axis;\n            if (self.config.transition) {\n                axisT = axis.transition().ease(d3.easeSinInOut);\n            }\n\n            axisT.call(plot.x.axis);\n\n            axis.selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + plot.width / 2 + \",\" + plot.margin.bottom + \")\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"-1em\").style(\"text-anchor\", \"middle\").text(axisConf.title);\n        }\n    }, {\n        key: \"drawAxisY\",\n        value: function drawAxisY() {\n            var self = this;\n            var plot = self.plot;\n            var axisConf = this.config.y;\n            var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-y') + \".\" + self.prefixClass('axis') + (self.config.guides ? '' : '.' + self.prefixClass('no-guides')));\n\n            var axisT = axis;\n            if (self.config.transition) {\n                axisT = axis.transition().ease(d3.easeSinInOut);\n            }\n\n            axisT.call(plot.y.axis);\n\n            axis.selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + -plot.margin.left + \",\" + plot.height / 2 + \")rotate(-90)\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"1em\").style(\"text-anchor\", \"middle\").text(axisConf.title);\n        }\n    }, {\n        key: \"drawBars\",\n        value: function drawBars() {\n            var self = this;\n            var plot = self.plot;\n\n            void 0;\n\n            var layerClass = this.prefixClass(\"layer\");\n\n            var barClass = this.prefixClass(\"bar\");\n            var layer = self.svgG.selectAll(\".\" + layerClass).data(plot.layers);\n\n            var layerMerge = layer.enter().append(\"g\").attr(\"class\", layerClass).merge(layer);\n\n            var bar = layerMerge.selectAll(\".\" + barClass).data(function (d) {\n                return d.points;\n            });\n\n            var barEnter = bar.enter().append(\"g\").attr(\"class\", barClass);\n            var barRectEnter = barEnter.append(\"rect\").attr(\"x\", 1);\n            var barMerge = barEnter.merge(bar);\n\n            var barRect = barMerge.select(\"rect\");\n\n            var barRectT = barRect;\n            var barT = barMerge;\n            var layerT = layerMerge;\n            if (this.transitionEnabled()) {\n                barRectT = barRect.transition();\n                barT = barMerge.transition();\n                layerT = layerMerge.transition();\n            }\n\n            barEnter.attr(\"transform\", function (d) {\n                return \"translate(\" + plot.x.scale(d.x) + \",\" + plot.y.scale(d.y0) + \")\";\n            });\n            var yDomain = plot.y.scale.domain();\n            barT.attr(\"transform\", function (d) {\n                return \"translate(\" + plot.x.scale(d.x) + \",\" + plot.y.scale(d.y0 + d.y) + \")\";\n            });\n            barRectEnter.attr(\"width\", plot.x.scale.bandwidth()).attr(\"height\", 0);\n            barRectT.attr(\"width\", plot.x.scale.bandwidth()).attr(\"height\", function (d) {\n                return plot.y.scale(d.y0) - plot.y.scale(d.y0 + d.y - yDomain[0]);\n            });\n\n            if (this.plot.seriesColor) {\n                layerT.attr(\"fill\", this.plot.seriesColor);\n            }\n\n            if (plot.tooltip) {\n                barMerge.on(\"mouseover\", function (d) {\n                    self.showTooltip(d.y);\n                }).on(\"mouseout\", function (d) {\n                    self.hideTooltip();\n                });\n            }\n            layer.exit().remove();\n            bar.exit().remove();\n        }\n    }, {\n        key: \"update\",\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(BarChart.prototype), \"update\", this).call(this, newData);\n            this.drawAxisX();\n            this.drawAxisY();\n            this.drawBars();\n            return this;\n        }\n    }]);\n\n    return BarChart;\n}(_chartWithColorGroups.ChartWithColorGroups);\n\n},{\"./chart-with-color-groups\":33,\"./legend\":41,\"./utils\":47}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.BoxPlotBase = exports.BoxPlotBaseConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chart = require('./chart');\n\nvar _utils = require('./utils');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BoxPlotBaseConfig = exports.BoxPlotBaseConfig = function (_ChartConfig) {\n    _inherits(BoxPlotBaseConfig, _ChartConfig);\n\n    function BoxPlotBaseConfig(custom) {\n        _classCallCheck(this, BoxPlotBaseConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(BoxPlotBaseConfig).call(this));\n\n        _this.svgClass = _this.cssClassPrefix + 'box-plot';\n        _this.showLegend = true;\n        _this.showTooltip = true;\n        _this.x = { // X axis config\n            title: '', // axis label\n            value: function value(s) {\n                return s.key;\n            }, // x value accessor\n            guides: false, //show axis guides\n            orient: 'bottom'\n\n        };\n        _this.y = { // Y axis config\n            title: '',\n            value: function value(d) {\n                return d;\n            }, // y value accessor\n            scale: \"linear\",\n            orient: 'left',\n            domainMargin: 0.1,\n            guides: true //show axis guides\n        };\n\n        _this.Q1 = function (d) {\n            return d.values.Q1;\n        };\n\n        _this.Q2 = function (d) {\n            return d.values.Q2;\n        };\n\n        _this.Q3 = function (d) {\n            return d.values.Q3;\n        };\n\n        _this.Wl = function (d) {\n            return d.values.whiskerLow;\n        };\n\n        _this.Wh = function (d) {\n            return d.values.whiskerHigh;\n        };\n\n        _this.outliers = function (d) {\n            return d.values.outliers;\n        };\n\n        _this.outlierValue = function (d, i) {\n            return d;\n        };\n\n        _this.outlierLabel = function (d, i) {\n            return d;\n        };\n\n        _this.minBoxWidth = 35;\n        _this.maxBoxWidth = 100;\n        _this.transition = true;\n        _this.color = undefined;\n        _this.d3ColorCategory = 'category10';\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n\n        return _this;\n    } // string or function returning color's value for color scale\n\n\n    return BoxPlotBaseConfig;\n}(_chart.ChartConfig);\n\nvar BoxPlotBase = exports.BoxPlotBase = function (_Chart) {\n    _inherits(BoxPlotBase, _Chart);\n\n    function BoxPlotBase(placeholderSelector, data, config) {\n        _classCallCheck(this, BoxPlotBase);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(BoxPlotBase).call(this, placeholderSelector, data, new BoxPlotBaseConfig(config)));\n    }\n\n    _createClass(BoxPlotBase, [{\n        key: 'setConfig',\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(BoxPlotBase.prototype), 'setConfig', this).call(this, new BoxPlotBaseConfig(config));\n        }\n    }, {\n        key: 'initPlot',\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(BoxPlotBase.prototype), 'initPlot', this).call(this);\n            _get(Object.getPrototypeOf(BoxPlotBase.prototype), 'computePlotSize', this).call(this);\n            this.plot.x = {};\n            this.plot.y = {};\n\n            this.plot.data = this.getDataToPlot();\n            this.setupY();\n            this.setupX();\n\n            this.setupColor();\n        }\n    }, {\n        key: 'getDataToPlot',\n        value: function getDataToPlot() {\n            return this.data;\n        }\n    }, {\n        key: 'setupX',\n        value: function setupX() {\n\n            var plot = this.plot;\n            var x = plot.x;\n            var conf = this.config.x;\n\n            x.value = conf.value;\n            x.scale = d3.scaleBand().range([0, plot.width]);\n            x.map = function (d) {\n                return x.scale(x.value(d));\n            };\n\n            x.axis = _utils.Utils.createAxis(conf.orient, x.scale);\n            if (conf.guides) {\n                x.axis.tickSize(-plot.height);\n            }\n\n            var data = this.plot.data;\n            var domain;\n            if (!data || !data.length) {\n                domain = [];\n            } else {\n                domain = data.map(x.value);\n            }\n\n            plot.x.scale.domain(domain);\n        }\n    }, {\n        key: 'setupY',\n        value: function setupY() {\n            var _this3 = this;\n\n            var plot = this.plot;\n            var y = plot.y;\n            var conf = this.config.y;\n            y.value = function (d) {\n                return conf.value.call(_this3.config, d);\n            };\n            y.scale = _utils.Utils.createScale(conf.scale).range([plot.height, 0]);\n            y.map = function (d) {\n                return y.scale(y.value(d));\n            };\n\n            y.axis = _utils.Utils.createAxis(conf.orient, y.scale);\n            if (conf.ticks) {\n                y.axis.ticks(conf.ticks);\n            }\n            if (conf.guides) {\n                y.axis.tickSize(-plot.width);\n            }\n            this.setupYDomain();\n        }\n    }, {\n        key: 'setupYDomain',\n        value: function setupYDomain() {\n            var plot = this.plot;\n            var data = this.plot.data;\n            var c = this.config;\n\n            var values = [],\n                yMin,\n                yMax;\n            data.forEach(function (d, i) {\n                var q1 = c.Q1(d),\n                    q3 = c.Q3(d),\n                    wl = c.Wl(d),\n                    wh = c.Wh(d),\n                    outliers = c.outliers(d);\n\n                if (outliers) {\n                    outliers.forEach(function (o, i) {\n                        values.push(c.outlierValue(o, i));\n                    });\n                }\n                if (wl) {\n                    values.push(wl);\n                }\n                if (q1) {\n                    values.push(q1);\n                }\n                if (q3) {\n                    values.push(q3);\n                }\n                if (wh) {\n                    values.push(wh);\n                }\n            });\n            yMin = d3.min(values);\n            yMax = d3.max(values);\n            var margin = (yMax - yMin) * this.config.y.domainMargin;\n            yMin -= margin;\n            yMax += margin;\n            var domain = [yMin, yMax];\n\n            plot.y.scale.domain(domain);\n        }\n    }, {\n        key: 'drawAxisX',\n        value: function drawAxisX() {\n            var self = this;\n            var plot = self.plot;\n            var axisConf = this.config.x;\n            var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-x') + \".\" + self.prefixClass('axis') + (axisConf.guides ? '' : '.' + self.prefixClass('no-guides'))).attr(\"transform\", \"translate(0,\" + plot.height + \")\");\n\n            var axisT = axis;\n            if (self.config.transition) {\n                axisT = axis.transition().ease(d3.easeSinInOut);\n            }\n\n            axisT.call(plot.x.axis);\n\n            axis.selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + plot.width / 2 + \",\" + plot.margin.bottom + \")\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"-1em\").style(\"text-anchor\", \"middle\").text(axisConf.label);\n        }\n    }, {\n        key: 'drawAxisY',\n        value: function drawAxisY() {\n            var self = this;\n            var plot = self.plot;\n            var axisConf = this.config.y;\n            var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-y') + \".\" + self.prefixClass('axis') + (axisConf.guides ? '' : '.' + self.prefixClass('no-guides')));\n\n            var axisT = axis;\n            if (self.config.transition) {\n                axisT = axis.transition().ease(d3.easeSinInOut);\n            }\n\n            axisT.call(plot.y.axis);\n\n            axis.selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + -plot.margin.left + \",\" + plot.height / 2 + \")rotate(-90)\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"1em\").style(\"text-anchor\", \"middle\").text(axisConf.title);\n        }\n    }, {\n        key: 'drawBoxPlots',\n        value: function drawBoxPlots() {\n            var self = this,\n                plot = self.plot,\n                config = self.config,\n                boxplotClass = self.prefixClass(\"boxplot-item\");\n\n            var boxplots = self.svgG.selectAll('.' + boxplotClass).data(plot.data);\n            var boxplotEnter = boxplots.enter().append('g').attr('class', boxplotClass).style('stroke-opacity', 1e-6).style('fill-opacity', 1e-6);\n\n            var boxplotsMerge = boxplotEnter.merge(boxplots);\n            var duration = 1000;\n            var boxplotsT = boxplotsMerge;\n            if (self.transitionEnabled()) {\n                boxplotsT = boxplotsMerge.transition();\n                boxplotsT.delay(function (d, i) {\n                    return i * duration / plot.data.length;\n                });\n            }\n\n            boxplotsT.style('fill', plot.color).style('stroke-opacity', 1).style('fill-opacity', 0.75).attr('transform', function (d, i) {\n                return 'translate(' + (plot.x.map(d, i) + plot.x.scale.bandwidth() * 0.05) + ', 0)';\n            });\n            boxplots.exit().remove();\n\n            var boxWidth = !config.maxBoxWidth ? plot.x.scale.bandwidth() * 0.9 : Math.min(config.maxBoxWidth, Math.max(config.minBoxWidth, plot.x.scale.bandwidth() * 0.9));\n            var boxLeft = plot.x.scale.bandwidth() * 0.45 - boxWidth / 2;\n            var boxRight = plot.x.scale.bandwidth() * 0.45 + boxWidth / 2;\n\n            var boxClass = self.prefixClass(\"box\");\n\n            boxplotEnter.append('rect').attr('class', boxClass)\n            // tooltip events\n            .on('mouseover', function (d, i) {\n                d3.select(this).classed('hover', true);\n                var html = 'Q3: ' + config.Q3(d, i) + '<br/>Q2: ' + config.Q2(d, i) + '<br/>Q1: ' + config.Q1(d, i);\n                self.showTooltip(html);\n            }).on('mouseout', function (d, i) {\n                d3.select(this).classed('hover', false);\n                self.hideTooltip();\n            });\n\n            var boxRects = boxplotsMerge.select('rect.' + boxClass);\n\n            var boxRectsT = boxRects;\n            if (self.config.transition) {\n                boxRectsT = boxRects.transition();\n            }\n\n            boxRectsT.attr('y', function (d, i) {\n                return plot.y.scale(config.Q3(d));\n            }).attr('width', boxWidth).attr('x', boxLeft).attr('height', function (d, i) {\n                return Math.abs(plot.y.scale(config.Q3(d)) - plot.y.scale(config.Q1(d))) || 1;\n            }).style('stroke', plot.color);\n\n            // median line\n            var medianClass = self.prefixClass('median');\n            boxplotEnter.append('line').attr('class', medianClass);\n\n            var medianLine = boxplotsMerge.select('line.' + medianClass);\n            if (self.config.transition) {\n                medianLine = medianLine.transition();\n            }\n            medianLine.attr('x1', boxLeft).attr('y1', function (d, i) {\n                return plot.y.scale(config.Q2(d));\n            }).attr('x2', boxRight).attr('y2', function (d, i) {\n                return plot.y.scale(config.Q2(d));\n            });\n\n            //whiskers\n\n            var whiskerClass = self.prefixClass(\"whisker\"),\n                tickClass = self.prefixClass(\"boxplot-tick\");\n\n            var whiskers = [{ key: 'low', value: config.Wl }, { key: 'high', value: config.Wh }];\n\n            boxplotEnter.each(function (d, i) {\n                var box = d3.select(this);\n\n                whiskers.forEach(function (f) {\n                    if (f.value(d)) {\n                        box.append('line').style('stroke', plot.color(d, i)).attr('class', whiskerClass + ' ' + boxplotClass + '-' + f.key);\n                        box.append('line').style('stroke', plot.color(d, i)).attr('class', tickClass + ' ' + boxplotClass + '-' + f.key);\n                    }\n                });\n            });\n\n            whiskers.forEach(function (f) {\n                var endpoint = f.key === 'low' ? config.Q1 : config.Q3;\n\n                var whisker = boxplotsMerge.select('.' + whiskerClass + '.' + boxplotClass + '-' + f.key);\n                var tick = boxplotsMerge.select('.' + tickClass + '.' + boxplotClass + '-' + f.key);\n                if (self.config.transition) {\n                    whisker = whisker.transition();\n                    tick = tick.transition();\n                }\n                whisker.attr('x1', plot.x.scale.bandwidth() * 0.45).attr('y1', function (d, i) {\n                    return plot.y.scale(f.value(d));\n                }).attr('x2', plot.x.scale.bandwidth() * 0.45).attr('y2', function (d, i) {\n                    return plot.y.scale(endpoint(d));\n                });\n\n                tick.attr('x1', boxLeft).attr('y1', function (d, i) {\n                    return plot.y.scale(f.value(d));\n                }).attr('x2', boxRight).attr('y2', function (d, i) {\n                    return plot.y.scale(f.value(d));\n                });\n\n                boxplotEnter.selectAll('.' + boxplotClass + '-' + f.key).on('mouseover', function (d, i, j) {\n                    d3.select(this).classed('hover', true);\n                    self.showTooltip(f.value(d));\n                }).on('mouseout', function (d, i, j) {\n                    d3.select(this).classed('hover', false);\n                    self.hideTooltip();\n                });\n            });\n\n            // outliers\n            var outlierClass = self.prefixClass(\"outlier\");\n            var outliers = boxplotsMerge.selectAll('.' + outlierClass).data(function (d, i) {\n                return config.outliers(d, i) || [];\n            });\n\n            var outlierEnterCircle = outliers.enter().append('circle').attr('class', outlierClass).style('z-index', 9000);\n\n            outlierEnterCircle.on('mouseover', function (d, i, j) {\n                d3.select(this).classed('hover', true);\n                self.showTooltip(config.outlierLabel(d, i));\n            }).on('mouseout', function (d, i, j) {\n                d3.select(this).classed('hover', false);\n                self.hideTooltip();\n            });\n\n            var outliersMerge = outlierEnterCircle.merge(outliers);\n            var outliersT = outliersMerge;\n            if (self.config.transition) {\n                outliersT = outliersMerge.transition();\n            }\n            outliersT.attr('cx', plot.x.scale.bandwidth() * 0.45).attr('cy', function (d, i) {\n                return plot.y.scale(config.outlierValue(d, i));\n            }).attr('r', '3');\n            outliers.exit().remove();\n        }\n    }, {\n        key: 'update',\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(BoxPlotBase.prototype), 'update', this).call(this, newData);\n            this.drawAxisX();\n            this.drawAxisY();\n            this.drawBoxPlots();\n            return this;\n        }\n    }, {\n        key: 'setupColor',\n        value: function setupColor() {\n            var _this4 = this;\n\n            var self = this;\n            var conf = this.config;\n\n            if (conf.d3ColorCategory) {\n                var colorSchemeCategory = 'scheme' + _utils.Utils.capitalizeFirstLetter(conf.d3ColorCategory);\n                this.plot.colorCategory = d3.scaleOrdinal(d3[colorSchemeCategory]);\n            }\n            var colorValue = conf.color;\n            if (colorValue && typeof colorValue === 'string' || colorValue instanceof String) {\n                this.plot.color = colorValue;\n            } else if (this.plot.colorCategory) {\n                self.plot.colorValue = colorValue;\n                this.plot.color = function (d) {\n                    return self.plot.colorCategory(_this4.plot.x.value(d));\n                };\n            }\n        }\n    }]);\n\n    return BoxPlotBase;\n}(_chart.Chart);\n\n},{\"./chart\":34,\"./utils\":47}],32:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.BoxPlot = exports.BoxPlotConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _boxPlotBase = require('./box-plot-base');\n\nvar _utils = require('./utils');\n\nvar _statisticsUtils = require('./statistics-utils');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BoxPlotConfig = exports.BoxPlotConfig = function (_BoxPlotBaseConfig) {\n    _inherits(BoxPlotConfig, _BoxPlotBaseConfig);\n\n    function BoxPlotConfig(custom) {\n        _classCallCheck(this, BoxPlotConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(BoxPlotConfig).call(this));\n\n        _this.svgClass = _this.cssClassPrefix + 'box-plot';\n        _this.showLegend = true;\n        _this.showTooltip = true;\n        _this.y = { // Y axis config\n            key: undefined,\n            value: function value(d) {\n                return this.y.key === undefined ? d : d[this.y.key];\n            }, // y value accessor\n            scale: \"linear\",\n            orient: 'left',\n            domainMargin: 0.1,\n            guides: true //show axis guides\n        };\n        _this.series = false;\n        _this.groups = {\n            key: undefined,\n            value: function value(d) {\n                return this.groups.key === undefined ? '' : d[this.groups.key];\n            }, // grouping value accessor,\n            label: \"\",\n            displayValue: undefined // optional function returning display value (series label) for given group value, or object/array mapping value to display value\n        };\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n        return _this;\n    }\n\n    return BoxPlotConfig;\n}(_boxPlotBase.BoxPlotBaseConfig);\n\nvar BoxPlot = exports.BoxPlot = function (_BoxPlotBase) {\n    _inherits(BoxPlot, _BoxPlotBase);\n\n    function BoxPlot(placeholderSelector, data, config) {\n        _classCallCheck(this, BoxPlot);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(BoxPlot).call(this, placeholderSelector, data, new BoxPlotConfig(config)));\n    }\n\n    _createClass(BoxPlot, [{\n        key: 'setConfig',\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(BoxPlot.prototype), 'setConfig', this).call(this, new BoxPlotConfig(config));\n        }\n    }, {\n        key: 'getDataToPlot',\n        value: function getDataToPlot() {\n            var self = this;\n            var conf = self.config;\n            self.plot.groupingEnabled = this.isGroupingEnabled();\n\n            var data = this.data;\n            if (!self.plot.groupingEnabled) {\n                self.plot.groupedData = [{\n                    key: '',\n                    values: data\n                }];\n                self.plot.dataLength = data.length;\n            } else {\n                if (self.config.series) {\n                    self.plot.groupedData = data.map(function (s) {\n                        return {\n                            key: s.label || s.key || '',\n                            values: s.values\n                        };\n                    });\n                } else {\n                    self.plot.groupValue = function (d) {\n                        return conf.groups.value.call(conf, d);\n                    };\n                    self.plot.groupedData = d3.nest().key(this.plot.groupValue).entries(data);\n\n                    var getDisplayValue = function getDisplayValue(k) {\n                        return k;\n                    };\n                    if (self.config.groups.displayValue) {\n                        if (_utils.Utils.isFunction(self.config.groups.displayValue)) {\n                            getDisplayValue = function getDisplayValue(k) {\n                                return self.config.groups.displayValue(k) || k;\n                            };\n                        } else if (_utils.Utils.isObject(self.config.groups.displayValue)) {\n                            getDisplayValue = function getDisplayValue(k) {\n                                return self.config.groups.displayValue[k] || k;\n                            };\n                        }\n                    }\n                    self.plot.groupedData.forEach(function (g) {\n                        g.key = getDisplayValue(g.key);\n                    });\n                }\n\n                self.plot.dataLength = d3.sum(this.plot.groupedData, function (s) {\n                    return s.values.length;\n                });\n            }\n\n            self.plot.groupedData.forEach(function (s) {\n                if (!Array.isArray(s.values)) {\n                    return;\n                }\n\n                var values = s.values.map(function (d) {\n                    return parseFloat(self.config.y.value.call(self.config, d));\n                });\n                s.values.Q1 = _statisticsUtils.StatisticsUtils.quantile(values, 0.25);\n                s.values.Q2 = _statisticsUtils.StatisticsUtils.quantile(values, 0.5);\n                s.values.Q3 = _statisticsUtils.StatisticsUtils.quantile(values, 0.75);\n                var IQR = s.values.Q3 - s.values.Q1;\n\n                if (!self.config.tukey) {\n                    s.values.whiskerLow = d3.min(values);\n                    s.values.whiskerHigh = d3.max(values);\n                } else {\n                    s.values.whiskerLow = s.values.Q1 - 1.5 * IQR;\n                    s.values.whiskerHigh = s.values.Q3 + 1.5 * IQR;\n                    s.values.outliers = values.filter(function (d) {\n                        return d < s.values.whiskerLow || d > s.values.whiskerHigh;\n                    });\n                }\n            });\n\n            return self.plot.groupedData;\n        }\n    }, {\n        key: 'isGroupingEnabled',\n        value: function isGroupingEnabled() {\n            return this.config.series || !!(this.config.groups && this.config.groups.value);\n        }\n    }]);\n\n    return BoxPlot;\n}(_boxPlotBase.BoxPlotBase);\n\n},{\"./box-plot-base\":31,\"./statistics-utils\":46,\"./utils\":47}],33:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ChartWithColorGroups = exports.ChartWithColorGroupsConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chart = require(\"./chart\");\n\nvar _utils = require(\"./utils\");\n\nvar _legend = require(\"./legend\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ChartWithColorGroupsConfig = exports.ChartWithColorGroupsConfig = function (_ChartConfig) {\n    _inherits(ChartWithColorGroupsConfig, _ChartConfig);\n\n    function ChartWithColorGroupsConfig(custom) {\n        _classCallCheck(this, ChartWithColorGroupsConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ChartWithColorGroupsConfig).call(this));\n\n        _this.showLegend = true;\n        _this.legend = {\n            width: 80,\n            margin: 10,\n            shapeWidth: 20\n        };\n        _this.groups = {\n            key: 2,\n            value: function value(d) {\n                return d[this.groups.key];\n            }, // grouping value accessor,\n            label: \"\",\n            displayValue: undefined // optional function returning display value (series label) for given group value, or object/array mapping value to display value\n        };\n        _this.series = false;\n        _this.color = undefined;\n        _this.d3ColorCategory = 'category10';\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n\n        return _this;\n    } // string or function returning color's value for color scale\n\n\n    return ChartWithColorGroupsConfig;\n}(_chart.ChartConfig);\n\nvar ChartWithColorGroups = exports.ChartWithColorGroups = function (_Chart) {\n    _inherits(ChartWithColorGroups, _Chart);\n\n    function ChartWithColorGroups(placeholderSelector, data, config) {\n        _classCallCheck(this, ChartWithColorGroups);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(ChartWithColorGroups).call(this, placeholderSelector, data, new ChartWithColorGroupsConfig(config)));\n    }\n\n    _createClass(ChartWithColorGroups, [{\n        key: \"setConfig\",\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(ChartWithColorGroups.prototype), \"setConfig\", this).call(this, new ChartWithColorGroupsConfig(config));\n        }\n    }, {\n        key: \"initPlot\",\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(ChartWithColorGroups.prototype), \"initPlot\", this).call(this);\n            var self = this;\n\n            var conf = this.config;\n\n            this.plot.showLegend = conf.showLegend;\n            this.setupGroups();\n            this.plot.data = this.getDataToPlot();\n            this.groupData();\n\n            if (this.plot.showLegend) {\n                var scale = this.plot.colorCategory;\n                if (!scale.domain() || scale.domain().length < 2) {\n                    this.plot.showLegend = false;\n                } else {\n                    this.plot.margin.right = conf.margin.right + conf.legend.width + conf.legend.margin * 2;\n                }\n            }\n            return this;\n        }\n    }, {\n        key: \"isGroupingEnabled\",\n        value: function isGroupingEnabled() {\n            return this.config.series || !!(this.config.groups && this.config.groups.value);\n        }\n    }, {\n        key: \"computeGroupColorDomain\",\n        value: function computeGroupColorDomain() {\n            var _this3 = this;\n\n            var map = d3.set(this.data, function (d) {\n                return _this3.plot.groupValue(d);\n            });\n            return Object.getOwnPropertyNames(map).map(function (d) {\n                return map[d];\n            });\n        }\n    }, {\n        key: \"setupGroups\",\n        value: function setupGroups() {\n            var _this4 = this;\n\n            var self = this;\n            var conf = this.config;\n\n            this.plot.groupingEnabled = this.isGroupingEnabled();\n            var domain = [];\n            if (this.plot.groupingEnabled) {\n                self.plot.groupToLabel = {};\n                if (this.config.series) {\n                    this.plot.groupValue = function (s) {\n                        return s.key;\n                    };\n                    domain = this.computeGroupColorDomain();\n\n                    this.data.forEach(function (s) {\n                        self.plot.groupToLabel[s.key] = s.label || s.key;\n                    });\n                } else {\n                    this.plot.groupValue = function (d) {\n                        return conf.groups.value.call(conf, d);\n                    };\n                    domain = this.computeGroupColorDomain();\n                    var getLabel = function getLabel(k) {\n                        return k;\n                    };\n                    if (self.config.groups.displayValue) {\n                        if (_utils.Utils.isFunction(self.config.groups.displayValue)) {\n                            getLabel = function getLabel(k) {\n                                return self.config.groups.displayValue(k) || k;\n                            };\n                        } else if (_utils.Utils.isObject(self.config.groups.displayValue)) {\n                            getLabel = function getLabel(k) {\n                                return self.config.groups.displayValue[k] || k;\n                            };\n                        }\n                    }\n                    domain.forEach(function (k) {\n                        self.plot.groupToLabel[k] = getLabel(k);\n                    });\n                }\n            } else {\n                this.plot.groupValue = function (d) {\n                    return null;\n                };\n            }\n            if (conf.d3ColorCategory) {\n                var colorSchemeCategory = 'scheme' + _utils.Utils.capitalizeFirstLetter(conf.d3ColorCategory);\n                this.plot.colorCategory = d3.scaleOrdinal(d3[colorSchemeCategory]);\n            }\n            var colorValue = conf.color;\n            if (colorValue && typeof colorValue === 'string' || colorValue instanceof String) {\n                this.plot.color = colorValue;\n                this.plot.seriesColor = this.plot.color;\n            } else if (this.plot.colorCategory) {\n                self.plot.colorValue = colorValue;\n                self.plot.colorCategory.domain(domain);\n\n                this.plot.seriesColor = function (s) {\n                    return self.plot.colorCategory(s.key);\n                };\n                this.plot.color = function (d) {\n                    return self.plot.colorCategory(_this4.plot.groupValue(d));\n                };\n            } else {\n                this.plot.color = this.plot.seriesColor = function (s) {\n                    return 'black';\n                };\n            }\n        }\n    }, {\n        key: \"groupData\",\n        value: function groupData() {\n            var self = this;\n            var data = this.plot.data;\n            if (!self.plot.groupingEnabled) {\n                self.plot.groupedData = [{\n                    key: null,\n                    label: '',\n                    values: data\n                }];\n                self.plot.dataLength = data.length;\n            } else {\n\n                if (self.config.series) {\n                    self.plot.groupedData = data.map(function (s) {\n                        return {\n                            key: s.key,\n                            label: s.label,\n                            values: s.values\n                        };\n                    });\n                } else {\n                    self.plot.groupedData = d3.nest().key(this.plot.groupValue).entries(data);\n                    self.plot.groupedData.forEach(function (g) {\n                        g.label = self.plot.groupToLabel[g.key];\n                    });\n                }\n\n                self.plot.dataLength = d3.sum(this.plot.groupedData, function (s) {\n                    return s.values.length;\n                });\n            }\n\n            // this.plot.seriesColor\n        }\n    }, {\n        key: \"getDataToPlot\",\n        value: function getDataToPlot() {\n            var _this5 = this;\n\n            if (!this.plot.groupingEnabled || !this.enabledGroups) {\n                return this.data;\n            }\n            return this.data.filter(function (d) {\n                return _this5.enabledGroups.indexOf(_this5.plot.groupValue(d)) > -1;\n            });\n        }\n    }, {\n        key: \"update\",\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(ChartWithColorGroups.prototype), \"update\", this).call(this, newData);\n            this.updateLegend();\n\n            return this;\n        }\n    }, {\n        key: \"updateLegend\",\n        value: function updateLegend() {\n\n            var self = this;\n            var plot = this.plot;\n\n            var scale = plot.colorCategory;\n\n            if (!scale.domain() || scale.domain().length < 2) {\n                plot.showLegend = false;\n            }\n\n            if (!plot.showLegend) {\n                if (plot.legend && plot.legend.container) {\n                    plot.legend.container.remove();\n                }\n                return;\n            }\n\n            var legendX = this.plot.width + this.config.legend.margin;\n            var legendY = this.config.legend.margin;\n\n            plot.legend = new _legend.Legend(this.svg, this.svgG, scale, legendX, legendY);\n\n            plot.legendColor = plot.legend.color().shapeWidth(this.config.legend.shapeWidth).orient('vertical').scale(scale).labels(scale.domain().map(function (v) {\n                return plot.groupToLabel[v];\n            }));\n\n            plot.legendColor.on('cellclick', function (c) {\n                return self.onLegendCellClick(c);\n            });\n\n            plot.legend.container.call(plot.legendColor);\n\n            this.updateLegendCellStatuses();\n        }\n    }, {\n        key: \"onLegendCellClick\",\n        value: function onLegendCellClick(cellValue) {\n            this.updateEnabledGroups(cellValue);\n            this.init();\n        }\n    }, {\n        key: \"updateLegendCellStatuses\",\n        value: function updateLegendCellStatuses() {\n            var self = this;\n            this.plot.legend.container.selectAll(\"g.cell\").each(function (cell) {\n                var isDisabled = self.enabledGroups && self.enabledGroups.indexOf(cell) < 0;\n                d3.select(this).classed(\"odc-disabled\", isDisabled);\n            });\n        }\n    }, {\n        key: \"updateEnabledGroups\",\n        value: function updateEnabledGroups(cellValue) {\n            if (!this.enabledGroups) {\n                this.enabledGroups = this.plot.colorCategory.domain().slice();\n            }\n            var index = this.enabledGroups.indexOf(cellValue);\n\n            if (index < 0) {\n                this.enabledGroups.push(cellValue);\n            } else {\n                this.enabledGroups.splice(index, 1);\n            }\n\n            if (!this.enabledGroups.length) {\n                this.enabledGroups = this.plot.colorCategory.domain().slice();\n            }\n        }\n    }, {\n        key: \"setData\",\n        value: function setData(data) {\n            _get(Object.getPrototypeOf(ChartWithColorGroups.prototype), \"setData\", this).call(this, data);\n            this.enabledGroups = null;\n            return this;\n        }\n    }]);\n\n    return ChartWithColorGroups;\n}(_chart.Chart);\n\n},{\"./chart\":34,\"./legend\":41,\"./utils\":47}],34:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Chart = exports.ChartConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require('./utils');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ChartConfig = exports.ChartConfig = function ChartConfig(custom) {\n    _classCallCheck(this, ChartConfig);\n\n    this.cssClassPrefix = \"odc-\";\n    this.svgClass = this.cssClassPrefix + 'mw-d3-chart';\n    this.width = undefined;\n    this.height = undefined;\n    this.margin = {\n        left: 50,\n        right: 30,\n        top: 30,\n        bottom: 50\n    };\n    this.showTooltip = false;\n    this.transition = true;\n    this.title = undefined;\n    this.titleSize = 20;\n    this.titleMargin = {\n        left: 0,\n        right: 0,\n        top: 15,\n        bottom: 20\n    };\n    this.subtitle = undefined;\n    this.subtitleSize = 14;\n    this.subtitleMargin = {\n        left: 0,\n        right: 0,\n        top: 10,\n        bottom: 20\n    };\n\n    if (custom) {\n        _utils.Utils.deepExtend(this, custom);\n    }\n};\n\nvar Chart = exports.Chart = function () {\n    function Chart(base, data, config) {\n        _classCallCheck(this, Chart);\n\n        this.utils = _utils.Utils;\n        this.plot = {\n            margin: {}\n        };\n        this._attached = {};\n        this._layers = {};\n        this._events = {};\n        this._isInitialized = false;\n\n        this._id = _utils.Utils.guid();\n        this._isAttached = base instanceof Chart;\n\n        this.baseContainer = base;\n\n        this.setConfig(config);\n\n        if (data) {\n            this.setData(data);\n        }\n        this.init();\n        this.postInit();\n    }\n\n    _createClass(Chart, [{\n        key: 'setConfig',\n        value: function setConfig(config) {\n            if (!config) {\n                this.config = new ChartConfig();\n            } else {\n                this.config = config;\n            }\n            this.initConfigAccessors();\n            return this;\n        }\n    }, {\n        key: 'setData',\n        value: function setData(data) {\n            this.data = data;\n            return this;\n        }\n    }, {\n        key: 'init',\n        value: function init() {\n            var self = this;\n            self.initPlot();\n            self.initSvg();\n\n            if (!this._isInitialized) {\n                self.initTooltip();\n            }\n            self.draw();\n            this._isInitialized = true;\n            return this;\n        }\n    }, {\n        key: 'redraw',\n        value: function redraw() {\n            return this.init();\n        }\n    }, {\n        key: 'postInit',\n        value: function postInit() {}\n    }, {\n        key: 'initSvg',\n        value: function initSvg() {\n            var self = this;\n            var config = this.config;\n\n            var margin = self.plot.margin;\n            var width = self.svgWidth = self.plot.width + margin.left + margin.right;\n            var height = self.svgHeight = self.plot.height + margin.top + margin.bottom;\n            var aspect = width / height;\n            if (!self._isAttached) {\n                if (!this._isInitialized) {\n                    d3.select(self.baseContainer).select(\"svg\").remove();\n                }\n                self.svg = d3.select(self.baseContainer).selectOrAppend(\"svg\");\n\n                self.svg.attr(\"width\", width).attr(\"height\", height).attr(\"viewBox\", \"0 0 \" + \" \" + width + \" \" + height).attr(\"preserveAspectRatio\", \"xMidYMid meet\").attr(\"class\", config.svgClass);\n                self.svgG = self.svg.selectOrAppend(\"g.main-group\");\n            } else {\n                void 0;\n                self.svg = self.baseContainer.svg;\n                self.svgG = self.svg.selectOrAppend(\"g.main-group.\" + config.svgClass);\n            }\n\n            self.svgG.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n            if (!config.width || config.height) {\n                d3.select(window).on(\"resize.\" + self._id, function () {\n                    void 0;\n                    var transition = self.config.transition;\n                    self.config.transition = false;\n                    self.init();\n                    self.config.transition = transition;\n                });\n            }\n        }\n    }, {\n        key: 'initTooltip',\n        value: function initTooltip() {\n            var self = this;\n            if (self.config.showTooltip) {\n                if (!self._isAttached) {\n                    self.plot.tooltip = d3.select(\"body\").selectOrAppend('div.' + self.config.cssClassPrefix + 'tooltip').style(\"opacity\", 0);\n                } else {\n                    self.plot.tooltip = self.baseContainer.plot.tooltip;\n                }\n            } else {\n                self.plot.tooltip = null;\n            }\n        }\n    }, {\n        key: 'initPlot',\n        value: function initPlot() {\n            var margin = this.config.margin;\n            this.plot = this.plot || {};\n            this.plot.margin = {\n                top: margin.top,\n                bottom: margin.bottom,\n                left: margin.left,\n                right: margin.right\n            };\n\n            var titleMarginSize = 0;\n            if (this.config.title) {\n                titleMarginSize = this.config.titleSize + this.config.titleMargin.top;\n                if (!this.config.subtitle) {\n                    titleMarginSize += this.config.titleMargin.bottom;\n                }\n\n                this.plot.margin.top = Math.max(this.plot.margin.top, titleMarginSize);\n            }\n\n            if (this.config.subtitle) {\n\n                this.plot.margin.top = Math.max(this.plot.margin.top, titleMarginSize + this.config.subtitleMargin.top + this.config.subtitleSize + this.config.subtitleMargin.bottom);\n            }\n        }\n    }, {\n        key: 'update',\n        value: function update(data) {\n            if (data) {\n                this.setData(data);\n            }\n            this.updateTitle();\n            this.updateSubtitle();\n\n            var layerName, attachmentData;\n            for (var attachmentName in this._attached) {\n\n                attachmentData = data;\n\n                this._attached[attachmentName].update(attachmentData);\n            }\n            return this;\n        }\n    }, {\n        key: 'updateTitle',\n        value: function updateTitle() {\n            var titleClass = this.prefixClass('plot-title');\n            if (!this.config.title) {\n                this.svg.select(\"text.\" + titleClass).remove();\n                return;\n            }\n\n            this.svg.selectOrAppend(\"text.\" + titleClass).attr(\"transform\", \"translate(\" + this.svgWidth / 2 + \",\" + this.config.titleMargin.top + \")\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"0.5em\").style(\"text-anchor\", \"middle\").style(\"dominant-baseline\", \"central\").style(\"font-size\", this.config.titleSize + \"px\").text(this.config.title);\n        }\n    }, {\n        key: 'updateSubtitle',\n        value: function updateSubtitle() {\n            var subtitleClass = this.prefixClass('plot-subtitle');\n            if (!this.config.subtitle) {\n                this.svg.select(\"text.\" + subtitleClass).remove();\n                return;\n            }\n\n            var y = this.config.subtitleMargin.top;\n            if (this.config.title) {\n                y += this.config.titleMargin.top + this.config.titleSize;\n            }\n\n            this.svg.selectOrAppend(\"text.\" + subtitleClass).attr(\"transform\", \"translate(\" + this.svgWidth / 2 + \",\" + y + \")\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"0.5em\").style(\"text-anchor\", \"middle\").style(\"dominant-baseline\", \"central\").style(\"font-size\", this.config.subtitleSize + \"px\").text(this.config.subtitle);\n        }\n    }, {\n        key: 'draw',\n        value: function draw(data) {\n            this.update(data);\n\n            return this;\n        }\n\n        //Borrowed from d3.chart\n        /**\r\n         * Register or retrieve an \"attachment\" Chart. The \"attachment\" chart's `draw`\r\n         * method will be invoked whenever the containing chart's `draw` method is\r\n         * invoked.\r\n         *\r\n         * @externalExample chart-attach\r\n         *\r\n         * @param {String} attachmentName Name of the attachment\r\n         * @param {Chart} [chart] Chart to register as a mix in of this chart. When\r\n         *        unspecified, this method will return the attachment previously\r\n         *        registered with the specified `attachmentName` (if any).\r\n         *\r\n         * @returns {Chart} Reference to this chart (chainable).\r\n         */\n\n    }, {\n        key: 'attach',\n        value: function attach(attachmentName, chart) {\n            if (arguments.length === 1) {\n                return this._attached[attachmentName];\n            }\n\n            this._attached[attachmentName] = chart;\n            return chart;\n        }\n    }, {\n        key: 'on',\n\n\n        //Borrowed from d3.chart\n        /**\r\n         * Subscribe a callback function to an event triggered on the chart. See {@link\r\n            * Chart#once} to subscribe a callback function to an event for one occurence.\r\n         *\r\n         * @externalExample {runnable} chart-on\r\n         *\r\n         * @param {String} name Name of the event\r\n         * @param {ChartEventHandler} callback Function to be invoked when the event\r\n         *        occurs\r\n         * @param {Object} [context] Value to set as `this` when invoking the\r\n         *        `callback`. Defaults to the chart instance.\r\n         *\r\n         * @returns {Chart} A reference to this chart (chainable).\r\n         */\n        value: function on(name, callback, context) {\n            var events = this._events[name] || (this._events[name] = []);\n            events.push({\n                callback: callback,\n                context: context || this,\n                _chart: this\n            });\n            return this;\n        }\n\n        //Borrowed from d3.chart\n        /**\r\n         *\r\n         * Subscribe a callback function to an event triggered on the chart. This\r\n         * function will be invoked at the next occurance of the event and immediately\r\n         * unsubscribed. See {@link Chart#on} to subscribe a callback function to an\r\n         * event indefinitely.\r\n         *\r\n         * @externalExample {runnable} chart-once\r\n         *\r\n         * @param {String} name Name of the event\r\n         * @param {ChartEventHandler} callback Function to be invoked when the event\r\n         *        occurs\r\n         * @param {Object} [context] Value to set as `this` when invoking the\r\n         *        `callback`. Defaults to the chart instance\r\n         *\r\n         * @returns {Chart} A reference to this chart (chainable)\r\n         */\n\n    }, {\n        key: 'once',\n        value: function once(name, callback, context) {\n            var self = this;\n            var once = function once() {\n                self.off(name, once);\n                callback.apply(this, arguments);\n            };\n            return this.on(name, once, context);\n        }\n\n        //Borrowed from d3.chart\n        /**\r\n         * Unsubscribe one or more callback functions from an event triggered on the\r\n         * chart. When no arguments are specified, *all* handlers will be unsubscribed.\r\n         * When only a `name` is specified, all handlers subscribed to that event will\r\n         * be unsubscribed. When a `name` and `callback` are specified, only that\r\n         * function will be unsubscribed from that event. When a `name` and `context`\r\n         * are specified (but `callback` is omitted), all events bound to the given\r\n         * event with the given context will be unsubscribed.\r\n         *\r\n         * @externalExample {runnable} chart-off\r\n         *\r\n         * @param {String} [name] Name of the event to be unsubscribed\r\n         * @param {ChartEventHandler} [callback] Function to be unsubscribed\r\n         * @param {Object} [context] Contexts to be unsubscribe\r\n         *\r\n         * @returns {Chart} A reference to this chart (chainable).\r\n         */\n\n    }, {\n        key: 'off',\n        value: function off(name, callback, context) {\n            var names, n, events, event, i, j;\n\n            // remove all events\n            if (arguments.length === 0) {\n                for (name in this._events) {\n                    this._events[name].length = 0;\n                }\n                return this;\n            }\n\n            // remove all events for a specific name\n            if (arguments.length === 1) {\n                events = this._events[name];\n                if (events) {\n                    events.length = 0;\n                }\n                return this;\n            }\n\n            // remove all events that match whatever combination of name, context\n            // and callback.\n            names = name ? [name] : Object.keys(this._events);\n            for (i = 0; i < names.length; i++) {\n                n = names[i];\n                events = this._events[n];\n                j = events.length;\n                while (j--) {\n                    event = events[j];\n                    if (callback && callback === event.callback || context && context === event.context) {\n                        events.splice(j, 1);\n                    }\n                }\n            }\n\n            return this;\n        }\n    }, {\n        key: 'trigger',\n\n\n        //Borrowed from d3.chart\n        /**\r\n         * Publish an event on this chart with the given `name`.\r\n         *\r\n         * @externalExample {runnable} chart-trigger\r\n         *\r\n         * @param {String} name Name of the event to publish\r\n         * @param {...*} arguments Values with which to invoke the registered\r\n         *        callbacks.\r\n         *\r\n         * @returns {Chart} A reference to this chart (chainable).\r\n         */\n        value: function trigger(name) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            var events = this._events[name];\n            var i, ev;\n\n            if (events !== undefined) {\n                for (i = 0; i < events.length; i++) {\n                    ev = events[i];\n                    ev.callback.apply(ev.context, args);\n                }\n            }\n\n            return this;\n        }\n    }, {\n        key: 'getBaseContainer',\n        value: function getBaseContainer() {\n            if (this._isAttached) {\n                return this.baseContainer.svg;\n            }\n            return d3.select(this.baseContainer);\n        }\n    }, {\n        key: 'getBaseContainerNode',\n        value: function getBaseContainerNode() {\n\n            return this.getBaseContainer().node();\n        }\n    }, {\n        key: 'prefixClass',\n        value: function prefixClass(clazz, addDot) {\n            return addDot ? '.' : '' + this.config.cssClassPrefix + clazz;\n        }\n    }, {\n        key: 'computePlotSize',\n        value: function computePlotSize() {\n            this.plot.width = _utils.Utils.availableWidth(this.config.width, this.getBaseContainer(), this.plot.margin);\n            this.plot.height = _utils.Utils.availableHeight(this.config.height, this.getBaseContainer(), this.plot.margin);\n        }\n    }, {\n        key: 'transitionEnabled',\n        value: function transitionEnabled() {\n            return this._isInitialized && this.config.transition;\n        }\n    }, {\n        key: 'showTooltip',\n        value: function showTooltip(html) {\n            if (!this.plot.tooltip) {\n                return;\n            }\n            this.plot.tooltip.transition().duration(200).style(\"opacity\", .9);\n            this.plot.tooltip.html(html).style(\"left\", d3.event.pageX + 5 + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n        }\n    }, {\n        key: 'hideTooltip',\n        value: function hideTooltip() {\n            if (!this.plot.tooltip) {\n                return;\n            }\n            this.plot.tooltip.transition().duration(500).style(\"opacity\", 0);\n        }\n    }, {\n        key: 'initConfigAccessors',\n        value: function initConfigAccessors() {\n            this.initPropertyAccessors(this, this, this.config, \"$\", true);\n        }\n    }, {\n        key: 'initPropertyAccessors',\n        value: function initPropertyAccessors(bindTo, returnObj, source, prefix, recursive) {\n            var self = this;\n            for (var i in source) {\n                if (!source.hasOwnProperty(i)) {\n                    continue;\n                }\n\n                var accessor = self.initPropertyAccessor(bindTo, returnObj, source, i, prefix);\n\n                if (recursive && _utils.Utils.isObjectNotArray(source[i])) {\n                    self.initPropertyAccessors(accessor, bindTo, source[i], prefix, recursive);\n                }\n            }\n        }\n    }, {\n        key: 'initPropertyAccessor',\n        value: function initPropertyAccessor(bindTo, returnObj, source, propertyKey, prefix) {\n            return bindTo[prefix + propertyKey] = function (_) {\n                if (!arguments.length) {\n                    return source[propertyKey];\n                }\n                source[propertyKey] = _;\n                return returnObj;\n            };\n        }\n    }]);\n\n    return Chart;\n}();\n\n},{\"./utils\":47}],35:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.CorrelationMatrix = exports.CorrelationMatrixConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chart = require('./chart');\n\nvar _utils = require('./utils');\n\nvar _statisticsUtils = require('./statistics-utils');\n\nvar _legend = require('./legend');\n\nvar _scatterplot = require('./scatterplot');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CorrelationMatrixConfig = exports.CorrelationMatrixConfig = function (_ChartConfig) {\n    _inherits(CorrelationMatrixConfig, _ChartConfig);\n\n    //show tooltip on dot hover\n\n    function CorrelationMatrixConfig(custom) {\n        _classCallCheck(this, CorrelationMatrixConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CorrelationMatrixConfig).call(this));\n\n        _this.svgClass = _this.cssClassPrefix + 'correlation-matrix';\n        _this.guides = false;\n        _this.showTooltip = true;\n        _this.showLegend = true;\n        _this.highlightLabels = true;\n        _this.rotateLabelsX = true;\n        _this.rotateLabelsY = true;\n        _this.variables = {\n            labels: undefined,\n            keys: [], //optional array of variable keys\n            value: function value(d, variableKey) {\n                return d[variableKey];\n            }, // variable value accessor\n            scale: \"ordinal\"\n        };\n        _this.correlation = {\n            scale: \"linear\",\n            domain: [-1, -0.75, -0.5, 0, 0.5, 0.75, 1],\n            range: [\"darkblue\", \"blue\", \"lightskyblue\", \"white\", \"orangered\", \"crimson\", \"darkred\"],\n            value: function value(xValues, yValues) {\n                return _statisticsUtils.StatisticsUtils.sampleCorrelation(xValues, yValues);\n            }\n\n        };\n        _this.cell = {\n            shape: \"ellipse\", //possible values: rect, circle, ellipse\n            size: undefined,\n            sizeMin: 15,\n            sizeMax: 250,\n            padding: 1\n        };\n        _this.margin = {\n            left: 60,\n            right: 50,\n            top: 30,\n            bottom: 60\n        };\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n        return _this;\n    } //show axis guides\n\n\n    return CorrelationMatrixConfig;\n}(_chart.ChartConfig);\n\nvar CorrelationMatrix = exports.CorrelationMatrix = function (_Chart) {\n    _inherits(CorrelationMatrix, _Chart);\n\n    function CorrelationMatrix(placeholderSelector, data, config) {\n        _classCallCheck(this, CorrelationMatrix);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(CorrelationMatrix).call(this, placeholderSelector, data, new CorrelationMatrixConfig(config)));\n    }\n\n    _createClass(CorrelationMatrix, [{\n        key: 'setConfig',\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(CorrelationMatrix.prototype), 'setConfig', this).call(this, new CorrelationMatrixConfig(config));\n        }\n    }, {\n        key: 'initPlot',\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(CorrelationMatrix.prototype), 'initPlot', this).call(this);\n            var self = this;\n            var margin = this.config.margin;\n            var conf = this.config;\n\n            this.plot.x = {};\n            this.plot.correlation = {\n                matrix: undefined,\n                cells: undefined,\n                color: {},\n                shape: {}\n            };\n\n            this.setupVariables();\n            var width = conf.width;\n            var placeholderNode = this.getBaseContainerNode();\n            this.plot.placeholderNode = placeholderNode;\n\n            var parentWidth = placeholderNode.getBoundingClientRect().width;\n            if (width) {\n\n                if (!this.plot.cellSize) {\n                    this.plot.cellSize = Math.max(conf.cell.sizeMin, Math.min(conf.cell.sizeMax, (width - margin.left - margin.right) / this.plot.variables.length));\n                }\n            } else {\n                this.plot.cellSize = this.config.cell.size;\n\n                if (!this.plot.cellSize) {\n                    this.plot.cellSize = Math.max(conf.cell.sizeMin, Math.min(conf.cell.sizeMax, (parentWidth - margin.left - margin.right) / this.plot.variables.length));\n                }\n\n                width = this.plot.cellSize * this.plot.variables.length + margin.left + margin.right;\n            }\n\n            var height = width;\n            if (!height) {\n                height = placeholderNode.getBoundingClientRect().height;\n            }\n\n            this.plot.width = width - margin.left - margin.right;\n            this.plot.height = this.plot.width;\n\n            this.setupVariablesScales();\n            this.setupCorrelationScales();\n            this.setupCorrelationMatrix();\n\n            return this;\n        }\n    }, {\n        key: 'setupVariablesScales',\n        value: function setupVariablesScales() {\n\n            var plot = this.plot;\n            var x = plot.x;\n            var conf = this.config.variables;\n\n            /* *\r\n             * value accessor - returns the value to encode for a given data object.\r\n             * scale - maps value to a visual display encoding, such as a pixel position.\r\n             * map function - maps from data value to display value\r\n             * axis - sets up axis\r\n             **/\n            x.value = conf.value;\n            x.scale = d3.scaleBand().range([plot.width, 0]);\n            x.map = function (d) {\n                return x.scale(x.value(d));\n            };\n        }\n    }, {\n        key: 'setupCorrelationScales',\n        value: function setupCorrelationScales() {\n            var plot = this.plot;\n            var corrConf = this.config.correlation;\n\n            plot.correlation.color.scale = _utils.Utils.createScale(corrConf.scale).domain(corrConf.domain).range(corrConf.range);\n            var shape = plot.correlation.shape = {};\n\n            var cellConf = this.config.cell;\n            shape.type = cellConf.shape;\n\n            var shapeSize = plot.cellSize - cellConf.padding * 2;\n            if (shape.type == 'circle') {\n                var radiusMax = shapeSize / 2;\n                shape.radiusScale = d3.scaleLinear().domain([0, 1]).range([2, radiusMax]);\n                shape.radius = function (c) {\n                    return shape.radiusScale(Math.abs(c.value));\n                };\n            } else if (shape.type == 'ellipse') {\n                var radiusMax = shapeSize / 2;\n                shape.radiusScale = d3.scaleLinear().domain([0, 1]).range([radiusMax, 2]);\n                shape.radiusX = function (c) {\n                    return shape.radiusScale(Math.abs(c.value));\n                };\n                shape.radiusY = radiusMax;\n\n                shape.rotateVal = function (v) {\n                    if (v == 0) return \"0\";\n                    if (v < 0) return \"-45\";\n                    return \"45\";\n                };\n            } else if (shape.type == 'rect') {\n                shape.size = shapeSize;\n            }\n        }\n    }, {\n        key: 'setupVariables',\n        value: function setupVariables() {\n\n            var variablesConf = this.config.variables;\n\n            var data = this.data;\n            var plot = this.plot;\n            plot.domainByVariable = {};\n            plot.variables = variablesConf.keys;\n            if (!plot.variables || !plot.variables.length) {\n                plot.variables = _utils.Utils.inferVariables(data, this.config.groups.key, this.config.includeInPlot);\n            }\n\n            plot.labels = [];\n            plot.labelByVariable = {};\n            plot.variables.forEach(function (variableKey, index) {\n                plot.domainByVariable[variableKey] = d3.extent(data, function (d) {\n                    return variablesConf.value(d, variableKey);\n                });\n                var label = variableKey;\n                if (variablesConf.labels && variablesConf.labels.length > index) {\n\n                    label = variablesConf.labels[index];\n                }\n                plot.labels.push(label);\n                plot.labelByVariable[variableKey] = label;\n            });\n\n            void 0;\n        }\n    }, {\n        key: 'setupCorrelationMatrix',\n        value: function setupCorrelationMatrix() {\n            var self = this;\n            var data = this.data;\n            var matrix = this.plot.correlation.matrix = [];\n            var matrixCells = this.plot.correlation.matrix.cells = [];\n            var plot = this.plot;\n\n            var variableToValues = {};\n            plot.variables.forEach(function (v, i) {\n\n                variableToValues[v] = data.map(function (d) {\n                    return plot.x.value(d, v);\n                });\n            });\n\n            plot.variables.forEach(function (v1, i) {\n                var row = [];\n                matrix.push(row);\n\n                plot.variables.forEach(function (v2, j) {\n                    var corr = 1;\n                    if (v1 != v2) {\n                        corr = self.config.correlation.value(variableToValues[v1], variableToValues[v2]);\n                    }\n                    var cell = {\n                        rowVar: v1,\n                        colVar: v2,\n                        row: i,\n                        col: j,\n                        value: corr\n                    };\n                    row.push(cell);\n\n                    matrixCells.push(cell);\n                });\n            });\n        }\n    }, {\n        key: 'update',\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(CorrelationMatrix.prototype), 'update', this).call(this, newData);\n            // this.update\n            this.updateCells();\n            this.updateVariableLabels();\n\n            if (this.config.showLegend) {\n                this.updateLegend();\n            }\n        }\n    }, {\n        key: 'updateVariableLabels',\n        value: function updateVariableLabels() {\n            this.plot.labelClass = this.prefixClass(\"label\");\n            this.updateAxisX();\n            this.updateAxisY();\n        }\n    }, {\n        key: 'updateAxisX',\n        value: function updateAxisX() {\n            var self = this;\n            var plot = self.plot;\n            var labelClass = plot.labelClass;\n            var labelXClass = labelClass + \"-x\";\n\n            var labels = self.svgG.selectAll(\"text.\" + labelXClass).data(plot.variables, function (d, i) {\n                return i;\n            });\n\n            var labelsMerge = labels.enter().append(\"text\").attr(\"class\", function (d, i) {\n                return labelClass + \" \" + labelXClass + \" \" + labelXClass + \"-\" + i;\n            }).merge(labels);\n\n            labelsMerge.attr(\"x\", function (d, i) {\n                return i * plot.cellSize + plot.cellSize / 2;\n            }).attr(\"y\", plot.height).attr(\"dx\", -2).attr(\"dy\", 5).attr(\"text-anchor\", \"end\")\n\n            // .attr(\"dominant-baseline\", \"hanging\")\n            .text(function (v) {\n                return plot.labelByVariable[v];\n            });\n\n            if (this.config.rotateLabelsX) {\n                labelsMerge.attr(\"transform\", function (d, i) {\n                    return \"rotate(-45, \" + (i * plot.cellSize + plot.cellSize / 2) + \", \" + plot.height + \")\";\n                });\n            }\n\n            var maxWidth = self.computeXAxisLabelsWidth();\n            labelsMerge.each(function (label) {\n                _utils.Utils.placeTextWithEllipsisAndTooltip(d3.select(this), label, maxWidth, self.config.showTooltip ? self.plot.tooltip : false);\n            });\n\n            labels.exit().remove();\n        }\n    }, {\n        key: 'updateAxisY',\n        value: function updateAxisY() {\n            var self = this;\n            var plot = self.plot;\n            var labelClass = plot.labelClass;\n            var labelYClass = plot.labelClass + \"-y\";\n            var labels = self.svgG.selectAll(\"text.\" + labelYClass).data(plot.variables);\n\n            var labelsMerge = labels.enter().append(\"text\").merge(labels);\n\n            labelsMerge.attr(\"x\", 0).attr(\"y\", function (d, i) {\n                return i * plot.cellSize + plot.cellSize / 2;\n            }).attr(\"dx\", -2).attr(\"text-anchor\", \"end\").attr(\"class\", function (d, i) {\n                return labelClass + \" \" + labelYClass + \" \" + labelYClass + \"-\" + i;\n            })\n            // .attr(\"dominant-baseline\", \"hanging\")\n            .text(function (v) {\n                return plot.labelByVariable[v];\n            });\n\n            if (this.config.rotateLabelsY) {\n                labelsMerge.attr(\"transform\", function (d, i) {\n                    return \"rotate(-45, \" + 0 + \", \" + (i * plot.cellSize + plot.cellSize / 2) + \")\";\n                }).attr(\"text-anchor\", \"end\");\n            }\n\n            var maxWidth = self.computeYAxisLabelsWidth();\n            labelsMerge.each(function (label) {\n                _utils.Utils.placeTextWithEllipsisAndTooltip(d3.select(this), label, maxWidth, self.config.showTooltip ? self.plot.tooltip : false);\n            });\n\n            labels.exit().remove();\n        }\n    }, {\n        key: 'computeYAxisLabelsWidth',\n        value: function computeYAxisLabelsWidth() {\n            var maxWidth = this.plot.margin.left;\n            if (!this.config.rotateLabelsY) {\n                return maxWidth;\n            }\n\n            maxWidth *= _utils.Utils.SQRT_2;\n            var fontSize = 11; //todo check actual font size\n            maxWidth -= fontSize / 2;\n\n            return maxWidth;\n        }\n    }, {\n        key: 'computeXAxisLabelsWidth',\n        value: function computeXAxisLabelsWidth(offset) {\n            if (!this.config.rotateLabelsX) {\n                return this.plot.cellSize - 2;\n            }\n            var size = this.plot.margin.bottom;\n            size *= _utils.Utils.SQRT_2;\n            var fontSize = 11; //todo check actual font size\n            size -= fontSize / 2;\n            return size;\n        }\n    }, {\n        key: 'updateCells',\n        value: function updateCells() {\n\n            var self = this;\n            var plot = self.plot;\n            var cellClass = self.prefixClass(\"cell\");\n            var cellShape = plot.correlation.shape.type;\n\n            var cells = self.svgG.selectAll(\"g.\" + cellClass).data(plot.correlation.matrix.cells);\n\n            var cellsEnter = cells.enter().append(\"g\").classed(cellClass, true);\n            var cellsMerge = cellsEnter.merge(cells);\n            cellsMerge.attr(\"transform\", function (c) {\n                return \"translate(\" + (plot.cellSize * c.col + plot.cellSize / 2) + \",\" + (plot.cellSize * c.row + plot.cellSize / 2) + \")\";\n            });\n\n            cellsMerge.classed(self.config.cssClassPrefix + \"selectable\", !!self.scatterPlot);\n\n            var selector = \"*:not(.cell-shape-\" + cellShape + \")\";\n\n            var wrongShapes = cells.selectAll(selector);\n            wrongShapes.remove();\n\n            var shapes = cellsMerge.selectOrAppend(cellShape + \".cell-shape-\" + cellShape);\n\n            if (plot.correlation.shape.type == 'circle') {\n\n                shapes.attr(\"r\", plot.correlation.shape.radius).attr(\"cx\", 0).attr(\"cy\", 0);\n            }\n\n            if (plot.correlation.shape.type == 'ellipse') {\n                // cells.attr(\"transform\", c=> \"translate(300,150) rotate(\"+plot.correlation.shape.rotateVal(c.value)+\")\");\n                shapes.attr(\"rx\", plot.correlation.shape.radiusX).attr(\"ry\", plot.correlation.shape.radiusY).attr(\"cx\", 0).attr(\"cy\", 0).attr(\"transform\", function (c) {\n                    return \"rotate(\" + plot.correlation.shape.rotateVal(c.value) + \")\";\n                });\n            }\n\n            if (plot.correlation.shape.type == 'rect') {\n                shapes.attr(\"width\", plot.correlation.shape.size).attr(\"height\", plot.correlation.shape.size).attr(\"x\", -plot.cellSize / 2).attr(\"y\", -plot.cellSize / 2);\n            }\n            shapes.style(\"fill\", function (c) {\n                return plot.correlation.color.scale(c.value);\n            });\n\n            var mouseoverCallbacks = [];\n            var mouseoutCallbacks = [];\n\n            if (plot.tooltip) {\n\n                mouseoverCallbacks.push(function (c) {\n                    var html = c.value;\n                    self.showTooltip(html);\n                });\n\n                mouseoutCallbacks.push(function (c) {\n                    self.hideTooltip();\n                });\n            }\n\n            if (self.config.highlightLabels) {\n                var highlightClass = self.config.cssClassPrefix + \"highlight\";\n                var xLabelClass = function xLabelClass(c) {\n                    return plot.labelClass + \"-x-\" + c.col;\n                };\n                var yLabelClass = function yLabelClass(c) {\n                    return plot.labelClass + \"-y-\" + c.row;\n                };\n\n                mouseoverCallbacks.push(function (c) {\n\n                    self.svgG.selectAll(\"text.\" + xLabelClass(c)).classed(highlightClass, true);\n                    self.svgG.selectAll(\"text.\" + yLabelClass(c)).classed(highlightClass, true);\n                });\n                mouseoutCallbacks.push(function (c) {\n                    self.svgG.selectAll(\"text.\" + xLabelClass(c)).classed(highlightClass, false);\n                    self.svgG.selectAll(\"text.\" + yLabelClass(c)).classed(highlightClass, false);\n                });\n            }\n\n            cellsMerge.on(\"mouseover\", function (c) {\n                mouseoverCallbacks.forEach(function (callback) {\n                    return callback(c);\n                });\n            }).on(\"mouseout\", function (c) {\n                mouseoutCallbacks.forEach(function (callback) {\n                    return callback(c);\n                });\n            });\n\n            cellsMerge.on(\"click\", function (c) {\n                self.trigger(\"cell-selected\", c);\n            });\n\n            cells.exit().remove();\n        }\n    }, {\n        key: 'updateLegend',\n        value: function updateLegend() {\n\n            var plot = this.plot;\n            var legendX = this.plot.width + 10;\n            var legendY = 0;\n            var barWidth = 10;\n            var barHeight = this.plot.height - 2;\n            var scale = plot.correlation.color.scale;\n\n            plot.legend = new _legend.Legend(this.svg, this.svgG, scale, legendX, legendY).linearGradientBar(barWidth, barHeight);\n        }\n    }, {\n        key: 'attachScatterPlot',\n        value: function attachScatterPlot(containerSelector, config) {\n            var _this3 = this;\n\n            var self = this;\n\n            config = config || {};\n\n            var scatterPlotConfig = {\n                height: self.plot.height + self.config.margin.top + self.config.margin.bottom,\n                width: self.plot.height + self.config.margin.top + self.config.margin.bottom,\n                groups: {\n                    key: self.config.groups.key,\n                    label: self.config.groups.label\n                },\n                guides: true,\n                showLegend: false\n            };\n\n            self.scatterPlot = true;\n\n            scatterPlotConfig = _utils.Utils.deepExtend(scatterPlotConfig, config);\n            this.update();\n\n            this.on(\"cell-selected\", function (c) {\n\n                scatterPlotConfig.x = {\n                    key: c.rowVar,\n                    label: self.plot.labelByVariable[c.rowVar]\n                };\n                scatterPlotConfig.y = {\n                    key: c.colVar,\n                    label: self.plot.labelByVariable[c.colVar]\n                };\n                if (self.scatterPlot && self.scatterPlot !== true) {\n                    self.scatterPlot.setConfig(scatterPlotConfig).init();\n                } else {\n                    self.scatterPlot = new _scatterplot.ScatterPlot(containerSelector, self.data, scatterPlotConfig);\n                    _this3.attach(\"ScatterPlot\", self.scatterPlot);\n                }\n            });\n        }\n    }]);\n\n    return CorrelationMatrix;\n}(_chart.Chart);\n\n},{\"./chart\":34,\"./legend\":41,\"./scatterplot\":44,\"./statistics-utils\":46,\"./utils\":47}],36:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.D3Extensions = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require('./utils');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar D3Extensions = exports.D3Extensions = function () {\n    function D3Extensions() {\n        _classCallCheck(this, D3Extensions);\n    }\n\n    _createClass(D3Extensions, null, [{\n        key: 'extend',\n        value: function extend() {\n\n            d3.selection.prototype.enter.prototype.insertSelector = d3.selection.prototype.insertSelector = function (selector, before) {\n                return _utils.Utils.insertSelector(this, selector, before);\n            };\n\n            d3.selection.prototype.enter.prototype.appendSelector = d3.selection.prototype.appendSelector = function (selector) {\n                return _utils.Utils.appendSelector(this, selector);\n            };\n\n            d3.selection.prototype.enter.prototype.selectOrAppend = d3.selection.prototype.selectOrAppend = function (selector) {\n                return _utils.Utils.selectOrAppend(this, selector);\n            };\n\n            d3.selection.prototype.enter.prototype.selectOrInsert = d3.selection.prototype.selectOrInsert = function (selector, before) {\n                return _utils.Utils.selectOrInsert(this, selector, before);\n            };\n        }\n    }]);\n\n    return D3Extensions;\n}();\n\n},{\"./utils\":47}],37:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.HeatmapTimeSeries = exports.HeatmapTimeSeriesConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chart = require(\"./chart\");\n\nvar _heatmap = require(\"./heatmap\");\n\nvar _utils = require(\"./utils\");\n\nvar _statisticsUtils = require(\"./statistics-utils\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar HeatmapTimeSeriesConfig = exports.HeatmapTimeSeriesConfig = function (_HeatmapConfig) {\n    _inherits(HeatmapTimeSeriesConfig, _HeatmapConfig);\n\n    function HeatmapTimeSeriesConfig(custom) {\n        _classCallCheck(this, HeatmapTimeSeriesConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(HeatmapTimeSeriesConfig).call(this));\n\n        _this.x = {\n            fillMissing: false, // fill missing values using interval and intervalStep\n            interval: undefined, //used in filling missing ticks\n            intervalStep: 1,\n            format: undefined, //input data d3 time format\n            displayFormat: undefined, //d3 time format for display\n            intervalToFormats: [//used to guess interval and format\n            {\n                name: 'year',\n                formats: [\"%Y\"]\n            }, {\n                name: 'month',\n                formats: [\"%Y-%m\"]\n            }, {\n                name: 'day',\n                formats: [\"%Y-%m-%d\"]\n            }, {\n                name: 'hour',\n                formats: ['%H', '%Y-%m-%d %H']\n            }, {\n                name: 'minute',\n                formats: ['%H:%M', '%Y-%m-%d %H:%M']\n            }, {\n                name: 'second',\n                formats: ['%H:%M:%S', '%Y-%m-%d %H:%M:%S']\n            }],\n\n            sortComparator: function sortComparator(a, b) {\n                return _utils.Utils.isString(a) ? a.localeCompare(b) : a - b;\n            },\n            formatter: undefined\n        };\n        _this.z = {\n            fillMissing: true // fiill missing values with nearest previous value\n        };\n        _this.legend = {\n            formatter: function formatter(v) {\n                var suffix = \"\";\n                if (v / 1000000 >= 1) {\n                    suffix = \" M\";\n                    v = Number(v / 1000000).toFixed(3);\n                }\n                var nf = Intl.NumberFormat();\n                return nf.format(v) + suffix;\n            }\n        };\n\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n        return _this;\n    }\n\n    return HeatmapTimeSeriesConfig;\n}(_heatmap.HeatmapConfig);\n\nvar HeatmapTimeSeries = exports.HeatmapTimeSeries = function (_Heatmap) {\n    _inherits(HeatmapTimeSeries, _Heatmap);\n\n    function HeatmapTimeSeries(placeholderSelector, data, config) {\n        _classCallCheck(this, HeatmapTimeSeries);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(HeatmapTimeSeries).call(this, placeholderSelector, data, new HeatmapTimeSeriesConfig(config)));\n    }\n\n    _createClass(HeatmapTimeSeries, [{\n        key: \"setConfig\",\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(HeatmapTimeSeries.prototype), \"setConfig\", this).call(this, new HeatmapTimeSeriesConfig(config));\n        }\n    }, {\n        key: \"setupValuesBeforeGroupsSort\",\n        value: function setupValuesBeforeGroupsSort() {\n            var _this3 = this;\n\n            this.plot.x.timeFormat = this.config.x.format;\n            if (this.config.x.displayFormat && !this.plot.x.timeFormat) {\n                this.guessTimeFormat();\n            }\n\n            _get(Object.getPrototypeOf(HeatmapTimeSeries.prototype), \"setupValuesBeforeGroupsSort\", this).call(this);\n            if (!this.config.x.fillMissing) {\n                return;\n            }\n\n            var self = this;\n\n            this.initTimeFormatAndInterval();\n\n            this.plot.x.intervalStep = this.config.x.intervalStep || 1;\n\n            this.plot.x.timeParser = this.getTimeParser();\n\n            this.plot.x.uniqueValues.sort(this.config.x.sortComparator);\n\n            var prev = null;\n\n            this.plot.x.uniqueValues.forEach(function (x, i) {\n                var current = _this3.parseTime(x);\n                if (prev === null) {\n                    prev = current;\n                    return;\n                }\n\n                var next = self.nextTimeTickValue(prev);\n                var missing = [];\n                var iteration = 0;\n                while (self.compareTimeValues(next, current) <= 0) {\n                    iteration++;\n                    if (iteration > 100) {\n                        break;\n                    }\n                    var d = {};\n                    var timeString = self.formatTime(next);\n                    d[_this3.config.x.key] = timeString;\n\n                    self.updateGroups(d, timeString, self.plot.x.groups, self.config.x.groups);\n                    missing.push(next);\n                    next = self.nextTimeTickValue(next);\n                }\n                prev = current;\n            });\n        }\n    }, {\n        key: \"parseTime\",\n        value: function parseTime(x) {\n            var parser = this.getTimeParser();\n            return parser(x);\n        }\n    }, {\n        key: \"formatTime\",\n        value: function formatTime(date) {\n            var formatter = this.getTimeFormatter();\n            return formatter(date);\n        }\n    }, {\n        key: \"formatValueX\",\n        value: function formatValueX(value) {\n            //used only for display\n            if (this.config.x.formatter) return this.config.x.formatter.call(this.config, value);\n\n            if (this.config.x.displayFormat) {\n                var date = this.parseTime(value);\n                return d3.timeFormat(this.config.x.displayFormat)(date);\n            }\n\n            if (!this.plot.x.timeFormat) return value;\n\n            if (_utils.Utils.isDate(value)) {\n                return this.formatTime(value);\n            }\n\n            return value;\n        }\n    }, {\n        key: \"compareTimeValues\",\n        value: function compareTimeValues(a, b) {\n            return a - b;\n        }\n    }, {\n        key: \"timeValuesEqual\",\n        value: function timeValuesEqual(a, b) {\n            var parser = this.plot.x.timeParser;\n            return parser(a) === parser(b);\n        }\n    }, {\n        key: \"nextTimeTickValue\",\n        value: function nextTimeTickValue(t) {\n            var interval = 'time' + _utils.Utils.capitalizeFirstLetter(this.plot.x.interval);\n\n            return d3[interval].offset(t, this.plot.x.intervalStep);\n        }\n    }, {\n        key: \"initPlot\",\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(HeatmapTimeSeries.prototype), \"initPlot\", this).call(this);\n\n            if (this.config.z.fillMissing) {\n                this.plot.matrix.forEach(function (row, rowIndex) {\n                    var prevRowValue = undefined;\n                    row.forEach(function (cell, colIndex) {\n                        if (cell.value === undefined && prevRowValue !== undefined) {\n                            cell.value = prevRowValue;\n                            cell.missing = true;\n                        }\n                        prevRowValue = cell.value;\n                    });\n                });\n            }\n        }\n    }, {\n        key: \"update\",\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(HeatmapTimeSeries.prototype), \"update\", this).call(this, newData);\n        }\n    }, {\n        key: \"initTimeFormatAndInterval\",\n        value: function initTimeFormatAndInterval() {\n\n            this.plot.x.interval = this.config.x.interval;\n\n            if (!this.plot.x.timeFormat) {\n                this.guessTimeFormat();\n            }\n\n            if (!this.plot.x.interval && this.plot.x.timeFormat) {\n                this.guessInterval();\n            }\n        }\n    }, {\n        key: \"guessTimeFormat\",\n        value: function guessTimeFormat() {\n            var self = this;\n            for (var i = 0; i < self.config.x.intervalToFormats.length; i++) {\n                var intervalFormat = self.config.x.intervalToFormats[i];\n                var format = null;\n                var formatMatch = intervalFormat.formats.some(function (f) {\n                    format = f;\n                    var parser = d3.timeParse(f);\n                    return self.plot.x.uniqueValues.every(function (x) {\n                        return parser(x) !== null;\n                    });\n                });\n                if (formatMatch) {\n                    self.plot.x.timeFormat = format;\n                    void 0;\n                    if (!self.plot.x.interval) {\n                        self.plot.x.interval = intervalFormat.name;\n                        void 0;\n                    }\n                    return;\n                }\n            }\n        }\n    }, {\n        key: \"guessInterval\",\n        value: function guessInterval() {\n            var self = this;\n            for (var i = 0; i < self.config.x.intervalToFormats.length; i++) {\n                var intervalFormat = self.config.x.intervalToFormats[i];\n\n                if (intervalFormat.formats.indexOf(self.plot.x.timeFormat) >= 0) {\n                    self.plot.x.interval = intervalFormat.name;\n                    void 0;\n                    return;\n                }\n            }\n        }\n    }, {\n        key: \"getTimeFormatter\",\n        value: function getTimeFormatter() {\n            if (!this.plot.x.timeFormatter) {\n                this.plot.x.timeFormatter = d3.timeFormat(this.plot.x.timeFormat);\n            }\n            return this.plot.x.timeFormatter;\n        }\n    }, {\n        key: \"getTimeParser\",\n        value: function getTimeParser() {\n            if (!this.plot.x.timeParser) {\n                this.plot.x.timeParser = d3.timeParse(this.plot.x.timeFormat);\n            }\n            return this.plot.x.timeParser;\n        }\n    }]);\n\n    return HeatmapTimeSeries;\n}(_heatmap.Heatmap);\n\n},{\"./chart\":34,\"./heatmap\":38,\"./statistics-utils\":46,\"./utils\":47}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Heatmap = exports.HeatmapConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chart = require('./chart');\n\nvar _utils = require('./utils');\n\nvar _legend = require('./legend');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar HeatmapConfig = exports.HeatmapConfig = function (_ChartConfig) {\n    _inherits(HeatmapConfig, _ChartConfig);\n\n    //show tooltip on dot hover\n\n    function HeatmapConfig(custom) {\n        _classCallCheck(this, HeatmapConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(HeatmapConfig).call(this));\n\n        _this.svgClass = 'odc-heatmap';\n        _this.showTooltip = true;\n        _this.tooltip = {\n            noDataText: \"N/A\"\n        };\n        _this.showLegend = true;\n        _this.legend = {\n            width: 30,\n            rotateLabels: false,\n            decimalPlaces: undefined,\n            formatter: function formatter(v) {\n                return _this.legend.decimalPlaces === undefined ? v : Number(v).toFixed(_this.legend.decimalPlaces);\n            }\n        };\n        _this.highlightLabels = true;\n        _this.x = { // X axis config\n            title: '', // axis title\n            key: 0,\n            value: function value(d) {\n                return d[_this.x.key];\n            }, // x value accessor\n            rotateLabels: true,\n            sortLabels: false,\n            sortComparator: function sortComparator(a, b) {\n                return _utils.Utils.isNumber(a) ? a - b : a.localeCompare(b);\n            },\n            groups: {\n                keys: [],\n                labels: [],\n                value: function value(d, key) {\n                    return d[key];\n                },\n                overlap: {\n                    top: 20,\n                    bottom: 20\n                }\n            },\n            formatter: undefined // value formatter function\n\n        };\n        _this.y = { // Y axis config\n            title: '', // axis title,\n            rotateLabels: true,\n            key: 1,\n            value: function value(d) {\n                return d[_this.y.key];\n            }, // y value accessor\n            sortLabels: false,\n            sortComparator: function sortComparator(a, b) {\n                return _utils.Utils.isNumber(b) ? b - a : b.localeCompare(a);\n            },\n            groups: {\n                keys: [],\n                labels: [],\n                value: function value(d, key) {\n                    return d[key];\n                },\n                overlap: {\n                    left: 20,\n                    right: 20\n                }\n            },\n            formatter: undefined // value formatter function\n        };\n        _this.z = {\n            key: 2,\n            value: function value(d) {\n                return d[_this.z.key];\n            },\n            notAvailableValue: function notAvailableValue(v) {\n                return v === null || v === undefined;\n            },\n\n            decimalPlaces: undefined,\n            formatter: function formatter(v) {\n                return _this.z.decimalPlaces === undefined ? v : Number(v).toFixed(_this.z.decimalPlaces);\n            } // value formatter function\n\n        };\n        _this.color = {\n            noDataColor: \"white\",\n            scale: \"linear\",\n            reverseScale: false,\n            range: [\"darkblue\", \"lightskyblue\", \"orange\", \"crimson\", \"darkred\"]\n        };\n        _this.cell = {\n            width: undefined,\n            height: undefined,\n            sizeMin: 15,\n            sizeMax: 250,\n            padding: 0\n        };\n        _this.margin = {\n            left: 60,\n            right: 50,\n            top: 30,\n            bottom: 80\n        };\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n        return _this;\n    }\n\n    return HeatmapConfig;\n}(_chart.ChartConfig);\n\n//TODO refactor\n\n\nvar Heatmap = exports.Heatmap = function (_Chart) {\n    _inherits(Heatmap, _Chart);\n\n    function Heatmap(placeholderSelector, data, config) {\n        _classCallCheck(this, Heatmap);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(Heatmap).call(this, placeholderSelector, data, new HeatmapConfig(config)));\n    }\n\n    _createClass(Heatmap, [{\n        key: 'setConfig',\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(Heatmap.prototype), 'setConfig', this).call(this, new HeatmapConfig(config));\n        }\n    }, {\n        key: 'initPlot',\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(Heatmap.prototype), 'initPlot', this).call(this);\n            var self = this;\n            var margin = this.config.margin;\n            var conf = this.config;\n\n            this.plot.x = {};\n            this.plot.y = {};\n            this.plot.z = {\n                matrixes: undefined,\n                cells: undefined,\n                color: {},\n                shape: {}\n            };\n\n            this.setupValues();\n            this.buildCells();\n\n            var titleRectWidth = 6;\n            this.plot.x.overlap = {\n                top: 0,\n                bottom: 0\n            };\n            if (this.plot.groupByX) {\n                var depth = self.config.x.groups.keys.length;\n                var allTitlesWidth = depth * titleRectWidth;\n\n                this.plot.x.overlap.bottom = self.config.x.groups.overlap.bottom;\n                this.plot.x.overlap.top = self.config.x.groups.overlap.top + allTitlesWidth;\n                this.plot.margin.top = conf.margin.right + conf.x.groups.overlap.top;\n                this.plot.margin.bottom = conf.margin.bottom + conf.x.groups.overlap.bottom;\n            }\n\n            this.plot.y.overlap = {\n                left: 0,\n                right: 0\n            };\n\n            if (this.plot.groupByY) {\n                var _depth = self.config.y.groups.keys.length;\n                var _allTitlesWidth = _depth * titleRectWidth;\n                this.plot.y.overlap.right = self.config.y.groups.overlap.left + _allTitlesWidth;\n                this.plot.y.overlap.left = self.config.y.groups.overlap.left;\n                this.plot.margin.left = conf.margin.left + this.plot.y.overlap.left;\n                this.plot.margin.right = conf.margin.right + this.plot.y.overlap.right;\n            }\n            this.plot.showLegend = conf.showLegend;\n            if (this.plot.showLegend) {\n                this.plot.margin.right += conf.legend.width;\n            }\n            this.computePlotSize();\n            this.setupZScale();\n\n            return this;\n        }\n    }, {\n        key: 'setupValues',\n        value: function setupValues() {\n            var _this3 = this;\n\n            var self = this;\n            var config = self.config;\n            var x = self.plot.x;\n            var y = self.plot.y;\n            var z = self.plot.z;\n\n            x.value = function (d) {\n                return config.x.value.call(config, d);\n            };\n            y.value = function (d) {\n                return config.y.value.call(config, d);\n            };\n            z.value = function (d) {\n                return config.z.value.call(config, d);\n            };\n\n            x.uniqueValues = [];\n            y.uniqueValues = [];\n\n            self.plot.groupByY = !!config.y.groups.keys.length;\n            self.plot.groupByX = !!config.x.groups.keys.length;\n\n            y.groups = {\n                key: undefined,\n                label: '',\n                values: [],\n                children: null,\n                level: 0,\n                index: 0,\n                lastIndex: 0\n            };\n            x.groups = {\n                key: undefined,\n                label: '',\n                values: [],\n                children: null,\n                level: 0,\n                index: 0,\n                lastIndex: 0\n            };\n\n            var valueMap = {};\n            var minZ = undefined;\n            var maxZ = undefined;\n            this.data.forEach(function (d) {\n\n                var xVal = x.value(d);\n                var yVal = y.value(d);\n                var zValRaw = z.value(d);\n                var zVal = config.z.notAvailableValue(zValRaw) ? undefined : parseFloat(zValRaw);\n\n                if (x.uniqueValues.indexOf(xVal) === -1) {\n                    x.uniqueValues.push(xVal);\n                }\n\n                if (y.uniqueValues.indexOf(yVal) === -1) {\n                    y.uniqueValues.push(yVal);\n                }\n\n                var groupY = y.groups;\n                if (self.plot.groupByY) {\n                    groupY = _this3.updateGroups(d, yVal, y.groups, config.y.groups);\n                }\n                var groupX = x.groups;\n                if (self.plot.groupByX) {\n\n                    groupX = _this3.updateGroups(d, xVal, x.groups, config.x.groups);\n                }\n\n                if (!valueMap[groupY.index]) {\n                    valueMap[groupY.index] = {};\n                }\n\n                if (!valueMap[groupY.index][groupX.index]) {\n                    valueMap[groupY.index][groupX.index] = {};\n                }\n                if (!valueMap[groupY.index][groupX.index][yVal]) {\n                    valueMap[groupY.index][groupX.index][yVal] = {};\n                }\n                valueMap[groupY.index][groupX.index][yVal][xVal] = zVal;\n\n                if (minZ === undefined || zVal < minZ) {\n                    minZ = zVal;\n                }\n                if (maxZ === undefined || zVal > maxZ) {\n                    maxZ = zVal;\n                }\n            });\n            self.plot.valueMap = valueMap;\n\n            if (!self.plot.groupByX) {\n                x.groups.values = x.uniqueValues;\n            }\n\n            if (!self.plot.groupByY) {\n                y.groups.values = y.uniqueValues;\n            }\n\n            this.setupValuesBeforeGroupsSort();\n\n            x.gaps = [];\n            x.totalValuesCount = 0;\n            x.allValuesList = [];\n            this.sortGroups(x, x.groups, config.x);\n\n            y.gaps = [];\n            y.totalValuesCount = 0;\n            y.allValuesList = [];\n            this.sortGroups(y, y.groups, config.y);\n\n            z.min = minZ;\n            z.max = maxZ;\n        }\n    }, {\n        key: 'setupValuesBeforeGroupsSort',\n        value: function setupValuesBeforeGroupsSort() {}\n    }, {\n        key: 'buildCells',\n        value: function buildCells() {\n            var self = this;\n            var x = self.plot.x;\n            var y = self.plot.y;\n            var z = self.plot.z;\n            var valueMap = self.plot.valueMap;\n\n            var matrixCells = self.plot.cells = [];\n            var matrix = self.plot.matrix = [];\n\n            y.allValuesList.forEach(function (v1, i) {\n                var row = [];\n                matrix.push(row);\n\n                x.allValuesList.forEach(function (v2, j) {\n                    var zVal = undefined;\n                    try {\n                        zVal = valueMap[v1.group.index][v2.group.index][v1.val][v2.val];\n                    } catch (e) {}\n\n                    var cell = {\n                        rowVar: v1,\n                        colVar: v2,\n                        row: i,\n                        col: j,\n                        value: zVal\n                    };\n                    row.push(cell);\n\n                    matrixCells.push(cell);\n                });\n            });\n        }\n    }, {\n        key: 'updateGroups',\n        value: function updateGroups(d, axisVal, rootGroup, axisGroupsConfig) {\n\n            var config = this.config;\n            var currentGroup = rootGroup;\n            axisGroupsConfig.keys.forEach(function (groupKey, groupKeyIndex) {\n                currentGroup.key = groupKey;\n\n                if (!currentGroup.children) {\n                    currentGroup.children = {};\n                }\n\n                var groupingValue = axisGroupsConfig.value.call(config, d, groupKey);\n\n                if (!currentGroup.children.hasOwnProperty(groupingValue)) {\n                    rootGroup.lastIndex++;\n                    currentGroup.children[groupingValue] = {\n                        values: [],\n                        children: null,\n                        groupingValue: groupingValue,\n                        level: currentGroup.level + 1,\n                        index: rootGroup.lastIndex,\n                        key: groupKey\n                    };\n                }\n\n                currentGroup = currentGroup.children[groupingValue];\n            });\n\n            if (currentGroup.values.indexOf(axisVal) === -1) {\n                currentGroup.values.push(axisVal);\n            }\n\n            return currentGroup;\n        }\n    }, {\n        key: 'sortGroups',\n        value: function sortGroups(axis, group, axisConfig, gaps) {\n            if (axisConfig.groups.labels && axisConfig.groups.labels.length > group.level) {\n                group.label = axisConfig.groups.labels[group.level];\n            } else {\n                group.label = group.key;\n            }\n\n            if (!gaps) {\n                gaps = [0];\n            }\n            if (gaps.length <= group.level) {\n                gaps.push(0);\n            }\n\n            group.allValuesCount = group.allValuesCount || 0;\n            group.allValuesBeforeCount = group.allValuesBeforeCount || 0;\n\n            group.gaps = gaps.slice();\n            group.gapsBefore = gaps.slice();\n\n            group.gapsSize = Heatmap.computeGapsSize(group.gaps);\n            group.gapsBeforeSize = group.gapsSize;\n            if (group.values) {\n                if (axisConfig.sortLabels) {\n                    group.values.sort(axisConfig.sortComparator);\n                }\n                group.values.forEach(function (v) {\n                    return axis.allValuesList.push({ val: v, group: group });\n                });\n                group.allValuesBeforeCount = axis.totalValuesCount;\n                axis.totalValuesCount += group.values.length;\n                group.allValuesCount += group.values.length;\n            }\n\n            group.childrenList = [];\n            if (group.children) {\n                var childrenCount = 0;\n\n                for (var childProp in group.children) {\n                    if (group.children.hasOwnProperty(childProp)) {\n                        var child = group.children[childProp];\n                        group.childrenList.push(child);\n                        childrenCount++;\n\n                        this.sortGroups(axis, child, axisConfig, gaps);\n                        group.allValuesCount += child.allValuesCount;\n                        gaps[group.level] += 1;\n                    }\n                }\n\n                if (gaps && childrenCount > 1) {\n                    gaps[group.level] -= 1;\n                }\n\n                group.gapsInside = [];\n                gaps.forEach(function (d, i) {\n                    group.gapsInside.push(d - (group.gapsBefore[i] || 0));\n                });\n                group.gapsInsideSize = Heatmap.computeGapsSize(group.gapsInside);\n\n                if (axis.gaps.length < gaps.length) {\n                    axis.gaps = gaps;\n                }\n            }\n        }\n    }, {\n        key: 'computeYAxisLabelsWidth',\n        value: function computeYAxisLabelsWidth(offset) {\n            var maxWidth = this.plot.margin.left;\n            if (this.config.y.title) {\n                maxWidth -= 15;\n            }\n            if (offset && offset.x) {\n                maxWidth += offset.x;\n            }\n\n            if (this.config.y.rotateLabels) {\n                maxWidth *= _utils.Utils.SQRT_2;\n                var fontSize = 11; //todo check actual font size\n                maxWidth -= fontSize / 2;\n            }\n\n            return maxWidth;\n        }\n    }, {\n        key: 'computeXAxisLabelsWidth',\n        value: function computeXAxisLabelsWidth(offset) {\n            if (!this.config.x.rotateLabels) {\n                return this.plot.cellWidth - 2;\n            }\n            var size = this.plot.margin.bottom;\n            if (this.config.x.title) {\n                size -= 15;\n            }\n            if (offset && offset.y) {\n                size -= offset.y;\n            }\n\n            size *= _utils.Utils.SQRT_2;\n\n            var fontSize = 11; //todo check actual font size\n            size -= fontSize / 2;\n\n            return size;\n        }\n    }, {\n        key: 'computePlotSize',\n        value: function computePlotSize() {\n\n            var plot = this.plot;\n            var conf = this.config;\n            var margin = plot.margin;\n            var availableWidth = _utils.Utils.availableWidth(this.config.width, this.getBaseContainer(), this.plot.margin);\n            var availableHeight = _utils.Utils.availableHeight(this.config.height, this.getBaseContainer(), this.plot.margin);\n            var width = availableWidth;\n            var height = availableHeight;\n\n            var xGapsSize = Heatmap.computeGapsSize(plot.x.gaps);\n\n            var computedCellWidth = Math.max(conf.cell.sizeMin, Math.min(conf.cell.sizeMax, (availableWidth - xGapsSize) / this.plot.x.totalValuesCount));\n            if (this.config.width) {\n\n                if (!this.config.cell.width) {\n                    this.plot.cellWidth = computedCellWidth;\n                }\n            } else {\n                this.plot.cellWidth = this.config.cell.width;\n\n                if (!this.plot.cellWidth) {\n                    this.plot.cellWidth = computedCellWidth;\n                }\n            }\n            width = this.plot.cellWidth * this.plot.x.totalValuesCount + margin.left + margin.right + xGapsSize;\n\n            var yGapsSize = Heatmap.computeGapsSize(plot.y.gaps);\n            var computedCellHeight = Math.max(conf.cell.sizeMin, Math.min(conf.cell.sizeMax, (availableHeight - yGapsSize) / this.plot.y.totalValuesCount));\n            if (this.config.height) {\n                if (!this.config.cell.height) {\n                    this.plot.cellHeight = computedCellHeight;\n                }\n            } else {\n                this.plot.cellHeight = this.config.cell.height;\n\n                if (!this.plot.cellHeight) {\n                    this.plot.cellHeight = computedCellHeight;\n                }\n            }\n\n            height = this.plot.cellHeight * this.plot.y.totalValuesCount + margin.top + margin.bottom + yGapsSize;\n\n            this.plot.width = width - margin.left - margin.right;\n            this.plot.height = height - margin.top - margin.bottom;\n        }\n    }, {\n        key: 'setupZScale',\n        value: function setupZScale() {\n\n            var self = this;\n            var config = self.config;\n            var z = self.plot.z;\n            var range = config.color.range;\n            var extent = z.max - z.min;\n            var scale;\n            z.domain = [];\n            if (config.color.scale == \"pow\") {\n                var exponent = 10;\n                range.forEach(function (c, i) {\n                    var v = z.max - extent / Math.pow(10, i);\n                    z.domain.push(v);\n                });\n                scale = d3.scalePow().exponent(exponent);\n            } else if (config.color.scale == \"log\") {\n\n                range.forEach(function (c, i) {\n                    var v = z.min + extent / Math.pow(10, i);\n                    z.domain.unshift(v);\n                });\n\n                scale = d3.scaleLog();\n            } else {\n                range.forEach(function (c, i) {\n                    var v = z.min + extent * (i / (range.length - 1));\n                    z.domain.push(v);\n                });\n                scale = _utils.Utils.createScale(config.color.scale);\n            }\n\n            z.domain[0] = z.min; //removing unnecessary floating points\n            z.domain[z.domain.length - 1] = z.max; //removing unnecessary floating points\n            void 0;\n\n            if (config.color.reverseScale) {\n                z.domain.reverse();\n            }\n\n            var plot = this.plot;\n\n            void 0;\n\n            plot.z.color.scale = scale.domain(z.domain).range(range);\n            var shape = plot.z.shape = {};\n\n            var cellConf = this.config.cell;\n            shape.type = \"rect\";\n\n            plot.z.shape.width = plot.cellWidth - cellConf.padding * 2;\n            plot.z.shape.height = plot.cellHeight - cellConf.padding * 2;\n        }\n    }, {\n        key: 'update',\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(Heatmap.prototype), 'update', this).call(this, newData);\n            if (this.plot.groupByY) {\n                this.drawGroupsY(this.plot.y.groups, this.svgG);\n            }\n            if (this.plot.groupByX) {\n                this.drawGroupsX(this.plot.x.groups, this.svgG);\n            }\n\n            this.updateCells();\n\n            // this.updateVariableLabels();\n\n            this.updateAxisX();\n            this.updateAxisY();\n\n            if (this.config.showLegend) {\n                this.updateLegend();\n            }\n\n            this.updateAxisTitles();\n        }\n    }, {\n        key: 'updateAxisTitles',\n        value: function updateAxisTitles() {\n            var self = this;\n            var plot = self.plot;\n        }\n    }, {\n        key: 'updateAxisX',\n        value: function updateAxisX() {\n            var self = this;\n            var plot = self.plot;\n            var labelClass = self.prefixClass(\"label\");\n            var labelXClass = labelClass + \"-x\";\n            var labelYClass = labelClass + \"-y\";\n            plot.labelClass = labelClass;\n\n            var offsetX = {\n                x: 0,\n                y: 0\n            };\n            var gapSize = Heatmap.computeGapSize(0);\n            if (plot.groupByX) {\n                var overlap = self.config.x.groups.overlap;\n\n                offsetX.x = gapSize / 2;\n                offsetX.y = overlap.bottom + gapSize / 2 + 6;\n            } else if (plot.groupByY) {\n                offsetX.y = gapSize;\n            }\n\n            var labels = self.svgG.selectAll(\"text.\" + labelXClass).data(plot.x.allValuesList, function (d, i) {\n                return i;\n            });\n\n            var labelsMerge = labels.enter().append(\"text\").attr(\"class\", function (d, i) {\n                return labelClass + \" \" + labelXClass + \" \" + labelXClass + \"-\" + i;\n            }).merge(labels);\n\n            labelsMerge.attr(\"x\", function (d, i) {\n                return i * plot.cellWidth + plot.cellWidth / 2 + d.group.gapsSize + offsetX.x;\n            }).attr(\"y\", plot.height + offsetX.y).attr(\"dy\", 10).attr(\"text-anchor\", \"middle\").text(function (d) {\n                return self.formatValueX(d.val);\n            });\n\n            var maxWidth = self.computeXAxisLabelsWidth(offsetX);\n\n            labelsMerge.each(function (label) {\n                var elem = d3.select(this),\n                    text = self.formatValueX(label.val);\n                _utils.Utils.placeTextWithEllipsisAndTooltip(elem, text, maxWidth, self.config.showTooltip ? self.plot.tooltip : false);\n            });\n\n            if (self.config.x.rotateLabels) {\n                labelsMerge.attr(\"transform\", function (d, i) {\n                    return \"rotate(-45, \" + (i * plot.cellWidth + plot.cellWidth / 2 + d.group.gapsSize + offsetX.x) + \", \" + (plot.height + offsetX.y) + \")\";\n                }).attr(\"dx\", -2).attr(\"dy\", 8).attr(\"text-anchor\", \"end\");\n            }\n\n            labels.exit().remove();\n\n            self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-x')).attr(\"transform\", \"translate(\" + plot.width / 2 + \",\" + (plot.height + plot.margin.bottom) + \")\").selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"dy\", \"-0.5em\").style(\"text-anchor\", \"middle\").text(self.config.x.title);\n        }\n    }, {\n        key: 'updateAxisY',\n        value: function updateAxisY() {\n            var self = this;\n            var plot = self.plot;\n            var labelClass = self.prefixClass(\"label\");\n            var labelYClass = labelClass + \"-y\";\n            plot.labelClass = labelClass;\n\n            var labels = self.svgG.selectAll(\"text.\" + labelYClass).data(plot.y.allValuesList);\n\n            var labelsEnter = labels.enter().append(\"text\");\n            var labelsMerge = labelsEnter.merge(labels);\n\n            var offsetY = {\n                x: 0,\n                y: 0\n            };\n            if (plot.groupByY) {\n                var overlap = self.config.y.groups.overlap;\n                var gapSize = Heatmap.computeGapSize(0);\n                offsetY.x = -overlap.left;\n\n                offsetY.y = gapSize / 2;\n            }\n            labelsMerge.attr(\"x\", offsetY.x).attr(\"y\", function (d, i) {\n                return i * plot.cellHeight + plot.cellHeight / 2 + d.group.gapsSize + offsetY.y;\n            }).attr(\"dx\", -2).attr(\"text-anchor\", \"end\").attr(\"class\", function (d, i) {\n                return labelClass + \" \" + labelYClass + \" \" + labelYClass + \"-\" + i;\n            }).text(function (d) {\n                var formatted = self.formatValueY(d.val);\n                return formatted;\n            });\n\n            var maxWidth = self.computeYAxisLabelsWidth(offsetY);\n\n            labelsMerge.each(function (label) {\n                var elem = d3.select(this),\n                    text = self.formatValueY(label.val);\n                _utils.Utils.placeTextWithEllipsisAndTooltip(elem, text, maxWidth, self.config.showTooltip ? self.plot.tooltip : false);\n            });\n\n            if (self.config.y.rotateLabels) {\n                labelsMerge.attr(\"transform\", function (d, i) {\n                    return \"rotate(-45, \" + offsetY.x + \", \" + (d.group.gapsSize + (i * plot.cellHeight + plot.cellHeight / 2) + offsetY.y) + \")\";\n                }).attr(\"text-anchor\", \"end\");\n                // .attr(\"dx\", -7);\n            } else {\n                labelsMerge.attr(\"dominant-baseline\", \"middle\");\n            }\n\n            labels.exit().remove();\n\n            self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-y')).selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + -plot.margin.left + \",\" + plot.height / 2 + \")rotate(-90)\").attr(\"dy\", \"1em\").style(\"text-anchor\", \"middle\").text(self.config.y.title);\n        }\n    }, {\n        key: 'drawGroupsY',\n        value: function drawGroupsY(parentGroup, container, availableWidth) {\n\n            var self = this;\n            var plot = self.plot;\n\n            var groupClass = self.prefixClass(\"group\");\n            var groupYClass = groupClass + \"-y\";\n            var groups = container.selectAll(\"g.\" + groupClass + \".\" + groupYClass).data(parentGroup.childrenList);\n\n            var valuesBeforeCount = 0;\n            var gapsBeforeSize = 0;\n\n            var groupsEnter = groups.enter().append(\"g\");\n            groupsEnter.classed(groupClass, true).classed(groupYClass, true).append(\"rect\").classed(\"group-rect\", true);\n\n            var titleGroupEnter = groupsEnter.appendSelector(\"g.title\");\n            titleGroupEnter.append(\"rect\");\n            titleGroupEnter.append(\"text\");\n\n            var gapSize = Heatmap.computeGapSize(parentGroup.level);\n            var padding = gapSize / 4;\n\n            var titleRectWidth = Heatmap.groupTitleRectHeight;\n            var depth = self.config.y.groups.keys.length - parentGroup.level;\n            var overlap = {\n                left: 0,\n                right: 0\n            };\n\n            if (!availableWidth) {\n                overlap.right = plot.y.overlap.left;\n                overlap.left = plot.y.overlap.left;\n                availableWidth = plot.width + gapSize + overlap.left + overlap.right;\n            }\n\n            var groupsMerge = groupsEnter.merge(groups);\n\n            groupsMerge.attr(\"transform\", function (d, i) {\n                var translate = \"translate(\" + (padding - overlap.left) + \",\" + (plot.cellHeight * valuesBeforeCount + i * gapSize + gapsBeforeSize + padding) + \")\";\n                gapsBeforeSize += d.gapsInsideSize || 0;\n                valuesBeforeCount += d.allValuesCount || 0;\n                return translate;\n            });\n\n            var groupWidth = availableWidth - padding * 2;\n\n            var titleGroups = groupsMerge.selectAll(\"g.title\").attr(\"transform\", function (d, i) {\n                return \"translate(\" + (groupWidth - titleRectWidth) + \", 0)\";\n            });\n\n            var tileRects = titleGroups.selectAll(\"rect\").attr(\"width\", titleRectWidth).attr(\"height\", function (d) {\n                return (d.gapsInsideSize || 0) + plot.cellHeight * d.allValuesCount + padding * 2;\n            }).attr(\"x\", 0).attr(\"y\", 0)\n            // .attr(\"fill\", \"lightgrey\")\n            .attr(\"stroke-width\", 0);\n\n            this.setGroupMouseCallbacks(parentGroup, tileRects);\n\n            groupsMerge.selectAll(\"rect.group-rect\").attr(\"class\", function (d) {\n                return \"group-rect group-rect-\" + d.index;\n            }).attr(\"width\", groupWidth).attr(\"height\", function (d) {\n                return (d.gapsInsideSize || 0) + plot.cellHeight * d.allValuesCount + padding * 2;\n            }).attr(\"x\", 0).attr(\"y\", 0).attr(\"fill\", \"white\").attr(\"fill-opacity\", 0).attr(\"stroke-width\", 0.5).attr(\"stroke\", \"black\");\n\n            groupsMerge.each(function (group) {\n\n                self.drawGroupsY.call(self, group, d3.select(this), groupWidth - titleRectWidth);\n            });\n\n            groups.exit().remove();\n        }\n    }, {\n        key: 'drawGroupsX',\n        value: function drawGroupsX(parentGroup, container, availableHeight) {\n\n            var self = this;\n            var plot = self.plot;\n\n            var groupClass = self.prefixClass(\"group\");\n            var groupXClass = groupClass + \"-x\";\n            var groups = container.selectAll(\"g.\" + groupClass + \".\" + groupXClass).data(parentGroup.childrenList);\n\n            var valuesBeforeCount = 0;\n            var gapsBeforeSize = 0;\n\n            var groupsEnter = groups.enter().append(\"g\");\n            groupsEnter.classed(groupClass, true).classed(groupXClass, true).append(\"rect\").classed(\"group-rect\", true);\n\n            var titleGroupEnter = groupsEnter.appendSelector(\"g.title\");\n            titleGroupEnter.append(\"rect\");\n            titleGroupEnter.append(\"text\");\n\n            var gapSize = Heatmap.computeGapSize(parentGroup.level);\n            var padding = gapSize / 4;\n            var titleRectHeight = Heatmap.groupTitleRectHeight;\n\n            var depth = self.config.x.groups.keys.length - parentGroup.level;\n\n            var overlap = {\n                top: 0,\n                bottom: 0\n            };\n\n            if (!availableHeight) {\n                overlap.bottom = plot.x.overlap.bottom;\n                overlap.top = plot.x.overlap.top;\n                availableHeight = plot.height + gapSize + overlap.top + overlap.bottom;\n            } else {\n                overlap.top = -titleRectHeight;\n            }\n            // console.log('parentGroup',parentGroup, 'gapSize', gapSize, plot.x.overlap);\n\n            var groupsMerge = groupsEnter.merge(groups);\n\n            groupsMerge.attr(\"transform\", function (d, i) {\n                var translate = \"translate(\" + (plot.cellWidth * valuesBeforeCount + i * gapSize + gapsBeforeSize + padding) + \", \" + (padding - overlap.top) + \")\";\n                gapsBeforeSize += d.gapsInsideSize || 0;\n                valuesBeforeCount += d.allValuesCount || 0;\n                return translate;\n            });\n\n            var groupHeight = availableHeight - padding * 2;\n\n            var titleGroups = groupsMerge.selectAll(\"g.title\").attr(\"transform\", function (d, i) {\n                return \"translate(0, \" + 0 + \")\";\n            });\n\n            var tileRects = titleGroups.selectAll(\"rect\").attr(\"height\", titleRectHeight).attr(\"width\", function (d) {\n                return (d.gapsInsideSize || 0) + plot.cellWidth * d.allValuesCount + padding * 2;\n            }).attr(\"x\", 0).attr(\"y\", 0)\n            // .attr(\"fill\", \"lightgrey\")\n            .attr(\"stroke-width\", 0);\n\n            this.setGroupMouseCallbacks(parentGroup, tileRects);\n\n            groupsMerge.selectAll(\"rect.group-rect\").attr(\"class\", function (d) {\n                return \"group-rect group-rect-\" + d.index;\n            }).attr(\"height\", groupHeight).attr(\"width\", function (d) {\n                return (d.gapsInsideSize || 0) + plot.cellWidth * d.allValuesCount + padding * 2;\n            }).attr(\"x\", 0).attr(\"y\", 0).attr(\"fill\", \"white\").attr(\"fill-opacity\", 0).attr(\"stroke-width\", 0.5).attr(\"stroke\", \"black\");\n\n            groupsMerge.each(function (group) {\n                self.drawGroupsX.call(self, group, d3.select(this), groupHeight - titleRectHeight);\n            });\n\n            groups.exit().remove();\n        }\n    }, {\n        key: 'setGroupMouseCallbacks',\n        value: function setGroupMouseCallbacks(parentGroup, tileRects) {\n            var plot = this.plot;\n            var self = this;\n            var mouseoverCallbacks = [];\n            mouseoverCallbacks.push(function (d) {\n                d3.select(this).classed('highlighted', true);\n                d3.select(this.parentNode.parentNode).selectAll(\"rect.group-rect-\" + d.index).classed('highlighted', true);\n            });\n\n            var mouseoutCallbacks = [];\n            mouseoutCallbacks.push(function (d) {\n                d3.select(this).classed('highlighted', false);\n                d3.select(this.parentNode.parentNode).selectAll(\"rect.group-rect-\" + d.index).classed('highlighted', false);\n            });\n            if (plot.tooltip) {\n\n                mouseoverCallbacks.push(function (d) {\n                    var html = parentGroup.label + \": \" + d.groupingValue;\n                    self.showTooltip(html);\n                });\n\n                mouseoutCallbacks.push(function (d) {\n                    self.hideTooltip();\n                });\n            }\n            tileRects.on(\"mouseover\", function (d) {\n                var self = this;\n                mouseoverCallbacks.forEach(function (callback) {\n                    callback.call(self, d);\n                });\n            });\n            tileRects.on(\"mouseout\", function (d) {\n                var self = this;\n                mouseoutCallbacks.forEach(function (callback) {\n                    callback.call(self, d);\n                });\n            });\n        }\n    }, {\n        key: 'updateCells',\n        value: function updateCells() {\n\n            var self = this;\n            var plot = self.plot;\n            var cellContainerClass = self.prefixClass(\"cells\");\n            var gapSize = Heatmap.computeGapSize(0);\n            var paddingX = plot.x.groups.childrenList.length ? gapSize / 2 : 0;\n            var paddingY = plot.y.groups.childrenList.length ? gapSize / 2 : 0;\n            var cellContainer = self.svgG.selectOrAppend(\"g.\" + cellContainerClass);\n            cellContainer.attr(\"transform\", \"translate(\" + paddingX + \", \" + paddingY + \")\");\n\n            var cellClass = self.prefixClass(\"cell\");\n            var cellShape = plot.z.shape.type;\n\n            var cells = cellContainer.selectAll(\"g.\" + cellClass).data(self.plot.cells);\n\n            var cellEnter = cells.enter().append(\"g\").classed(cellClass, true);\n\n            var cellsMerge = cellEnter.merge(cells);\n            cellsMerge.attr(\"transform\", function (c) {\n                return \"translate(\" + (plot.cellWidth * c.col + plot.cellWidth / 2 + c.colVar.group.gapsSize) + \",\" + (plot.cellHeight * c.row + plot.cellHeight / 2 + c.rowVar.group.gapsSize) + \")\";\n            });\n\n            var shapes = cellsMerge.selectOrAppend(cellShape + \".cell-shape-\" + cellShape);\n\n            shapes.attr(\"width\", plot.z.shape.width).attr(\"height\", plot.z.shape.height).attr(\"x\", -plot.cellWidth / 2).attr(\"y\", -plot.cellHeight / 2);\n\n            shapes.style(\"fill\", function (c) {\n                return c.value === undefined ? self.config.color.noDataColor : plot.z.color.scale(c.value);\n            });\n            shapes.attr(\"fill-opacity\", function (d) {\n                return d.value === undefined ? 0 : 1;\n            });\n\n            var mouseoverCallbacks = [];\n            var mouseoutCallbacks = [];\n\n            if (plot.tooltip) {\n\n                mouseoverCallbacks.push(function (c) {\n                    var html = c.value === undefined ? self.config.tooltip.noDataText : self.formatValueZ(c.value);\n                    self.showTooltip(html);\n                });\n\n                mouseoutCallbacks.push(function (c) {\n                    self.hideTooltip();\n                });\n            }\n\n            if (self.config.highlightLabels) {\n                var highlightClass = self.config.cssClassPrefix + \"highlight\";\n                var xLabelClass = function xLabelClass(c) {\n                    return plot.labelClass + \"-x-\" + c.col;\n                };\n                var yLabelClass = function yLabelClass(c) {\n                    return plot.labelClass + \"-y-\" + c.row;\n                };\n\n                mouseoverCallbacks.push(function (c) {\n\n                    self.svgG.selectAll(\"text.\" + xLabelClass(c)).classed(highlightClass, true);\n                    self.svgG.selectAll(\"text.\" + yLabelClass(c)).classed(highlightClass, true);\n                });\n                mouseoutCallbacks.push(function (c) {\n                    self.svgG.selectAll(\"text.\" + xLabelClass(c)).classed(highlightClass, false);\n                    self.svgG.selectAll(\"text.\" + yLabelClass(c)).classed(highlightClass, false);\n                });\n            }\n\n            cellsMerge.on(\"mouseover\", function (c) {\n                mouseoverCallbacks.forEach(function (callback) {\n                    return callback(c);\n                });\n            }).on(\"mouseout\", function (c) {\n                mouseoutCallbacks.forEach(function (callback) {\n                    return callback(c);\n                });\n            });\n\n            cellsMerge.on(\"click\", function (c) {\n                self.trigger(\"cell-selected\", c);\n            });\n\n            cells.exit().remove();\n        }\n    }, {\n        key: 'formatValueX',\n        value: function formatValueX(value) {\n            if (!this.config.x.formatter) return value;\n\n            return this.config.x.formatter.call(this.config, value);\n        }\n    }, {\n        key: 'formatValueY',\n        value: function formatValueY(value) {\n            if (!this.config.y.formatter) return value;\n\n            return this.config.y.formatter.call(this.config, value);\n        }\n    }, {\n        key: 'formatValueZ',\n        value: function formatValueZ(value) {\n            if (!this.config.z.formatter) return value;\n\n            return this.config.z.formatter.call(this.config, value);\n        }\n    }, {\n        key: 'formatLegendValue',\n        value: function formatLegendValue(value) {\n            if (!this.config.legend.formatter) return value;\n\n            return this.config.legend.formatter.call(this.config, value);\n        }\n    }, {\n        key: 'updateLegend',\n        value: function updateLegend() {\n            var self = this;\n            var plot = this.plot;\n            var legendX = this.plot.width + 10;\n            var gapSize = Heatmap.computeGapSize(0);\n            if (this.plot.groupByY) {\n                legendX += gapSize / 2 + plot.y.overlap.right;\n            } else if (this.plot.groupByX) {\n                legendX += gapSize;\n            }\n            var legendY = 0;\n            if (this.plot.groupByX || this.plot.groupByY) {\n                legendY += gapSize / 2;\n            }\n\n            var barWidth = 10;\n            var barHeight = this.plot.height - 2;\n            var scale = plot.z.color.scale;\n\n            plot.legend = new _legend.Legend(this.svg, this.svgG, scale, legendX, legendY, function (v) {\n                return self.formatLegendValue(v);\n            }).setRotateLabels(self.config.legend.rotateLabels).linearGradientBar(barWidth, barHeight);\n        }\n    }], [{\n        key: 'computeGapSize',\n        value: function computeGapSize(gapLevel) {\n            return Heatmap.maxGroupGapSize / (gapLevel + 1);\n        }\n    }, {\n        key: 'computeGapsSize',\n        value: function computeGapsSize(gaps) {\n            var gapsSize = 0;\n            gaps.forEach(function (gapsNumber, gapsLevel) {\n                return gapsSize += gapsNumber * Heatmap.computeGapSize(gapsLevel);\n            });\n            return gapsSize;\n        }\n    }]);\n\n    return Heatmap;\n}(_chart.Chart);\n\nHeatmap.maxGroupGapSize = 24;\nHeatmap.groupTitleRectHeight = 6;\n\n},{\"./chart\":34,\"./legend\":41,\"./utils\":47}],39:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Histogram = exports.HistogramConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chartWithColorGroups = require('./chart-with-color-groups');\n\nvar _utils = require('./utils');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar HistogramConfig = exports.HistogramConfig = function (_ChartWithColorGroups) {\n    _inherits(HistogramConfig, _ChartWithColorGroups);\n\n    function HistogramConfig(custom) {\n        _classCallCheck(this, HistogramConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(HistogramConfig).call(this));\n\n        _this.svgClass = _this.cssClassPrefix + 'histogram';\n        _this.showLegend = true;\n        _this.showTooltip = true;\n        _this.x = { // X axis config\n            title: '', // axis label\n            key: 0,\n            value: function value(d, key) {\n                return _utils.Utils.isNumber(d) ? d : parseFloat(d[key]);\n            }, // x value accessor\n            scale: \"linear\",\n            orient: \"bottom\",\n            ticks: undefined\n        };\n        _this.y = { // Y axis config\n            title: '', // axis label,\n            orient: \"left\",\n            scale: \"linear\"\n        };\n        _this.frequency = true;\n        _this.groups = {\n            key: 1\n        };\n        _this.transition = true;\n\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n\n        return _this;\n    }\n\n    return HistogramConfig;\n}(_chartWithColorGroups.ChartWithColorGroupsConfig);\n\nvar Histogram = exports.Histogram = function (_ChartWithColorGroups2) {\n    _inherits(Histogram, _ChartWithColorGroups2);\n\n    function Histogram(placeholderSelector, data, config) {\n        _classCallCheck(this, Histogram);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(Histogram).call(this, placeholderSelector, data, new HistogramConfig(config)));\n    }\n\n    _createClass(Histogram, [{\n        key: 'setConfig',\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(Histogram.prototype), 'setConfig', this).call(this, new HistogramConfig(config));\n        }\n    }, {\n        key: 'initPlot',\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(Histogram.prototype), 'initPlot', this).call(this);\n            var self = this;\n\n            var conf = this.config;\n\n            this.plot.x = {};\n            this.plot.y = {};\n            this.plot.bar = {\n                color: null //color scale mapping function\n            };\n\n            this.computePlotSize();\n\n            this.setupX();\n            this.setupHistogram();\n            this.setupGroupStacks();\n            this.setupY();\n            return this;\n        }\n    }, {\n        key: 'setupX',\n        value: function setupX() {\n\n            var plot = this.plot;\n            var x = plot.x;\n            var conf = this.config.x;\n\n            /* *\r\n             * value accessor - returns the value to encode for a given data object.\r\n             * scale - maps value to a visual display encoding, such as a pixel position.\r\n             * map function - maps from data value to display value\r\n             * axis - sets up axis\r\n             **/\n            x.value = function (d) {\n                return conf.value(d, conf.key);\n            };\n            x.scale = _utils.Utils.createScale(conf.scale).range([0, plot.width]);\n            x.map = function (d) {\n                return x.scale(x.value(d));\n            };\n\n            x.axis = _utils.Utils.createAxis(conf.orient, x.scale);\n\n            if (conf.ticks) {\n                x.axis.ticks(conf.ticks);\n            }\n            var data = this.plot.groupedData;\n            plot.x.scale.domain([d3.min(data, function (s) {\n                return d3.min(s.values, plot.x.value);\n            }), d3.max(data, function (s) {\n                return d3.max(s.values, plot.x.value);\n            })]);\n        }\n    }, {\n        key: 'setupY',\n        value: function setupY() {\n\n            var plot = this.plot;\n            var y = plot.y;\n            var conf = this.config.y;\n            y.scale = _utils.Utils.createScale(conf.scale).range([plot.height, 0]);\n\n            y.axis = _utils.Utils.createAxis(conf.orient, y.scale);\n            var data = this.plot.data;\n            var yStackMax = d3.max(plot.stackedHistograms, function (layer) {\n                return d3.max(layer.histogramBins, function (d) {\n                    return d.y0 + d.y;\n                });\n            });\n            plot.y.scale.domain([0, yStackMax]);\n        }\n    }, {\n        key: 'setupHistogram',\n        value: function setupHistogram() {\n            var plot = this.plot;\n            var x = plot.x;\n            var y = plot.y;\n            var ticks = this.config.x.ticks ? x.scale.ticks(this.config.x.ticks) : x.scale.ticks();\n\n            plot.histogram = d3.histogram().domain(x.scale.domain()).value(x.value).thresholds(ticks);\n        }\n    }, {\n        key: 'setupGroupStacks',\n        value: function setupGroupStacks() {\n            var _this3 = this;\n\n            var self = this;\n            var y0s = [];\n            this.plot.groupedData.forEach(function (d) {\n                d.histogramBins = _this3.plot.histogram(d.values);\n\n                d.histogramBins.forEach(function (b, i) {\n                    b.x = b.x0;\n                    b.dx = b.x1 - b.x0;\n                    b.y = b.length;\n                    var prevY0 = y0s[i];\n                    if (!prevY0) prevY0 = 0;\n                    b.y0 = prevY0;\n\n                    if (!_this3.config.frequency) {\n                        b.y /= _this3.plot.dataLength;\n                    }\n                    y0s[i] = b.y + prevY0;\n                });\n            });\n            var keys = this.plot.groupedData.map(function (d) {\n                return d.key;\n            });\n            // console.log(this.plot.groupedData);\n\n            this.plot.stack = d3.stack().keys(keys).value(function (d) {\n                return d.histogramBins;\n            });\n            this.plot.stackedHistograms = this.plot.groupedData;\n        }\n    }, {\n        key: 'drawAxisX',\n        value: function drawAxisX() {\n            var self = this;\n            var plot = self.plot;\n            var axisConf = this.config.x;\n            var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-x') + \".\" + self.prefixClass('axis') + (self.config.guides ? '' : '.' + self.prefixClass('no-guides'))).attr(\"transform\", \"translate(0,\" + plot.height + \")\");\n\n            var axisT = axis;\n            if (self.config.transition) {\n                axisT = axis.transition().ease(d3.easeSinInOut);\n            }\n\n            axisT.call(plot.x.axis);\n\n            axis.selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + plot.width / 2 + \",\" + plot.margin.bottom + \")\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"-1em\").style(\"text-anchor\", \"middle\").text(axisConf.title);\n        }\n    }, {\n        key: 'drawAxisY',\n        value: function drawAxisY() {\n            var self = this;\n            var plot = self.plot;\n            var axisConf = this.config.y;\n            var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-y') + \".\" + self.prefixClass('axis') + (self.config.guides ? '' : '.' + self.prefixClass('no-guides')));\n\n            var axisT = axis;\n            if (self.config.transition) {\n                axisT = axis.transition().ease(d3.easeSinInOut);\n            }\n\n            axisT.call(plot.y.axis);\n\n            axis.selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + -plot.margin.left + \",\" + plot.height / 2 + \")rotate(-90)\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"1em\").style(\"text-anchor\", \"middle\").text(axisConf.title);\n        }\n    }, {\n        key: 'drawHistogram',\n        value: function drawHistogram() {\n            var self = this;\n            var plot = self.plot;\n\n            var layerClass = this.prefixClass(\"layer\");\n\n            var barClass = this.prefixClass(\"bar\");\n            var layer = self.svgG.selectAll(\".\" + layerClass).data(plot.stackedHistograms);\n\n            var layerMerge = layer.enter().append(\"g\").attr(\"class\", layerClass).merge(layer);\n\n            var bar = layerMerge.selectAll(\".\" + barClass).data(function (d) {\n                return d.histogramBins;\n            });\n\n            var barEnter = bar.enter().append(\"g\");\n            barEnter.attr(\"class\", barClass).append(\"rect\").attr(\"x\", 1);\n\n            var barMerge = barEnter.merge(bar);\n            var barRect = barMerge.select(\"rect\");\n\n            var barRectT = barRect;\n            var barT = barMerge;\n            var layerT = layerMerge;\n            if (this.transitionEnabled()) {\n                barRectT = barRect.transition();\n                barT = barMerge.transition();\n                layerT = layerMerge.transition();\n            }\n\n            barT.attr(\"transform\", function (d) {\n                return \"translate(\" + plot.x.scale(d.x) + \",\" + plot.y.scale(d.y0 + d.y) + \")\";\n            });\n            var rectWidth = plot.stackedHistograms.length ? plot.stackedHistograms[0].histogramBins.length ? plot.x.scale(plot.stackedHistograms[0].histogramBins[0].x1) - plot.x.scale(plot.stackedHistograms[0].histogramBins[0].x0) - 1 : 0 : 0;\n\n            barRectT.attr(\"width\", function (d) {\n                return plot.x.scale(d.x1) - plot.x.scale(d.x0) - 1;\n            }).attr(\"height\", function (d) {\n                return plot.height - plot.y.scale(d.y);\n            });\n\n            if (this.plot.color) {\n                layerT.attr(\"fill\", this.plot.seriesColor);\n            }\n\n            if (plot.tooltip) {\n                barMerge.on(\"mouseover\", function (d) {\n                    self.showTooltip(d.y);\n                }).on(\"mouseout\", function (d) {\n                    self.hideTooltip();\n                });\n            }\n            layer.exit().remove();\n            bar.exit().remove();\n        }\n    }, {\n        key: 'update',\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(Histogram.prototype), 'update', this).call(this, newData);\n            this.drawAxisX();\n            this.drawAxisY();\n\n            this.drawHistogram();\n            return this;\n        }\n    }]);\n\n    return Histogram;\n}(_chartWithColorGroups.ChartWithColorGroups);\n\n},{\"./chart-with-color-groups\":33,\"./utils\":47}],40:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Legend = exports.StatisticsUtils = exports.BoxPlotConfig = exports.BoxPlot = exports.BoxPlotBaseConfig = exports.BoxPlotBase = exports.BarChartConfig = exports.BarChart = exports.HistogramConfig = exports.Histogram = exports.HeatmapTimeSeriesConfig = exports.HeatmapTimeSeries = exports.HeatmapConfig = exports.Heatmap = exports.CorrelationMatrixConfig = exports.CorrelationMatrix = exports.RegressionConfig = exports.Regression = exports.ScatterPlotMatrixConfig = exports.ScatterPlotMatrix = exports.ScatterPlotConfig = exports.ScatterPlot = undefined;\n\nvar _scatterplot = require(\"./scatterplot\");\n\nObject.defineProperty(exports, \"ScatterPlot\", {\n  enumerable: true,\n  get: function get() {\n    return _scatterplot.ScatterPlot;\n  }\n});\nObject.defineProperty(exports, \"ScatterPlotConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _scatterplot.ScatterPlotConfig;\n  }\n});\n\nvar _scatterplotMatrix = require(\"./scatterplot-matrix\");\n\nObject.defineProperty(exports, \"ScatterPlotMatrix\", {\n  enumerable: true,\n  get: function get() {\n    return _scatterplotMatrix.ScatterPlotMatrix;\n  }\n});\nObject.defineProperty(exports, \"ScatterPlotMatrixConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _scatterplotMatrix.ScatterPlotMatrixConfig;\n  }\n});\n\nvar _regression = require(\"./regression\");\n\nObject.defineProperty(exports, \"Regression\", {\n  enumerable: true,\n  get: function get() {\n    return _regression.Regression;\n  }\n});\nObject.defineProperty(exports, \"RegressionConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _regression.RegressionConfig;\n  }\n});\n\nvar _correlationMatrix = require(\"./correlation-matrix\");\n\nObject.defineProperty(exports, \"CorrelationMatrix\", {\n  enumerable: true,\n  get: function get() {\n    return _correlationMatrix.CorrelationMatrix;\n  }\n});\nObject.defineProperty(exports, \"CorrelationMatrixConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _correlationMatrix.CorrelationMatrixConfig;\n  }\n});\n\nvar _heatmap = require(\"./heatmap\");\n\nObject.defineProperty(exports, \"Heatmap\", {\n  enumerable: true,\n  get: function get() {\n    return _heatmap.Heatmap;\n  }\n});\nObject.defineProperty(exports, \"HeatmapConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _heatmap.HeatmapConfig;\n  }\n});\n\nvar _heatmapTimeseries = require(\"./heatmap-timeseries\");\n\nObject.defineProperty(exports, \"HeatmapTimeSeries\", {\n  enumerable: true,\n  get: function get() {\n    return _heatmapTimeseries.HeatmapTimeSeries;\n  }\n});\nObject.defineProperty(exports, \"HeatmapTimeSeriesConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _heatmapTimeseries.HeatmapTimeSeriesConfig;\n  }\n});\n\nvar _histogram = require(\"./histogram\");\n\nObject.defineProperty(exports, \"Histogram\", {\n  enumerable: true,\n  get: function get() {\n    return _histogram.Histogram;\n  }\n});\nObject.defineProperty(exports, \"HistogramConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _histogram.HistogramConfig;\n  }\n});\n\nvar _barChart = require(\"./bar-chart\");\n\nObject.defineProperty(exports, \"BarChart\", {\n  enumerable: true,\n  get: function get() {\n    return _barChart.BarChart;\n  }\n});\nObject.defineProperty(exports, \"BarChartConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _barChart.BarChartConfig;\n  }\n});\n\nvar _boxPlotBase = require(\"./box-plot-base\");\n\nObject.defineProperty(exports, \"BoxPlotBase\", {\n  enumerable: true,\n  get: function get() {\n    return _boxPlotBase.BoxPlotBase;\n  }\n});\nObject.defineProperty(exports, \"BoxPlotBaseConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _boxPlotBase.BoxPlotBaseConfig;\n  }\n});\n\nvar _boxPlot = require(\"./box-plot\");\n\nObject.defineProperty(exports, \"BoxPlot\", {\n  enumerable: true,\n  get: function get() {\n    return _boxPlot.BoxPlot;\n  }\n});\nObject.defineProperty(exports, \"BoxPlotConfig\", {\n  enumerable: true,\n  get: function get() {\n    return _boxPlot.BoxPlotConfig;\n  }\n});\n\nvar _statisticsUtils = require(\"./statistics-utils\");\n\nObject.defineProperty(exports, \"StatisticsUtils\", {\n  enumerable: true,\n  get: function get() {\n    return _statisticsUtils.StatisticsUtils;\n  }\n});\n\nvar _legend = require(\"./legend\");\n\nObject.defineProperty(exports, \"Legend\", {\n  enumerable: true,\n  get: function get() {\n    return _legend.Legend;\n  }\n});\n\nvar _d3Extensions = require(\"./d3-extensions\");\n\n_d3Extensions.D3Extensions.extend();\n\n},{\"./bar-chart\":30,\"./box-plot\":32,\"./box-plot-base\":31,\"./correlation-matrix\":35,\"./d3-extensions\":36,\"./heatmap\":38,\"./heatmap-timeseries\":37,\"./histogram\":39,\"./legend\":41,\"./regression\":42,\"./scatterplot\":44,\"./scatterplot-matrix\":43,\"./statistics-utils\":46}],41:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Legend = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require('./utils');\n\nvar _color = require('../bower_components/d3-legend/src/color');\n\nvar _color2 = _interopRequireDefault(_color);\n\nvar _size = require('../bower_components/d3-legend/src/size');\n\nvar _size2 = _interopRequireDefault(_size);\n\nvar _symbol = require('../bower_components/d3-legend/src/symbol');\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*var d3 = require('../bower_components/d3');\r\n*/\n// var legend = require('../bower_components/d3-legend/no-extend');\n//\n// module.exports.legend = legend;\n\nvar Legend = exports.Legend = function () {\n    function Legend(svg, legendParent, scale, legendX, legendY, labelFormat) {\n        _classCallCheck(this, Legend);\n\n        this.cssClassPrefix = \"odc-\";\n        this.legendClass = this.cssClassPrefix + \"legend\";\n        this.color = _color2.default;\n        this.size = _size2.default;\n        this.symbol = _symbol2.default;\n        this.labelFormat = undefined;\n\n        this.scale = scale;\n        this.svg = svg;\n        this.guid = _utils.Utils.guid();\n        this.container = _utils.Utils.selectOrAppend(legendParent, \"g.\" + this.legendClass, \"g\").attr(\"transform\", \"translate(\" + legendX + \",\" + legendY + \")\").classed(this.legendClass, true);\n\n        this.labelFormat = labelFormat;\n    }\n\n    _createClass(Legend, [{\n        key: 'linearGradientBar',\n        value: function linearGradientBar(barWidth, barHeight, title) {\n            var gradientId = this.cssClassPrefix + \"linear-gradient\" + \"-\" + this.guid;\n            var scale = this.scale;\n            var self = this;\n\n            this.linearGradient = _utils.Utils.linearGradient(this.svg, gradientId, this.scale.range(), 0, 100, 0, 0);\n\n            this.container.append(\"rect\").attr(\"width\", barWidth).attr(\"height\", barHeight).attr(\"x\", 0).attr(\"y\", 0).style(\"fill\", \"url(#\" + gradientId + \")\");\n\n            var ticks = this.container.selectAll(\"text\").data(scale.domain());\n            var ticksNumber = scale.domain().length - 1;\n            ticks.enter().append(\"text\");\n\n            ticks.attr(\"x\", barWidth).attr(\"y\", function (d, i) {\n                return barHeight - i * barHeight / ticksNumber;\n            }).attr(\"dx\", 3)\n            // .attr(\"dy\", 1)\n            .attr(\"alignment-baseline\", \"middle\").text(function (d) {\n                return self.labelFormat ? self.labelFormat(d) : d;\n            });\n            ticks.attr(\"dominant-baseline\", \"middle\");\n            if (this.rotateLabels) {\n                ticks.attr(\"transform\", function (d, i) {\n                    return \"rotate(-45, \" + barWidth + \", \" + (barHeight - i * barHeight / ticksNumber) + \")\";\n                }).attr(\"text-anchor\", \"start\").attr(\"dx\", 5).attr(\"dy\", 5);\n            } else {}\n\n            ticks.exit().remove();\n\n            return this;\n        }\n    }, {\n        key: 'setRotateLabels',\n        value: function setRotateLabels(rotateLabels) {\n            this.rotateLabels = rotateLabels;\n            return this;\n        }\n    }]);\n\n    return Legend;\n}();\n\n},{\"../bower_components/d3-legend/src/color\":1,\"../bower_components/d3-legend/src/size\":3,\"../bower_components/d3-legend/src/symbol\":4,\"./utils\":47}],42:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Regression = exports.RegressionConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chart = require(\"./chart\");\n\nvar _scatterplot = require(\"./scatterplot\");\n\nvar _utils = require(\"./utils\");\n\nvar _statisticsUtils = require(\"./statistics-utils\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar RegressionConfig = exports.RegressionConfig = function (_ScatterPlotConfig) {\n    _inherits(RegressionConfig, _ScatterPlotConfig);\n\n    function RegressionConfig(custom) {\n        _classCallCheck(this, RegressionConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(RegressionConfig).call(this));\n\n        _this.mainRegression = true;\n        _this.groupRegression = true;\n        _this.confidence = {\n            level: 0.95,\n            criticalValue: function criticalValue(degreesOfFreedom, criticalProbability) {\n                return _statisticsUtils.StatisticsUtils.tValue(degreesOfFreedom, criticalProbability);\n            },\n            marginOfError: undefined //custom  margin Of Error function (x, points)\n        };\n\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n\n        return _this;\n    }\n\n    return RegressionConfig;\n}(_scatterplot.ScatterPlotConfig);\n\nvar Regression = exports.Regression = function (_ScatterPlot) {\n    _inherits(Regression, _ScatterPlot);\n\n    function Regression(placeholderSelector, data, config) {\n        _classCallCheck(this, Regression);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(Regression).call(this, placeholderSelector, data, new RegressionConfig(config)));\n    }\n\n    _createClass(Regression, [{\n        key: \"setConfig\",\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(Regression.prototype), \"setConfig\", this).call(this, new RegressionConfig(config));\n        }\n    }, {\n        key: \"initPlot\",\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(Regression.prototype), \"initPlot\", this).call(this);\n            this.initRegressionLines();\n        }\n    }, {\n        key: \"initRegressionLines\",\n        value: function initRegressionLines() {\n\n            var self = this;\n            var groupsAvailable = self.plot.groupingEnabled;\n\n            self.plot.regressions = [];\n\n            if (groupsAvailable && self.config.mainRegression) {\n                var regression = this.initRegression(this.plot.data, false);\n                self.plot.regressions.push(regression);\n            }\n\n            if (self.config.groupRegression) {\n                this.initGroupRegression();\n            }\n        }\n    }, {\n        key: \"initGroupRegression\",\n        value: function initGroupRegression() {\n            var _this3 = this;\n\n            var self = this;\n\n            self.plot.groupedData.forEach(function (group) {\n                var regression = _this3.initRegression(group.values, group.key);\n                self.plot.regressions.push(regression);\n            });\n        }\n    }, {\n        key: \"initRegression\",\n        value: function initRegression(values, groupVal) {\n            var self = this;\n\n            var points = values.map(function (d) {\n                return [parseFloat(self.plot.x.value(d)), parseFloat(self.plot.y.value(d))];\n            });\n\n            // points.sort((a,b) => a[0]-b[0]);\n\n            var linearRegression = _statisticsUtils.StatisticsUtils.linearRegression(points);\n            var linearRegressionLine = _statisticsUtils.StatisticsUtils.linearRegressionLine(linearRegression);\n\n            var extentX = d3.extent(points, function (d) {\n                return d[0];\n            });\n\n            var linePoints = [{\n                x: extentX[0],\n                y: linearRegressionLine(extentX[0])\n            }, {\n                x: extentX[1],\n                y: linearRegressionLine(extentX[1])\n            }];\n\n            var line = d3.line().curve(d3.curveBasis).x(function (d) {\n                return self.plot.x.scale(d.x);\n            }).y(function (d) {\n                return self.plot.y.scale(d.y);\n            });\n\n            var color = self.plot.color;\n\n            var defaultColor = \"black\";\n            if (_utils.Utils.isFunction(color)) {\n                if (values.length && groupVal !== false) {\n                    if (self.config.series) {\n                        color = self.plot.colorCategory(groupVal);\n                    } else {\n                        color = color(values[0]);\n                    }\n                } else {\n                    color = defaultColor;\n                }\n            } else if (!color && groupVal === false) {\n                color = defaultColor;\n            }\n\n            var confidence = this.computeConfidence(points, extentX, linearRegression, linearRegressionLine);\n            return {\n                group: groupVal || false,\n                line: line,\n                linePoints: linePoints,\n                color: color,\n                confidence: confidence\n            };\n        }\n    }, {\n        key: \"computeConfidence\",\n        value: function computeConfidence(points, extentX, linearRegression, linearRegressionLine) {\n            var self = this;\n            var slope = linearRegression.m;\n            var n = points.length;\n            var degreesOfFreedom = Math.max(0, n - 2);\n\n            var alpha = 1 - self.config.confidence.level;\n            var criticalProbability = 1 - alpha / 2;\n            var criticalValue = self.config.confidence.criticalValue(degreesOfFreedom, criticalProbability);\n\n            var xValues = points.map(function (d) {\n                return d[0];\n            });\n            var meanX = _statisticsUtils.StatisticsUtils.mean(xValues);\n            var xMySum = 0;\n            var xSum = 0;\n            var xPowSum = 0;\n            var ySum = 0;\n            var yPowSum = 0;\n            points.forEach(function (p) {\n                var x = p[0];\n                var y = p[1];\n\n                xMySum += x * y;\n                xSum += x;\n                ySum += y;\n                xPowSum += x * x;\n                yPowSum += y * y;\n            });\n            var a = linearRegression.m;\n            var b = linearRegression.b;\n\n            var Sa2 = n / (n + 2) * ((yPowSum - a * xMySum - b * ySum) / (n * xPowSum - xSum * xSum)); //Wariancja wspczynnika kierunkowego regresji liniowej a\n            var Sy2 = (yPowSum - a * xMySum - b * ySum) / (n * (n - 2)); //Sa2 //Mean y value variance\n\n            var errorFn = function errorFn(x) {\n                return Math.sqrt(Sy2 + Math.pow(x - meanX, 2) * Sa2);\n            }; //pierwiastek kwadratowy z wariancji dowolnego punktu prostej\n            var marginOfError = function marginOfError(x) {\n                return criticalValue * errorFn(x);\n            };\n\n            // console.log('n', n, 'degreesOfFreedom', degreesOfFreedom, 'criticalProbability',criticalProbability);\n            // var confidenceDown = x => linearRegressionLine(x) -  marginOfError(x);\n            // var confidenceUp = x => linearRegressionLine(x) +  marginOfError(x);\n\n            var computeConfidenceAreaPoint = function computeConfidenceAreaPoint(x) {\n                var linearRegression = linearRegressionLine(x);\n                var moe = marginOfError(x);\n                var confDown = linearRegression - moe;\n                var confUp = linearRegression + moe;\n                return {\n                    x: x,\n                    y0: confDown,\n                    y1: confUp\n                };\n            };\n\n            var centerX = (extentX[1] + extentX[0]) / 2;\n\n            // var confidenceAreaPoints = [extentX[0], centerX,  extentX[1]].map(computeConfidenceAreaPoint);\n            var confidenceAreaPoints = [extentX[0], centerX, extentX[1]].map(computeConfidenceAreaPoint);\n\n            var fitInPlot = function fitInPlot(y) {\n                return y;\n            };\n\n            var confidenceArea = d3.area().curve(d3.curveNatural).x(function (d) {\n                return self.plot.x.scale(d.x);\n            }).y0(function (d) {\n                return fitInPlot(self.plot.y.scale(d.y0));\n            }).y1(function (d) {\n                return fitInPlot(self.plot.y.scale(d.y1));\n            });\n\n            return {\n                area: confidenceArea,\n                points: confidenceAreaPoints\n            };\n        }\n    }, {\n        key: \"update\",\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(Regression.prototype), \"update\", this).call(this, newData);\n            this.updateRegressionLines();\n        }\n    }, {\n        key: \"updateRegressionLines\",\n        value: function updateRegressionLines() {\n            var self = this;\n            var regressionContainerClass = this.prefixClass(\"regression-container\");\n            var regressionContainerSelector = \"g.\" + regressionContainerClass;\n\n            var clipPathId = self.prefixClass(\"clip\");\n\n            var regressionContainer = self.svgG.selectOrInsert(regressionContainerSelector, \".\" + self.dotsContainerClass);\n            var regressionContainerClip = regressionContainer.selectOrAppend(\"clipPath\").attr(\"id\", clipPathId);\n\n            regressionContainerClip.selectOrAppend('rect').attr('width', self.plot.width).attr('height', self.plot.height).attr('x', 0).attr('y', 0);\n\n            regressionContainer.attr(\"clip-path\", function (d, i) {\n                return \"url(#\" + clipPathId + \")\";\n            });\n\n            var regressionClass = this.prefixClass(\"regression\");\n            var confidenceAreaClass = self.prefixClass(\"confidence\");\n            var regressionSelector = \"g.\" + regressionClass;\n            var regression = regressionContainer.selectAll(regressionSelector).data(self.plot.regressions, function (d, i) {\n                return d.group;\n            });\n\n            var regressionEnter = regression.enter().appendSelector(regressionSelector);\n            var regressionMerge = regressionEnter.merge(regression);\n            var lineClass = self.prefixClass(\"line\");\n            regressionEnter.append(\"path\").attr(\"class\", lineClass).attr(\"shape-rendering\", \"optimizeQuality\");\n\n            var line = regressionMerge.select(\"path.\" + lineClass).style(\"stroke\", function (r) {\n                return r.color;\n            });\n\n            var lineT = line;\n            if (self.transitionEnabled()) {\n                lineT = line.transition();\n            }\n\n            lineT.attr(\"d\", function (r) {\n                return r.line(r.linePoints);\n            });\n\n            regressionEnter.append(\"path\").attr(\"class\", confidenceAreaClass).attr(\"shape-rendering\", \"optimizeQuality\").style(\"opacity\", \"0.4\");\n\n            var area = regressionMerge.select(\"path.\" + confidenceAreaClass);\n\n            var areaT = area;\n            if (self.transitionEnabled()) {\n                areaT = area.transition();\n            }\n            areaT.attr(\"d\", function (r) {\n                return r.confidence.area(r.confidence.points);\n            });\n            areaT.style(\"fill\", function (r) {\n                return r.color;\n            });\n            regression.exit().remove();\n        }\n    }]);\n\n    return Regression;\n}(_scatterplot.ScatterPlot);\n\n},{\"./chart\":34,\"./scatterplot\":44,\"./statistics-utils\":46,\"./utils\":47}],43:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ScatterPlotMatrix = exports.ScatterPlotMatrixConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chartWithColorGroups = require(\"./chart-with-color-groups\");\n\nvar _scatterplot = require(\"./scatterplot\");\n\nvar _utils = require(\"./utils\");\n\nvar _legend = require(\"./legend\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ScatterPlotMatrixConfig = exports.ScatterPlotMatrixConfig = function (_ScatterPlotConfig) {\n    _inherits(ScatterPlotMatrixConfig, _ScatterPlotConfig);\n\n    //ticks number, (default: computed using cell size)\n    //show axis guides\n    //scatter plot cell padding\n\n    function ScatterPlotMatrixConfig(custom) {\n        _classCallCheck(this, ScatterPlotMatrixConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ScatterPlotMatrixConfig).call(this));\n\n        _this.svgClass = _this.cssClassPrefix + 'scatterplot-matrix';\n        _this.size = undefined;\n        _this.minCellSize = 50;\n        _this.maxCellSize = 1000;\n        _this.padding = 20;\n        _this.brush = true;\n        _this.guides = true;\n        _this.showTooltip = true;\n        _this.ticks = undefined;\n        _this.x = { // X axis config\n            orient: \"bottom\",\n            scale: \"linear\"\n        };\n        _this.y = { // Y axis config\n            orient: \"left\",\n            scale: \"linear\"\n        };\n        _this.groups = {\n            key: undefined, //object property name or array index with grouping variable\n            includeInPlot: false };\n        _this.variables = {\n            labels: [], //optional array of variable labels (for the diagonal of the plot).\n            keys: [], //optional array of variable keys\n            value: function value(d, variableKey) {\n                return d[variableKey];\n            } // variable value accessor\n        };\n\n        _utils.Utils.deepExtend(_this, custom);\n        return _this;\n    } //show tooltip on dot hover\n    //scatter plot cell size\n\n\n    return ScatterPlotMatrixConfig;\n}(_scatterplot.ScatterPlotConfig);\n\nvar ScatterPlotMatrix = exports.ScatterPlotMatrix = function (_ChartWithColorGroups) {\n    _inherits(ScatterPlotMatrix, _ChartWithColorGroups);\n\n    function ScatterPlotMatrix(placeholderSelector, data, config) {\n        _classCallCheck(this, ScatterPlotMatrix);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(ScatterPlotMatrix).call(this, placeholderSelector, data, new ScatterPlotMatrixConfig(config)));\n    }\n\n    _createClass(ScatterPlotMatrix, [{\n        key: \"setConfig\",\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(ScatterPlotMatrix.prototype), \"setConfig\", this).call(this, new ScatterPlotMatrixConfig(config));\n        }\n    }, {\n        key: \"initPlot\",\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(ScatterPlotMatrix.prototype), \"initPlot\", this).call(this);\n\n            var self = this;\n            var margin = this.plot.margin;\n            var conf = this.config;\n            this.plot.x = {};\n            this.plot.y = {};\n            this.plot.dot = {\n                color: null //color scale mapping function\n            };\n\n            this.setupVariables();\n\n            this.plot.size = conf.size;\n\n            var width = conf.width;\n            var availableWidth = _utils.Utils.availableWidth(this.config.width, this.getBaseContainer(), margin);\n            var availableHeight = _utils.Utils.availableHeight(this.config.height, this.getBaseContainer(), margin);\n            if (!width) {\n                if (!this.plot.size) {\n                    this.plot.size = Math.min(conf.maxCellSize, Math.max(conf.minCellSize, availableWidth / this.plot.variables.length));\n                }\n                width = margin.left + margin.right + this.plot.variables.length * this.plot.size;\n            }\n            if (!this.plot.size) {\n                this.plot.size = (width - (margin.left + margin.right)) / this.plot.variables.length;\n            }\n\n            var height = width;\n            if (!height) {\n                height = availableHeight;\n            }\n\n            this.plot.width = width - margin.left - margin.right;\n            this.plot.height = height - margin.top - margin.bottom;\n\n            this.plot.ticks = conf.ticks;\n\n            if (this.plot.ticks === undefined) {\n                this.plot.ticks = this.plot.size / 40;\n            }\n\n            this.setupX();\n            this.setupY();\n\n            return this;\n        }\n    }, {\n        key: \"setupVariables\",\n        value: function setupVariables() {\n            var variablesConf = this.config.variables;\n\n            var data = this.plot.groupedData;\n            var plot = this.plot;\n            plot.domainByVariable = {};\n            plot.variables = variablesConf.keys;\n            if (!plot.variables || !plot.variables.length) {\n\n                plot.variables = data.length ? _utils.Utils.inferVariables(data[0].values, this.config.groups.key, this.config.includeInPlot) : [];\n            }\n\n            plot.labels = [];\n            plot.labelByVariable = {};\n            plot.variables.forEach(function (variableKey, index) {\n                var min = d3.min(data, function (s) {\n                    return d3.min(s.values, function (d) {\n                        return variablesConf.value(d, variableKey);\n                    });\n                });\n                var max = d3.max(data, function (s) {\n                    return d3.max(s.values, function (d) {\n                        return variablesConf.value(d, variableKey);\n                    });\n                });\n                plot.domainByVariable[variableKey] = [min, max];\n                var label = variableKey;\n                if (variablesConf.labels && variablesConf.labels.length > index) {\n\n                    label = variablesConf.labels[index];\n                }\n                plot.labels.push(label);\n                plot.labelByVariable[variableKey] = label;\n            });\n\n            plot.subplots = [];\n        }\n    }, {\n        key: \"setupX\",\n        value: function setupX() {\n\n            var plot = this.plot;\n            var x = plot.x;\n            var conf = this.config;\n\n            x.value = conf.variables.value;\n            x.scale = _utils.Utils.createScale(conf.x.scale).range([conf.padding / 2, plot.size - conf.padding / 2]);\n            x.map = function (d, variable) {\n                return x.scale(x.value(d, variable));\n            };\n\n            x.axis = _utils.Utils.createAxis(conf.x.orient, x.scale).ticks(plot.ticks);\n            x.axis.tickSize(plot.size * plot.variables.length);\n        }\n    }, {\n        key: \"setupY\",\n        value: function setupY() {\n\n            var plot = this.plot;\n            var y = plot.y;\n            var conf = this.config;\n\n            y.value = conf.variables.value;\n            y.scale = _utils.Utils.createScale(conf.y.scale).range([plot.size - conf.padding / 2, conf.padding / 2]);\n\n            y.map = function (d, variable) {\n                return y.scale(y.value(d, variable));\n            };\n            y.axis = _utils.Utils.createAxis(conf.y.orient, y.scale).ticks(plot.ticks);\n            y.axis.tickSize(-plot.size * plot.variables.length);\n        }\n    }, {\n        key: \"update\",\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(ScatterPlotMatrix.prototype), \"update\", this).call(this, newData);\n\n            var self = this;\n            var n = self.plot.variables.length;\n            var conf = this.config;\n\n            var axisClass = self.prefixClass(\"axis\");\n            var axisXClass = axisClass + \"-x\";\n            var axisYClass = axisClass + \"-y\";\n\n            var xAxisSelector = \"g.\" + axisXClass + \".\" + axisClass;\n            var yAxisSelector = \"g.\" + axisYClass + \".\" + axisClass;\n\n            var noGuidesClass = self.prefixClass(\"no-guides\");\n            var xAxis = self.svgG.selectAll(xAxisSelector).data(self.plot.variables);\n\n            var xAxisMerge = xAxis.enter().appendSelector(xAxisSelector).classed(noGuidesClass, !conf.guides).merge(xAxis);\n\n            xAxisMerge.attr(\"transform\", function (d, i) {\n                return \"translate(\" + (n - i - 1) * self.plot.size + \",0)\";\n            }).each(function (d) {\n                self.plot.x.scale.domain(self.plot.domainByVariable[d]);\n                var axis = d3.select(this);\n                if (self.transitionEnabled()) {\n                    axis = axis.transition();\n                }\n                axis.call(self.plot.x.axis);\n            });\n\n            xAxis.exit().remove();\n\n            var yAxis = self.svgG.selectAll(yAxisSelector).data(self.plot.variables);\n            var yAxisMerge = yAxis.enter().appendSelector(yAxisSelector).merge(yAxis);\n            yAxisMerge.classed(noGuidesClass, !conf.guides).attr(\"transform\", function (d, i) {\n                return \"translate(0,\" + i * self.plot.size + \")\";\n            });\n            yAxisMerge.each(function (d) {\n                self.plot.y.scale.domain(self.plot.domainByVariable[d]);\n                var axis = d3.select(this);\n                if (self.transitionEnabled()) {\n                    axis = axis.transition();\n                }\n                axis.call(self.plot.y.axis);\n            });\n\n            yAxis.exit().remove();\n\n            var cellClass = self.prefixClass(\"cell\");\n            var cell = self.svgG.selectAll(\".\" + cellClass).data(self.utils.cross(self.plot.variables, self.plot.variables));\n\n            var cellEnter = cell.enter().appendSelector(\"g.\" + cellClass);\n            cellEnter.filter(function (d) {\n                return d.i === d.j;\n            }).append(\"text\");\n\n            var cellMerge = cellEnter.merge(cell);\n            cellMerge.attr(\"transform\", function (d) {\n                return \"translate(\" + (n - d.i - 1) * self.plot.size + \",\" + d.j * self.plot.size + \")\";\n            });\n\n            if (conf.brush) {\n                this.drawBrush(cellMerge);\n            }\n\n            cellMerge.each(plotSubplot);\n\n            //Labels\n            cellMerge.select(\"text\").attr(\"x\", conf.padding).attr(\"y\", conf.padding).attr(\"dy\", \".71em\").text(function (d) {\n                return self.plot.labelByVariable[d.x];\n            });\n\n            cell.exit().remove();\n\n            function plotSubplot(p) {\n                var plot = self.plot;\n                plot.subplots.push(p);\n                var cell = d3.select(this);\n\n                plot.x.scale.domain(plot.domainByVariable[p.x]);\n                plot.y.scale.domain(plot.domainByVariable[p.y]);\n\n                var frameClass = self.prefixClass(\"frame\");\n                cell.selectOrAppend(\"rect.\" + frameClass).attr(\"class\", frameClass).attr(\"x\", conf.padding / 2).attr(\"y\", conf.padding / 2).attr(\"width\", plot.size - conf.padding).attr(\"height\", plot.size - conf.padding);\n\n                p.update = function () {\n\n                    var subplot = this;\n                    var layerClass = self.prefixClass('layer');\n\n                    var layer = cell.selectAll(\"g.\" + layerClass).data(self.plot.groupedData);\n\n                    var layerMerge = layer.enter().appendSelector(\"g.\" + layerClass).merge(layer);\n\n                    var dots = layerMerge.selectAll(\"circle\").data(function (d) {\n                        return d.values;\n                    });\n\n                    var dotsMerge = dots.enter().append(\"circle\").merge(dots);\n\n                    var dotsT = dotsMerge;\n                    if (self.transitionEnabled()) {\n                        dotsT = dotsMerge.transition();\n                    }\n\n                    dotsT.attr(\"cx\", function (d) {\n                        return plot.x.map(d, subplot.x);\n                    }).attr(\"cy\", function (d) {\n                        return plot.y.map(d, subplot.y);\n                    }).attr(\"r\", self.config.dotRadius);\n\n                    if (plot.seriesColor) {\n                        layerMerge.style(\"fill\", plot.seriesColor);\n                    } else if (plot.color) {\n                        dotsMerge.style(\"fill\", plot.color);\n                    }\n\n                    if (plot.tooltip) {\n                        dotsMerge.on(\"mouseover\", function (d) {\n\n                            var html = \"(\" + plot.x.value(d, subplot.x) + \", \" + plot.y.value(d, subplot.y) + \")\";\n                            var group = self.config.groups ? self.config.groups.value.call(self.config, d) : null;\n                            if (group || group === 0) {\n                                group = plot.groupToLabel[group];\n                                html += \"<br/>\";\n                                var label = self.config.groups.label;\n                                if (label) {\n                                    html += label + \": \";\n                                }\n                                html += group;\n                            }\n                            self.showTooltip(html);\n                        }).on(\"mouseout\", function (d) {\n                            self.hideTooltip();\n                        });\n                    }\n\n                    dots.exit().remove();\n                    layer.exit().remove();\n                };\n                p.update();\n            }\n        }\n    }, {\n        key: \"drawBrush\",\n        value: function drawBrush(cell) {\n            var self = this;\n            var brush = d3.brush()\n            // .x(self.plot.x.scale)\n            // .y(self.plot.y.scale)\n            .on(\"start\", brushstart).on(\"brush\", brushmove).on(\"end\", brushend);\n\n            brush.extent([[0, 0], [self.plot.size, self.plot.size]]);\n            cell.selectOrAppend(\"g.brush-container\").call(brush);\n\n            self.clearBrush();\n\n            // Clear the previously-active brush, if any.\n            function brushstart(p) {\n                if (self.plot.brushCell !== this) {\n                    self.clearBrush();\n                    self.plot.x.scale.domain(self.plot.domainByVariable[p.x]);\n                    self.plot.y.scale.domain(self.plot.domainByVariable[p.y]);\n                    self.plot.brushCell = this;\n                    self.plot.brush = brush;\n                }\n            }\n\n            // Highlight the selected circles.\n            function brushmove(p) {\n                var s = d3.event.selection;\n                if (!s) return;\n                var e = s.map(function (_) {\n                    return [self.plot.x.scale.invert(_[0]), self.plot.y.scale.invert(_[1])];\n                });\n                // console.log(e);\n                self.svgG.selectAll(\"circle\").classed(\"hidden\", function (d) {\n                    var x = parseFloat(d[p.x]),\n                        y = parseFloat(d[p.y]);\n\n                    return e[0][0] > x || x > e[1][0] || e[1][1] > y || y > e[0][1];\n                });\n            }\n            // If the brush is empty, select all circles.\n            function brushend() {\n                if (!d3.event.selection) self.svgG.selectAll(\".hidden\").classed(\"hidden\", false);\n            }\n        }\n    }, {\n        key: \"clearBrush\",\n        value: function clearBrush() {\n            var self = this;\n            if (!self.plot.brushCell) {\n                return;\n            }\n\n            self.plot.brush.move(d3.select(self.plot.brushCell), null);\n            self.svgG.selectAll(\".hidden\").classed(\"hidden\", false);\n            self.plot.brushCell = null;\n        }\n    }]);\n\n    return ScatterPlotMatrix;\n}(_chartWithColorGroups.ChartWithColorGroups);\n\n},{\"./chart-with-color-groups\":33,\"./legend\":41,\"./scatterplot\":44,\"./utils\":47}],44:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ScatterPlot = exports.ScatterPlotConfig = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _chartWithColorGroups = require(\"./chart-with-color-groups\");\n\nvar _utils = require(\"./utils\");\n\nvar _legend = require(\"./legend\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ScatterPlotConfig = exports.ScatterPlotConfig = function (_ChartWithColorGroups) {\n    _inherits(ScatterPlotConfig, _ChartWithColorGroups);\n\n    //show axis guides\n\n    function ScatterPlotConfig(custom) {\n        _classCallCheck(this, ScatterPlotConfig);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ScatterPlotConfig).call(this));\n\n        _this.svgClass = _this.cssClassPrefix + 'scatterplot';\n        _this.guides = false;\n        _this.showTooltip = true;\n        _this.x = { // X axis config\n            title: '', // axis label\n            key: 0,\n            value: function value(d, key) {\n                return d[key];\n            }, // x value accessor\n            orient: \"bottom\",\n            scale: \"linear\",\n            domainMargin: 0.05\n        };\n        _this.y = { // Y axis config\n            title: '', // axis label,\n            key: 1,\n            value: function value(d, key) {\n                return d[key];\n            }, // y value accessor\n            orient: \"left\",\n            scale: \"linear\",\n            domainMargin: 0.05\n        };\n        _this.groups = {\n            key: 2\n        };\n        _this.dotRadius = 2;\n        _this.transition = true;\n\n\n        if (custom) {\n            _utils.Utils.deepExtend(_this, custom);\n        }\n\n        return _this;\n    } //show tooltip on dot hover\n\n    return ScatterPlotConfig;\n}(_chartWithColorGroups.ChartWithColorGroupsConfig);\n\nvar ScatterPlot = exports.ScatterPlot = function (_ChartWithColorGroups2) {\n    _inherits(ScatterPlot, _ChartWithColorGroups2);\n\n    function ScatterPlot(placeholderSelector, data, config) {\n        _classCallCheck(this, ScatterPlot);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(ScatterPlot).call(this, placeholderSelector, data, new ScatterPlotConfig(config)));\n    }\n\n    _createClass(ScatterPlot, [{\n        key: \"setConfig\",\n        value: function setConfig(config) {\n            return _get(Object.getPrototypeOf(ScatterPlot.prototype), \"setConfig\", this).call(this, new ScatterPlotConfig(config));\n        }\n    }, {\n        key: \"initPlot\",\n        value: function initPlot() {\n            _get(Object.getPrototypeOf(ScatterPlot.prototype), \"initPlot\", this).call(this);\n            var self = this;\n\n            var conf = this.config;\n\n            this.plot.x = {};\n            this.plot.y = {};\n\n            this.computePlotSize();\n            this.setupX();\n            this.setupY();\n\n            return this;\n        }\n    }, {\n        key: \"setupX\",\n        value: function setupX() {\n\n            var plot = this.plot;\n            var x = plot.x;\n            var conf = this.config.x;\n\n            /* *\r\n             * value accessor - returns the value to encode for a given data object.\r\n             * scale - maps value to a visual display encoding, such as a pixel position.\r\n             * map function - maps from data value to display value\r\n             * axis - sets up axis\r\n             **/\n            x.value = function (d) {\n                return conf.value(d, conf.key);\n            };\n\n            x.scale = _utils.Utils.createScale(conf.scale).range([0, plot.width]);\n            x.map = function (d) {\n                return x.scale(x.value(d));\n            };\n\n            x.axis = _utils.Utils.createAxis(conf.orient, x.scale);\n\n            var data = this.plot.groupedData;\n\n            var domain = [parseFloat(d3.min(data, function (s) {\n                return d3.min(s.values, plot.x.value);\n            })), parseFloat(d3.max(data, function (s) {\n                return d3.max(s.values, plot.x.value);\n            }))];\n            var margin = (domain[1] - domain[0]) * conf.domainMargin;\n            domain[0] -= margin;\n            domain[1] += margin;\n            plot.x.scale.domain(domain);\n            if (this.config.guides) {\n                x.axis.tickSize(-plot.height);\n            }\n        }\n    }, {\n        key: \"setupY\",\n        value: function setupY() {\n\n            var plot = this.plot;\n            var y = plot.y;\n            var conf = this.config.y;\n\n            /*\r\n             * value accessor - returns the value to encode for a given data object.\r\n             * scale - maps value to a visual display encoding, such as a pixel position.\r\n             * map function - maps from data value to display value\r\n             * axis - sets up axis\r\n             */\n            y.value = function (d) {\n                return conf.value(d, conf.key);\n            };\n\n            y.scale = _utils.Utils.createScale(conf.scale).range([plot.height, 0]);\n\n            y.map = function (d) {\n                return y.scale(y.value(d));\n            };\n\n            y.axis = _utils.Utils.createAxis(conf.orient, y.scale);\n\n            if (this.config.guides) {\n                y.axis.tickSize(-plot.width);\n            }\n\n            var data = this.plot.groupedData;\n\n            var domain = [parseFloat(d3.min(data, function (s) {\n                return d3.min(s.values, plot.y.value);\n            })), parseFloat(d3.max(data, function (s) {\n                return d3.max(s.values, plot.y.value);\n            }))];\n            var margin = (domain[1] - domain[0]) * conf.domainMargin;\n            domain[0] -= margin;\n            domain[1] += margin;\n            plot.y.scale.domain(domain);\n            // plot.y.scale.domain([d3.min(data, plot.y.value)-1, d3.max(data, plot.y.value)+1]);\n        }\n    }, {\n        key: \"drawAxisX\",\n        value: function drawAxisX() {\n            var self = this;\n            var plot = self.plot;\n            var axisConf = this.config.x;\n            var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-x') + \".\" + self.prefixClass('axis') + (self.config.guides ? '' : '.' + self.prefixClass('no-guides'))).attr(\"transform\", \"translate(0,\" + plot.height + \")\");\n\n            var axisT = axis;\n            if (self.transitionEnabled()) {\n                axisT = axis.transition().ease(d3.easeSinInOut);\n            }\n\n            axisT.call(plot.x.axis);\n\n            axis.selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + plot.width / 2 + \",\" + plot.margin.bottom + \")\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"-1em\").style(\"text-anchor\", \"middle\").text(axisConf.title);\n        }\n    }, {\n        key: \"drawAxisY\",\n        value: function drawAxisY() {\n            var self = this;\n            var plot = self.plot;\n            var axisConf = this.config.y;\n            var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-y') + \".\" + self.prefixClass('axis') + (self.config.guides ? '' : '.' + self.prefixClass('no-guides')));\n\n            var axisT = axis;\n            if (self.transitionEnabled()) {\n                axisT = axis.transition().ease(d3.easeSinInOut);\n            }\n\n            axisT.call(plot.y.axis);\n\n            axis.selectOrAppend(\"text.\" + self.prefixClass('label')).attr(\"transform\", \"translate(\" + -plot.margin.left + \",\" + plot.height / 2 + \")rotate(-90)\") // text is drawn off the screen top left, move down and out and rotate\n            .attr(\"dy\", \"1em\").style(\"text-anchor\", \"middle\").text(axisConf.title);\n        }\n    }, {\n        key: \"update\",\n        value: function update(newData) {\n            _get(Object.getPrototypeOf(ScatterPlot.prototype), \"update\", this).call(this, newData);\n            this.drawAxisX();\n            this.drawAxisY();\n\n            this.updateDots();\n        }\n    }, {\n        key: \"updateDots\",\n        value: function updateDots() {\n            var self = this;\n            var plot = self.plot;\n            var data = plot.data;\n            var layerClass = self.prefixClass('layer');\n            var dotClass = self.prefixClass('dot');\n            self.dotsContainerClass = self.prefixClass('dots-container');\n\n            var dotsContainer = self.svgG.selectOrAppend(\"g.\" + self.dotsContainerClass);\n\n            var layer = dotsContainer.selectAll(\"g.\" + layerClass).data(plot.groupedData);\n\n            var layerEnter = layer.enter().appendSelector(\"g.\" + layerClass);\n\n            var layerMerge = layerEnter.merge(layer);\n\n            var dots = layerMerge.selectAll('.' + dotClass).data(function (d) {\n                return d.values;\n            });\n\n            var dotsEnter = dots.enter().append(\"circle\").attr(\"class\", dotClass);\n\n            var dotsMerge = dotsEnter.merge(dots);\n\n            var dotsT = dotsMerge;\n            if (self.transitionEnabled()) {\n                dotsT = dotsMerge.transition();\n            }\n\n            dotsT.attr(\"r\", self.config.dotRadius).attr(\"cx\", plot.x.map).attr(\"cy\", plot.y.map);\n\n            if (plot.tooltip) {\n                dotsMerge.on(\"mouseover\", function (d) {\n                    var html = \"(\" + plot.x.value(d) + \", \" + plot.y.value(d) + \")\";\n                    var group = self.config.groups ? self.config.groups.value.call(self.config, d) : null;\n                    if (group || group === 0) {\n                        group = plot.groupToLabel[group];\n                        html += \"<br/>\";\n                        var label = self.config.groups.label;\n                        if (label) {\n                            html += label + \": \";\n                        }\n                        html += group;\n                    }\n                    self.showTooltip(html);\n                }).on(\"mouseout\", function (d) {\n                    self.hideTooltip();\n                });\n            }\n\n            if (plot.seriesColor) {\n                layerMerge.style(\"fill\", plot.seriesColor);\n            } else if (plot.color) {\n                dotsMerge.style(\"fill\", plot.color);\n            }\n\n            dots.exit().remove();\n            layer.exit().remove();\n        }\n    }]);\n\n    return ScatterPlot;\n}(_chartWithColorGroups.ChartWithColorGroups);\n\n},{\"./chart-with-color-groups\":33,\"./legend\":41,\"./utils\":47}],45:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.tdistr = tdistr;\n/*\n * https://gist.github.com/benrasmusen/1261977\n * NAME\n * \n * statistics-distributions.js - JavaScript library for calculating\n *   critical values and upper probabilities of common statistical\n *   distributions\n * \n * SYNOPSIS\n * \n * \n *   // Chi-squared-crit (2 degrees of freedom, 95th percentile = 0.05 level\n *   chisqrdistr(2, .05)\n *   \n *   // u-crit (95th percentile = 0.05 level)\n *   udistr(.05);\n *   \n *   // t-crit (1 degree of freedom, 99.5th percentile = 0.005 level) \n *   tdistr(1,.005);\n *   \n *   // F-crit (1 degree of freedom in numerator, 3 degrees of freedom \n *   //         in denominator, 99th percentile = 0.01 level)\n *   fdistr(1,3,.01);\n *   \n *   // upper probability of the u distribution (u = -0.85): Q(u) = 1-G(u)\n *   uprob(-0.85);\n *   \n *   // upper probability of the chi-square distribution\n *   // (3 degrees of freedom, chi-squared = 6.25): Q = 1-G\n *   chisqrprob(3,6.25);\n *   \n *   // upper probability of the t distribution\n *   // (3 degrees of freedom, t = 6.251): Q = 1-G\n *   tprob(3,6.251);\n *   \n *   // upper probability of the F distribution\n *   // (3 degrees of freedom in numerator, 5 degrees of freedom in\n *   //  denominator, F = 6.25): Q = 1-G\n *   fprob(3,5,.625);\n * \n * \n *  DESCRIPTION\n * \n * This library calculates percentage points (5 significant digits) of the u\n * (standard normal) distribution, the student's t distribution, the\n * chi-square distribution and the F distribution. It can also calculate the\n * upper probability (5 significant digits) of the u (standard normal), the\n * chi-square, the t and the F distribution.\n * \n * These critical values are needed to perform statistical tests, like the u\n * test, the t test, the F test and the chi-squared test, and to calculate\n * confidence intervals.\n * \n * If you are interested in more precise algorithms you could look at:\n *   StatLib: http://lib.stat.cmu.edu/apstat/ ; \n *   Applied Statistics Algorithms by Griffiths, P. and Hill, I.D.\n *   , Ellis Horwood: Chichester (1985)\n * \n * BUGS \n * \n * This port was produced from the Perl module Statistics::Distributions\n * that has had no bug reports in several years.  If you find a bug then\n * please double-check that JavaScript does not thing the numbers you are\n * passing in are strings.  (You can subtract 0 from them as you pass them\n * in so that \"5\" is properly understood to be 5.)  If you have passed in a\n * number then please contact the author\n * \n * AUTHOR\n * \n * Ben Tilly <btilly@gmail.com>\n * \n * Originl Perl version by Michael Kospach <mike.perl@gmx.at>\n * \n * Nice formating, simplification and bug repair by Matthias Trautner Kromann\n * <mtk@id.cbs.dk>\n * \n * COPYRIGHT \n * \n * Copyright 2008 Ben Tilly.\n * \n * This library is free software; you can redistribute it and/or modify it\n * under the same terms as Perl itself.  This means under either the Perl\n * Artistic License or the GPL v1 or later.\n */\n\nvar SIGNIFICANT = 5; // number of significant digits to be returned\n\nfunction chisqrdistr($n, $p) {\n\tif ($n <= 0 || Math.abs($n) - Math.abs(integer($n)) != 0) {\n\t\tthrow \"Invalid n: $n\\n\"; /* degree of freedom */\n\t}\n\tif ($p <= 0 || $p > 1) {\n\t\tthrow \"Invalid p: $p\\n\";\n\t}\n\treturn precision_string(_subchisqr($n - 0, $p - 0));\n}\n\nfunction udistr($p) {\n\tif ($p > 1 || $p <= 0) {\n\t\tthrow \"Invalid p: $p\\n\";\n\t}\n\treturn precision_string(_subu($p - 0));\n}\n\nfunction tdistr($n, $p) {\n\tif ($n <= 0 || Math.abs($n) - Math.abs(integer($n)) != 0) {\n\t\tthrow \"Invalid n: $n\\n\";\n\t}\n\tif ($p <= 0 || $p >= 1) {\n\t\tthrow \"Invalid p: $p\\n\";\n\t}\n\treturn precision_string(_subt($n - 0, $p - 0));\n}\n\nfunction fdistr($n, $m, $p) {\n\tif ($n <= 0 || Math.abs($n) - Math.abs(integer($n)) != 0) {\n\t\tthrow \"Invalid n: $n\\n\"; /* first degree of freedom */\n\t}\n\tif ($m <= 0 || Math.abs($m) - Math.abs(integer($m)) != 0) {\n\t\tthrow \"Invalid m: $m\\n\"; /* second degree of freedom */\n\t}\n\tif ($p <= 0 || $p > 1) {\n\t\tthrow \"Invalid p: $p\\n\";\n\t}\n\treturn precision_string(_subf($n - 0, $m - 0, $p - 0));\n}\n\nfunction uprob($x) {\n\treturn precision_string(_subuprob($x - 0));\n}\n\nfunction chisqrprob($n, $x) {\n\tif ($n <= 0 || Math.abs($n) - Math.abs(integer($n)) != 0) {\n\t\tthrow \"Invalid n: $n\\n\"; /* degree of freedom */\n\t}\n\treturn precision_string(_subchisqrprob($n - 0, $x - 0));\n}\n\nfunction tprob($n, $x) {\n\tif ($n <= 0 || Math.abs($n) - Math.abs(integer($n)) != 0) {\n\t\tthrow \"Invalid n: $n\\n\"; /* degree of freedom */\n\t}\n\treturn precision_string(_subtprob($n - 0, $x - 0));\n}\n\nfunction fprob($n, $m, $x) {\n\tif ($n <= 0 || Math.abs($n) - Math.abs(integer($n)) != 0) {\n\t\tthrow \"Invalid n: $n\\n\"; /* first degree of freedom */\n\t}\n\tif ($m <= 0 || Math.abs($m) - Math.abs(integer($m)) != 0) {\n\t\tthrow \"Invalid m: $m\\n\"; /* second degree of freedom */\n\t}\n\treturn precision_string(_subfprob($n - 0, $m - 0, $x - 0));\n}\n\nfunction _subfprob($n, $m, $x) {\n\tvar $p;\n\n\tif ($x <= 0) {\n\t\t$p = 1;\n\t} else if ($m % 2 == 0) {\n\t\tvar $z = $m / ($m + $n * $x);\n\t\tvar $a = 1;\n\t\tfor (var $i = $m - 2; $i >= 2; $i -= 2) {\n\t\t\t$a = 1 + ($n + $i - 2) / $i * $z * $a;\n\t\t}\n\t\t$p = 1 - Math.pow(1 - $z, $n / 2 * $a);\n\t} else if ($n % 2 == 0) {\n\t\tvar $z = $n * $x / ($m + $n * $x);\n\t\tvar $a = 1;\n\t\tfor (var $i = $n - 2; $i >= 2; $i -= 2) {\n\t\t\t$a = 1 + ($m + $i - 2) / $i * $z * $a;\n\t\t}\n\t\t$p = Math.pow(1 - $z, $m / 2) * $a;\n\t} else {\n\t\tvar $y = Math.atan2(Math.sqrt($n * $x / $m), 1);\n\t\tvar $z = Math.pow(Math.sin($y), 2);\n\t\tvar $a = $n == 1 ? 0 : 1;\n\t\tfor (var $i = $n - 2; $i >= 3; $i -= 2) {\n\t\t\t$a = 1 + ($m + $i - 2) / $i * $z * $a;\n\t\t}\n\t\tvar $b = Math.PI;\n\t\tfor (var $i = 2; $i <= $m - 1; $i += 2) {\n\t\t\t$b *= ($i - 1) / $i;\n\t\t}\n\t\tvar $p1 = 2 / $b * Math.sin($y) * Math.pow(Math.cos($y), $m) * $a;\n\n\t\t$z = Math.pow(Math.cos($y), 2);\n\t\t$a = $m == 1 ? 0 : 1;\n\t\tfor (var $i = $m - 2; $i >= 3; $i -= 2) {\n\t\t\t$a = 1 + ($i - 1) / $i * $z * $a;\n\t\t}\n\t\t$p = max(0, $p1 + 1 - 2 * $y / Math.PI - 2 / Math.PI * Math.sin($y) * Math.cos($y) * $a);\n\t}\n\treturn $p;\n}\n\nfunction _subchisqrprob($n, $x) {\n\tvar $p;\n\n\tif ($x <= 0) {\n\t\t$p = 1;\n\t} else if ($n > 100) {\n\t\t$p = _subuprob((Math.pow($x / $n, 1 / 3) - (1 - 2 / 9 / $n)) / Math.sqrt(2 / 9 / $n));\n\t} else if ($x > 400) {\n\t\t$p = 0;\n\t} else {\n\t\tvar $a;\n\t\tvar $i;\n\t\tvar $i1;\n\t\tif ($n % 2 != 0) {\n\t\t\t$p = 2 * _subuprob(Math.sqrt($x));\n\t\t\t$a = Math.sqrt(2 / Math.PI) * Math.exp(-$x / 2) / Math.sqrt($x);\n\t\t\t$i1 = 1;\n\t\t} else {\n\t\t\t$p = $a = Math.exp(-$x / 2);\n\t\t\t$i1 = 2;\n\t\t}\n\n\t\tfor ($i = $i1; $i <= $n - 2; $i += 2) {\n\t\t\t$a *= $x / $i;\n\t\t\t$p += $a;\n\t\t}\n\t}\n\treturn $p;\n}\n\nfunction _subu($p) {\n\tvar $y = -Math.log(4 * $p * (1 - $p));\n\tvar $x = Math.sqrt($y * (1.570796288 + $y * (.03706987906 + $y * (-.8364353589E-3 + $y * (-.2250947176E-3 + $y * (.6841218299E-5 + $y * (0.5824238515E-5 + $y * (-.104527497E-5 + $y * (.8360937017E-7 + $y * (-.3231081277E-8 + $y * (.3657763036E-10 + $y * .6936233982E-12)))))))))));\n\tif ($p > .5) $x = -$x;\n\treturn $x;\n}\n\nfunction _subuprob($x) {\n\tvar $p = 0; /* if ($absx > 100) */\n\tvar $absx = Math.abs($x);\n\n\tif ($absx < 1.9) {\n\t\t$p = Math.pow(1 + $absx * (.049867347 + $absx * (.0211410061 + $absx * (.0032776263 + $absx * (.0000380036 + $absx * (.0000488906 + $absx * .000005383))))), -16) / 2;\n\t} else if ($absx <= 100) {\n\t\tfor (var $i = 18; $i >= 1; $i--) {\n\t\t\t$p = $i / ($absx + $p);\n\t\t}\n\t\t$p = Math.exp(-.5 * $absx * $absx) / Math.sqrt(2 * Math.PI) / ($absx + $p);\n\t}\n\n\tif ($x < 0) $p = 1 - $p;\n\treturn $p;\n}\n\nfunction _subt($n, $p) {\n\n\tif ($p >= 1 || $p <= 0) {\n\t\tthrow \"Invalid p: $p\\n\";\n\t}\n\n\tif ($p == 0.5) {\n\t\treturn 0;\n\t} else if ($p < 0.5) {\n\t\treturn -_subt($n, 1 - $p);\n\t}\n\n\tvar $u = _subu($p);\n\tvar $u2 = Math.pow($u, 2);\n\n\tvar $a = ($u2 + 1) / 4;\n\tvar $b = ((5 * $u2 + 16) * $u2 + 3) / 96;\n\tvar $c = (((3 * $u2 + 19) * $u2 + 17) * $u2 - 15) / 384;\n\tvar $d = ((((79 * $u2 + 776) * $u2 + 1482) * $u2 - 1920) * $u2 - 945) / 92160;\n\tvar $e = (((((27 * $u2 + 339) * $u2 + 930) * $u2 - 1782) * $u2 - 765) * $u2 + 17955) / 368640;\n\n\tvar $x = $u * (1 + ($a + ($b + ($c + ($d + $e / $n) / $n) / $n) / $n) / $n);\n\n\tif ($n <= Math.pow(log10($p), 2) + 3) {\n\t\tvar $round;\n\t\tdo {\n\t\t\tvar $p1 = _subtprob($n, $x);\n\t\t\tvar $n1 = $n + 1;\n\t\t\tvar $delta = ($p1 - $p) / Math.exp(($n1 * Math.log($n1 / ($n + $x * $x)) + Math.log($n / $n1 / 2 / Math.PI) - 1 + (1 / $n1 - 1 / $n) / 6) / 2);\n\t\t\t$x += $delta;\n\t\t\t$round = round_to_precision($delta, Math.abs(integer(log10(Math.abs($x)) - 4)));\n\t\t} while ($x && $round != 0);\n\t}\n\treturn $x;\n}\n\nfunction _subtprob($n, $x) {\n\n\tvar $a;\n\tvar $b;\n\tvar $w = Math.atan2($x / Math.sqrt($n), 1);\n\tvar $z = Math.pow(Math.cos($w), 2);\n\tvar $y = 1;\n\n\tfor (var $i = $n - 2; $i >= 2; $i -= 2) {\n\t\t$y = 1 + ($i - 1) / $i * $z * $y;\n\t}\n\n\tif ($n % 2 == 0) {\n\t\t$a = Math.sin($w) / 2;\n\t\t$b = .5;\n\t} else {\n\t\t$a = $n == 1 ? 0 : Math.sin($w) * Math.cos($w) / Math.PI;\n\t\t$b = .5 + $w / Math.PI;\n\t}\n\treturn max(0, 1 - $b - $a * $y);\n}\n\nfunction _subf($n, $m, $p) {\n\tvar $x;\n\n\tif ($p >= 1 || $p <= 0) {\n\t\tthrow \"Invalid p: $p\\n\";\n\t}\n\n\tif ($p == 1) {\n\t\t$x = 0;\n\t} else if ($m == 1) {\n\t\t$x = 1 / Math.pow(_subt($n, 0.5 - $p / 2), 2);\n\t} else if ($n == 1) {\n\t\t$x = Math.pow(_subt($m, $p / 2), 2);\n\t} else if ($m == 2) {\n\t\tvar $u = _subchisqr($m, 1 - $p);\n\t\tvar $a = $m - 2;\n\t\t$x = 1 / ($u / $m * (1 + (($u - $a) / 2 + (((4 * $u - 11 * $a) * $u + $a * (7 * $m - 10)) / 24 + (((2 * $u - 10 * $a) * $u + $a * (17 * $m - 26)) * $u - $a * $a * (9 * $m - 6)) / 48 / $n) / $n) / $n));\n\t} else if ($n > $m) {\n\t\t$x = 1 / _subf2($m, $n, 1 - $p);\n\t} else {\n\t\t$x = _subf2($n, $m, $p);\n\t}\n\treturn $x;\n}\n\nfunction _subf2($n, $m, $p) {\n\tvar $u = _subchisqr($n, $p);\n\tvar $n2 = $n - 2;\n\tvar $x = $u / $n * (1 + (($u - $n2) / 2 + (((4 * $u - 11 * $n2) * $u + $n2 * (7 * $n - 10)) / 24 + (((2 * $u - 10 * $n2) * $u + $n2 * (17 * $n - 26)) * $u - $n2 * $n2 * (9 * $n - 6)) / 48 / $m) / $m) / $m);\n\tvar $delta;\n\tdo {\n\t\tvar $z = Math.exp((($n + $m) * Math.log(($n + $m) / ($n * $x + $m)) + ($n - 2) * Math.log($x) + Math.log($n * $m / ($n + $m)) - Math.log(4 * Math.PI) - (1 / $n + 1 / $m - 1 / ($n + $m)) / 6) / 2);\n\t\t$delta = (_subfprob($n, $m, $x) - $p) / $z;\n\t\t$x += $delta;\n\t} while (Math.abs($delta) > 3e-4);\n\treturn $x;\n}\n\nfunction _subchisqr($n, $p) {\n\tvar $x;\n\n\tif ($p > 1 || $p <= 0) {\n\t\tthrow \"Invalid p: $p\\n\";\n\t} else if ($p == 1) {\n\t\t$x = 0;\n\t} else if ($n == 1) {\n\t\t$x = Math.pow(_subu($p / 2), 2);\n\t} else if ($n == 2) {\n\t\t$x = -2 * Math.log($p);\n\t} else {\n\t\tvar $u = _subu($p);\n\t\tvar $u2 = $u * $u;\n\n\t\t$x = max(0, $n + Math.sqrt(2 * $n) * $u + 2 / 3 * ($u2 - 1) + $u * ($u2 - 7) / 9 / Math.sqrt(2 * $n) - 2 / 405 / $n * ($u2 * (3 * $u2 + 7) - 16));\n\n\t\tif ($n <= 100) {\n\t\t\tvar $x0;\n\t\t\tvar $p1;\n\t\t\tvar $z;\n\t\t\tdo {\n\t\t\t\t$x0 = $x;\n\t\t\t\tif ($x < 0) {\n\t\t\t\t\t$p1 = 1;\n\t\t\t\t} else if ($n > 100) {\n\t\t\t\t\t$p1 = _subuprob((Math.pow($x / $n, 1 / 3) - (1 - 2 / 9 / $n)) / Math.sqrt(2 / 9 / $n));\n\t\t\t\t} else if ($x > 400) {\n\t\t\t\t\t$p1 = 0;\n\t\t\t\t} else {\n\t\t\t\t\tvar $i0;\n\t\t\t\t\tvar $a;\n\t\t\t\t\tif ($n % 2 != 0) {\n\t\t\t\t\t\t$p1 = 2 * _subuprob(Math.sqrt($x));\n\t\t\t\t\t\t$a = Math.sqrt(2 / Math.PI) * Math.exp(-$x / 2) / Math.sqrt($x);\n\t\t\t\t\t\t$i0 = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$p1 = $a = Math.exp(-$x / 2);\n\t\t\t\t\t\t$i0 = 2;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var $i = $i0; $i <= $n - 2; $i += 2) {\n\t\t\t\t\t\t$a *= $x / $i;\n\t\t\t\t\t\t$p1 += $a;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$z = Math.exp((($n - 1) * Math.log($x / $n) - Math.log(4 * Math.PI * $x) + $n - $x - 1 / $n / 6) / 2);\n\t\t\t\t$x += ($p1 - $p) / $z;\n\t\t\t\t$x = round_to_precision($x, 5);\n\t\t\t} while ($n < 31 && Math.abs($x0 - $x) > 1e-4);\n\t\t}\n\t}\n\treturn $x;\n}\n\nfunction log10($n) {\n\treturn Math.log($n) / Math.log(10);\n}\n\nfunction max() {\n\tvar $max = arguments[0];\n\tfor (var $i = 0; i < arguments.length; i++) {\n\t\tif ($max < arguments[$i]) $max = arguments[$i];\n\t}\n\treturn $max;\n}\n\nfunction min() {\n\tvar $min = arguments[0];\n\tfor (var $i = 0; i < arguments.length; i++) {\n\t\tif ($min > arguments[$i]) $min = arguments[$i];\n\t}\n\treturn $min;\n}\n\nfunction precision($x) {\n\treturn Math.abs(integer(log10(Math.abs($x)) - SIGNIFICANT));\n}\n\nfunction precision_string($x) {\n\tif ($x) {\n\t\treturn round_to_precision($x, precision($x));\n\t} else {\n\t\treturn \"0\";\n\t}\n}\n\nfunction round_to_precision($x, $p) {\n\t$x = $x * Math.pow(10, $p);\n\t$x = Math.round($x);\n\treturn $x / Math.pow(10, $p);\n}\n\nfunction integer($i) {\n\tif ($i > 0) return Math.floor($i);else return Math.ceil($i);\n}\n\n},{}],46:[function(require,module,exports){\n'use strict';\n\nvar _statisticsDistributions = require('./statistics-distributions');\n\nvar su = module.exports.StatisticsUtils = {};\nsu.sampleCorrelation = require('../bower_components/simple-statistics/src/sample_correlation');\nsu.linearRegression = require('../bower_components/simple-statistics/src/linear_regression');\nsu.linearRegressionLine = require('../bower_components/simple-statistics/src/linear_regression_line');\nsu.errorFunction = require('../bower_components/simple-statistics/src/error_function');\nsu.standardDeviation = require('../bower_components/simple-statistics/src/standard_deviation');\nsu.sampleStandardDeviation = require('../bower_components/simple-statistics/src/sample_standard_deviation');\nsu.variance = require('../bower_components/simple-statistics/src/variance');\nsu.mean = require('../bower_components/simple-statistics/src/mean');\nsu.zScore = require('../bower_components/simple-statistics/src/z_score');\nsu.standardError = function (arr) {\n    return Math.sqrt(su.variance(arr) / (arr.length - 1));\n};\nsu.quantile = require('../bower_components/simple-statistics/src/quantile');\n\nsu.tValue = function (degreesOfFreedom, criticalProbability) {\n    //as in http://stattrek.com/online-calculator/t-distribution.aspx\n    return (0, _statisticsDistributions.tdistr)(degreesOfFreedom, criticalProbability);\n};\n\n},{\"../bower_components/simple-statistics/src/error_function\":5,\"../bower_components/simple-statistics/src/linear_regression\":6,\"../bower_components/simple-statistics/src/linear_regression_line\":7,\"../bower_components/simple-statistics/src/mean\":8,\"../bower_components/simple-statistics/src/quantile\":9,\"../bower_components/simple-statistics/src/sample_correlation\":12,\"../bower_components/simple-statistics/src/sample_standard_deviation\":14,\"../bower_components/simple-statistics/src/standard_deviation\":16,\"../bower_components/simple-statistics/src/variance\":19,\"../bower_components/simple-statistics/src/z_score\":20,\"./statistics-distributions\":45}],47:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Utils = exports.Utils = function () {\n    function Utils() {\n        _classCallCheck(this, Utils);\n    }\n\n    _createClass(Utils, null, [{\n        key: 'deepExtend',\n\n        // usage example deepExtend({}, objA, objB); => should work similar to $.extend(true, {}, objA, objB);\n        value: function deepExtend(out) {\n\n            var utils = this;\n            var emptyOut = {};\n\n            if (!out && arguments.length > 1 && Array.isArray(arguments[1])) {\n                out = [];\n            }\n            out = out || {};\n\n            for (var i = 1; i < arguments.length; i++) {\n                var source = arguments[i];\n                if (!source) continue;\n\n                for (var key in source) {\n                    if (!source.hasOwnProperty(key)) {\n                        continue;\n                    }\n                    var isArray = Array.isArray(out[key]);\n                    var isObject = utils.isObject(out[key]);\n                    var srcObj = utils.isObject(source[key]);\n\n                    if (isObject && !isArray && srcObj) {\n                        utils.deepExtend(out[key], source[key]);\n                    } else {\n                        out[key] = source[key];\n                    }\n                }\n            }\n\n            return out;\n        }\n    }, {\n        key: 'mergeDeep',\n        value: function mergeDeep(target, source) {\n            var output = Object.assign({}, target);\n            if (Utils.isObjectNotArray(target) && Utils.isObjectNotArray(source)) {\n                Object.keys(source).forEach(function (key) {\n                    if (Utils.isObjectNotArray(source[key])) {\n                        if (!(key in target)) Object.assign(output, _defineProperty({}, key, source[key]));else output[key] = Utils.mergeDeep(target[key], source[key]);\n                    } else {\n                        Object.assign(output, _defineProperty({}, key, source[key]));\n                    }\n                });\n            }\n            return output;\n        }\n    }, {\n        key: 'cross',\n        value: function cross(a, b) {\n            var c = [],\n                n = a.length,\n                m = b.length,\n                i,\n                j;\n            for (i = -1; ++i < n;) {\n                for (j = -1; ++j < m;) {\n                    c.push({ x: a[i], i: i, y: b[j], j: j });\n                }\n            }return c;\n        }\n    }, {\n        key: 'inferVariables',\n        value: function inferVariables(data, groupKey, includeGroup) {\n            var res = [];\n            if (!data) {\n                return res;\n            }\n\n            if (data.length) {\n                var d = data[0];\n                if (d instanceof Array) {\n                    res = d.map(function (v, i) {\n                        return i;\n                    });\n                } else if ((typeof d === 'undefined' ? 'undefined' : _typeof(d)) === 'object') {\n\n                    for (var prop in d) {\n                        if (!d.hasOwnProperty(prop)) continue;\n\n                        res.push(prop);\n                    }\n                }\n            }\n            if (groupKey !== null && groupKey !== undefined && !includeGroup) {\n                var index = res.indexOf(groupKey);\n                if (index > -1) {\n                    res.splice(index, 1);\n                }\n            }\n            return res;\n        }\n    }, {\n        key: 'isObjectNotArray',\n        value: function isObjectNotArray(item) {\n            return item && (typeof item === 'undefined' ? 'undefined' : _typeof(item)) === 'object' && !Array.isArray(item) && item !== null;\n        }\n    }, {\n        key: 'isObject',\n        value: function isObject(a) {\n            return a !== null && (typeof a === 'undefined' ? 'undefined' : _typeof(a)) === 'object';\n        }\n    }, {\n        key: 'isNumber',\n        value: function isNumber(a) {\n            return !isNaN(a) && typeof a === 'number';\n        }\n    }, {\n        key: 'isFunction',\n        value: function isFunction(a) {\n            return typeof a === 'function';\n        }\n    }, {\n        key: 'isDate',\n        value: function isDate(a) {\n            return Object.prototype.toString.call(a) === '[object Date]';\n        }\n    }, {\n        key: 'isString',\n        value: function isString(a) {\n            return typeof a === 'string' || a instanceof String;\n        }\n    }, {\n        key: 'insertOrAppendSelector',\n        value: function insertOrAppendSelector(parent, selector, operation, before) {\n\n            var selectorParts = selector.split(/([\\.\\#])/);\n            var element = parent[operation](selectorParts.shift(), before); //\":first-child\"\n\n            while (selectorParts.length > 1) {\n                var selectorModifier = selectorParts.shift();\n                var selectorItem = selectorParts.shift();\n                if (selectorModifier === \".\") {\n                    element = element.classed(selectorItem, true);\n                } else if (selectorModifier === \"#\") {\n                    element = element.attr('id', selectorItem);\n                }\n            }\n            return element;\n        }\n    }, {\n        key: 'insertSelector',\n        value: function insertSelector(parent, selector, before) {\n            return Utils.insertOrAppendSelector(parent, selector, \"insert\", before);\n        }\n    }, {\n        key: 'appendSelector',\n        value: function appendSelector(parent, selector) {\n            return Utils.insertOrAppendSelector(parent, selector, \"append\");\n        }\n    }, {\n        key: 'selectOrAppend',\n        value: function selectOrAppend(parent, selector, element) {\n            var selection = parent.select(selector);\n            if (selection.empty()) {\n                if (element) {\n                    return parent.append(element);\n                }\n                return Utils.appendSelector(parent, selector);\n            }\n            return selection;\n        }\n    }, {\n        key: 'selectOrInsert',\n        value: function selectOrInsert(parent, selector, before) {\n            var selection = parent.select(selector);\n            if (selection.empty()) {\n                return Utils.insertSelector(parent, selector, before);\n            }\n            return selection;\n        }\n    }, {\n        key: 'linearGradient',\n        value: function linearGradient(svg, gradientId, range, x1, y1, x2, y2) {\n            var defs = Utils.selectOrAppend(svg, \"defs\");\n            var linearGradient = defs.append(\"linearGradient\").attr(\"id\", gradientId);\n\n            linearGradient.attr(\"x1\", x1 + \"%\").attr(\"y1\", y1 + \"%\").attr(\"x2\", x2 + \"%\").attr(\"y2\", y2 + \"%\");\n\n            //Append multiple color stops by using D3's data/enter step\n            var stops = linearGradient.selectAll(\"stop\").data(range);\n\n            var stopsMerge = stops.enter().append(\"stop\").merge(stops);\n\n            stopsMerge.attr(\"offset\", function (d, i) {\n                return i / (range.length - 1);\n            }).attr(\"stop-color\", function (d) {\n                return d;\n            });\n\n            stops.exit().remove();\n        }\n    }, {\n        key: 'guid',\n        value: function guid() {\n            function s4() {\n                return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n            }\n\n            return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n        }\n\n        //places textString in textObj, adds an ellipsis if text can't fit in width\n\n    }, {\n        key: 'placeTextWithEllipsis',\n        value: function placeTextWithEllipsis(textD3Obj, textString, width) {\n            var textObj = textD3Obj.node();\n            textObj.textContent = textString;\n\n            var margin = 0;\n            var ellipsisLength = 9;\n            //ellipsis is needed\n            if (textObj.getComputedTextLength() > width + margin) {\n                for (var x = textString.length - 3; x > 0; x -= 1) {\n                    if (textObj.getSubStringLength(0, x) + ellipsisLength <= width + margin) {\n                        textObj.textContent = textString.substring(0, x) + \"...\";\n                        return true;\n                    }\n                }\n                textObj.textContent = \"...\"; //can't place at all\n                return true;\n            }\n            return false;\n        }\n    }, {\n        key: 'placeTextWithEllipsisAndTooltip',\n        value: function placeTextWithEllipsisAndTooltip(textD3Obj, textString, width, tooltip) {\n            var ellipsisPlaced = Utils.placeTextWithEllipsis(textD3Obj, textString, width);\n            if (ellipsisPlaced && tooltip) {\n                textD3Obj.on(\"mouseover\", function (d) {\n                    tooltip.transition().duration(200).style(\"opacity\", .9);\n                    tooltip.html(textString).style(\"left\", d3.event.pageX + 5 + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n                });\n\n                textD3Obj.on(\"mouseout\", function (d) {\n                    tooltip.transition().duration(500).style(\"opacity\", 0);\n                });\n            }\n        }\n    }, {\n        key: 'getFontSize',\n        value: function getFontSize(element) {\n            return window.getComputedStyle(element, null).getPropertyValue(\"font-size\");\n        }\n    }, {\n        key: 'capitalizeFirstLetter',\n        value: function capitalizeFirstLetter(string) {\n            return string.charAt(0).toUpperCase() + string.slice(1);\n        }\n    }, {\n        key: 'createScale',\n        value: function createScale(scaleName) {\n            var scaleFunctionName = 'scale' + Utils.capitalizeFirstLetter(scaleName);\n            try {\n                return d3[scaleFunctionName]();\n            } catch (e) {\n                throw 'ODC-D3 - scale not supported: ' + scaleName + ' (' + scaleFunctionName + ')';\n            }\n        }\n    }, {\n        key: 'createAxis',\n        value: function createAxis(orient, scale) {\n            var axisFnName = 'axis' + Utils.capitalizeFirstLetter(orient);\n            try {\n                return d3[axisFnName](scale);\n            } catch (e) {\n                throw 'ODC-D3 - axis orient not supported: ' + orient;\n            }\n        }\n    }]);\n\n    return Utils;\n}();\n\nUtils.SQRT_2 = 1.41421356237;\n\nUtils.sanitizeHeight = function (height, container) {\n    return height || parseInt(container.style('height'), 10) || 400;\n};\n\nUtils.sanitizeWidth = function (width, container) {\n    return width || parseInt(container.style('width'), 10) || 960;\n};\n\nUtils.availableHeight = function (height, container, margin) {\n    return Math.max(0, Utils.sanitizeHeight(height, container) - margin.top - margin.bottom);\n};\n\nUtils.availableWidth = function (width, container, margin) {\n    return Math.max(0, Utils.sanitizeWidth(width, container) - margin.left - margin.right);\n};\n\n},{}]},{},[40])(40)\n});\n\n","import helper from './legend';\r\nimport { dispatch } from 'd3-dispatch';\r\nimport { scaleLinear } from 'd3-scale';\r\nimport { format } from 'd3-format';\r\n\r\nexport default function color(){\r\n\r\n  var scale = scaleLinear(),\r\n    shape = \"rect\",\r\n    shapeWidth = 15,\r\n    shapeHeight = 15,\r\n    shapeRadius = 10,\r\n    shapePadding = 2,\r\n    cells = [5],\r\n    labels = [],\r\n    classPrefix = \"\",\r\n    useClass = false,\r\n    title = \"\",\r\n    labelFormat = format(\".01f\"),\r\n    labelOffset = 10,\r\n    labelAlign = \"middle\",\r\n    labelDelimiter = \"to\",\r\n    orient = \"vertical\",\r\n    ascending = false,\r\n    path,\r\n    legendDispatcher = dispatch(\"cellover\", \"cellout\", \"cellclick\");\r\n\r\n    function legend(svg){\r\n\r\n      var type = helper.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\r\n        legendG = svg.selectAll('g').data([scale]);\r\n\r\n      legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\r\n\r\n      var cell = svg.select('.' + classPrefix + 'legendCells')\r\n          .selectAll(\".\" + classPrefix + \"cell\").data(type.data),\r\n        cellEnter = cell.enter().append(\"g\")\r\n          .attr(\"class\", classPrefix + \"cell\"),//.merge(cell).style(\"opacity\", 1e-6),\r\n        shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\r\n        shapes = svg.selectAll(\"g.\" + classPrefix + \"cell \" + shape);\r\n\r\n      //add event handlers\r\n      helper.d3_addEvents(cellEnter, legendDispatcher);\r\n\r\n      cell.exit().transition().style(\"opacity\", 0).remove();\r\n\r\n      helper.d3_drawShapes(shape, shapes, shapeHeight, shapeWidth, shapeRadius, path);\r\n\r\n      helper.d3_addText( svg, cellEnter, type.labels, classPrefix)\r\n\r\n      // sets placement\r\n      var text = cellEnter.selectAll(\"text\"),\r\n        shapeSize = shapes.nodes().map( function(d){ return d.getBBox(); });\r\n\r\n      //sets scale\r\n      //everything is fill except for line which is stroke,\r\n      if (!useClass){\r\n        if (shape == \"line\"){\r\n          shapes.style(\"stroke\", type.feature);\r\n        } else {\r\n          shapes.style(\"fill\", type.feature);\r\n        }\r\n      } else {\r\n        shapes.attr(\"class\", function(d){ return classPrefix + \"swatch \" + type.feature(d); });\r\n      }\r\n\r\n      var cellTrans,\r\n      textTrans,\r\n      textAlign = (labelAlign == \"start\") ? 0 : (labelAlign == \"middle\") ? 0.5 : 1;\r\n\r\n      //positions cells and text\r\n      if (orient === \"vertical\"){\r\n        cellTrans = function(d,i) { return \"translate(0, \" + (i * (shapeSize[i].height + shapePadding)) + \")\"; };\r\n        textTrans = function(d,i) { return \"translate(\" + (shapeSize[i].width + shapeSize[i].x +\r\n          labelOffset) + \",\" + (shapeSize[i].y + shapeSize[i].height/2 + 5) + \")\"; };\r\n\r\n      } else if (orient === \"horizontal\"){\r\n        cellTrans = function(d,i) { return \"translate(\" + (i * (shapeSize[i].width + shapePadding)) + \",0)\"; }\r\n        textTrans = function(d,i) { return \"translate(\" + (shapeSize[i].width*textAlign  + shapeSize[i].x) +\r\n          \",\" + (shapeSize[i].height + shapeSize[i].y + labelOffset + 8) + \")\"; };\r\n      }\r\n\r\n      helper.d3_placement(orient, cellEnter, cellTrans, text, textTrans, labelAlign);\r\n      helper.d3_title(svg, title, classPrefix);\r\n\r\n      cell.transition().style(\"opacity\", 1);\r\n\r\n    }\r\n\r\n\r\n\r\n  legend.scale = function(_) {\r\n    if (!arguments.length) return scale;\r\n    scale = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.cells = function(_) {\r\n    if (!arguments.length) return cells;\r\n    if (_.length > 1 || _ >= 2 ){\r\n      cells = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.shape = function(_, d) {\r\n    if (!arguments.length) return shape;\r\n    if (_ == \"rect\" || _ == \"circle\" || _ == \"line\" || (_ == \"path\" && (typeof d === 'string')) ){\r\n      shape = _;\r\n      path = d;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.shapeWidth = function(_) {\r\n    if (!arguments.length) return shapeWidth;\r\n    shapeWidth = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.shapeHeight = function(_) {\r\n    if (!arguments.length) return shapeHeight;\r\n    shapeHeight = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.shapeRadius = function(_) {\r\n    if (!arguments.length) return shapeRadius;\r\n    shapeRadius = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.shapePadding = function(_) {\r\n    if (!arguments.length) return shapePadding;\r\n    shapePadding = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.labels = function(_) {\r\n    if (!arguments.length) return labels;\r\n    labels = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelAlign = function(_) {\r\n    if (!arguments.length) return labelAlign;\r\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\r\n      labelAlign = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.labelFormat = function(_) {\r\n    if (!arguments.length) return labelFormat;\r\n    labelFormat = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelOffset = function(_) {\r\n    if (!arguments.length) return labelOffset;\r\n    labelOffset = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelDelimiter = function(_) {\r\n    if (!arguments.length) return labelDelimiter;\r\n    labelDelimiter = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.useClass = function(_) {\r\n    if (!arguments.length) return useClass;\r\n    if (_ === true || _ === false){\r\n      useClass = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.orient = function(_){\r\n    if (!arguments.length) return orient;\r\n    _ = _.toLowerCase();\r\n    if (_ == \"horizontal\" || _ == \"vertical\") {\r\n      orient = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.ascending = function(_) {\r\n    if (!arguments.length) return ascending;\r\n    ascending = !!_;\r\n    return legend;\r\n  };\r\n\r\n  legend.classPrefix = function(_) {\r\n    if (!arguments.length) return classPrefix;\r\n    classPrefix = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.title = function(_) {\r\n    if (!arguments.length) return title;\r\n    title = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.on = function(){\r\n    var value = legendDispatcher.on.apply(legendDispatcher, arguments)\r\n    return value === legendDispatcher ? legend : value;\r\n  }\r\n\r\n  return legend;\r\n\r\n};\r\n","export default {\r\n\r\n  d3_identity: function (d) {\r\n    return d;\r\n  },\r\n\r\n  d3_mergeLabels: function (gen, labels) {\r\n\r\n      if(labels.length === 0) return gen;\r\n\r\n      gen = (gen) ? gen : [];\r\n\r\n      var i = labels.length;\r\n      for (; i < gen.length; i++) {\r\n        labels.push(gen[i]);\r\n      }\r\n      return labels;\r\n    },\r\n\r\n  d3_linearLegend: function (scale, cells, labelFormat) {\r\n    var data = [];\r\n\r\n    if (cells.length > 1){\r\n      data = cells;\r\n\r\n    } else {\r\n      var domain = scale.domain(),\r\n      increment = (domain[domain.length - 1] - domain[0])/(cells - 1),\r\n      i = 0;\r\n\r\n      for (; i < cells; i++){\r\n        data.push(domain[0] + i*increment);\r\n      }\r\n    }\r\n\r\n    var labels = data.map(labelFormat);\r\n\r\n    return {data: data,\r\n            labels: labels,\r\n            feature: function(d){ return scale(d); }};\r\n  },\r\n\r\n  d3_quantLegend: function (scale, labelFormat, labelDelimiter) {\r\n    var labels = scale.range().map(function(d){\r\n      var invert = scale.invertExtent(d),\r\n      a = labelFormat(invert[0]),\r\n      b = labelFormat(invert[1]);\r\n\r\n      return labelFormat(invert[0]) + \" \" + labelDelimiter + \" \" + labelFormat(invert[1]);\r\n\r\n    });\r\n\r\n    return {data: scale.range(),\r\n            labels: labels,\r\n            feature: this.d3_identity\r\n          };\r\n  },\r\n\r\n  d3_ordinalLegend: function (scale) {\r\n    return {data: scale.domain(),\r\n            labels: scale.domain(),\r\n            feature: function(d){ return scale(d); }};\r\n  },\r\n\r\n  d3_drawShapes: function (shape, shapes, shapeHeight, shapeWidth, shapeRadius, path) {\r\n    if (shape === \"rect\"){\r\n        shapes.attr(\"height\", shapeHeight).attr(\"width\", shapeWidth);\r\n\r\n    } else if (shape === \"circle\") {\r\n        shapes.attr(\"r\", shapeRadius)//.attr(\"cx\", shapeRadius).attr(\"cy\", shapeRadius);\r\n\r\n    } else if (shape === \"line\") {\r\n        shapes.attr(\"x1\", 0).attr(\"x2\", shapeWidth).attr(\"y1\", 0).attr(\"y2\", 0);\r\n\r\n    } else if (shape === \"path\") {\r\n      shapes.attr(\"d\", path);\r\n    }\r\n  },\r\n\r\n  d3_addText: function (svg, enter, labels, classPrefix){\r\n    enter.append(\"text\").attr(\"class\", classPrefix + \"label\");\r\n    svg.selectAll(\"g.\" + classPrefix + \"cell text\").data(labels).text(this.d3_identity);\r\n  },\r\n\r\n  d3_calcType: function (scale, ascending, cells, labels, labelFormat, labelDelimiter){\r\n    var type = scale.invertExtent ?\r\n            this.d3_quantLegend(scale, labelFormat, labelDelimiter) : scale.ticks ?\r\n            this.d3_linearLegend(scale, cells, labelFormat) : this.d3_ordinalLegend(scale);\r\n\r\n    type.labels = this.d3_mergeLabels(type.labels, labels);\r\n\r\n    if (ascending) {\r\n      type.labels = this.d3_reverse(type.labels);\r\n      type.data = this.d3_reverse(type.data);\r\n    }\r\n\r\n    return type;\r\n  },\r\n\r\n  d3_reverse: function(arr) {\r\n    var mirror = [];\r\n    for (var i = 0, l = arr.length; i < l; i++) {\r\n      mirror[i] = arr[l-i-1];\r\n    }\r\n    return mirror;\r\n  },\r\n\r\n  d3_placement: function (orient, cell, cellTrans, text, textTrans, labelAlign) {\r\n    cell.attr(\"transform\", cellTrans);\r\n    text.attr(\"transform\", textTrans);\r\n    if (orient === \"horizontal\"){\r\n      text.style(\"text-anchor\", labelAlign);\r\n    }\r\n  },\r\n\r\n  d3_addEvents: function(cells, dispatcher){\r\n    var _ = this;\r\n\r\n      cells.on(\"mouseover.legend\", function (d) { _.d3_cellOver(dispatcher, d, this); })\r\n          .on(\"mouseout.legend\", function (d) { _.d3_cellOut(dispatcher, d, this); })\r\n          .on(\"click.legend\", function (d) { _.d3_cellClick(dispatcher, d, this); });\r\n  },\r\n\r\n  d3_cellOver: function(cellDispatcher, d, obj){\r\n    cellDispatcher.call(\"cellover\", obj, d);\r\n  },\r\n\r\n  d3_cellOut: function(cellDispatcher, d, obj){\r\n    cellDispatcher.call(\"cellout\", obj, d);\r\n  },\r\n\r\n  d3_cellClick: function(cellDispatcher, d, obj){\r\n    cellDispatcher.call(\"cellclick\", obj, d);\r\n  },\r\n\r\n  d3_title: function(svg, title, classPrefix){\r\n    if (title !== \"\"){\r\n\r\n      var titleText = svg.selectAll('text.' + classPrefix + 'legendTitle');\r\n\r\n      titleText.data([title])\r\n        .enter()\r\n        .append('text')\r\n        .attr('class', classPrefix + 'legendTitle');\r\n\r\n        svg.selectAll('text.' + classPrefix + 'legendTitle')\r\n            .text(title)\r\n\r\n      var cellsSvg = svg.select('.' + classPrefix + 'legendCells')\r\n\r\n      var yOffset = svg.select('.' + classPrefix + 'legendTitle').nodes()\r\n          .map(function(d) { return d.getBBox().height})[0],\r\n      xOffset = -cellsSvg.nodes().map(function(d) { return d.getBBox().x})[0];\r\n\r\n      cellsSvg.attr('transform', 'translate(' + xOffset + ',' + (yOffset + 10) + ')');\r\n\r\n    }\r\n  }\r\n}\r\n","import helper from './legend';\r\nimport { dispatch } from 'd3-dispatch';\r\nimport { scaleLinear } from 'd3-scale';\r\nimport { format } from 'd3-format';\r\nimport { sum, max } from 'd3-array';\r\n\r\nexport default function size(){\r\n\r\n  var scale = scaleLinear(),\r\n    shape = \"rect\",\r\n    shapeWidth = 15,\r\n    shapePadding = 2,\r\n    cells = [5],\r\n    labels = [],\r\n    useStroke = false,\r\n    classPrefix = \"\",\r\n    title = \"\",\r\n    labelFormat = format(\".01f\"),\r\n    labelOffset = 10,\r\n    labelAlign = \"middle\",\r\n    labelDelimiter = \"to\",\r\n    orient = \"vertical\",\r\n    ascending = false,\r\n    path,\r\n    legendDispatcher = dispatch(\"cellover\", \"cellout\", \"cellclick\");\r\n\r\n    function legend(svg){\r\n\r\n      var type = helper.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\r\n        legendG = svg.selectAll('g').data([scale]);\r\n\r\n      legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\r\n\r\n      var cell = svg.select('.' + classPrefix + 'legendCells')\r\n          .selectAll(\".\" + classPrefix + \"cell\").data(type.data),\r\n        cellEnter = cell.enter().append(\"g\")\r\n          .attr(\"class\", classPrefix + \"cell\"),//.merge(cell).style(\"opacity\", 1e-6),\r\n        shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\r\n        shapes = svg.selectAll(\"g.\" + classPrefix + \"cell \" + shape);\r\n\r\n      //add event handlers\r\n      helper.d3_addEvents(cellEnter, legendDispatcher);\r\n\r\n      cell.exit().transition().style(\"opacity\", 0).remove();\r\n\r\n      //creates shape\r\n      if (shape === \"line\"){\r\n        helper.d3_drawShapes(shape, shapes, 0, shapeWidth);\r\n        shapes.attr(\"stroke-width\", type.feature);\r\n      } else {\r\n        helper.d3_drawShapes(shape, shapes, type.feature, type.feature, type.feature, path);\r\n      }\r\n\r\n      helper.d3_addText( svg, cellEnter, type.labels, classPrefix)\r\n\r\n      //sets placement\r\n      var text = cellEnter.selectAll(\"text\"),\r\n        shapeSize = shapes.nodes().map(\r\n          function(d, i){\r\n            var bbox = d.getBBox()\r\n            var stroke = scale(type.data[i]);\r\n\r\n            if (shape === \"line\" && orient === \"horizontal\") {\r\n              bbox.height = bbox.height + stroke;\r\n            } else if (shape === \"line\" && orient === \"vertical\"){\r\n              bbox.width = bbox.width;\r\n            }\r\n\r\n            return bbox;\r\n        });\r\n\r\n      var maxH = max(shapeSize, function(d){ return d.height + d.y; }),\r\n      maxW = max(shapeSize, function(d){ return d.width + d.x; });\r\n\r\n      var cellTrans,\r\n      textTrans,\r\n      textAlign = (labelAlign == \"start\") ? 0 : (labelAlign == \"middle\") ? 0.5 : 1;\r\n\r\n      //positions cells and text\r\n      if (orient === \"vertical\"){\r\n\r\n        cellTrans = function(d,i) {\r\n            var height = sum(shapeSize.slice(0, i + 1 ), function(d){ return d.height; });\r\n            return \"translate(0, \" + (height + i*shapePadding) + \")\"; };\r\n\r\n        textTrans = function(d,i) { return \"translate(\" + (maxW + labelOffset) + \",\" +\r\n          (shapeSize[i].y + shapeSize[i].height/2 + 5) + \")\"; };\r\n\r\n      } else if (orient === \"horizontal\"){\r\n        cellTrans = function(d,i) {\r\n            var width = sum(shapeSize.slice(0, i + 1 ), function(d){ return d.width; });\r\n            return \"translate(\" + (width + i*shapePadding) + \",0)\"; };\r\n\r\n        textTrans = function(d,i) { return \"translate(\" + (shapeSize[i].width*textAlign  + shapeSize[i].x) + \",\" +\r\n              (maxH + labelOffset ) + \")\"; };\r\n      }\r\n\r\n      helper.d3_placement(orient, cellEnter, cellTrans, text, textTrans, labelAlign);\r\n      helper.d3_title(svg, title, classPrefix);\r\n\r\n      cell.transition().style(\"opacity\", 1);\r\n\r\n    }\r\n\r\n  legend.scale = function(_) {\r\n    if (!arguments.length) return scale;\r\n    scale = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.cells = function(_) {\r\n    if (!arguments.length) return cells;\r\n    if (_.length > 1 || _ >= 2 ){\r\n      cells = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n\r\n  legend.shape = function(_, d) {\r\n    if (!arguments.length) return shape;\r\n    if (_ == \"rect\" || _ == \"circle\" || _ == \"line\" ){\r\n      shape = _;\r\n      path = d;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.shapeWidth = function(_) {\r\n    if (!arguments.length) return shapeWidth;\r\n    shapeWidth = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.shapePadding = function(_) {\r\n    if (!arguments.length) return shapePadding;\r\n    shapePadding = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.labels = function(_) {\r\n    if (!arguments.length) return labels;\r\n    labels = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelAlign = function(_) {\r\n    if (!arguments.length) return labelAlign;\r\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\r\n      labelAlign = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.labelFormat = function(_) {\r\n    if (!arguments.length) return labelFormat;\r\n    labelFormat = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelOffset = function(_) {\r\n    if (!arguments.length) return labelOffset;\r\n    labelOffset = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelDelimiter = function(_) {\r\n    if (!arguments.length) return labelDelimiter;\r\n    labelDelimiter = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.orient = function(_){\r\n    if (!arguments.length) return orient;\r\n    _ = _.toLowerCase();\r\n    if (_ == \"horizontal\" || _ == \"vertical\") {\r\n      orient = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.ascending = function(_) {\r\n    if (!arguments.length) return ascending;\r\n    ascending = !!_;\r\n    return legend;\r\n  };\r\n\r\n  legend.classPrefix = function(_) {\r\n    if (!arguments.length) return classPrefix;\r\n    classPrefix = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.title = function(_) {\r\n    if (!arguments.length) return title;\r\n    title = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.on = function(){\r\n    var value = legendDispatcher.on.apply(legendDispatcher, arguments)\r\n    return value === legendDispatcher ? legend : value;\r\n  }\r\n\r\n  return legend;\r\n\r\n};\r\n","import helper from './legend';\r\nimport { dispatch } from 'd3-dispatch';\r\nimport { scaleLinear } from 'd3-scale';\r\nimport { format } from 'd3-format';\r\nimport { max } from 'd3-array';\r\n\r\nexport default function symbol(){\r\n\r\n  var scale = scaleLinear(),\r\n    shape = \"path\",\r\n    shapeWidth = 15,\r\n    shapeHeight = 15,\r\n    shapeRadius = 10,\r\n    shapePadding = 5,\r\n    cells = [5],\r\n    labels = [],\r\n    classPrefix = \"\",\r\n    useClass = false,\r\n    title = \"\",\r\n    labelFormat = format(\".01f\"),\r\n    labelAlign = \"middle\",\r\n    labelOffset = 10,\r\n    labelDelimiter = \"to\",\r\n    orient = \"vertical\",\r\n    ascending = false,\r\n    legendDispatcher = dispatch(\"cellover\", \"cellout\", \"cellclick\");\r\n\r\n    function legend(svg){\r\n\r\n      var type = helper.d3_calcType(scale, ascending, cells, labels, labelFormat, labelDelimiter),\r\n        legendG = svg.selectAll('g').data([scale]);\r\n\r\n      legendG.enter().append('g').attr('class', classPrefix + 'legendCells');\r\n\r\n      var cell = svg.select('.' + classPrefix + 'legendCells')\r\n          .selectAll(\".\" + classPrefix + \"cell\").data(type.data),\r\n        cellEnter = cell.enter().append(\"g\")\r\n          .attr(\"class\", classPrefix + \"cell\"),//.style(\"opacity\", 1e-6),\r\n        shapeEnter = cellEnter.append(shape).attr(\"class\", classPrefix + \"swatch\"),\r\n        shapes = svg.selectAll(\"g.\" + classPrefix + \"cell \" + shape);\r\n\r\n      //add event handlers\r\n      helper.d3_addEvents(cellEnter, legendDispatcher);\r\n\r\n      //remove old shapes\r\n      cell.exit().transition().style(\"opacity\", 0).remove();\r\n\r\n      helper.d3_drawShapes(shape, shapes, shapeHeight, shapeWidth, shapeRadius, type.feature);\r\n      helper.d3_addText( svg, cellEnter, type.labels, classPrefix)\r\n\r\n      // sets placement\r\n      var text = cellEnter.selectAll(\"text\"),\r\n        shapeSize = shapes.nodes().map( function(d){ return d.getBBox(); });\r\n\r\n      var maxH = max(shapeSize, function(d){ return d.height; }),\r\n      maxW = max(shapeSize, function(d){ return d.width; });\r\n\r\n      var cellTrans,\r\n      textTrans,\r\n      textAlign = (labelAlign == \"start\") ? 0 : (labelAlign == \"middle\") ? 0.5 : 1;\r\n\r\n      //positions cells and text\r\n      if (orient === \"vertical\"){\r\n        cellTrans = function(d,i) { return \"translate(0, \" + (i * (maxH + shapePadding)) + \")\"; };\r\n        textTrans = function(d,i) { return \"translate(\" + (maxW + labelOffset) + \",\" +\r\n              (shapeSize[i].y + shapeSize[i].height/2 + 5) + \")\"; };\r\n\r\n      } else if (orient === \"horizontal\"){\r\n        cellTrans = function(d,i) { return \"translate(\" + (i * (maxW + shapePadding)) + \",0)\"; };\r\n        textTrans = function(d,i) { return \"translate(\" + (shapeSize[i].width*textAlign  + shapeSize[i].x) + \",\" +\r\n              (maxH + labelOffset ) + \")\"; };\r\n      }\r\n\r\n      helper.d3_placement(orient, cellEnter, cellTrans, text, textTrans, labelAlign);\r\n      helper.d3_title(svg, title, classPrefix);\r\n      cell.transition().style(\"opacity\", 1);\r\n\r\n    }\r\n\r\n\r\n  legend.scale = function(_) {\r\n    if (!arguments.length) return scale;\r\n    scale = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.cells = function(_) {\r\n    if (!arguments.length) return cells;\r\n    if (_.length > 1 || _ >= 2 ){\r\n      cells = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.shapePadding = function(_) {\r\n    if (!arguments.length) return shapePadding;\r\n    shapePadding = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.labels = function(_) {\r\n    if (!arguments.length) return labels;\r\n    labels = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelAlign = function(_) {\r\n    if (!arguments.length) return labelAlign;\r\n    if (_ == \"start\" || _ == \"end\" || _ == \"middle\") {\r\n      labelAlign = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.labelFormat = function(_) {\r\n    if (!arguments.length) return labelFormat;\r\n    labelFormat = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelOffset = function(_) {\r\n    if (!arguments.length) return labelOffset;\r\n    labelOffset = +_;\r\n    return legend;\r\n  };\r\n\r\n  legend.labelDelimiter = function(_) {\r\n    if (!arguments.length) return labelDelimiter;\r\n    labelDelimiter = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.orient = function(_){\r\n    if (!arguments.length) return orient;\r\n    _ = _.toLowerCase();\r\n    if (_ == \"horizontal\" || _ == \"vertical\") {\r\n      orient = _;\r\n    }\r\n    return legend;\r\n  };\r\n\r\n  legend.ascending = function(_) {\r\n    if (!arguments.length) return ascending;\r\n    ascending = !!_;\r\n    return legend;\r\n  };\r\n\r\n  legend.classPrefix = function(_) {\r\n    if (!arguments.length) return classPrefix;\r\n    classPrefix = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.title = function(_) {\r\n    if (!arguments.length) return title;\r\n    title = _;\r\n    return legend;\r\n  };\r\n\r\n  legend.on = function(){\r\n    var value = legendDispatcher.on.apply(legendDispatcher, arguments)\r\n    return value === legendDispatcher ? legend : value;\r\n  }\r\n\r\n  return legend;\r\n\r\n};\r\n","'use strict';\r\n/* @flow */\r\n\r\n/**\r\n * **[Gaussian error function](http://en.wikipedia.org/wiki/Error_function)**\r\n *\r\n * The `errorFunction(x/(sd * Math.sqrt(2)))` is the probability that a value in a\r\n * normal distribution with standard deviation sd is within x of the mean.\r\n *\r\n * This function returns a numerical approximation to the exact value.\r\n *\r\n * @param {number} x input\r\n * @return {number} error estimation\r\n * @example\r\n * errorFunction(1).toFixed(2); // => '0.84'\r\n */\r\nfunction errorFunction(x/*: number */)/*: number */ {\r\n    var t = 1 / (1 + 0.5 * Math.abs(x));\r\n    var tau = t * Math.exp(-Math.pow(x, 2) -\r\n        1.26551223 +\r\n        1.00002368 * t +\r\n        0.37409196 * Math.pow(t, 2) +\r\n        0.09678418 * Math.pow(t, 3) -\r\n        0.18628806 * Math.pow(t, 4) +\r\n        0.27886807 * Math.pow(t, 5) -\r\n        1.13520398 * Math.pow(t, 6) +\r\n        1.48851587 * Math.pow(t, 7) -\r\n        0.82215223 * Math.pow(t, 8) +\r\n        0.17087277 * Math.pow(t, 9));\r\n    if (x >= 0) {\r\n        return 1 - tau;\r\n    } else {\r\n        return tau - 1;\r\n    }\r\n}\r\n\r\nmodule.exports = errorFunction;\r\n","'use strict';\r\n/* @flow */\r\n\r\n/**\r\n * [Simple linear regression](http://en.wikipedia.org/wiki/Simple_linear_regression)\r\n * is a simple way to find a fitted line\r\n * between a set of coordinates. This algorithm finds the slope and y-intercept of a regression line\r\n * using the least sum of squares.\r\n *\r\n * @param {Array<Array<number>>} data an array of two-element of arrays,\r\n * like `[[0, 1], [2, 3]]`\r\n * @returns {Object} object containing slope and intersect of regression line\r\n * @example\r\n * linearRegression([[0, 0], [1, 1]]); // => { m: 1, b: 0 }\r\n */\r\nfunction linearRegression(data/*: Array<Array<number>> */)/*: { m: number, b: number } */ {\r\n\r\n    var m, b;\r\n\r\n    // Store data length in a local variable to reduce\r\n    // repeated object property lookups\r\n    var dataLength = data.length;\r\n\r\n    //if there's only one point, arbitrarily choose a slope of 0\r\n    //and a y-intercept of whatever the y of the initial point is\r\n    if (dataLength === 1) {\r\n        m = 0;\r\n        b = data[0][1];\r\n    } else {\r\n        // Initialize our sums and scope the `m` and `b`\r\n        // variables that define the line.\r\n        var sumX = 0, sumY = 0,\r\n            sumXX = 0, sumXY = 0;\r\n\r\n        // Use local variables to grab point values\r\n        // with minimal object property lookups\r\n        var point, x, y;\r\n\r\n        // Gather the sum of all x values, the sum of all\r\n        // y values, and the sum of x^2 and (x*y) for each\r\n        // value.\r\n        //\r\n        // In math notation, these would be SS_x, SS_y, SS_xx, and SS_xy\r\n        for (var i = 0; i < dataLength; i++) {\r\n            point = data[i];\r\n            x = point[0];\r\n            y = point[1];\r\n\r\n            sumX += x;\r\n            sumY += y;\r\n\r\n            sumXX += x * x;\r\n            sumXY += x * y;\r\n        }\r\n\r\n        // `m` is the slope of the regression line\r\n        m = ((dataLength * sumXY) - (sumX * sumY)) /\r\n            ((dataLength * sumXX) - (sumX * sumX));\r\n\r\n        // `b` is the y-intercept of the line.\r\n        b = (sumY / dataLength) - ((m * sumX) / dataLength);\r\n    }\r\n\r\n    // Return both values as an object.\r\n    return {\r\n        m: m,\r\n        b: b\r\n    };\r\n}\r\n\r\n\r\nmodule.exports = linearRegression;\r\n","'use strict';\r\n/* @flow */\r\n\r\n/**\r\n * Given the output of `linearRegression`: an object\r\n * with `m` and `b` values indicating slope and intercept,\r\n * respectively, generate a line function that translates\r\n * x values into y values.\r\n *\r\n * @param {Object} mb object with `m` and `b` members, representing\r\n * slope and intersect of desired line\r\n * @returns {Function} method that computes y-value at any given\r\n * x-value on the line.\r\n * @example\r\n * var l = linearRegressionLine(linearRegression([[0, 0], [1, 1]]));\r\n * l(0) // = 0\r\n * l(2) // = 2\r\n * linearRegressionLine({ b: 0, m: 1 })(1); // => 1\r\n * linearRegressionLine({ b: 1, m: 1 })(1); // => 2\r\n */\r\nfunction linearRegressionLine(mb/*: { b: number, m: number }*/)/*: Function */ {\r\n    // Return a function that computes a `y` value for each\r\n    // x value it is given, based on the values of `b` and `a`\r\n    // that we just computed.\r\n    return function(x) {\r\n        return mb.b + (mb.m * x);\r\n    };\r\n}\r\n\r\nmodule.exports = linearRegressionLine;\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar sum = require('./sum');\r\n\r\n/**\r\n * The mean, _also known as average_,\r\n * is the sum of all values over the number of values.\r\n * This is a [measure of central tendency](https://en.wikipedia.org/wiki/Central_tendency):\r\n * a method of finding a typical or central value of a set of numbers.\r\n *\r\n * This runs on `O(n)`, linear time in respect to the array\r\n *\r\n * @param {Array<number>} x input values\r\n * @returns {number} mean\r\n * @example\r\n * mean([0, 10]); // => 5\r\n */\r\nfunction mean(x /*: Array<number> */)/*:number*/ {\r\n    // The mean of no numbers is null\r\n    if (x.length === 0) { return NaN; }\r\n\r\n    return sum(x) / x.length;\r\n}\r\n\r\nmodule.exports = mean;\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar quantileSorted = require('./quantile_sorted');\r\nvar quickselect = require('./quickselect');\r\n\r\n/**\r\n * The [quantile](https://en.wikipedia.org/wiki/Quantile):\r\n * this is a population quantile, since we assume to know the entire\r\n * dataset in this library. This is an implementation of the\r\n * [Quantiles of a Population](http://en.wikipedia.org/wiki/Quantile#Quantiles_of_a_population)\r\n * algorithm from wikipedia.\r\n *\r\n * Sample is a one-dimensional array of numbers,\r\n * and p is either a decimal number from 0 to 1 or an array of decimal\r\n * numbers from 0 to 1.\r\n * In terms of a k/q quantile, p = k/q - it's just dealing with fractions or dealing\r\n * with decimal values.\r\n * When p is an array, the result of the function is also an array containing the appropriate\r\n * quantiles in input order\r\n *\r\n * @param {Array<number>} sample a sample from the population\r\n * @param {number} p the desired quantile, as a number between 0 and 1\r\n * @returns {number} quantile\r\n * @example\r\n * quantile([3, 6, 7, 8, 8, 9, 10, 13, 15, 16, 20], 0.5); // => 9\r\n */\r\nfunction quantile(sample /*: Array<number> */, p /*: Array<number> | number */) {\r\n    var copy = sample.slice();\r\n\r\n    if (Array.isArray(p)) {\r\n        // rearrange elements so that each element corresponding to a requested\r\n        // quantile is on a place it would be if the array was fully sorted\r\n        multiQuantileSelect(copy, p);\r\n        // Initialize the result array\r\n        var results = [];\r\n        // For each requested quantile\r\n        for (var i = 0; i < p.length; i++) {\r\n            results[i] = quantileSorted(copy, p[i]);\r\n        }\r\n        return results;\r\n    } else {\r\n        var idx = quantileIndex(copy.length, p);\r\n        quantileSelect(copy, idx, 0, copy.length - 1);\r\n        return quantileSorted(copy, p);\r\n    }\r\n}\r\n\r\nfunction quantileSelect(arr, k, left, right) {\r\n    if (k % 1 === 0) {\r\n        quickselect(arr, k, left, right);\r\n    } else {\r\n        k = Math.floor(k);\r\n        quickselect(arr, k, left, right);\r\n        quickselect(arr, k + 1, k + 1, right);\r\n    }\r\n}\r\n\r\nfunction multiQuantileSelect(arr, p) {\r\n    var indices = [0];\r\n    for (var i = 0; i < p.length; i++) {\r\n        indices.push(quantileIndex(arr.length, p[i]));\r\n    }\r\n    indices.push(arr.length - 1);\r\n    indices.sort(compare);\r\n\r\n    var stack = [0, indices.length - 1];\r\n\r\n    while (stack.length) {\r\n        var r = Math.ceil(stack.pop());\r\n        var l = Math.floor(stack.pop());\r\n        if (r - l <= 1) continue;\r\n\r\n        var m = Math.floor((l + r) / 2);\r\n        quantileSelect(arr, indices[m], indices[l], indices[r]);\r\n\r\n        stack.push(l, m, m, r);\r\n    }\r\n}\r\n\r\nfunction compare(a, b) {\r\n    return a - b;\r\n}\r\n\r\nfunction quantileIndex(len /*: number */, p /*: number */)/*:number*/ {\r\n    var idx = len * p;\r\n    if (p === 1) {\r\n        // If p is 1, directly return the last index\r\n        return len - 1;\r\n    } else if (p === 0) {\r\n        // If p is 0, directly return the first index\r\n        return 0;\r\n    } else if (idx % 1 !== 0) {\r\n        // If index is not integer, return the next index in array\r\n        return Math.ceil(idx) - 1;\r\n    } else if (len % 2 === 0) {\r\n        // If the list has even-length, we'll return the middle of two indices\r\n        // around quantile to indicate that we need an average value of the two\r\n        return idx - 0.5;\r\n    } else {\r\n        // Finally, in the simple case of an integer index\r\n        // with an odd-length list, return the index\r\n        return idx;\r\n    }\r\n}\r\n\r\nmodule.exports = quantile;\r\n","'use strict';\r\n/* @flow */\r\n\r\n/**\r\n * This is the internal implementation of quantiles: when you know\r\n * that the order is sorted, you don't need to re-sort it, and the computations\r\n * are faster.\r\n *\r\n * @param {Array<number>} sample input data\r\n * @param {number} p desired quantile: a number between 0 to 1, inclusive\r\n * @returns {number} quantile value\r\n * @example\r\n * quantileSorted([3, 6, 7, 8, 8, 9, 10, 13, 15, 16, 20], 0.5); // => 9\r\n */\r\nfunction quantileSorted(sample /*: Array<number> */, p /*: number */)/*:number*/ {\r\n    var idx = sample.length * p;\r\n    if (p < 0 || p > 1) {\r\n        return NaN;\r\n    } else if (p === 1) {\r\n        // If p is 1, directly return the last element\r\n        return sample[sample.length - 1];\r\n    } else if (p === 0) {\r\n        // If p is 0, directly return the first element\r\n        return sample[0];\r\n    } else if (idx % 1 !== 0) {\r\n        // If p is not integer, return the next element in array\r\n        return sample[Math.ceil(idx) - 1];\r\n    } else if (sample.length % 2 === 0) {\r\n        // If the list has even-length, we'll take the average of this number\r\n        // and the next value, if there is one\r\n        return (sample[idx - 1] + sample[idx]) / 2;\r\n    } else {\r\n        // Finally, in the simple case of an integer value\r\n        // with an odd-length list, return the sample value at the index.\r\n        return sample[idx];\r\n    }\r\n}\r\n\r\nmodule.exports = quantileSorted;\r\n","'use strict';\r\n/* @flow */\r\n\r\nmodule.exports = quickselect;\r\n\r\n/**\r\n * Rearrange items in `arr` so that all items in `[left, k]` range are the smallest.\r\n * The `k`-th element will have the `(k - left + 1)`-th smallest value in `[left, right]`.\r\n *\r\n * Implements Floyd-Rivest selection algorithm https://en.wikipedia.org/wiki/Floyd-Rivest_algorithm\r\n *\r\n * @private\r\n * @param {Array<number>} arr input array\r\n * @param {number} k pivot index\r\n * @param {number} left left index\r\n * @param {number} right right index\r\n * @returns {undefined}\r\n * @example\r\n * var arr = [65, 28, 59, 33, 21, 56, 22, 95, 50, 12, 90, 53, 28, 77, 39];\r\n * quickselect(arr, 8);\r\n * // = [39, 28, 28, 33, 21, 12, 22, 50, 53, 56, 59, 65, 90, 77, 95]\r\n */\r\nfunction quickselect(arr /*: Array<number> */, k /*: number */, left /*: number */, right /*: number */) {\r\n    left = left || 0;\r\n    right = right || (arr.length - 1);\r\n\r\n    while (right > left) {\r\n        // 600 and 0.5 are arbitrary constants chosen in the original paper to minimize execution time\r\n        if (right - left > 600) {\r\n            var n = right - left + 1;\r\n            var m = k - left + 1;\r\n            var z = Math.log(n);\r\n            var s = 0.5 * Math.exp(2 * z / 3);\r\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n);\r\n            if (m - n / 2 < 0) sd *= -1;\r\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\r\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\r\n            quickselect(arr, k, newLeft, newRight);\r\n        }\r\n\r\n        var t = arr[k];\r\n        var i = left;\r\n        var j = right;\r\n\r\n        swap(arr, left, k);\r\n        if (arr[right] > t) swap(arr, left, right);\r\n\r\n        while (i < j) {\r\n            swap(arr, i, j);\r\n            i++;\r\n            j--;\r\n            while (arr[i] < t) i++;\r\n            while (arr[j] > t) j--;\r\n        }\r\n\r\n        if (arr[left] === t) swap(arr, left, j);\r\n        else {\r\n            j++;\r\n            swap(arr, j, right);\r\n        }\r\n\r\n        if (j <= k) left = j + 1;\r\n        if (k <= j) right = j - 1;\r\n    }\r\n}\r\n\r\nfunction swap(arr, i, j) {\r\n    var tmp = arr[i];\r\n    arr[i] = arr[j];\r\n    arr[j] = tmp;\r\n}\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar sampleCovariance = require('./sample_covariance');\r\nvar sampleStandardDeviation = require('./sample_standard_deviation');\r\n\r\n/**\r\n * The [correlation](http://en.wikipedia.org/wiki/Correlation_and_dependence) is\r\n * a measure of how correlated two datasets are, between -1 and 1\r\n *\r\n * @param {Array<number>} x first input\r\n * @param {Array<number>} y second input\r\n * @returns {number} sample correlation\r\n * @example\r\n * sampleCorrelation([1, 2, 3, 4, 5, 6], [2, 2, 3, 4, 5, 60]).toFixed(2);\r\n * // => '0.69'\r\n */\r\nfunction sampleCorrelation(x/*: Array<number> */, y/*: Array<number> */)/*:number*/ {\r\n    var cov = sampleCovariance(x, y),\r\n        xstd = sampleStandardDeviation(x),\r\n        ystd = sampleStandardDeviation(y);\r\n\r\n    return cov / xstd / ystd;\r\n}\r\n\r\nmodule.exports = sampleCorrelation;\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar mean = require('./mean');\r\n\r\n/**\r\n * [Sample covariance](https://en.wikipedia.org/wiki/Sample_mean_and_sampleCovariance) of two datasets:\r\n * how much do the two datasets move together?\r\n * x and y are two datasets, represented as arrays of numbers.\r\n *\r\n * @param {Array<number>} x first input\r\n * @param {Array<number>} y second input\r\n * @returns {number} sample covariance\r\n * @example\r\n * sampleCovariance([1, 2, 3, 4, 5, 6], [6, 5, 4, 3, 2, 1]); // => -3.5\r\n */\r\nfunction sampleCovariance(x /*:Array<number>*/, y /*:Array<number>*/)/*:number*/ {\r\n\r\n    // The two datasets must have the same length which must be more than 1\r\n    if (x.length <= 1 || x.length !== y.length) {\r\n        return NaN;\r\n    }\r\n\r\n    // determine the mean of each dataset so that we can judge each\r\n    // value of the dataset fairly as the difference from the mean. this\r\n    // way, if one dataset is [1, 2, 3] and [2, 3, 4], their covariance\r\n    // does not suffer because of the difference in absolute values\r\n    var xmean = mean(x),\r\n        ymean = mean(y),\r\n        sum = 0;\r\n\r\n    // for each pair of values, the covariance increases when their\r\n    // difference from the mean is associated - if both are well above\r\n    // or if both are well below\r\n    // the mean, the covariance increases significantly.\r\n    for (var i = 0; i < x.length; i++) {\r\n        sum += (x[i] - xmean) * (y[i] - ymean);\r\n    }\r\n\r\n    // this is Bessels' Correction: an adjustment made to sample statistics\r\n    // that allows for the reduced degree of freedom entailed in calculating\r\n    // values from samples rather than complete populations.\r\n    var besselsCorrection = x.length - 1;\r\n\r\n    // the covariance is weighted by the length of the datasets.\r\n    return sum / besselsCorrection;\r\n}\r\n\r\nmodule.exports = sampleCovariance;\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar sampleVariance = require('./sample_variance');\r\n\r\n/**\r\n * The [standard deviation](http://en.wikipedia.org/wiki/Standard_deviation)\r\n * is the square root of the variance.\r\n *\r\n * @param {Array<number>} x input array\r\n * @returns {number} sample standard deviation\r\n * @example\r\n * sampleStandardDeviation([2, 4, 4, 4, 5, 5, 7, 9]).toFixed(2);\r\n * // => '2.14'\r\n */\r\nfunction sampleStandardDeviation(x/*:Array<number>*/)/*:number*/ {\r\n    // The standard deviation of no numbers is null\r\n    var sampleVarianceX = sampleVariance(x);\r\n    if (isNaN(sampleVarianceX)) { return NaN; }\r\n    return Math.sqrt(sampleVarianceX);\r\n}\r\n\r\nmodule.exports = sampleStandardDeviation;\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar sumNthPowerDeviations = require('./sum_nth_power_deviations');\r\n\r\n/*\r\n * The [sample variance](https://en.wikipedia.org/wiki/Variance#Sample_variance)\r\n * is the sum of squared deviations from the mean. The sample variance\r\n * is distinguished from the variance by the usage of [Bessel's Correction](https://en.wikipedia.org/wiki/Bessel's_correction):\r\n * instead of dividing the sum of squared deviations by the length of the input,\r\n * it is divided by the length minus one. This corrects the bias in estimating\r\n * a value from a set that you don't know if full.\r\n *\r\n * References:\r\n * * [Wolfram MathWorld on Sample Variance](http://mathworld.wolfram.com/SampleVariance.html)\r\n *\r\n * @param {Array<number>} x input array\r\n * @return {number} sample variance\r\n * @example\r\n * sampleVariance([1, 2, 3, 4, 5]); // => 2.5\r\n */\r\nfunction sampleVariance(x /*: Array<number> */)/*:number*/ {\r\n    // The variance of no numbers is null\r\n    if (x.length <= 1) { return NaN; }\r\n\r\n    var sumSquaredDeviationsValue = sumNthPowerDeviations(x, 2);\r\n\r\n    // this is Bessels' Correction: an adjustment made to sample statistics\r\n    // that allows for the reduced degree of freedom entailed in calculating\r\n    // values from samples rather than complete populations.\r\n    var besselsCorrection = x.length - 1;\r\n\r\n    // Find the mean value of that list\r\n    return sumSquaredDeviationsValue / besselsCorrection;\r\n}\r\n\r\nmodule.exports = sampleVariance;\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar variance = require('./variance');\r\n\r\n/**\r\n * The [standard deviation](http://en.wikipedia.org/wiki/Standard_deviation)\r\n * is the square root of the variance. It's useful for measuring the amount\r\n * of variation or dispersion in a set of values.\r\n *\r\n * Standard deviation is only appropriate for full-population knowledge: for\r\n * samples of a population, {@link sampleStandardDeviation} is\r\n * more appropriate.\r\n *\r\n * @param {Array<number>} x input\r\n * @returns {number} standard deviation\r\n * @example\r\n * variance([2, 4, 4, 4, 5, 5, 7, 9]); // => 4\r\n * standardDeviation([2, 4, 4, 4, 5, 5, 7, 9]); // => 2\r\n */\r\nfunction standardDeviation(x /*: Array<number> */)/*:number*/ {\r\n    // The standard deviation of no numbers is null\r\n    var v = variance(x);\r\n    if (isNaN(v)) { return 0; }\r\n    return Math.sqrt(v);\r\n}\r\n\r\nmodule.exports = standardDeviation;\r\n","'use strict';\r\n/* @flow */\r\n\r\n/**\r\n * Our default sum is the [Kahan summation algorithm](https://en.wikipedia.org/wiki/Kahan_summation_algorithm) is\r\n * a method for computing the sum of a list of numbers while correcting\r\n * for floating-point errors. Traditionally, sums are calculated as many\r\n * successive additions, each one with its own floating-point roundoff. These\r\n * losses in precision add up as the number of numbers increases. This alternative\r\n * algorithm is more accurate than the simple way of calculating sums by simple\r\n * addition.\r\n *\r\n * This runs on `O(n)`, linear time in respect to the array\r\n *\r\n * @param {Array<number>} x input\r\n * @return {number} sum of all input numbers\r\n * @example\r\n * sum([1, 2, 3]); // => 6\r\n */\r\nfunction sum(x/*: Array<number> */)/*: number */ {\r\n\r\n    // like the traditional sum algorithm, we keep a running\r\n    // count of the current sum.\r\n    var sum = 0;\r\n\r\n    // but we also keep three extra variables as bookkeeping:\r\n    // most importantly, an error correction value. This will be a very\r\n    // small number that is the opposite of the floating point precision loss.\r\n    var errorCompensation = 0;\r\n\r\n    // this will be each number in the list corrected with the compensation value.\r\n    var correctedCurrentValue;\r\n\r\n    // and this will be the next sum\r\n    var nextSum;\r\n\r\n    for (var i = 0; i < x.length; i++) {\r\n        // first correct the value that we're going to add to the sum\r\n        correctedCurrentValue = x[i] - errorCompensation;\r\n\r\n        // compute the next sum. sum is likely a much larger number\r\n        // than correctedCurrentValue, so we'll lose precision here,\r\n        // and measure how much precision is lost in the next step\r\n        nextSum = sum + correctedCurrentValue;\r\n\r\n        // we intentionally didn't assign sum immediately, but stored\r\n        // it for now so we can figure out this: is (sum + nextValue) - nextValue\r\n        // not equal to 0? ideally it would be, but in practice it won't:\r\n        // it will be some very small number. that's what we record\r\n        // as errorCompensation.\r\n        errorCompensation = nextSum - sum - correctedCurrentValue;\r\n\r\n        // now that we've computed how much we'll correct for in the next\r\n        // loop, start treating the nextSum as the current sum.\r\n        sum = nextSum;\r\n    }\r\n\r\n    return sum;\r\n}\r\n\r\nmodule.exports = sum;\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar mean = require('./mean');\r\n\r\n/**\r\n * The sum of deviations to the Nth power.\r\n * When n=2 it's the sum of squared deviations.\r\n * When n=3 it's the sum of cubed deviations.\r\n *\r\n * @param {Array<number>} x\r\n * @param {number} n power\r\n * @returns {number} sum of nth power deviations\r\n * @example\r\n * var input = [1, 2, 3];\r\n * // since the variance of a set is the mean squared\r\n * // deviations, we can calculate that with sumNthPowerDeviations:\r\n * var variance = sumNthPowerDeviations(input) / input.length;\r\n */\r\nfunction sumNthPowerDeviations(x/*: Array<number> */, n/*: number */)/*:number*/ {\r\n    var meanValue = mean(x),\r\n        sum = 0;\r\n\r\n    for (var i = 0; i < x.length; i++) {\r\n        sum += Math.pow(x[i] - meanValue, n);\r\n    }\r\n\r\n    return sum;\r\n}\r\n\r\nmodule.exports = sumNthPowerDeviations;\r\n","'use strict';\r\n/* @flow */\r\n\r\nvar sumNthPowerDeviations = require('./sum_nth_power_deviations');\r\n\r\n/**\r\n * The [variance](http://en.wikipedia.org/wiki/Variance)\r\n * is the sum of squared deviations from the mean.\r\n *\r\n * This is an implementation of variance, not sample variance:\r\n * see the `sampleVariance` method if you want a sample measure.\r\n *\r\n * @param {Array<number>} x a population\r\n * @returns {number} variance: a value greater than or equal to zero.\r\n * zero indicates that all values are identical.\r\n * @example\r\n * variance([1, 2, 3, 4, 5, 6]); // => 2.9166666666666665\r\n */\r\nfunction variance(x/*: Array<number> */)/*:number*/ {\r\n    // The variance of no numbers is null\r\n    if (x.length === 0) { return NaN; }\r\n\r\n    // Find the mean of squared deviations between the\r\n    // mean value and each value.\r\n    return sumNthPowerDeviations(x, 2) / x.length;\r\n}\r\n\r\nmodule.exports = variance;\r\n","'use strict';\r\n/* @flow */\r\n\r\n/**\r\n * The [Z-Score, or Standard Score](http://en.wikipedia.org/wiki/Standard_score).\r\n *\r\n * The standard score is the number of standard deviations an observation\r\n * or datum is above or below the mean. Thus, a positive standard score\r\n * represents a datum above the mean, while a negative standard score\r\n * represents a datum below the mean. It is a dimensionless quantity\r\n * obtained by subtracting the population mean from an individual raw\r\n * score and then dividing the difference by the population standard\r\n * deviation.\r\n *\r\n * The z-score is only defined if one knows the population parameters;\r\n * if one only has a sample set, then the analogous computation with\r\n * sample mean and sample standard deviation yields the\r\n * Student's t-statistic.\r\n *\r\n * @param {number} x\r\n * @param {number} mean\r\n * @param {number} standardDeviation\r\n * @return {number} z score\r\n * @example\r\n * zScore(78, 80, 5); // => -0.4\r\n */\r\nfunction zScore(x/*:number*/, mean/*:number*/, standardDeviation/*:number*/)/*:number*/ {\r\n    return (x - mean) / standardDeviation;\r\n}\r\n\r\nmodule.exports = zScore;\r\n","// https://d3js.org/d3-array/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  function ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function bisector(compare) {\n    if (compare.length === 1) compare = ascendingComparator(compare);\n    return {\n      left: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) < 0) lo = mid + 1;\n          else hi = mid;\n        }\n        return lo;\n      },\n      right: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) > 0) hi = mid;\n          else lo = mid + 1;\n        }\n        return lo;\n      }\n    };\n  }\n\n  function ascendingComparator(f) {\n    return function(d, x) {\n      return ascending(f(d), x);\n    };\n  }\n\n  var ascendingBisect = bisector(ascending);\n  var bisectRight = ascendingBisect.right;\n  var bisectLeft = ascendingBisect.left;\n\n  function descending(a, b) {\n    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  }\n\n  function number(x) {\n    return x === null ? NaN : +x;\n  }\n\n  function variance(array, f) {\n    var n = array.length,\n        m = 0,\n        a,\n        d,\n        s = 0,\n        i = -1,\n        j = 0;\n\n    if (f == null) {\n      while (++i < n) {\n        if (!isNaN(a = number(array[i]))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    else {\n      while (++i < n) {\n        if (!isNaN(a = number(f(array[i], i, array)))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    if (j > 1) return s / (j - 1);\n  }\n\n  function deviation(array, f) {\n    var v = variance(array, f);\n    return v ? Math.sqrt(v) : v;\n  }\n\n  function extent(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b,\n        c;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = array[i]) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    return [a, c];\n  }\n\n  var array = Array.prototype;\n\n  var slice = array.slice;\n  var map = array.map;\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function identity(x) {\n    return x;\n  }\n\n  function range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n    var i = -1,\n        n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n        range = new Array(n);\n\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n\n    return range;\n  }\n\n  var e10 = Math.sqrt(50);\n  var e5 = Math.sqrt(10);\n  var e2 = Math.sqrt(2);\n  function ticks(start, stop, count) {\n    var step = tickStep(start, stop, count);\n    return range(\n      Math.ceil(start / step) * step,\n      Math.floor(stop / step) * step + step / 2, // inclusive\n      step\n    );\n  }\n\n  function tickStep(start, stop, count) {\n    var step0 = Math.abs(stop - start) / Math.max(0, count),\n        step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n        error = step0 / step1;\n    if (error >= e10) step1 *= 10;\n    else if (error >= e5) step1 *= 5;\n    else if (error >= e2) step1 *= 2;\n    return stop < start ? -step1 : step1;\n  }\n\n  function sturges(values) {\n    return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n  }\n\n  function histogram() {\n    var value = identity,\n        domain = extent,\n        threshold = sturges;\n\n    function histogram(data) {\n      var i,\n          n = data.length,\n          x,\n          values = new Array(n);\n\n      for (i = 0; i < n; ++i) {\n        values[i] = value(data[i], i, data);\n      }\n\n      var xz = domain(values),\n          x0 = xz[0],\n          x1 = xz[1],\n          tz = threshold(values, x0, x1);\n\n      // Convert number of thresholds into uniform thresholds.\n      if (!Array.isArray(tz)) tz = ticks(x0, x1, tz);\n\n      // Remove any thresholds outside the domain.\n      var m = tz.length;\n      while (tz[0] <= x0) tz.shift(), --m;\n      while (tz[m - 1] >= x1) tz.pop(), --m;\n\n      var bins = new Array(m + 1),\n          bin;\n\n      // Initialize bins.\n      for (i = 0; i <= m; ++i) {\n        bin = bins[i] = [];\n        bin.x0 = i > 0 ? tz[i - 1] : x0;\n        bin.x1 = i < m ? tz[i] : x1;\n      }\n\n      // Assign data to bins by value, ignoring any outside the domain.\n      for (i = 0; i < n; ++i) {\n        x = values[i];\n        if (x0 <= x && x <= x1) {\n          bins[bisectRight(tz, x, 0, m)].push(data[i]);\n        }\n      }\n\n      return bins;\n    }\n\n    histogram.value = function(_) {\n      return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n    };\n\n    histogram.domain = function(_) {\n      return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n    };\n\n    histogram.thresholds = function(_) {\n      return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;\n    };\n\n    return histogram;\n  }\n\n  function quantile(array, p, f) {\n    if (f == null) f = number;\n    if (!(n = array.length)) return;\n    if ((p = +p) <= 0 || n < 2) return +f(array[0], 0, array);\n    if (p >= 1) return +f(array[n - 1], n - 1, array);\n    var n,\n        h = (n - 1) * p,\n        i = Math.floor(h),\n        a = +f(array[i], i, array),\n        b = +f(array[i + 1], i + 1, array);\n    return a + (b - a) * (h - i);\n  }\n\n  function freedmanDiaconis(values, min, max) {\n    values = map.call(values, number).sort(ascending);\n    return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function scott(values, min, max) {\n    return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function max(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && b > a) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b > a) a = b;\n    }\n\n    return a;\n  }\n\n  function mean(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1,\n        j = n;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number(array[i]))) s += a; else --j;\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number(f(array[i], i, array)))) s += a; else --j;\n    }\n\n    if (j) return s / j;\n  }\n\n  function median(array, f) {\n    var numbers = [],\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number(array[i]))) numbers.push(a);\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number(f(array[i], i, array)))) numbers.push(a);\n    }\n\n    return quantile(numbers.sort(ascending), 0.5);\n  }\n\n  function merge(arrays) {\n    var n = arrays.length,\n        m,\n        i = -1,\n        j = 0,\n        merged,\n        array;\n\n    while (++i < n) j += arrays[i].length;\n    merged = new Array(j);\n\n    while (--n >= 0) {\n      array = arrays[n];\n      m = array.length;\n      while (--m >= 0) {\n        merged[--j] = array[m];\n      }\n    }\n\n    return merged;\n  }\n\n  function min(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && a > b) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && a > b) a = b;\n    }\n\n    return a;\n  }\n\n  function pairs(array) {\n    var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);\n    while (i < n) pairs[i] = [p, p = array[++i]];\n    return pairs;\n  }\n\n  function permute(array, indexes) {\n    var i = indexes.length, permutes = new Array(i);\n    while (i--) permutes[i] = array[indexes[i]];\n    return permutes;\n  }\n\n  function scan(array, compare) {\n    if (!(n = array.length)) return;\n    var i = 0,\n        n,\n        j = 0,\n        xi,\n        xj = array[j];\n\n    if (!compare) compare = ascending;\n\n    while (++i < n) if (compare(xi = array[i], xj) < 0 || compare(xj, xj) !== 0) xj = xi, j = i;\n\n    if (compare(xj, xj) === 0) return j;\n  }\n\n  function shuffle(array, i0, i1) {\n    var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),\n        t,\n        i;\n\n    while (m) {\n      i = Math.random() * m-- | 0;\n      t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n\n    return array;\n  }\n\n  function sum(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (a = +array[i]) s += a; // Note: zero and null are equivalent.\n    }\n\n    else {\n      while (++i < n) if (a = +f(array[i], i, array)) s += a;\n    }\n\n    return s;\n  }\n\n  function transpose(matrix) {\n    if (!(n = matrix.length)) return [];\n    for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n      for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n        row[j] = matrix[j][i];\n      }\n    }\n    return transpose;\n  }\n\n  function length(d) {\n    return d.length;\n  }\n\n  function zip() {\n    return transpose(arguments);\n  }\n\n  exports.bisect = bisectRight;\n  exports.bisectRight = bisectRight;\n  exports.bisectLeft = bisectLeft;\n  exports.ascending = ascending;\n  exports.bisector = bisector;\n  exports.descending = descending;\n  exports.deviation = deviation;\n  exports.extent = extent;\n  exports.histogram = histogram;\n  exports.thresholdFreedmanDiaconis = freedmanDiaconis;\n  exports.thresholdScott = scott;\n  exports.thresholdSturges = sturges;\n  exports.max = max;\n  exports.mean = mean;\n  exports.median = median;\n  exports.merge = merge;\n  exports.min = min;\n  exports.pairs = pairs;\n  exports.permute = permute;\n  exports.quantile = quantile;\n  exports.range = range;\n  exports.scan = scan;\n  exports.shuffle = shuffle;\n  exports.sum = sum;\n  exports.ticks = ticks;\n  exports.tickStep = tickStep;\n  exports.transpose = transpose;\n  exports.variance = variance;\n  exports.zip = zip;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-collection/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  var prefix = \"$\";\n\n  function Map() {}\n\n  Map.prototype = map.prototype = {\n    constructor: Map,\n    has: function(key) {\n      return (prefix + key) in this;\n    },\n    get: function(key) {\n      return this[prefix + key];\n    },\n    set: function(key, value) {\n      this[prefix + key] = value;\n      return this;\n    },\n    remove: function(key) {\n      var property = prefix + key;\n      return property in this && delete this[property];\n    },\n    clear: function() {\n      for (var property in this) if (property[0] === prefix) delete this[property];\n    },\n    keys: function() {\n      var keys = [];\n      for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n      return keys;\n    },\n    values: function() {\n      var values = [];\n      for (var property in this) if (property[0] === prefix) values.push(this[property]);\n      return values;\n    },\n    entries: function() {\n      var entries = [];\n      for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n      return entries;\n    },\n    size: function() {\n      var size = 0;\n      for (var property in this) if (property[0] === prefix) ++size;\n      return size;\n    },\n    empty: function() {\n      for (var property in this) if (property[0] === prefix) return false;\n      return true;\n    },\n    each: function(f) {\n      for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n    }\n  };\n\n  function map(object, f) {\n    var map = new Map;\n\n    // Copy constructor.\n    if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n    // Index array by numeric index or specified key function.\n    else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n\n      if (f == null) while (++i < n) map.set(i, object[i]);\n      else while (++i < n) map.set(f(o = object[i], i, object), o);\n    }\n\n    // Convert object to map.\n    else if (object) for (var key in object) map.set(key, object[key]);\n\n    return map;\n  }\n\n  function nest() {\n    var keys = [],\n        sortKeys = [],\n        sortValues,\n        rollup,\n        nest;\n\n    function apply(array, depth, createResult, setResult) {\n      if (depth >= keys.length) return rollup != null\n          ? rollup(array) : (sortValues != null\n          ? array.sort(sortValues)\n          : array);\n\n      var i = -1,\n          n = array.length,\n          key = keys[depth++],\n          keyValue,\n          value,\n          valuesByKey = map(),\n          values,\n          result = createResult();\n\n      while (++i < n) {\n        if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n          values.push(value);\n        } else {\n          valuesByKey.set(keyValue, [value]);\n        }\n      }\n\n      valuesByKey.each(function(values, key) {\n        setResult(result, key, apply(values, depth, createResult, setResult));\n      });\n\n      return result;\n    }\n\n    function entries(map, depth) {\n      if (++depth > keys.length) return map;\n      var array, sortKey = sortKeys[depth - 1];\n      if (rollup != null && depth >= keys.length) array = map.entries();\n      else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n      return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n    }\n\n    return nest = {\n      object: function(array) { return apply(array, 0, createObject, setObject); },\n      map: function(array) { return apply(array, 0, createMap, setMap); },\n      entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n      key: function(d) { keys.push(d); return nest; },\n      sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n      sortValues: function(order) { sortValues = order; return nest; },\n      rollup: function(f) { rollup = f; return nest; }\n    };\n  }\n\n  function createObject() {\n    return {};\n  }\n\n  function setObject(object, key, value) {\n    object[key] = value;\n  }\n\n  function createMap() {\n    return map();\n  }\n\n  function setMap(map, key, value) {\n    map.set(key, value);\n  }\n\n  function Set() {}\n\n  var proto = map.prototype;\n\n  Set.prototype = set.prototype = {\n    constructor: Set,\n    has: proto.has,\n    add: function(value) {\n      value += \"\";\n      this[prefix + value] = value;\n      return this;\n    },\n    remove: proto.remove,\n    clear: proto.clear,\n    values: proto.keys,\n    size: proto.size,\n    empty: proto.empty,\n    each: proto.each\n  };\n\n  function set(object, f) {\n    var set = new Set;\n\n    // Copy constructor.\n    if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n    // Otherwise, assume its an array.\n    else if (object) {\n      var i = -1, n = object.length;\n      if (f == null) while (++i < n) set.add(object[i]);\n      else while (++i < n) set.add(f(object[i], i, object));\n    }\n\n    return set;\n  }\n\n  function keys(map) {\n    var keys = [];\n    for (var key in map) keys.push(key);\n    return keys;\n  }\n\n  function values(map) {\n    var values = [];\n    for (var key in map) values.push(map[key]);\n    return values;\n  }\n\n  function entries(map) {\n    var entries = [];\n    for (var key in map) entries.push({key: key, value: map[key]});\n    return entries;\n  }\n\n  exports.nest = nest;\n  exports.set = set;\n  exports.map = map;\n  exports.keys = keys;\n  exports.values = values;\n  exports.entries = entries;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-color/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  function define(constructor, factory, prototype) {\n    constructor.prototype = factory.prototype = prototype;\n    prototype.constructor = constructor;\n  }\n\n  function extend(parent, definition) {\n    var prototype = Object.create(parent.prototype);\n    for (var key in definition) prototype[key] = definition[key];\n    return prototype;\n  }\n\n  function Color() {}\n\n  var darker = 0.7;\n  var brighter = 1 / darker;\n\n  var reHex3 = /^#([0-9a-f]{3})$/;\n  var reHex6 = /^#([0-9a-f]{6})$/;\n  var reRgbInteger = /^rgb\\(\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*\\)$/;\n  var reRgbPercent = /^rgb\\(\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n  var reRgbaInteger = /^rgba\\(\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var reRgbaPercent = /^rgba\\(\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var reHslPercent = /^hsl\\(\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n  var reHslaPercent = /^hsla\\(\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var named = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32\n  };\n\n  define(Color, color, {\n    displayable: function() {\n      return this.rgb().displayable();\n    },\n    toString: function() {\n      return this.rgb() + \"\";\n    }\n  });\n\n  function color(format) {\n    var m;\n    format = (format + \"\").trim().toLowerCase();\n    return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n        : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n        : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n        : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n        : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n        : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n        : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n        : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n        : named.hasOwnProperty(format) ? rgbn(named[format])\n        : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n        : null;\n  }\n\n  function rgbn(n) {\n    return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n  }\n\n  function rgba(r, g, b, a) {\n    if (a <= 0) r = g = b = NaN;\n    return new Rgb(r, g, b, a);\n  }\n\n  function rgbConvert(o) {\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Rgb;\n    o = o.rgb();\n    return new Rgb(o.r, o.g, o.b, o.opacity);\n  }\n\n  function rgb(r, g, b, opacity) {\n    return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n  }\n\n  function Rgb(r, g, b, opacity) {\n    this.r = +r;\n    this.g = +g;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n\n  define(Rgb, rgb, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    rgb: function() {\n      return this;\n    },\n    displayable: function() {\n      return (0 <= this.r && this.r <= 255)\n          && (0 <= this.g && this.g <= 255)\n          && (0 <= this.b && this.b <= 255)\n          && (0 <= this.opacity && this.opacity <= 1);\n    },\n    toString: function() {\n      var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n      return (a === 1 ? \"rgb(\" : \"rgba(\")\n          + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n          + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n          + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n          + (a === 1 ? \")\" : \", \" + a + \")\");\n    }\n  }));\n\n  function hsla(h, s, l, a) {\n    if (a <= 0) h = s = l = NaN;\n    else if (l <= 0 || l >= 1) h = s = NaN;\n    else if (s <= 0) h = NaN;\n    return new Hsl(h, s, l, a);\n  }\n\n  function hslConvert(o) {\n    if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Hsl;\n    if (o instanceof Hsl) return o;\n    o = o.rgb();\n    var r = o.r / 255,\n        g = o.g / 255,\n        b = o.b / 255,\n        min = Math.min(r, g, b),\n        max = Math.max(r, g, b),\n        h = NaN,\n        s = max - min,\n        l = (max + min) / 2;\n    if (s) {\n      if (r === max) h = (g - b) / s + (g < b) * 6;\n      else if (g === max) h = (b - r) / s + 2;\n      else h = (r - g) / s + 4;\n      s /= l < 0.5 ? max + min : 2 - max - min;\n      h *= 60;\n    } else {\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n    return new Hsl(h, s, l, o.opacity);\n  }\n\n  function hsl(h, s, l, opacity) {\n    return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n  }\n\n  function Hsl(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Hsl, hsl, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb: function() {\n      var h = this.h % 360 + (this.h < 0) * 360,\n          s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n          l = this.l,\n          m2 = l + (l < 0.5 ? l : 1 - l) * s,\n          m1 = 2 * l - m2;\n      return new Rgb(\n        hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n        hsl2rgb(h, m1, m2),\n        hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n        this.opacity\n      );\n    },\n    displayable: function() {\n      return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n          && (0 <= this.l && this.l <= 1)\n          && (0 <= this.opacity && this.opacity <= 1);\n    }\n  }));\n\n  /* From FvD 13.37, CSS Color Module Level 3 */\n  function hsl2rgb(h, m1, m2) {\n    return (h < 60 ? m1 + (m2 - m1) * h / 60\n        : h < 180 ? m2\n        : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n        : m1) * 255;\n  }\n\n  var deg2rad = Math.PI / 180;\n  var rad2deg = 180 / Math.PI;\n\n  var Kn = 18;\n  var Xn = 0.950470;\n  var Yn = 1;\n  var Zn = 1.088830;\n  var t0 = 4 / 29;\n  var t1 = 6 / 29;\n  var t2 = 3 * t1 * t1;\n  var t3 = t1 * t1 * t1;\n  function labConvert(o) {\n    if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n    if (o instanceof Hcl) {\n      var h = o.h * deg2rad;\n      return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n    }\n    if (!(o instanceof Rgb)) o = rgbConvert(o);\n    var b = rgb2xyz(o.r),\n        a = rgb2xyz(o.g),\n        l = rgb2xyz(o.b),\n        x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n        y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n        z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n    return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n  }\n\n  function lab(l, a, b, opacity) {\n    return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n  }\n\n  function Lab(l, a, b, opacity) {\n    this.l = +l;\n    this.a = +a;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n\n  define(Lab, lab, extend(Color, {\n    brighter: function(k) {\n      return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n    },\n    darker: function(k) {\n      return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n    },\n    rgb: function() {\n      var y = (this.l + 16) / 116,\n          x = isNaN(this.a) ? y : y + this.a / 500,\n          z = isNaN(this.b) ? y : y - this.b / 200;\n      y = Yn * lab2xyz(y);\n      x = Xn * lab2xyz(x);\n      z = Zn * lab2xyz(z);\n      return new Rgb(\n        xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n        xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n        xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n        this.opacity\n      );\n    }\n  }));\n\n  function xyz2lab(t) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n  }\n\n  function lab2xyz(t) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n  }\n\n  function xyz2rgb(x) {\n    return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n  }\n\n  function rgb2xyz(x) {\n    return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n  }\n\n  function hclConvert(o) {\n    if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n    if (!(o instanceof Lab)) o = labConvert(o);\n    var h = Math.atan2(o.b, o.a) * rad2deg;\n    return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n  }\n\n  function hcl(h, c, l, opacity) {\n    return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n  }\n\n  function Hcl(h, c, l, opacity) {\n    this.h = +h;\n    this.c = +c;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Hcl, hcl, extend(Color, {\n    brighter: function(k) {\n      return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n    },\n    darker: function(k) {\n      return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n    },\n    rgb: function() {\n      return labConvert(this).rgb();\n    }\n  }));\n\n  var A = -0.14861;\n  var B = +1.78277;\n  var C = -0.29227;\n  var D = -0.90649;\n  var E = +1.97294;\n  var ED = E * D;\n  var EB = E * B;\n  var BC_DA = B * C - D * A;\n  function cubehelixConvert(o) {\n    if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Rgb)) o = rgbConvert(o);\n    var r = o.r / 255,\n        g = o.g / 255,\n        b = o.b / 255,\n        l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n        bl = b - l,\n        k = (E * (g - l) - C * bl) / D,\n        s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n        h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n    return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n  }\n\n  function cubehelix(h, s, l, opacity) {\n    return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n  }\n\n  function Cubehelix(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Cubehelix, cubehelix, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb: function() {\n      var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n          l = +this.l,\n          a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n          cosh = Math.cos(h),\n          sinh = Math.sin(h);\n      return new Rgb(\n        255 * (l + a * (A * cosh + B * sinh)),\n        255 * (l + a * (C * cosh + D * sinh)),\n        255 * (l + a * (E * cosh)),\n        this.opacity\n      );\n    }\n  }));\n\n  exports.color = color;\n  exports.rgb = rgb;\n  exports.hsl = hsl;\n  exports.lab = lab;\n  exports.hcl = hcl;\n  exports.cubehelix = cubehelix;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-dispatch/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  var noop = {value: function() {}};\n\n  function dispatch() {\n    for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n      if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n      _[t] = [];\n    }\n    return new Dispatch(_);\n  }\n\n  function Dispatch(_) {\n    this._ = _;\n  }\n\n  function parseTypenames(typenames, types) {\n    return typenames.trim().split(/^|\\s+/).map(function(t) {\n      var name = \"\", i = t.indexOf(\".\");\n      if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n      if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n      return {type: t, name: name};\n    });\n  }\n\n  Dispatch.prototype = dispatch.prototype = {\n    constructor: Dispatch,\n    on: function(typename, callback) {\n      var _ = this._,\n          T = parseTypenames(typename + \"\", _),\n          t,\n          i = -1,\n          n = T.length;\n\n      // If no callback was specified, return the callback of the given type and name.\n      if (arguments.length < 2) {\n        while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n        return;\n      }\n\n      // If a type was specified, set the callback for the given type and name.\n      // Otherwise, if a null callback was specified, remove callbacks of the given name.\n      if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n      while (++i < n) {\n        if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n        else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n      }\n\n      return this;\n    },\n    copy: function() {\n      var copy = {}, _ = this._;\n      for (var t in _) copy[t] = _[t].slice();\n      return new Dispatch(copy);\n    },\n    call: function(type, that) {\n      if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n      if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n      for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n    },\n    apply: function(type, that, args) {\n      if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n      for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n    }\n  };\n\n  function get(type, name) {\n    for (var i = 0, n = type.length, c; i < n; ++i) {\n      if ((c = type[i]).name === name) {\n        return c.value;\n      }\n    }\n  }\n\n  function set(type, name, callback) {\n    for (var i = 0, n = type.length; i < n; ++i) {\n      if (type[i].name === name) {\n        type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n        break;\n      }\n    }\n    if (callback != null) type.push({name: name, value: callback});\n    return type;\n  }\n\n  exports.dispatch = dispatch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-format/ Version 1.0.2. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  // Computes the decimal coefficient and exponent of the specified number x with\n  // significant digits p, where x is positive and p is in [1, 21] or undefined.\n  // For example, formatDecimal(1.23) returns [\"123\", 0].\n  function formatDecimal(x, p) {\n    if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n    var i, coefficient = x.slice(0, i);\n\n    // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n    // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n    return [\n      coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n      +x.slice(i + 1)\n    ];\n  }\n\n  function exponent(x) {\n    return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n  }\n\n  function formatGroup(grouping, thousands) {\n    return function(value, width) {\n      var i = value.length,\n          t = [],\n          j = 0,\n          g = grouping[0],\n          length = 0;\n\n      while (i > 0 && g > 0) {\n        if (length + g + 1 > width) g = Math.max(1, width - length);\n        t.push(value.substring(i -= g, i + g));\n        if ((length += g + 1) > width) break;\n        g = grouping[j = (j + 1) % grouping.length];\n      }\n\n      return t.reverse().join(thousands);\n    };\n  }\n\n  function formatDefault(x, p) {\n    x = x.toPrecision(p);\n\n    out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n      switch (x[i]) {\n        case \".\": i0 = i1 = i; break;\n        case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n        case \"e\": break out;\n        default: if (i0 > 0) i0 = 0; break;\n      }\n    }\n\n    return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n  }\n\n  var prefixExponent;\n\n  function formatPrefixAuto(x, p) {\n    var d = formatDecimal(x, p);\n    if (!d) return x + \"\";\n    var coefficient = d[0],\n        exponent = d[1],\n        i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n        n = coefficient.length;\n    return i === n ? coefficient\n        : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n        : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n        : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n  }\n\n  function formatRounded(x, p) {\n    var d = formatDecimal(x, p);\n    if (!d) return x + \"\";\n    var coefficient = d[0],\n        exponent = d[1];\n    return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n        : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n        : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n  }\n\n  var formatTypes = {\n    \"\": formatDefault,\n    \"%\": function(x, p) { return (x * 100).toFixed(p); },\n    \"b\": function(x) { return Math.round(x).toString(2); },\n    \"c\": function(x) { return x + \"\"; },\n    \"d\": function(x) { return Math.round(x).toString(10); },\n    \"e\": function(x, p) { return x.toExponential(p); },\n    \"f\": function(x, p) { return x.toFixed(p); },\n    \"g\": function(x, p) { return x.toPrecision(p); },\n    \"o\": function(x) { return Math.round(x).toString(8); },\n    \"p\": function(x, p) { return formatRounded(x * 100, p); },\n    \"r\": formatRounded,\n    \"s\": formatPrefixAuto,\n    \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n    \"x\": function(x) { return Math.round(x).toString(16); }\n  };\n\n  // [[fill]align][sign][symbol][0][width][,][.precision][type]\n  var re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\n  function formatSpecifier(specifier) {\n    return new FormatSpecifier(specifier);\n  }\n\n  function FormatSpecifier(specifier) {\n    if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n    var match,\n        fill = match[1] || \" \",\n        align = match[2] || \">\",\n        sign = match[3] || \"-\",\n        symbol = match[4] || \"\",\n        zero = !!match[5],\n        width = match[6] && +match[6],\n        comma = !!match[7],\n        precision = match[8] && +match[8].slice(1),\n        type = match[9] || \"\";\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // Map invalid types to the default format.\n    else if (!formatTypes[type]) type = \"\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    this.fill = fill;\n    this.align = align;\n    this.sign = sign;\n    this.symbol = symbol;\n    this.zero = zero;\n    this.width = width;\n    this.comma = comma;\n    this.precision = precision;\n    this.type = type;\n  }\n\n  FormatSpecifier.prototype.toString = function() {\n    return this.fill\n        + this.align\n        + this.sign\n        + this.symbol\n        + (this.zero ? \"0\" : \"\")\n        + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n        + (this.comma ? \",\" : \"\")\n        + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n        + this.type;\n  };\n\n  var prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\n  function identity(x) {\n    return x;\n  }\n\n  function formatLocale(locale) {\n    var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n        currency = locale.currency,\n        decimal = locale.decimal;\n\n    function newFormat(specifier) {\n      specifier = formatSpecifier(specifier);\n\n      var fill = specifier.fill,\n          align = specifier.align,\n          sign = specifier.sign,\n          symbol = specifier.symbol,\n          zero = specifier.zero,\n          width = specifier.width,\n          comma = specifier.comma,\n          precision = specifier.precision,\n          type = specifier.type;\n\n      // Compute the prefix and suffix.\n      // For SI-prefix, the suffix is lazily computed.\n      var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n          suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? \"%\" : \"\";\n\n      // What format function should we use?\n      // Is this an integer type?\n      // Can this type generate exponential notation?\n      var formatType = formatTypes[type],\n          maybeSuffix = !type || /[defgprs%]/.test(type);\n\n      // Set the default precision if not specified,\n      // or clamp the specified precision to the supported range.\n      // For significant precision, it must be in [1, 21].\n      // For fixed precision, it must be in [0, 20].\n      precision = precision == null ? (type ? 6 : 12)\n          : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n          : Math.max(0, Math.min(20, precision));\n\n      function format(value) {\n        var valuePrefix = prefix,\n            valueSuffix = suffix,\n            i, n, c;\n\n        if (type === \"c\") {\n          valueSuffix = formatType(value) + valueSuffix;\n          value = \"\";\n        } else {\n          value = +value;\n\n          // Convert negative to positive, and compute the prefix.\n          // Note that -0 is not less than 0, but 1 / -0 is!\n          var valueNegative = (value < 0 || 1 / value < 0) && (value *= -1, true);\n\n          // Perform the initial formatting.\n          value = formatType(value, precision);\n\n          // If the original value was negative, it may be rounded to zero during\n          // formatting; treat this as (positive) zero.\n          if (valueNegative) {\n            i = -1, n = value.length;\n            valueNegative = false;\n            while (++i < n) {\n              if (c = value.charCodeAt(i), (48 < c && c < 58)\n                  || (type === \"x\" && 96 < c && c < 103)\n                  || (type === \"X\" && 64 < c && c < 71)) {\n                valueNegative = true;\n                break;\n              }\n            }\n          }\n\n          // Compute the prefix and suffix.\n          valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n          valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n          // Break the formatted value into the integer value part that can be\n          // grouped, and fractional or exponential suffix part that is not.\n          if (maybeSuffix) {\n            i = -1, n = value.length;\n            while (++i < n) {\n              if (c = value.charCodeAt(i), 48 > c || c > 57) {\n                valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n                value = value.slice(0, i);\n                break;\n              }\n            }\n          }\n        }\n\n        // If the fill character is not \"0\", grouping is applied before padding.\n        if (comma && !zero) value = group(value, Infinity);\n\n        // Compute the padding.\n        var length = valuePrefix.length + value.length + valueSuffix.length,\n            padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n        // If the fill character is \"0\", grouping is applied after padding.\n        if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n        // Reconstruct the final output based on the desired alignment.\n        switch (align) {\n          case \"<\": return valuePrefix + value + valueSuffix + padding;\n          case \"=\": return valuePrefix + padding + value + valueSuffix;\n          case \"^\": return padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n        }\n        return padding + valuePrefix + value + valueSuffix;\n      }\n\n      format.toString = function() {\n        return specifier + \"\";\n      };\n\n      return format;\n    }\n\n    function formatPrefix(specifier, value) {\n      var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n          e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n          k = Math.pow(10, -e),\n          prefix = prefixes[8 + e / 3];\n      return function(value) {\n        return f(k * value) + prefix;\n      };\n    }\n\n    return {\n      format: newFormat,\n      formatPrefix: formatPrefix\n    };\n  }\n\n  var locale;\n  defaultLocale({\n    decimal: \".\",\n    thousands: \",\",\n    grouping: [3],\n    currency: [\"$\", \"\"]\n  });\n\n  function defaultLocale(definition) {\n    locale = formatLocale(definition);\n    exports.format = locale.format;\n    exports.formatPrefix = locale.formatPrefix;\n    return locale;\n  }\n\n  function precisionFixed(step) {\n    return Math.max(0, -exponent(Math.abs(step)));\n  }\n\n  function precisionPrefix(step, value) {\n    return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n  }\n\n  function precisionRound(step, max) {\n    step = Math.abs(step), max = Math.abs(max) - step;\n    return Math.max(0, exponent(max) - exponent(step)) + 1;\n  }\n\n  exports.formatDefaultLocale = defaultLocale;\n  exports.formatLocale = formatLocale;\n  exports.formatSpecifier = formatSpecifier;\n  exports.precisionFixed = precisionFixed;\n  exports.precisionPrefix = precisionPrefix;\n  exports.precisionRound = precisionRound;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-interpolate/ Version 1.1.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-color')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-color'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3));\n}(this, function (exports,d3Color) { 'use strict';\n\n  function basis(t1, v0, v1, v2, v3) {\n    var t2 = t1 * t1, t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n        + (4 - 6 * t2 + 3 * t3) * v1\n        + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n        + t3 * v3) / 6;\n  }\n\n  function basis$1(values) {\n    var n = values.length - 1;\n    return function(t) {\n      var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n          v1 = values[i],\n          v2 = values[i + 1],\n          v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n          v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n      return basis((t - i / n) * n, v0, v1, v2, v3);\n    };\n  }\n\n  function basisClosed(values) {\n    var n = values.length;\n    return function(t) {\n      var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n          v0 = values[(i + n - 1) % n],\n          v1 = values[i % n],\n          v2 = values[(i + 1) % n],\n          v3 = values[(i + 2) % n];\n      return basis((t - i / n) * n, v0, v1, v2, v3);\n    };\n  }\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function linear(a, d) {\n    return function(t) {\n      return a + t * d;\n    };\n  }\n\n  function exponential(a, b, y) {\n    return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n      return Math.pow(a + t * b, y);\n    };\n  }\n\n  function hue(a, b) {\n    var d = b - a;\n    return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n  }\n\n  function gamma(y) {\n    return (y = +y) === 1 ? nogamma : function(a, b) {\n      return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n    };\n  }\n\n  function nogamma(a, b) {\n    var d = b - a;\n    return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n  }\n\n  var rgb$1 = (function rgbGamma(y) {\n    var color = gamma(y);\n\n    function rgb(start, end) {\n      var r = color((start = d3Color.rgb(start)).r, (end = d3Color.rgb(end)).r),\n          g = color(start.g, end.g),\n          b = color(start.b, end.b),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.r = r(t);\n        start.g = g(t);\n        start.b = b(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    rgb.gamma = rgbGamma;\n\n    return rgb;\n  })(1);\n\n  function rgbSpline(spline) {\n    return function(colors) {\n      var n = colors.length,\n          r = new Array(n),\n          g = new Array(n),\n          b = new Array(n),\n          i, color;\n      for (i = 0; i < n; ++i) {\n        color = d3Color.rgb(colors[i]);\n        r[i] = color.r || 0;\n        g[i] = color.g || 0;\n        b[i] = color.b || 0;\n      }\n      r = spline(r);\n      g = spline(g);\n      b = spline(b);\n      color.opacity = 1;\n      return function(t) {\n        color.r = r(t);\n        color.g = g(t);\n        color.b = b(t);\n        return color + \"\";\n      };\n    };\n  }\n\n  var rgbBasis = rgbSpline(basis$1);\n  var rgbBasisClosed = rgbSpline(basisClosed);\n\n  function array(a, b) {\n    var nb = b ? b.length : 0,\n        na = a ? Math.min(nb, a.length) : 0,\n        x = new Array(nb),\n        c = new Array(nb),\n        i;\n\n    for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n    for (; i < nb; ++i) c[i] = b[i];\n\n    return function(t) {\n      for (i = 0; i < na; ++i) c[i] = x[i](t);\n      return c;\n    };\n  }\n\n  function date(a, b) {\n    var d = new Date;\n    return a = +a, b -= a, function(t) {\n      return d.setTime(a + b * t), d;\n    };\n  }\n\n  function number(a, b) {\n    return a = +a, b -= a, function(t) {\n      return a + b * t;\n    };\n  }\n\n  function object(a, b) {\n    var i = {},\n        c = {},\n        k;\n\n    if (a === null || typeof a !== \"object\") a = {};\n    if (b === null || typeof b !== \"object\") b = {};\n\n    for (k in b) {\n      if (k in a) {\n        i[k] = value(a[k], b[k]);\n      } else {\n        c[k] = b[k];\n      }\n    }\n\n    return function(t) {\n      for (k in i) c[k] = i[k](t);\n      return c;\n    };\n  }\n\n  var reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g;\n  var reB = new RegExp(reA.source, \"g\");\n  function zero(b) {\n    return function() {\n      return b;\n    };\n  }\n\n  function one(b) {\n    return function(t) {\n      return b(t) + \"\";\n    };\n  }\n\n  function string(a, b) {\n    var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n        am, // current match in a\n        bm, // current match in b\n        bs, // string preceding current number in b, if any\n        i = -1, // index in s\n        s = [], // string constants and placeholders\n        q = []; // number interpolators\n\n    // Coerce inputs to strings.\n    a = a + \"\", b = b + \"\";\n\n    // Interpolate pairs of numbers in a & b.\n    while ((am = reA.exec(a))\n        && (bm = reB.exec(b))) {\n      if ((bs = bm.index) > bi) { // a string precedes the next number in b\n        bs = b.slice(bi, bs);\n        if (s[i]) s[i] += bs; // coalesce with previous string\n        else s[++i] = bs;\n      }\n      if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n        if (s[i]) s[i] += bm; // coalesce with previous string\n        else s[++i] = bm;\n      } else { // interpolate non-matching numbers\n        s[++i] = null;\n        q.push({i: i, x: number(am, bm)});\n      }\n      bi = reB.lastIndex;\n    }\n\n    // Add remains of b.\n    if (bi < b.length) {\n      bs = b.slice(bi);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n\n    // Special optimization for only a single match.\n    // Otherwise, interpolate each of the numbers and rejoin the string.\n    return s.length < 2 ? (q[0]\n        ? one(q[0].x)\n        : zero(b))\n        : (b = q.length, function(t) {\n            for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n            return s.join(\"\");\n          });\n  }\n\n  function value(a, b) {\n    var t = typeof b, c;\n    return b == null || t === \"boolean\" ? constant(b)\n        : (t === \"number\" ? number\n        : t === \"string\" ? ((c = d3Color.color(b)) ? (b = c, rgb$1) : string)\n        : b instanceof d3Color.color ? rgb$1\n        : b instanceof Date ? date\n        : Array.isArray(b) ? array\n        : isNaN(b) ? object\n        : number)(a, b);\n  }\n\n  function round(a, b) {\n    return a = +a, b -= a, function(t) {\n      return Math.round(a + b * t);\n    };\n  }\n\n  var degrees = 180 / Math.PI;\n\n  var identity = {\n    translateX: 0,\n    translateY: 0,\n    rotate: 0,\n    skewX: 0,\n    scaleX: 1,\n    scaleY: 1\n  };\n\n  function decompose(a, b, c, d, e, f) {\n    var scaleX, scaleY, skewX;\n    if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n    if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n    if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n    if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n    return {\n      translateX: e,\n      translateY: f,\n      rotate: Math.atan2(b, a) * degrees,\n      skewX: Math.atan(skewX) * degrees,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var cssNode;\n  var cssRoot;\n  var cssView;\n  var svgNode;\n  function parseCss(value) {\n    if (value === \"none\") return identity;\n    if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n    cssNode.style.transform = value;\n    value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n    cssRoot.removeChild(cssNode);\n    value = value.slice(7, -1).split(\",\");\n    return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n  }\n\n  function parseSvg(value) {\n    if (value == null) return identity;\n    if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n    svgNode.setAttribute(\"transform\", value);\n    if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n    value = value.matrix;\n    return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n  }\n\n  function interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n    function pop(s) {\n      return s.length ? s.pop() + \" \" : \"\";\n    }\n\n    function translate(xa, ya, xb, yb, s, q) {\n      if (xa !== xb || ya !== yb) {\n        var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n        q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n      } else if (xb || yb) {\n        s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n      }\n    }\n\n    function rotate(a, b, s, q) {\n      if (a !== b) {\n        if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n        q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n      } else if (b) {\n        s.push(pop(s) + \"rotate(\" + b + degParen);\n      }\n    }\n\n    function skewX(a, b, s, q) {\n      if (a !== b) {\n        q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n      } else if (b) {\n        s.push(pop(s) + \"skewX(\" + b + degParen);\n      }\n    }\n\n    function scale(xa, ya, xb, yb, s, q) {\n      if (xa !== xb || ya !== yb) {\n        var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n        q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n      } else if (xb !== 1 || yb !== 1) {\n        s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n      }\n    }\n\n    return function(a, b) {\n      var s = [], // string constants and placeholders\n          q = []; // number interpolators\n      a = parse(a), b = parse(b);\n      translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n      rotate(a.rotate, b.rotate, s, q);\n      skewX(a.skewX, b.skewX, s, q);\n      scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n      a = b = null; // gc\n      return function(t) {\n        var i = -1, n = q.length, o;\n        while (++i < n) s[(o = q[i]).i] = o.x(t);\n        return s.join(\"\");\n      };\n    };\n  }\n\n  var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\n  var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n\n  var rho = Math.SQRT2;\n  var rho2 = 2;\n  var rho4 = 4;\n  var epsilon2 = 1e-12;\n  function cosh(x) {\n    return ((x = Math.exp(x)) + 1 / x) / 2;\n  }\n\n  function sinh(x) {\n    return ((x = Math.exp(x)) - 1 / x) / 2;\n  }\n\n  function tanh(x) {\n    return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n  }\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000;\n\n    return i;\n  }\n\n  function hsl$1(hue) {\n    return function(start, end) {\n      var h = hue((start = d3Color.hsl(start)).h, (end = d3Color.hsl(end)).h),\n          s = nogamma(start.s, end.s),\n          l = nogamma(start.l, end.l),\n          opacity = nogamma(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n  }\n\n  var hsl$2 = hsl$1(hue);\n  var hslLong = hsl$1(nogamma);\n\n  function lab$1(start, end) {\n    var l = nogamma((start = d3Color.lab(start)).l, (end = d3Color.lab(end)).l),\n        a = nogamma(start.a, end.a),\n        b = nogamma(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.l = l(t);\n      start.a = a(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  function hcl$1(hue) {\n    return function(start, end) {\n      var h = hue((start = d3Color.hcl(start)).h, (end = d3Color.hcl(end)).h),\n          c = nogamma(start.c, end.c),\n          l = nogamma(start.l, end.l),\n          opacity = nogamma(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.c = c(t);\n        start.l = l(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n  }\n\n  var hcl$2 = hcl$1(hue);\n  var hclLong = hcl$1(nogamma);\n\n  function cubehelix$1(hue) {\n    return (function cubehelixGamma(y) {\n      y = +y;\n\n      function cubehelix(start, end) {\n        var h = hue((start = d3Color.cubehelix(start)).h, (end = d3Color.cubehelix(end)).h),\n            s = nogamma(start.s, end.s),\n            l = nogamma(start.l, end.l),\n            opacity = nogamma(start.opacity, end.opacity);\n        return function(t) {\n          start.h = h(t);\n          start.s = s(t);\n          start.l = l(Math.pow(t, y));\n          start.opacity = opacity(t);\n          return start + \"\";\n        };\n      }\n\n      cubehelix.gamma = cubehelixGamma;\n\n      return cubehelix;\n    })(1);\n  }\n\n  var cubehelix$2 = cubehelix$1(hue);\n  var cubehelixLong = cubehelix$1(nogamma);\n\n  function quantize(interpolator, n) {\n    var samples = new Array(n);\n    for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n    return samples;\n  }\n\n  exports.interpolate = value;\n  exports.interpolateArray = array;\n  exports.interpolateBasis = basis$1;\n  exports.interpolateBasisClosed = basisClosed;\n  exports.interpolateDate = date;\n  exports.interpolateNumber = number;\n  exports.interpolateObject = object;\n  exports.interpolateRound = round;\n  exports.interpolateString = string;\n  exports.interpolateTransformCss = interpolateTransformCss;\n  exports.interpolateTransformSvg = interpolateTransformSvg;\n  exports.interpolateZoom = zoom;\n  exports.interpolateRgb = rgb$1;\n  exports.interpolateRgbBasis = rgbBasis;\n  exports.interpolateRgbBasisClosed = rgbBasisClosed;\n  exports.interpolateHsl = hsl$2;\n  exports.interpolateHslLong = hslLong;\n  exports.interpolateLab = lab$1;\n  exports.interpolateHcl = hcl$2;\n  exports.interpolateHclLong = hclLong;\n  exports.interpolateCubehelix = cubehelix$2;\n  exports.interpolateCubehelixLong = cubehelixLong;\n  exports.quantize = quantize;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-scale/ Version 1.0.3. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-collection'), require('d3-interpolate'), require('d3-format'), require('d3-time'), require('d3-time-format'), require('d3-color')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-collection', 'd3-interpolate', 'd3-format', 'd3-time', 'd3-time-format', 'd3-color'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3,global.d3,global.d3,global.d3,global.d3,global.d3,global.d3));\n}(this, function (exports,d3Array,d3Collection,d3Interpolate,d3Format,d3Time,d3TimeFormat,d3Color) { 'use strict';\n\n  var array = Array.prototype;\n\n  var map$1 = array.map;\n  var slice = array.slice;\n\n  var implicit = {name: \"implicit\"};\n\n  function ordinal(range) {\n    var index = d3Collection.map(),\n        domain = [],\n        unknown = implicit;\n\n    range = range == null ? [] : slice.call(range);\n\n    function scale(d) {\n      var key = d + \"\", i = index.get(key);\n      if (!i) {\n        if (unknown !== implicit) return unknown;\n        index.set(key, i = domain.push(d));\n      }\n      return range[(i - 1) % range.length];\n    }\n\n    scale.domain = function(_) {\n      if (!arguments.length) return domain.slice();\n      domain = [], index = d3Collection.map();\n      var i = -1, n = _.length, d, key;\n      while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n      return scale;\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), scale) : range.slice();\n    };\n\n    scale.unknown = function(_) {\n      return arguments.length ? (unknown = _, scale) : unknown;\n    };\n\n    scale.copy = function() {\n      return ordinal()\n          .domain(domain)\n          .range(range)\n          .unknown(unknown);\n    };\n\n    return scale;\n  }\n\n  function band() {\n    var scale = ordinal().unknown(undefined),\n        domain = scale.domain,\n        ordinalRange = scale.range,\n        range = [0, 1],\n        step,\n        bandwidth,\n        round = false,\n        paddingInner = 0,\n        paddingOuter = 0,\n        align = 0.5;\n\n    delete scale.unknown;\n\n    function rescale() {\n      var n = domain().length,\n          reverse = range[1] < range[0],\n          start = range[reverse - 0],\n          stop = range[1 - reverse];\n      step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n      if (round) step = Math.floor(step);\n      start += (stop - start - step * (n - paddingInner)) * align;\n      bandwidth = step * (1 - paddingInner);\n      if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n      var values = d3Array.range(n).map(function(i) { return start + step * i; });\n      return ordinalRange(reverse ? values.reverse() : values);\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain(_), rescale()) : domain();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n    };\n\n    scale.rangeRound = function(_) {\n      return range = [+_[0], +_[1]], round = true, rescale();\n    };\n\n    scale.bandwidth = function() {\n      return bandwidth;\n    };\n\n    scale.step = function() {\n      return step;\n    };\n\n    scale.round = function(_) {\n      return arguments.length ? (round = !!_, rescale()) : round;\n    };\n\n    scale.padding = function(_) {\n      return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n    };\n\n    scale.paddingInner = function(_) {\n      return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n    };\n\n    scale.paddingOuter = function(_) {\n      return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;\n    };\n\n    scale.align = function(_) {\n      return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n    };\n\n    scale.copy = function() {\n      return band()\n          .domain(domain())\n          .range(range)\n          .round(round)\n          .paddingInner(paddingInner)\n          .paddingOuter(paddingOuter)\n          .align(align);\n    };\n\n    return rescale();\n  }\n\n  function pointish(scale) {\n    var copy = scale.copy;\n\n    scale.padding = scale.paddingOuter;\n    delete scale.paddingInner;\n    delete scale.paddingOuter;\n\n    scale.copy = function() {\n      return pointish(copy());\n    };\n\n    return scale;\n  }\n\n  function point() {\n    return pointish(band().paddingInner(1));\n  }\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function number(x) {\n    return +x;\n  }\n\n  var unit = [0, 1];\n\n  function deinterpolate(a, b) {\n    return (b -= (a = +a))\n        ? function(x) { return (x - a) / b; }\n        : constant(b);\n  }\n\n  function deinterpolateClamp(deinterpolate) {\n    return function(a, b) {\n      var d = deinterpolate(a = +a, b = +b);\n      return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n    };\n  }\n\n  function reinterpolateClamp(reinterpolate) {\n    return function(a, b) {\n      var r = reinterpolate(a = +a, b = +b);\n      return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n    };\n  }\n\n  function bimap(domain, range, deinterpolate, reinterpolate) {\n    var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n    if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n    else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n    return function(x) { return r0(d0(x)); };\n  }\n\n  function polymap(domain, range, deinterpolate, reinterpolate) {\n    var j = Math.min(domain.length, range.length) - 1,\n        d = new Array(j),\n        r = new Array(j),\n        i = -1;\n\n    // Reverse descending domains.\n    if (domain[j] < domain[0]) {\n      domain = domain.slice().reverse();\n      range = range.slice().reverse();\n    }\n\n    while (++i < j) {\n      d[i] = deinterpolate(domain[i], domain[i + 1]);\n      r[i] = reinterpolate(range[i], range[i + 1]);\n    }\n\n    return function(x) {\n      var i = d3Array.bisect(domain, x, 1, j) - 1;\n      return r[i](d[i](x));\n    };\n  }\n\n  function copy(source, target) {\n    return target\n        .domain(source.domain())\n        .range(source.range())\n        .interpolate(source.interpolate())\n        .clamp(source.clamp());\n  }\n\n  // deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n  // reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\n  function continuous(deinterpolate$$, reinterpolate) {\n    var domain = unit,\n        range = unit,\n        interpolate = d3Interpolate.interpolate,\n        clamp = false,\n        piecewise,\n        output,\n        input;\n\n    function rescale() {\n      piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n      output = input = null;\n      return scale;\n    }\n\n    function scale(x) {\n      return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate$$) : deinterpolate$$, interpolate)))(+x);\n    }\n\n    scale.invert = function(y) {\n      return (input || (input = piecewise(range, domain, deinterpolate, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain = map$1.call(_, number), rescale()) : domain.slice();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n    };\n\n    scale.rangeRound = function(_) {\n      return range = slice.call(_), interpolate = d3Interpolate.interpolateRound, rescale();\n    };\n\n    scale.clamp = function(_) {\n      return arguments.length ? (clamp = !!_, rescale()) : clamp;\n    };\n\n    scale.interpolate = function(_) {\n      return arguments.length ? (interpolate = _, rescale()) : interpolate;\n    };\n\n    return rescale();\n  }\n\n  function tickFormat(domain, count, specifier) {\n    var start = domain[0],\n        stop = domain[domain.length - 1],\n        step = d3Array.tickStep(start, stop, count == null ? 10 : count),\n        precision;\n    specifier = d3Format.formatSpecifier(specifier == null ? \",f\" : specifier);\n    switch (specifier.type) {\n      case \"s\": {\n        var value = Math.max(Math.abs(start), Math.abs(stop));\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionPrefix(step, value))) specifier.precision = precision;\n        return d3Format.formatPrefix(specifier, value);\n      }\n      case \"\":\n      case \"e\":\n      case \"g\":\n      case \"p\":\n      case \"r\": {\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n        break;\n      }\n      case \"f\":\n      case \"%\": {\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n        break;\n      }\n    }\n    return d3Format.format(specifier);\n  }\n\n  function linearish(scale) {\n    var domain = scale.domain;\n\n    scale.ticks = function(count) {\n      var d = domain();\n      return d3Array.ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      return tickFormat(domain(), count, specifier);\n    };\n\n    scale.nice = function(count) {\n      var d = domain(),\n          i = d.length - 1,\n          n = count == null ? 10 : count,\n          start = d[0],\n          stop = d[i],\n          step = d3Array.tickStep(start, stop, n);\n\n      if (step) {\n        step = d3Array.tickStep(Math.floor(start / step) * step, Math.ceil(stop / step) * step, n);\n        d[0] = Math.floor(start / step) * step;\n        d[i] = Math.ceil(stop / step) * step;\n        domain(d);\n      }\n\n      return scale;\n    };\n\n    return scale;\n  }\n\n  function linear() {\n    var scale = continuous(deinterpolate, d3Interpolate.interpolateNumber);\n\n    scale.copy = function() {\n      return copy(scale, linear());\n    };\n\n    return linearish(scale);\n  }\n\n  function identity() {\n    var domain = [0, 1];\n\n    function scale(x) {\n      return +x;\n    }\n\n    scale.invert = scale;\n\n    scale.domain = scale.range = function(_) {\n      return arguments.length ? (domain = map$1.call(_, number), scale) : domain.slice();\n    };\n\n    scale.copy = function() {\n      return identity().domain(domain);\n    };\n\n    return linearish(scale);\n  }\n\n  function nice(domain, interval) {\n    domain = domain.slice();\n\n    var i0 = 0,\n        i1 = domain.length - 1,\n        x0 = domain[i0],\n        x1 = domain[i1],\n        t;\n\n    if (x1 < x0) {\n      t = i0, i0 = i1, i1 = t;\n      t = x0, x0 = x1, x1 = t;\n    }\n\n    domain[i0] = interval.floor(x0);\n    domain[i1] = interval.ceil(x1);\n    return domain;\n  }\n\n  function deinterpolate$1(a, b) {\n    return (b = Math.log(b / a))\n        ? function(x) { return Math.log(x / a) / b; }\n        : constant(b);\n  }\n\n  function reinterpolate(a, b) {\n    return a < 0\n        ? function(t) { return -Math.pow(-b, t) * Math.pow(-a, 1 - t); }\n        : function(t) { return Math.pow(b, t) * Math.pow(a, 1 - t); };\n  }\n\n  function pow10(x) {\n    return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n  }\n\n  function powp(base) {\n    return base === 10 ? pow10\n        : base === Math.E ? Math.exp\n        : function(x) { return Math.pow(base, x); };\n  }\n\n  function logp(base) {\n    return base === Math.E ? Math.log\n        : base === 10 && Math.log10\n        || base === 2 && Math.log2\n        || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n  }\n\n  function reflect(f) {\n    return function(x) {\n      return -f(-x);\n    };\n  }\n\n  function log() {\n    var scale = continuous(deinterpolate$1, reinterpolate).domain([1, 10]),\n        domain = scale.domain,\n        base = 10,\n        logs = logp(10),\n        pows = powp(10);\n\n    function rescale() {\n      logs = logp(base), pows = powp(base);\n      if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);\n      return scale;\n    }\n\n    scale.base = function(_) {\n      return arguments.length ? (base = +_, rescale()) : base;\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain(_), rescale()) : domain();\n    };\n\n    scale.ticks = function(count) {\n      var d = domain(),\n          u = d[0],\n          v = d[d.length - 1],\n          r;\n\n      if (r = v < u) i = u, u = v, v = i;\n\n      var i = logs(u),\n          j = logs(v),\n          p,\n          k,\n          t,\n          n = count == null ? 10 : +count,\n          z = [];\n\n      if (!(base % 1) && j - i < n) {\n        i = Math.round(i) - 1, j = Math.round(j) + 1;\n        if (u > 0) for (; i < j; ++i) {\n          for (k = 1, p = pows(i); k < base; ++k) {\n            t = p * k;\n            if (t < u) continue;\n            if (t > v) break;\n            z.push(t);\n          }\n        } else for (; i < j; ++i) {\n          for (k = base - 1, p = pows(i); k >= 1; --k) {\n            t = p * k;\n            if (t < u) continue;\n            if (t > v) break;\n            z.push(t);\n          }\n        }\n      } else {\n        z = d3Array.ticks(i, j, Math.min(j - i, n)).map(pows);\n      }\n\n      return r ? z.reverse() : z;\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n      if (typeof specifier !== \"function\") specifier = d3Format.format(specifier);\n      if (count === Infinity) return specifier;\n      if (count == null) count = 10;\n      var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n      return function(d) {\n        var i = d / pows(Math.round(logs(d)));\n        if (i * base < base - 0.5) i *= base;\n        return i <= k ? specifier(d) : \"\";\n      };\n    };\n\n    scale.nice = function() {\n      return domain(nice(domain(), {\n        floor: function(x) { return pows(Math.floor(logs(x))); },\n        ceil: function(x) { return pows(Math.ceil(logs(x))); }\n      }));\n    };\n\n    scale.copy = function() {\n      return copy(scale, log().base(base));\n    };\n\n    return scale;\n  }\n\n  function raise(x, exponent) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  }\n\n  function pow() {\n    var exponent = 1,\n        scale = continuous(deinterpolate, reinterpolate),\n        domain = scale.domain;\n\n    function deinterpolate(a, b) {\n      return (b = raise(b, exponent) - (a = raise(a, exponent)))\n          ? function(x) { return (raise(x, exponent) - a) / b; }\n          : constant(b);\n    }\n\n    function reinterpolate(a, b) {\n      b = raise(b, exponent) - (a = raise(a, exponent));\n      return function(t) { return raise(a + b * t, 1 / exponent); };\n    }\n\n    scale.exponent = function(_) {\n      return arguments.length ? (exponent = +_, domain(domain())) : exponent;\n    };\n\n    scale.copy = function() {\n      return copy(scale, pow().exponent(exponent));\n    };\n\n    return linearish(scale);\n  }\n\n  function sqrt() {\n    return pow().exponent(0.5);\n  }\n\n  function quantile$1() {\n    var domain = [],\n        range = [],\n        thresholds = [];\n\n    function rescale() {\n      var i = 0, n = Math.max(1, range.length);\n      thresholds = new Array(n - 1);\n      while (++i < n) thresholds[i - 1] = d3Array.quantile(domain, i / n);\n      return scale;\n    }\n\n    function scale(x) {\n      if (!isNaN(x = +x)) return range[d3Array.bisect(thresholds, x)];\n    }\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return i < 0 ? [NaN, NaN] : [\n        i > 0 ? thresholds[i - 1] : domain[0],\n        i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n      ];\n    };\n\n    scale.domain = function(_) {\n      if (!arguments.length) return domain.slice();\n      domain = [];\n      for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);\n      domain.sort(d3Array.ascending);\n      return rescale();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n    };\n\n    scale.quantiles = function() {\n      return thresholds.slice();\n    };\n\n    scale.copy = function() {\n      return quantile$1()\n          .domain(domain)\n          .range(range);\n    };\n\n    return scale;\n  }\n\n  function quantize() {\n    var x0 = 0,\n        x1 = 1,\n        n = 1,\n        domain = [0.5],\n        range = [0, 1];\n\n    function scale(x) {\n      if (x <= x) return range[d3Array.bisect(domain, x, 0, n)];\n    }\n\n    function rescale() {\n      var i = -1;\n      domain = new Array(n);\n      while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n      return scale;\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (n = (range = slice.call(_)).length - 1, rescale()) : range.slice();\n    };\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return i < 0 ? [NaN, NaN]\n          : i < 1 ? [x0, domain[0]]\n          : i >= n ? [domain[n - 1], x1]\n          : [domain[i - 1], domain[i]];\n    };\n\n    scale.copy = function() {\n      return quantize()\n          .domain([x0, x1])\n          .range(range);\n    };\n\n    return linearish(scale);\n  }\n\n  function threshold() {\n    var domain = [0.5],\n        range = [0, 1],\n        n = 1;\n\n    function scale(x) {\n      if (x <= x) return range[d3Array.bisect(domain, x, 0, n)];\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n    };\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return [domain[i - 1], domain[i]];\n    };\n\n    scale.copy = function() {\n      return threshold()\n          .domain(domain)\n          .range(range);\n    };\n\n    return scale;\n  }\n\n  var durationSecond = 1000;\n  var durationMinute = durationSecond * 60;\n  var durationHour = durationMinute * 60;\n  var durationDay = durationHour * 24;\n  var durationWeek = durationDay * 7;\n  var durationMonth = durationDay * 30;\n  var durationYear = durationDay * 365;\n  function date(t) {\n    return new Date(t);\n  }\n\n  function number$1(t) {\n    return t instanceof Date ? +t : +new Date(+t);\n  }\n\n  function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n    var scale = continuous(deinterpolate, d3Interpolate.interpolateNumber),\n        invert = scale.invert,\n        domain = scale.domain;\n\n    var formatMillisecond = format(\".%L\"),\n        formatSecond = format(\":%S\"),\n        formatMinute = format(\"%I:%M\"),\n        formatHour = format(\"%I %p\"),\n        formatDay = format(\"%a %d\"),\n        formatWeek = format(\"%b %d\"),\n        formatMonth = format(\"%B\"),\n        formatYear = format(\"%Y\");\n\n    var tickIntervals = [\n      [second,  1,      durationSecond],\n      [second,  5,  5 * durationSecond],\n      [second, 15, 15 * durationSecond],\n      [second, 30, 30 * durationSecond],\n      [minute,  1,      durationMinute],\n      [minute,  5,  5 * durationMinute],\n      [minute, 15, 15 * durationMinute],\n      [minute, 30, 30 * durationMinute],\n      [  hour,  1,      durationHour  ],\n      [  hour,  3,  3 * durationHour  ],\n      [  hour,  6,  6 * durationHour  ],\n      [  hour, 12, 12 * durationHour  ],\n      [   day,  1,      durationDay   ],\n      [   day,  2,  2 * durationDay   ],\n      [  week,  1,      durationWeek  ],\n      [ month,  1,      durationMonth ],\n      [ month,  3,  3 * durationMonth ],\n      [  year,  1,      durationYear  ]\n    ];\n\n    function tickFormat(date) {\n      return (second(date) < date ? formatMillisecond\n          : minute(date) < date ? formatSecond\n          : hour(date) < date ? formatMinute\n          : day(date) < date ? formatHour\n          : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n          : year(date) < date ? formatMonth\n          : formatYear)(date);\n    }\n\n    function tickInterval(interval, start, stop, step) {\n      if (interval == null) interval = 10;\n\n      // If a desired tick count is specified, pick a reasonable tick interval\n      // based on the extent of the domain and a rough estimate of tick size.\n      // Otherwise, assume interval is already a time interval and use it.\n      if (typeof interval === \"number\") {\n        var target = Math.abs(stop - start) / interval,\n            i = d3Array.bisector(function(i) { return i[2]; }).right(tickIntervals, target);\n        if (i === tickIntervals.length) {\n          step = d3Array.tickStep(start / durationYear, stop / durationYear, interval);\n          interval = year;\n        } else if (i) {\n          i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n          step = i[1];\n          interval = i[0];\n        } else {\n          step = d3Array.tickStep(start, stop, interval);\n          interval = millisecond;\n        }\n      }\n\n      return step == null ? interval : interval.every(step);\n    }\n\n    scale.invert = function(y) {\n      return new Date(invert(y));\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? domain(map$1.call(_, number$1)) : domain().map(date);\n    };\n\n    scale.ticks = function(interval, step) {\n      var d = domain(),\n          t0 = d[0],\n          t1 = d[d.length - 1],\n          r = t1 < t0,\n          t;\n      if (r) t = t0, t0 = t1, t1 = t;\n      t = tickInterval(interval, t0, t1, step);\n      t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n      return r ? t.reverse() : t;\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      return specifier == null ? tickFormat : format(specifier);\n    };\n\n    scale.nice = function(interval, step) {\n      var d = domain();\n      return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\n          ? domain(nice(d, interval))\n          : scale;\n    };\n\n    scale.copy = function() {\n      return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n    };\n\n    return scale;\n  }\n\n  function time() {\n    return calendar(d3Time.timeYear, d3Time.timeMonth, d3Time.timeWeek, d3Time.timeDay, d3Time.timeHour, d3Time.timeMinute, d3Time.timeSecond, d3Time.timeMillisecond, d3TimeFormat.timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);\n  }\n\n  function utcTime() {\n    return calendar(d3Time.utcYear, d3Time.utcMonth, d3Time.utcWeek, d3Time.utcDay, d3Time.utcHour, d3Time.utcMinute, d3Time.utcSecond, d3Time.utcMillisecond, d3TimeFormat.utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]);\n  }\n\n  function colors(s) {\n    return s.match(/.{6}/g).map(function(x) {\n      return \"#\" + x;\n    });\n  }\n\n  var category10 = colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n\n  var category20b = colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n\n  var category20c = colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n\n  var category20 = colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n\n  var cubehelix$1 = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(300, 0.5, 0.0), d3Color.cubehelix(-240, 0.5, 1.0));\n\n  var warm = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(-100, 0.75, 0.35), d3Color.cubehelix(80, 1.50, 0.8));\n\n  var cool = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(260, 0.75, 0.35), d3Color.cubehelix(80, 1.50, 0.8));\n\n  var rainbow = d3Color.cubehelix();\n\n  function rainbow$1(t) {\n    if (t < 0 || t > 1) t -= Math.floor(t);\n    var ts = Math.abs(t - 0.5);\n    rainbow.h = 360 * t - 100;\n    rainbow.s = 1.5 - 1.5 * ts;\n    rainbow.l = 0.8 - 0.9 * ts;\n    return rainbow + \"\";\n  }\n\n  function ramp(range) {\n    var n = range.length;\n    return function(t) {\n      return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n    };\n  }\n\n  var viridis = ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\n  var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\n  var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\n  var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n\n  function sequential(interpolator) {\n    var x0 = 0,\n        x1 = 1,\n        clamp = false;\n\n    function scale(x) {\n      var t = (x - x0) / (x1 - x0);\n      return interpolator(clamp ? Math.max(0, Math.min(1, t)) : t);\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (x0 = +_[0], x1 = +_[1], scale) : [x0, x1];\n    };\n\n    scale.clamp = function(_) {\n      return arguments.length ? (clamp = !!_, scale) : clamp;\n    };\n\n    scale.interpolator = function(_) {\n      return arguments.length ? (interpolator = _, scale) : interpolator;\n    };\n\n    scale.copy = function() {\n      return sequential(interpolator).domain([x0, x1]).clamp(clamp);\n    };\n\n    return linearish(scale);\n  }\n\n  exports.scaleBand = band;\n  exports.scalePoint = point;\n  exports.scaleIdentity = identity;\n  exports.scaleLinear = linear;\n  exports.scaleLog = log;\n  exports.scaleOrdinal = ordinal;\n  exports.scaleImplicit = implicit;\n  exports.scalePow = pow;\n  exports.scaleSqrt = sqrt;\n  exports.scaleQuantile = quantile$1;\n  exports.scaleQuantize = quantize;\n  exports.scaleThreshold = threshold;\n  exports.scaleTime = time;\n  exports.scaleUtc = utcTime;\n  exports.schemeCategory10 = category10;\n  exports.schemeCategory20b = category20b;\n  exports.schemeCategory20c = category20c;\n  exports.schemeCategory20 = category20;\n  exports.interpolateCubehelixDefault = cubehelix$1;\n  exports.interpolateRainbow = rainbow$1;\n  exports.interpolateWarm = warm;\n  exports.interpolateCool = cool;\n  exports.interpolateViridis = viridis;\n  exports.interpolateMagma = magma;\n  exports.interpolateInferno = inferno;\n  exports.interpolatePlasma = plasma;\n  exports.scaleSequential = sequential;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-time-format/ Version 2.0.2. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-time')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-time'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3));\n}(this, function (exports,d3Time) { 'use strict';\n\n  function localDate(d) {\n    if (0 <= d.y && d.y < 100) {\n      var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n      date.setFullYear(d.y);\n      return date;\n    }\n    return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n  }\n\n  function utcDate(d) {\n    if (0 <= d.y && d.y < 100) {\n      var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n      date.setUTCFullYear(d.y);\n      return date;\n    }\n    return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n  }\n\n  function newYear(y) {\n    return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n  }\n\n  function formatLocale(locale) {\n    var locale_dateTime = locale.dateTime,\n        locale_date = locale.date,\n        locale_time = locale.time,\n        locale_periods = locale.periods,\n        locale_weekdays = locale.days,\n        locale_shortWeekdays = locale.shortDays,\n        locale_months = locale.months,\n        locale_shortMonths = locale.shortMonths;\n\n    var periodRe = formatRe(locale_periods),\n        periodLookup = formatLookup(locale_periods),\n        weekdayRe = formatRe(locale_weekdays),\n        weekdayLookup = formatLookup(locale_weekdays),\n        shortWeekdayRe = formatRe(locale_shortWeekdays),\n        shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n        monthRe = formatRe(locale_months),\n        monthLookup = formatLookup(locale_months),\n        shortMonthRe = formatRe(locale_shortMonths),\n        shortMonthLookup = formatLookup(locale_shortMonths);\n\n    var formats = {\n      \"a\": formatShortWeekday,\n      \"A\": formatWeekday,\n      \"b\": formatShortMonth,\n      \"B\": formatMonth,\n      \"c\": null,\n      \"d\": formatDayOfMonth,\n      \"e\": formatDayOfMonth,\n      \"H\": formatHour24,\n      \"I\": formatHour12,\n      \"j\": formatDayOfYear,\n      \"L\": formatMilliseconds,\n      \"m\": formatMonthNumber,\n      \"M\": formatMinutes,\n      \"p\": formatPeriod,\n      \"S\": formatSeconds,\n      \"U\": formatWeekNumberSunday,\n      \"w\": formatWeekdayNumber,\n      \"W\": formatWeekNumberMonday,\n      \"x\": null,\n      \"X\": null,\n      \"y\": formatYear,\n      \"Y\": formatFullYear,\n      \"Z\": formatZone,\n      \"%\": formatLiteralPercent\n    };\n\n    var utcFormats = {\n      \"a\": formatUTCShortWeekday,\n      \"A\": formatUTCWeekday,\n      \"b\": formatUTCShortMonth,\n      \"B\": formatUTCMonth,\n      \"c\": null,\n      \"d\": formatUTCDayOfMonth,\n      \"e\": formatUTCDayOfMonth,\n      \"H\": formatUTCHour24,\n      \"I\": formatUTCHour12,\n      \"j\": formatUTCDayOfYear,\n      \"L\": formatUTCMilliseconds,\n      \"m\": formatUTCMonthNumber,\n      \"M\": formatUTCMinutes,\n      \"p\": formatUTCPeriod,\n      \"S\": formatUTCSeconds,\n      \"U\": formatUTCWeekNumberSunday,\n      \"w\": formatUTCWeekdayNumber,\n      \"W\": formatUTCWeekNumberMonday,\n      \"x\": null,\n      \"X\": null,\n      \"y\": formatUTCYear,\n      \"Y\": formatUTCFullYear,\n      \"Z\": formatUTCZone,\n      \"%\": formatLiteralPercent\n    };\n\n    var parses = {\n      \"a\": parseShortWeekday,\n      \"A\": parseWeekday,\n      \"b\": parseShortMonth,\n      \"B\": parseMonth,\n      \"c\": parseLocaleDateTime,\n      \"d\": parseDayOfMonth,\n      \"e\": parseDayOfMonth,\n      \"H\": parseHour24,\n      \"I\": parseHour24,\n      \"j\": parseDayOfYear,\n      \"L\": parseMilliseconds,\n      \"m\": parseMonthNumber,\n      \"M\": parseMinutes,\n      \"p\": parsePeriod,\n      \"S\": parseSeconds,\n      \"U\": parseWeekNumberSunday,\n      \"w\": parseWeekdayNumber,\n      \"W\": parseWeekNumberMonday,\n      \"x\": parseLocaleDate,\n      \"X\": parseLocaleTime,\n      \"y\": parseYear,\n      \"Y\": parseFullYear,\n      \"Z\": parseZone,\n      \"%\": parseLiteralPercent\n    };\n\n    // These recursive directive definitions must be deferred.\n    formats.x = newFormat(locale_date, formats);\n    formats.X = newFormat(locale_time, formats);\n    formats.c = newFormat(locale_dateTime, formats);\n    utcFormats.x = newFormat(locale_date, utcFormats);\n    utcFormats.X = newFormat(locale_time, utcFormats);\n    utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n    function newFormat(specifier, formats) {\n      return function(date) {\n        var string = [],\n            i = -1,\n            j = 0,\n            n = specifier.length,\n            c,\n            pad,\n            format;\n\n        if (!(date instanceof Date)) date = new Date(+date);\n\n        while (++i < n) {\n          if (specifier.charCodeAt(i) === 37) {\n            string.push(specifier.slice(j, i));\n            if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n            else pad = c === \"e\" ? \" \" : \"0\";\n            if (format = formats[c]) c = format(date, pad);\n            string.push(c);\n            j = i + 1;\n          }\n        }\n\n        string.push(specifier.slice(j, i));\n        return string.join(\"\");\n      };\n    }\n\n    function newParse(specifier, newDate) {\n      return function(string) {\n        var d = newYear(1900),\n            i = parseSpecifier(d, specifier, string += \"\", 0);\n        if (i != string.length) return null;\n\n        // The am-pm flag is 0 for AM, and 1 for PM.\n        if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n        // Convert day-of-week and week-of-year to day-of-year.\n        if (\"W\" in d || \"U\" in d) {\n          if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n          var day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n          d.m = 0;\n          d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n        }\n\n        // If a time zone is specified, all fields are interpreted as UTC and then\n        // offset according to the specified time zone.\n        if (\"Z\" in d) {\n          d.H += d.Z / 100 | 0;\n          d.M += d.Z % 100;\n          return utcDate(d);\n        }\n\n        // Otherwise, all fields are in local time.\n        return newDate(d);\n      };\n    }\n\n    function parseSpecifier(d, specifier, string, j) {\n      var i = 0,\n          n = specifier.length,\n          m = string.length,\n          c,\n          parse;\n\n      while (i < n) {\n        if (j >= m) return -1;\n        c = specifier.charCodeAt(i++);\n        if (c === 37) {\n          c = specifier.charAt(i++);\n          parse = parses[c in pads ? specifier.charAt(i++) : c];\n          if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n        } else if (c != string.charCodeAt(j++)) {\n          return -1;\n        }\n      }\n\n      return j;\n    }\n\n    function parsePeriod(d, string, i) {\n      var n = periodRe.exec(string.slice(i));\n      return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseShortWeekday(d, string, i) {\n      var n = shortWeekdayRe.exec(string.slice(i));\n      return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseWeekday(d, string, i) {\n      var n = weekdayRe.exec(string.slice(i));\n      return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseShortMonth(d, string, i) {\n      var n = shortMonthRe.exec(string.slice(i));\n      return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseMonth(d, string, i) {\n      var n = monthRe.exec(string.slice(i));\n      return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseLocaleDateTime(d, string, i) {\n      return parseSpecifier(d, locale_dateTime, string, i);\n    }\n\n    function parseLocaleDate(d, string, i) {\n      return parseSpecifier(d, locale_date, string, i);\n    }\n\n    function parseLocaleTime(d, string, i) {\n      return parseSpecifier(d, locale_time, string, i);\n    }\n\n    function formatShortWeekday(d) {\n      return locale_shortWeekdays[d.getDay()];\n    }\n\n    function formatWeekday(d) {\n      return locale_weekdays[d.getDay()];\n    }\n\n    function formatShortMonth(d) {\n      return locale_shortMonths[d.getMonth()];\n    }\n\n    function formatMonth(d) {\n      return locale_months[d.getMonth()];\n    }\n\n    function formatPeriod(d) {\n      return locale_periods[+(d.getHours() >= 12)];\n    }\n\n    function formatUTCShortWeekday(d) {\n      return locale_shortWeekdays[d.getUTCDay()];\n    }\n\n    function formatUTCWeekday(d) {\n      return locale_weekdays[d.getUTCDay()];\n    }\n\n    function formatUTCShortMonth(d) {\n      return locale_shortMonths[d.getUTCMonth()];\n    }\n\n    function formatUTCMonth(d) {\n      return locale_months[d.getUTCMonth()];\n    }\n\n    function formatUTCPeriod(d) {\n      return locale_periods[+(d.getUTCHours() >= 12)];\n    }\n\n    return {\n      format: function(specifier) {\n        var f = newFormat(specifier += \"\", formats);\n        f.toString = function() { return specifier; };\n        return f;\n      },\n      parse: function(specifier) {\n        var p = newParse(specifier += \"\", localDate);\n        p.toString = function() { return specifier; };\n        return p;\n      },\n      utcFormat: function(specifier) {\n        var f = newFormat(specifier += \"\", utcFormats);\n        f.toString = function() { return specifier; };\n        return f;\n      },\n      utcParse: function(specifier) {\n        var p = newParse(specifier, utcDate);\n        p.toString = function() { return specifier; };\n        return p;\n      }\n    };\n  }\n\n  var pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"};\n  var numberRe = /^\\s*\\d+/;\n  var percentRe = /^%/;\n  var requoteRe = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n  function pad(value, fill, width) {\n    var sign = value < 0 ? \"-\" : \"\",\n        string = (sign ? -value : value) + \"\",\n        length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n  }\n\n  function requote(s) {\n    return s.replace(requoteRe, \"\\\\$&\");\n  }\n\n  function formatRe(names) {\n    return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n  }\n\n  function formatLookup(names) {\n    var map = {}, i = -1, n = names.length;\n    while (++i < n) map[names[i].toLowerCase()] = i;\n    return map;\n  }\n\n  function parseWeekdayNumber(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 1));\n    return n ? (d.w = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberSunday(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.U = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberMonday(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.W = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseFullYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 4));\n    return n ? (d.y = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n  }\n\n  function parseZone(d, string, i) {\n    var n = /^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(string.slice(i, i + 6));\n    return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n  }\n\n  function parseMonthNumber(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n  }\n\n  function parseDayOfMonth(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseDayOfYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseHour24(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.H = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMinutes(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.M = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseSeconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.S = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMilliseconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.L = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseLiteralPercent(d, string, i) {\n    var n = percentRe.exec(string.slice(i, i + 1));\n    return n ? i + n[0].length : -1;\n  }\n\n  function formatDayOfMonth(d, p) {\n    return pad(d.getDate(), p, 2);\n  }\n\n  function formatHour24(d, p) {\n    return pad(d.getHours(), p, 2);\n  }\n\n  function formatHour12(d, p) {\n    return pad(d.getHours() % 12 || 12, p, 2);\n  }\n\n  function formatDayOfYear(d, p) {\n    return pad(1 + d3Time.timeDay.count(d3Time.timeYear(d), d), p, 3);\n  }\n\n  function formatMilliseconds(d, p) {\n    return pad(d.getMilliseconds(), p, 3);\n  }\n\n  function formatMonthNumber(d, p) {\n    return pad(d.getMonth() + 1, p, 2);\n  }\n\n  function formatMinutes(d, p) {\n    return pad(d.getMinutes(), p, 2);\n  }\n\n  function formatSeconds(d, p) {\n    return pad(d.getSeconds(), p, 2);\n  }\n\n  function formatWeekNumberSunday(d, p) {\n    return pad(d3Time.timeSunday.count(d3Time.timeYear(d), d), p, 2);\n  }\n\n  function formatWeekdayNumber(d) {\n    return d.getDay();\n  }\n\n  function formatWeekNumberMonday(d, p) {\n    return pad(d3Time.timeMonday.count(d3Time.timeYear(d), d), p, 2);\n  }\n\n  function formatYear(d, p) {\n    return pad(d.getFullYear() % 100, p, 2);\n  }\n\n  function formatFullYear(d, p) {\n    return pad(d.getFullYear() % 10000, p, 4);\n  }\n\n  function formatZone(d) {\n    var z = d.getTimezoneOffset();\n    return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n        + pad(z / 60 | 0, \"0\", 2)\n        + pad(z % 60, \"0\", 2);\n  }\n\n  function formatUTCDayOfMonth(d, p) {\n    return pad(d.getUTCDate(), p, 2);\n  }\n\n  function formatUTCHour24(d, p) {\n    return pad(d.getUTCHours(), p, 2);\n  }\n\n  function formatUTCHour12(d, p) {\n    return pad(d.getUTCHours() % 12 || 12, p, 2);\n  }\n\n  function formatUTCDayOfYear(d, p) {\n    return pad(1 + d3Time.utcDay.count(d3Time.utcYear(d), d), p, 3);\n  }\n\n  function formatUTCMilliseconds(d, p) {\n    return pad(d.getUTCMilliseconds(), p, 3);\n  }\n\n  function formatUTCMonthNumber(d, p) {\n    return pad(d.getUTCMonth() + 1, p, 2);\n  }\n\n  function formatUTCMinutes(d, p) {\n    return pad(d.getUTCMinutes(), p, 2);\n  }\n\n  function formatUTCSeconds(d, p) {\n    return pad(d.getUTCSeconds(), p, 2);\n  }\n\n  function formatUTCWeekNumberSunday(d, p) {\n    return pad(d3Time.utcSunday.count(d3Time.utcYear(d), d), p, 2);\n  }\n\n  function formatUTCWeekdayNumber(d) {\n    return d.getUTCDay();\n  }\n\n  function formatUTCWeekNumberMonday(d, p) {\n    return pad(d3Time.utcMonday.count(d3Time.utcYear(d), d), p, 2);\n  }\n\n  function formatUTCYear(d, p) {\n    return pad(d.getUTCFullYear() % 100, p, 2);\n  }\n\n  function formatUTCFullYear(d, p) {\n    return pad(d.getUTCFullYear() % 10000, p, 4);\n  }\n\n  function formatUTCZone() {\n    return \"+0000\";\n  }\n\n  function formatLiteralPercent() {\n    return \"%\";\n  }\n\n  var locale;\n  defaultLocale({\n    dateTime: \"%x, %X\",\n    date: \"%-m/%-d/%Y\",\n    time: \"%-I:%M:%S %p\",\n    periods: [\"AM\", \"PM\"],\n    days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n    shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n    months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n    shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n  });\n\n  function defaultLocale(definition) {\n    locale = formatLocale(definition);\n    exports.timeFormat = locale.format;\n    exports.timeParse = locale.parse;\n    exports.utcFormat = locale.utcFormat;\n    exports.utcParse = locale.utcParse;\n    return locale;\n  }\n\n  var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\n  function formatIsoNative(date) {\n    return date.toISOString();\n  }\n\n  var formatIso = Date.prototype.toISOString\n      ? formatIsoNative\n      : exports.utcFormat(isoSpecifier);\n\n  function parseIsoNative(string) {\n    var date = new Date(string);\n    return isNaN(date) ? null : date;\n  }\n\n  var parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n      ? parseIsoNative\n      : exports.utcParse(isoSpecifier);\n\n  exports.timeFormatDefaultLocale = defaultLocale;\n  exports.timeFormatLocale = formatLocale;\n  exports.isoFormat = formatIso;\n  exports.isoParse = parseIso;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-time/ Version 1.0.3. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, (function (exports) { 'use strict';\n\nvar t0 = new Date;\nvar t1 = new Date;\n\nfunction newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(new Date(+start)); while (offseti(start, step), floori(start), start < stop)\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      while (--step >= 0) while (offseti(date, 1), !test(date)) {} // eslint-disable-line no-empty\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n\nvar millisecond = newInterval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return newInterval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nvar milliseconds = millisecond.range;\n\nvar durationSecond = 1e3;\nvar durationMinute = 6e4;\nvar durationHour = 36e5;\nvar durationDay = 864e5;\nvar durationWeek = 6048e5;\n\nvar second = newInterval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nvar seconds = second.range;\n\nvar minute = newInterval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nvar minutes = minute.range;\n\nvar hour = newInterval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nvar hours = hour.range;\n\nvar day = newInterval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nvar days = day.range;\n\nfunction weekday(i) {\n  return newInterval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nvar sunday = weekday(0);\nvar monday = weekday(1);\nvar tuesday = weekday(2);\nvar wednesday = weekday(3);\nvar thursday = weekday(4);\nvar friday = weekday(5);\nvar saturday = weekday(6);\n\nvar sundays = sunday.range;\nvar mondays = monday.range;\nvar tuesdays = tuesday.range;\nvar wednesdays = wednesday.range;\nvar thursdays = thursday.range;\nvar fridays = friday.range;\nvar saturdays = saturday.range;\n\nvar month = newInterval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nvar months = month.range;\n\nvar year = newInterval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nvar years = year.range;\n\nvar utcMinute = newInterval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nvar utcMinutes = utcMinute.range;\n\nvar utcHour = newInterval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nvar utcHours = utcHour.range;\n\nvar utcDay = newInterval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nvar utcDays = utcDay.range;\n\nfunction utcWeekday(i) {\n  return newInterval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nvar utcSunday = utcWeekday(0);\nvar utcMonday = utcWeekday(1);\nvar utcTuesday = utcWeekday(2);\nvar utcWednesday = utcWeekday(3);\nvar utcThursday = utcWeekday(4);\nvar utcFriday = utcWeekday(5);\nvar utcSaturday = utcWeekday(6);\n\nvar utcSundays = utcSunday.range;\nvar utcMondays = utcMonday.range;\nvar utcTuesdays = utcTuesday.range;\nvar utcWednesdays = utcWednesday.range;\nvar utcThursdays = utcThursday.range;\nvar utcFridays = utcFriday.range;\nvar utcSaturdays = utcSaturday.range;\n\nvar utcMonth = newInterval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nvar utcMonths = utcMonth.range;\n\nvar utcYear = newInterval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nvar utcYears = utcYear.range;\n\nexports.timeInterval = newInterval;\nexports.timeMillisecond = millisecond;\nexports.timeMilliseconds = milliseconds;\nexports.utcMillisecond = millisecond;\nexports.utcMilliseconds = milliseconds;\nexports.timeSecond = second;\nexports.timeSeconds = seconds;\nexports.utcSecond = second;\nexports.utcSeconds = seconds;\nexports.timeMinute = minute;\nexports.timeMinutes = minutes;\nexports.timeHour = hour;\nexports.timeHours = hours;\nexports.timeDay = day;\nexports.timeDays = days;\nexports.timeWeek = sunday;\nexports.timeWeeks = sundays;\nexports.timeSunday = sunday;\nexports.timeSundays = sundays;\nexports.timeMonday = monday;\nexports.timeMondays = mondays;\nexports.timeTuesday = tuesday;\nexports.timeTuesdays = tuesdays;\nexports.timeWednesday = wednesday;\nexports.timeWednesdays = wednesdays;\nexports.timeThursday = thursday;\nexports.timeThursdays = thursdays;\nexports.timeFriday = friday;\nexports.timeFridays = fridays;\nexports.timeSaturday = saturday;\nexports.timeSaturdays = saturdays;\nexports.timeMonth = month;\nexports.timeMonths = months;\nexports.timeYear = year;\nexports.timeYears = years;\nexports.utcMinute = utcMinute;\nexports.utcMinutes = utcMinutes;\nexports.utcHour = utcHour;\nexports.utcHours = utcHours;\nexports.utcDay = utcDay;\nexports.utcDays = utcDays;\nexports.utcWeek = utcSunday;\nexports.utcWeeks = utcSundays;\nexports.utcSunday = utcSunday;\nexports.utcSundays = utcSundays;\nexports.utcMonday = utcMonday;\nexports.utcMondays = utcMondays;\nexports.utcTuesday = utcTuesday;\nexports.utcTuesdays = utcTuesdays;\nexports.utcWednesday = utcWednesday;\nexports.utcWednesdays = utcWednesdays;\nexports.utcThursday = utcThursday;\nexports.utcThursdays = utcThursdays;\nexports.utcFriday = utcFriday;\nexports.utcFridays = utcFridays;\nexports.utcSaturday = utcSaturday;\nexports.utcSaturdays = utcSaturdays;\nexports.utcMonth = utcMonth;\nexports.utcMonths = utcMonths;\nexports.utcYear = utcYear;\nexports.utcYears = utcYears;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));","import {ChartWithColorGroups, ChartWithColorGroupsConfig} from \"./chart-with-color-groups\";\r\nimport {Utils} from './utils'\r\nimport {Legend} from \"./legend\";\r\n\r\nexport class BarChartConfig extends ChartWithColorGroupsConfig {\r\n\r\n    svgClass = this.cssClassPrefix + 'bar-chart';\r\n    showLegend = true;\r\n    showTooltip = true;\r\n    x = {// X axis config\r\n        title: '', // axis label\r\n        key: 0,\r\n        value: (d, key) => Utils.isNumber(d) ? d : d[key], // x value accessor\r\n        scale: \"ordinal\",\r\n        orient: \"bottom\",\r\n        ticks: undefined,\r\n    };\r\n    y = {// Y axis config\r\n        key: 1,\r\n        value: (d, key) => Utils.isNumber(d) ? d : d[key], // x value accessor\r\n        title: '', // axis label,\r\n        orient: \"left\",\r\n        scale: \"linear\"\r\n    };\r\n    transition = true;\r\n\r\n    constructor(custom) {\r\n        super();\r\n        var config = this;\r\n\r\n        if (custom) {\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport class BarChart extends ChartWithColorGroups {\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new BarChartConfig(config));\r\n    }\r\n\r\n    setConfig(config) {\r\n        return super.setConfig(new BarChartConfig(config));\r\n    }\r\n\r\n    initPlot() {\r\n        super.initPlot();\r\n        var self = this;\r\n\r\n        var conf = this.config;\r\n\r\n        this.plot.x = {};\r\n        this.plot.y = {};\r\n\r\n        this.computePlotSize();\r\n        this.setupY();\r\n        this.setupX();\r\n        this.setupGroupStacks();\r\n        this.setupYDomain();\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    setupX() {\r\n\r\n        var plot = this.plot;\r\n        var x = plot.x;\r\n        var conf = this.config.x;\r\n\r\n        /* *\r\n         * value accessor - returns the value to encode for a given data object.\r\n         * scale - maps value to a visual display encoding, such as a pixel position.\r\n         * map function - maps from data value to display value\r\n         * axis - sets up axis\r\n         **/\r\n        x.value = d => conf.value(d, conf.key);\r\n        x.scale = d3.scaleBand().range([0, plot.width]).paddingInner(.08);\r\n        x.map = d => x.scale(x.value(d));\r\n\r\n        x.axis = Utils.createAxis(conf.orient, x.scale);\r\n\r\n        var data = this.plot.data;\r\n        var domain;\r\n        if (!data || !data.length) {\r\n            domain = [];\r\n        } else if (!this.config.series) {\r\n            domain = d3.map(data, x.value).keys();\r\n        } else {\r\n            domain = d3.map(data[0].values, x.value).keys();\r\n        }\r\n\r\n        plot.x.scale.domain(domain);\r\n\r\n    };\r\n\r\n    setupY() {\r\n\r\n        var plot = this.plot;\r\n        var y = plot.y;\r\n        var conf = this.config.y;\r\n        y.value = d => conf.value(d, conf.key);\r\n        y.scale = Utils.createScale(conf.scale).range([plot.height, 0]);\r\n        y.map = d => y.scale(y.value(d));\r\n\r\n        y.axis = Utils.createAxis(conf.orient, y.scale);\r\n        if (conf.ticks) {\r\n            y.axis.ticks(conf.ticks);\r\n        }\r\n    };\r\n\r\n    setupYDomain() {\r\n        var plot = this.plot;\r\n        var data = this.plot.data;\r\n        var domain;\r\n        var yStackMax = d3.max(plot.layers, layer => d3.max(layer.points, d => d.y0 + d.y));\r\n\r\n\r\n        // var min = d3.min(data, s=>d3.min(s.values, plot.y.value));\r\n        var max = yStackMax;\r\n        domain = [0, max];\r\n\r\n        plot.y.scale.domain(domain);\r\n        console.log(' plot.y.scale.domain', plot.y.scale.domain());\r\n    }\r\n\r\n    setupGroupStacks() {\r\n        var self = this;\r\n        this.groupData();\r\n\r\n        var y0s = [];\r\n        this.plot.groupedData.forEach(s=> {\r\n            s.points = s.values.map(v=>self.mapToPoint(v));\r\n            s.points.forEach((p, i)=> {\r\n                var prevY0 = y0s[i];\r\n                if(!prevY0) prevY0 = 0;\r\n                p.y0 = prevY0;\r\n                y0s[i] = p.y+prevY0;\r\n            });\r\n\r\n        });\r\n        this.plot.layers = this.plot.groupedData;\r\n\r\n    }\r\n\r\n    mapToPoint(value) {\r\n        var plot = this.plot;\r\n        return {\r\n            x: plot.x.value(value),\r\n            y: parseFloat(plot.y.value(value))\r\n        }\r\n    }\r\n\r\n\r\n    drawAxisX() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var axisConf = this.config.x;\r\n        var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-x') + \".\" + self.prefixClass('axis') + (self.config.guides ? '' : '.' + self.prefixClass('no-guides')))\r\n            .attr(\"transform\", \"translate(0,\" + plot.height + \")\");\r\n\r\n        var axisT = axis;\r\n        if (self.config.transition) {\r\n            axisT = axis.transition().ease(d3.easeSinInOut);\r\n        }\r\n\r\n        axisT.call(plot.x.axis);\r\n\r\n        axis.selectOrAppend(\"text.\" + self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\" + (plot.width / 2) + \",\" + (plot.margin.bottom) + \")\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"-1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(axisConf.title);\r\n    };\r\n\r\n    drawAxisY() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var axisConf = this.config.y;\r\n        var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-y') + \".\" + self.prefixClass('axis') + (self.config.guides ? '' : '.' + self.prefixClass('no-guides')));\r\n\r\n        var axisT = axis;\r\n        if (self.config.transition) {\r\n            axisT = axis.transition().ease(d3.easeSinInOut);\r\n        }\r\n\r\n        axisT.call(plot.y.axis);\r\n\r\n        axis.selectOrAppend(\"text.\" + self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\" + -plot.margin.left + \",\" + (plot.height / 2) + \")rotate(-90)\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(axisConf.title);\r\n    };\r\n\r\n\r\n    drawBars() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n\r\n        console.log('layers', plot.layers);\r\n\r\n        var layerClass = this.prefixClass(\"layer\");\r\n\r\n        var barClass = this.prefixClass(\"bar\");\r\n        var layer = self.svgG.selectAll(\".\" + layerClass)\r\n            .data(plot.layers);\r\n\r\n        var layerMerge = layer.enter().append(\"g\")\r\n            .attr(\"class\", layerClass).merge(layer);\r\n\r\n        var bar = layerMerge.selectAll(\".\" + barClass)\r\n            .data(d => d.points);\r\n\r\n        var barEnter = bar.enter().append(\"g\")\r\n            .attr(\"class\", barClass);\r\n        var barRectEnter = barEnter.append(\"rect\")\r\n            .attr(\"x\", 1);\r\n        var barMerge = barEnter.merge(bar);\r\n\r\n        var barRect = barMerge.select(\"rect\");\r\n\r\n        var barRectT = barRect;\r\n        var barT = barMerge;\r\n        var layerT = layerMerge;\r\n        if (this.transitionEnabled()) {\r\n            barRectT = barRect.transition();\r\n            barT = barMerge.transition();\r\n            layerT = layerMerge.transition();\r\n        }\r\n\r\n        barEnter.attr(\"transform\", function (d) {\r\n            return \"translate(\" + plot.x.scale(d.x) + \",\" + (plot.y.scale(d.y0)) + \")\";\r\n        });\r\n        var yDomain = plot.y.scale.domain();\r\n        barT.attr(\"transform\", function (d) {\r\n            return \"translate(\" + plot.x.scale(d.x) + \",\" + (plot.y.scale(d.y0 + d.y)) + \")\";\r\n        });\r\n        barRectEnter\r\n            .attr(\"width\", plot.x.scale.bandwidth())\r\n            .attr(\"height\", 0);\r\n        barRectT\r\n            .attr(\"width\", plot.x.scale.bandwidth())\r\n            .attr(\"height\", d => plot.y.scale(d.y0) - plot.y.scale(d.y0 + d.y - yDomain[0]));\r\n\r\n\r\n        if (this.plot.seriesColor) {\r\n            layerT\r\n                .attr(\"fill\", this.plot.seriesColor);\r\n        }\r\n\r\n        if (plot.tooltip) {\r\n            barMerge.on(\"mouseover\", d => {\r\n                self.showTooltip(d.y);\r\n            }).on(\"mouseout\", d => {\r\n                self.hideTooltip();\r\n            });\r\n        }\r\n        layer.exit().remove();\r\n        bar.exit().remove();\r\n    }\r\n\r\n    update(newData) {\r\n        super.update(newData);\r\n        this.drawAxisX();\r\n        this.drawAxisY();\r\n        this.drawBars();\r\n        return this;\r\n    };\r\n\r\n}\r\n","import {Chart, ChartConfig} from \"./chart\";\r\nimport {Utils} from './utils'\r\n\r\nexport class BoxPlotBaseConfig extends ChartConfig{\r\n\r\n    svgClass = this.cssClassPrefix + 'box-plot';\r\n    showLegend = true;\r\n    showTooltip = true;\r\n    x = {// X axis config\r\n        title: '', // axis label\r\n        value: s => s.key, // x value accessor\r\n        guides: false, //show axis guides\r\n        orient: 'bottom',\r\n\r\n    };\r\n    y = {// Y axis config\r\n        title: '',\r\n        value: d => d, // y value accessor\r\n        scale: \"linear\",\r\n        orient: 'left',\r\n        domainMargin: 0.1,\r\n        guides: true //show axis guides\r\n    };\r\n    Q1 = d => d.values.Q1;\r\n    Q2 = d => d.values.Q2;\r\n    Q3 = d => d.values.Q3;\r\n    Wl = d => d.values.whiskerLow;\r\n    Wh = d => d.values.whiskerHigh;\r\n    outliers= d=> d.values.outliers;\r\n    outlierValue = (d,i)=> d;\r\n    outlierLabel = (d,i)=> d;\r\n    minBoxWidth = 35;\r\n    maxBoxWidth = 100;\r\n\r\n    transition = true;\r\n    color =  undefined;// string or function returning color's value for color scale\r\n    d3ColorCategory= 'category10';\r\n\r\n    constructor(custom){\r\n        super();\r\n        if(custom){\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport class BoxPlotBase extends Chart{\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new BoxPlotBaseConfig(config));\r\n    }\r\n\r\n    setConfig(config){\r\n        return super.setConfig(new BoxPlotBaseConfig(config));\r\n    }\r\n\r\n    initPlot(){\r\n        super.initPlot();\r\n        super.computePlotSize();\r\n        this.plot.x = {};\r\n        this.plot.y = {};\r\n\r\n        this.plot.data = this.getDataToPlot();\r\n        this.setupY();\r\n        this.setupX();\r\n\r\n        this.setupColor();\r\n\r\n    }\r\n\r\n    getDataToPlot() {\r\n        return this.data;\r\n    }\r\n\r\n    setupX() {\r\n\r\n        var plot = this.plot;\r\n        var x = plot.x;\r\n        var conf = this.config.x;\r\n\r\n        x.value = conf.value;\r\n        x.scale = d3.scaleBand().range([0, plot.width]);\r\n        x.map = d => x.scale(x.value(d));\r\n\r\n        x.axis = Utils.createAxis(conf.orient, x.scale);\r\n        if(conf.guides){\r\n            x.axis.tickSize(-plot.height);\r\n        }\r\n\r\n        var data = this.plot.data;\r\n        var domain;\r\n        if (!data || !data.length) {\r\n            domain = [];\r\n        } else {\r\n            domain = data.map(x.value);\r\n        }\r\n\r\n        plot.x.scale.domain(domain);\r\n\r\n    };\r\n\r\n    setupY() {\r\n\r\n        var plot = this.plot;\r\n        var y = plot.y;\r\n        var conf = this.config.y;\r\n        y.value = d => conf.value.call(this.config, d);\r\n        y.scale = Utils.createScale(conf.scale).range([plot.height, 0]);\r\n        y.map = d => y.scale(y.value(d));\r\n\r\n        y.axis = Utils.createAxis(conf.orient, y.scale);\r\n        if (conf.ticks) {\r\n            y.axis.ticks(conf.ticks);\r\n        }\r\n        if(conf.guides){\r\n            y.axis.tickSize(-plot.width);\r\n        }\r\n        this.setupYDomain();\r\n    };\r\n\r\n    setupYDomain() {\r\n        var plot = this.plot;\r\n        var data = this.plot.data;\r\n        var c = this.config;\r\n\r\n        var values = [], yMin, yMax;\r\n        data.forEach(function (d, i) {\r\n            let q1 = c.Q1(d), \r\n                q3 = c.Q3(d), \r\n                wl = c.Wl(d), \r\n                wh = c.Wh(d),\r\n                outliers = c.outliers(d);\r\n            \r\n            if (outliers) {\r\n                outliers.forEach(function (o, i) {\r\n                    values.push(c.outlierValue(o, i));\r\n                });\r\n            }\r\n            if (wl) { values.push(wl) }\r\n            if (q1) { values.push(q1) }\r\n            if (q3) { values.push(q3) }\r\n            if (wh) { values.push(wh) }\r\n        });\r\n        yMin = d3.min(values);\r\n        yMax = d3.max(values);\r\n        var margin = (yMax-yMin)* this.config.y.domainMargin;\r\n        yMin-=margin;\r\n        yMax+=margin;\r\n        var domain = [ yMin, yMax ] ;\r\n\r\n        plot.y.scale.domain(domain);\r\n    }\r\n\r\n    drawAxisX() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var axisConf = this.config.x;\r\n        var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-x') + \".\" + self.prefixClass('axis') + (axisConf.guides ? '' : '.' + self.prefixClass('no-guides')))\r\n            .attr(\"transform\", \"translate(0,\" + plot.height + \")\");\r\n\r\n        var axisT = axis;\r\n        if (self.config.transition) {\r\n            axisT = axis.transition().ease(d3.easeSinInOut);\r\n        }\r\n\r\n        axisT.call(plot.x.axis);\r\n\r\n        axis.selectOrAppend(\"text.\"+self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\"+ (plot.width/2) +\",\"+ (plot.margin.bottom) +\")\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"-1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(axisConf.label);\r\n    };\r\n\r\n    drawAxisY() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var axisConf = this.config.y;\r\n        var axis = self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-y') + \".\" + self.prefixClass('axis') + (axisConf.guides ? '' : '.' + self.prefixClass('no-guides')));\r\n\r\n        var axisT = axis;\r\n        if (self.config.transition) {\r\n            axisT = axis.transition().ease(d3.easeSinInOut);\r\n        }\r\n\r\n        axisT.call(plot.y.axis);\r\n\r\n        axis.selectOrAppend(\"text.\" + self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\" + -plot.margin.left + \",\" + (plot.height / 2) + \")rotate(-90)\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(axisConf.title);\r\n    };\r\n\r\n    drawBoxPlots() {\r\n        var self = this,\r\n            plot = self.plot,\r\n            config = self.config,\r\n            boxplotClass = self.prefixClass(\"boxplot-item\")\r\n        \r\n        var boxplots = self.svgG.selectAll('.'+boxplotClass).data(plot.data);\r\n        var boxplotEnter = boxplots.enter()\r\n            .append('g')\r\n            .attr('class', boxplotClass)\r\n            .style('stroke-opacity', 1e-6)\r\n            .style('fill-opacity', 1e-6);\r\n\r\n        var boxplotsMerge = boxplotEnter.merge(boxplots);\r\n        var duration = 1000;\r\n        var boxplotsT = boxplotsMerge;\r\n        if (self.transitionEnabled()) {\r\n            boxplotsT = boxplotsMerge.transition();\r\n            boxplotsT.delay(function(d,i) { return i * duration / plot.data.length })\r\n        }\r\n\r\n        boxplotsT\r\n            .style('fill', plot.color)\r\n            .style('stroke-opacity', 1)\r\n            .style('fill-opacity', 0.75)\r\n            .attr('transform', (d,i) =>'translate(' + (plot.x.map(d,i) + plot.x.scale.bandwidth() * 0.05) + ', 0)')\r\n        boxplots.exit().remove();\r\n\r\n        var boxWidth = !config.maxBoxWidth ? plot.x.scale.bandwidth() * 0.9 : Math.min(config.maxBoxWidth, Math.max(config.minBoxWidth, plot.x.scale.bandwidth() * 0.9));\r\n        var boxLeft  = plot.x.scale.bandwidth() * 0.45 - boxWidth/2;\r\n        var boxRight = plot.x.scale.bandwidth() * 0.45 + boxWidth/2;\r\n\r\n        var boxClass = self.prefixClass(\"box\");\r\n\r\n        boxplotEnter.append('rect')\r\n            .attr('class', boxClass)\r\n            // tooltip events\r\n            .on('mouseover', function(d,i) {\r\n                d3.select(this).classed('hover', true);\r\n                var html = 'Q3: '+config.Q3(d,i)+'<br/>Q2: '+config.Q2(d,i)+'<br/>Q1: '+config.Q1(d,i);\r\n                self.showTooltip(html)\r\n            })\r\n            .on('mouseout', function(d,i) {\r\n                d3.select(this).classed('hover', false);\r\n                self.hideTooltip();\r\n            });\r\n\r\n        var boxRects = boxplotsMerge.select('rect.'+boxClass);\r\n\r\n        var boxRectsT = boxRects;\r\n        if (self.config.transition) {\r\n            boxRectsT = boxRects.transition();\r\n        }\r\n\r\n        boxRectsT.attr('y', (d,i) => plot.y.scale(config.Q3(d)))\r\n            .attr('width', boxWidth)\r\n            .attr('x', boxLeft )\r\n            .attr('height', (d,i) => Math.abs(plot.y.scale(config.Q3(d)) - plot.y.scale(config.Q1(d))) || 1)\r\n            .style('stroke', plot.color);\r\n\r\n        // median line\r\n        var medianClass = self.prefixClass('median');\r\n        boxplotEnter.append('line').attr('class', medianClass);\r\n\r\n        var medianLine = boxplotsMerge.select('line.'+medianClass);\r\n        if (self.config.transition) {\r\n            medianLine = medianLine.transition();\r\n        }\r\n        medianLine\r\n            .attr('x1', boxLeft)\r\n            .attr('y1', (d,i) => plot.y.scale(config.Q2(d)))\r\n            .attr('x2', boxRight)\r\n            .attr('y2', (d,i) => plot.y.scale(config.Q2(d)));\r\n\r\n\r\n        //whiskers\r\n\r\n        var whiskerClass= self.prefixClass(\"whisker\"),\r\n            tickClass = self.prefixClass(\"boxplot-tick\");\r\n\r\n        var whiskers = [{key: 'low', value: config.Wl}, {key: 'high', value: config.Wh}];\r\n\r\n        boxplotEnter.each(function(d,i) {\r\n            var box = d3.select(this);\r\n\r\n            whiskers.forEach(f=> {\r\n                if (f.value(d)) {\r\n                    box.append('line')\r\n                        .style('stroke', plot.color(d,i))\r\n                        .attr('class', whiskerClass+' ' + boxplotClass+'-'+f.key);\r\n                    box.append('line')\r\n                        .style('stroke', plot.color(d,i))\r\n                        .attr('class', tickClass+' ' + boxplotClass+'-'+f.key);\r\n                }\r\n            });\r\n        });\r\n\r\n        whiskers.forEach(f => {\r\n            var endpoint = (f.key === 'low') ? config.Q1 : config.Q3;\r\n\r\n            var whisker = boxplotsMerge.select('.'+whiskerClass+'.'+boxplotClass+'-'+f.key);\r\n            var tick = boxplotsMerge.select('.'+tickClass+'.'+boxplotClass+'-'+f.key);\r\n            if (self.config.transition) {\r\n                whisker = whisker.transition();\r\n                tick=tick.transition();\r\n            }\r\n            whisker\r\n                .attr('x1', plot.x.scale.bandwidth() * 0.45 )\r\n                .attr('y1', (d,i) => plot.y.scale(f.value(d)))\r\n                .attr('x2', plot.x.scale.bandwidth() * 0.45 )\r\n                .attr('y2', (d,i) => plot.y.scale(endpoint(d)));\r\n\r\n            tick\r\n                .attr('x1', boxLeft )\r\n                .attr('y1', (d,i) => plot.y.scale(f.value(d)))\r\n                .attr('x2', boxRight )\r\n                .attr('y2', (d,i) => plot.y.scale(f.value(d)));\r\n\r\n            boxplotEnter.selectAll('.'+boxplotClass+'-'+f.key)\r\n                .on('mouseover', function(d,i,j) {\r\n                    d3.select(this).classed('hover', true);\r\n                    self.showTooltip(f.value(d))\r\n                })\r\n                .on('mouseout', function(d,i,j) {\r\n                    d3.select(this).classed('hover', false);\r\n                    self.hideTooltip();\r\n                })\r\n        });\r\n\r\n\r\n        // outliers\r\n        var outlierClass = self.prefixClass(\"outlier\");\r\n        var outliers = boxplotsMerge.selectAll('.'+outlierClass).data((d,i) => config.outliers(d,i) || []);\r\n\r\n        var outlierEnterCircle = outliers.enter().append('circle')\r\n            .attr('class', outlierClass)\r\n            .style('z-index', 9000);\r\n\r\n        outlierEnterCircle\r\n            .on('mouseover', function (d, i, j) {\r\n                d3.select(this).classed('hover', true);\r\n                self.showTooltip(config.outlierLabel(d,i))\r\n            })\r\n            .on('mouseout', function (d, i, j) {\r\n                d3.select(this).classed('hover', false);\r\n                self.hideTooltip();\r\n            });\r\n\r\n        var outliersMerge = outlierEnterCircle.merge(outliers);\r\n        var outliersT = outliersMerge;\r\n        if (self.config.transition) {\r\n            outliersT = outliersMerge.transition();\r\n        }\r\n        outliersT\r\n            .attr('cx', plot.x.scale.bandwidth() * 0.45)\r\n            .attr('cy', (d,i) => plot.y.scale(config.outlierValue(d,i)))\r\n            .attr('r', '3');\r\n        outliers.exit().remove();\r\n\r\n    }\r\n\r\n    update(newData){\r\n        super.update(newData);\r\n        this.drawAxisX();\r\n        this.drawAxisY();\r\n        this.drawBoxPlots();\r\n        return this;\r\n    };\r\n\r\n    setupColor() {\r\n        var self=this;\r\n        var conf = this.config;\r\n\r\n        if(conf.d3ColorCategory){\r\n            var colorSchemeCategory = 'scheme'+Utils.capitalizeFirstLetter(conf.d3ColorCategory);\r\n            this.plot.colorCategory = d3.scaleOrdinal(d3[colorSchemeCategory]);\r\n        }\r\n        var colorValue = conf.color;\r\n        if (colorValue && typeof colorValue === 'string' || colorValue instanceof String){\r\n            this.plot.color = colorValue;\r\n        }else if(this.plot.colorCategory){\r\n            self.plot.colorValue=colorValue;\r\n            this.plot.color = d =>  self.plot.colorCategory(this.plot.x.value(d));\r\n        }\r\n    }\r\n}\r\n","import {BoxPlotBase, BoxPlotBaseConfig} from \"./box-plot-base\";\r\nimport {Utils} from './utils'\r\nimport {StatisticsUtils} from './statistics-utils'\r\n\r\nexport class BoxPlotConfig extends BoxPlotBaseConfig{\r\n\r\n    svgClass = this.cssClassPrefix + 'box-plot';\r\n    showLegend = true;\r\n    showTooltip = true;\r\n    y = {// Y axis config\r\n        key: undefined,\r\n        value: function(d) { return this.y.key===undefined ? d : d[this.y.key]} , // y value accessor\r\n        scale: \"linear\",\r\n        orient: 'left',\r\n        domainMargin: 0.1,\r\n        guides: true //show axis guides\r\n    };\r\n    series = false;\r\n    groups={\r\n        key: undefined,\r\n        value: function(d) { return this.groups.key===undefined ? '' : d[this.groups.key]}  , // grouping value accessor,\r\n        label: \"\",\r\n        displayValue: undefined // optional function returning display value (series label) for given group value, or object/array mapping value to display value\r\n    };\r\n    \r\n    constructor(custom){\r\n        super();\r\n        if(custom){\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n    }\r\n}\r\n\r\nexport class BoxPlot extends BoxPlotBase{\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new BoxPlotConfig(config));\r\n    }\r\n\r\n    setConfig(config){\r\n        return super.setConfig(new BoxPlotConfig(config));\r\n    }\r\n\r\n    getDataToPlot(){\r\n        var self = this;\r\n        var conf = self.config;\r\n        self.plot.groupingEnabled = this.isGroupingEnabled();\r\n\r\n        var data = this.data;\r\n        if(!self.plot.groupingEnabled ){\r\n            self.plot.groupedData =  [{\r\n                key: '',\r\n                values: data\r\n            }];\r\n            self.plot.dataLength = data.length;\r\n        }else{\r\n            if(self.config.series){\r\n                self.plot.groupedData =  data.map(s=>{\r\n                    return{\r\n                        key: s.label || s.key || '',\r\n                        values: s.values\r\n                    }\r\n                });\r\n            }else{\r\n                self.plot.groupValue = d => conf.groups.value.call(conf, d);\r\n                self.plot.groupedData = d3.nest().key(this.plot.groupValue).entries(data);\r\n\r\n                var getDisplayValue= k => k;\r\n                if(self.config.groups.displayValue){\r\n                    if(Utils.isFunction(self.config.groups.displayValue)){\r\n                        getDisplayValue = k=>self.config.groups.displayValue(k) || k;\r\n                    }else if(Utils.isObject(self.config.groups.displayValue)){\r\n                        getDisplayValue = k => self.config.groups.displayValue[k] || k;\r\n                    }\r\n                }\r\n                self.plot.groupedData.forEach(g => {\r\n                    g.key = getDisplayValue(g.key);\r\n                });\r\n            }\r\n\r\n            self.plot.dataLength = d3.sum(this.plot.groupedData, s=>s.values.length);\r\n        }\r\n\r\n\r\n        self.plot.groupedData.forEach(s=>{\r\n            if(!Array.isArray(s.values)){\r\n                return;\r\n            }\r\n\r\n            var values = s.values.map(d=>parseFloat(self.config.y.value.call(self.config, d)));\r\n            s.values.Q1 = StatisticsUtils.quantile(values, 0.25);\r\n            s.values.Q2 = StatisticsUtils.quantile(values, 0.5);\r\n            s.values.Q3 = StatisticsUtils.quantile(values, 0.75);\r\n            var IQR =  s.values.Q3 - s.values.Q1;\r\n\r\n            if(!self.config.tukey){\r\n                s.values.whiskerLow = d3.min(values);\r\n                s.values.whiskerHigh = d3.max(values);\r\n            }else{\r\n                s.values.whiskerLow = s.values.Q1 - 1.5*IQR;\r\n                s.values.whiskerHigh = s.values.Q3 + 1.5*IQR;\r\n                s.values.outliers = values.filter(d=> d<s.values.whiskerLow || d>s.values.whiskerHigh);\r\n            }\r\n        });\r\n\r\n        return self.plot.groupedData;\r\n    }\r\n\r\n    isGroupingEnabled(){\r\n        return this.config.series || !!(this.config.groups && this.config.groups.value);\r\n    }\r\n}\r\n","import {Chart, ChartConfig} from \"./chart\";\r\nimport {Utils} from './utils'\r\nimport {Legend} from \"./legend\";\r\n\r\nexport class ChartWithColorGroupsConfig extends ChartConfig{\r\n\r\n    showLegend=true;\r\n    legend={\r\n        width: 80,\r\n        margin: 10,\r\n        shapeWidth: 20\r\n    };\r\n    groups={\r\n        key: 2,\r\n        value: function(d) { return d[this.groups.key]}  , // grouping value accessor,\r\n        label: \"\",\r\n        displayValue: undefined // optional function returning display value (series label) for given group value, or object/array mapping value to display value\r\n    };\r\n    series = false;\r\n    color =  undefined;// string or function returning color's value for color scale\r\n    d3ColorCategory= 'category10';\r\n\r\n    constructor(custom){\r\n        super();\r\n        if(custom){\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport class ChartWithColorGroups extends Chart{\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new ChartWithColorGroupsConfig(config));\r\n    }\r\n\r\n    setConfig(config){\r\n        return super.setConfig(new ChartWithColorGroupsConfig(config));\r\n    }\r\n\r\n    initPlot(){\r\n        super.initPlot();\r\n        var self=this;\r\n\r\n        var conf = this.config;\r\n       \r\n        this.plot.showLegend = conf.showLegend;\r\n        this.setupGroups();\r\n        this.plot.data = this.getDataToPlot();\r\n        this.groupData();\r\n\r\n        if(this.plot.showLegend){\r\n            var scale = this.plot.colorCategory;\r\n            if(!scale.domain() || scale.domain().length<2){\r\n                this.plot.showLegend = false;\r\n            }else{\r\n                this.plot.margin.right = conf.margin.right + conf.legend.width+conf.legend.margin*2;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    isGroupingEnabled(){\r\n        return this.config.series || !!(this.config.groups && this.config.groups.value);\r\n    }\r\n\r\n    computeGroupColorDomain(){\r\n        var map = d3.set(this.data, d => this.plot.groupValue(d));\r\n        return Object.getOwnPropertyNames(map).map(d=>map[d]);\r\n    }\r\n\r\n    setupGroups() {\r\n        var self=this;\r\n        var conf = this.config;\r\n\r\n        this.plot.groupingEnabled = this.isGroupingEnabled();\r\n        var domain = [];\r\n        if(this.plot.groupingEnabled){\r\n            self.plot.groupToLabel = {};\r\n            if(this.config.series){\r\n                this.plot.groupValue = s => s.key;\r\n                domain = this.computeGroupColorDomain();\r\n\r\n                this.data.forEach(s=>{\r\n                    self.plot.groupToLabel[s.key] = s.label||s.key;\r\n                })\r\n            }else{\r\n                this.plot.groupValue = d => conf.groups.value.call(conf, d);\r\n                domain = this.computeGroupColorDomain();\r\n                var getLabel= k => k;\r\n                if(self.config.groups.displayValue){\r\n                    if(Utils.isFunction(self.config.groups.displayValue)){\r\n                        getLabel = k=>self.config.groups.displayValue(k) || k;\r\n                    }else if(Utils.isObject(self.config.groups.displayValue)){\r\n                        getLabel = k => self.config.groups.displayValue[k] || k;\r\n                    }\r\n                }\r\n                domain.forEach(k=>{\r\n                    self.plot.groupToLabel[k] = getLabel(k);\r\n                })\r\n            }\r\n\r\n        }else{\r\n            this.plot.groupValue = d => null;\r\n        }\r\n        if(conf.d3ColorCategory){\r\n            var colorSchemeCategory = 'scheme'+Utils.capitalizeFirstLetter(conf.d3ColorCategory);\r\n            this.plot.colorCategory = d3.scaleOrdinal(d3[colorSchemeCategory]);\r\n        }\r\n        var colorValue = conf.color;\r\n        if (colorValue && typeof colorValue === 'string' || colorValue instanceof String){\r\n            this.plot.color = colorValue;\r\n            this.plot.seriesColor = this.plot.color;\r\n        }else if(this.plot.colorCategory){\r\n            self.plot.colorValue=colorValue;\r\n            self.plot.colorCategory.domain(domain);\r\n\r\n            this.plot.seriesColor = s =>  self.plot.colorCategory(s.key);\r\n            this.plot.color = d =>  self.plot.colorCategory(this.plot.groupValue(d));\r\n            \r\n        }else{\r\n            this.plot.color = this.plot.seriesColor = s=> 'black'\r\n        }\r\n\r\n    }\r\n\r\n    groupData(){\r\n        var self=this;\r\n        var data = this.plot.data;\r\n        if(!self.plot.groupingEnabled ){\r\n            self.plot.groupedData =  [{\r\n                key: null,\r\n                label: '',\r\n                values: data\r\n            }];\r\n            self.plot.dataLength = data.length;\r\n        }else{\r\n\r\n            if(self.config.series){\r\n                self.plot.groupedData =  data.map(s=>{\r\n                    return{\r\n                        key: s.key,\r\n                        label: s.label,\r\n                        values: s.values\r\n                    }\r\n                });\r\n            }else{\r\n                self.plot.groupedData = d3.nest().key(this.plot.groupValue).entries(data);\r\n                self.plot.groupedData.forEach(g => {\r\n                    g.label = self.plot.groupToLabel[g.key];\r\n                });\r\n            }\r\n\r\n            self.plot.dataLength = d3.sum(this.plot.groupedData, s=>s.values.length);\r\n        }\r\n\r\n        // this.plot.seriesColor\r\n\r\n    }\r\n\r\n    getDataToPlot(){\r\n        if(!this.plot.groupingEnabled || !this.enabledGroups){\r\n            return this.data;\r\n        }\r\n        return this.data.filter(d => this.enabledGroups.indexOf(this.plot.groupValue(d))>-1);\r\n    }\r\n\r\n\r\n\r\n    update(newData){\r\n        super.update(newData);\r\n        this.updateLegend();\r\n\r\n        return this;\r\n    };\r\n\r\n    updateLegend() {\r\n\r\n        var self =this;\r\n        var plot = this.plot;\r\n\r\n        var scale = plot.colorCategory;\r\n\r\n\r\n\r\n        if(!scale.domain() || scale.domain().length<2){\r\n            plot.showLegend = false;\r\n        }\r\n\r\n        if(!plot.showLegend){\r\n            if(plot.legend && plot.legend.container){\r\n                plot.legend.container.remove();\r\n            }\r\n            return;\r\n        }\r\n\r\n\r\n        var legendX = this.plot.width + this.config.legend.margin;\r\n        var legendY = this.config.legend.margin;\r\n\r\n        plot.legend = new Legend(this.svg, this.svgG, scale, legendX, legendY);\r\n\r\n        plot.legendColor = plot.legend.color()\r\n            .shapeWidth(this.config.legend.shapeWidth)\r\n            .orient('vertical')\r\n            .scale(scale)\r\n            .labels(scale.domain().map(v=>plot.groupToLabel[v]));\r\n\r\n\r\n        plot.legendColor.on('cellclick', c=> self.onLegendCellClick(c));\r\n        \r\n        plot.legend.container\r\n            .call(plot.legendColor);\r\n\r\n        this.updateLegendCellStatuses();\r\n    }\r\n\r\n    onLegendCellClick(cellValue){\r\n        this.updateEnabledGroups(cellValue);\r\n        this.init();\r\n    }\r\n    updateLegendCellStatuses() {\r\n        var self = this;\r\n        this.plot.legend.container.selectAll(\"g.cell\").each(function(cell){\r\n            var isDisabled = self.enabledGroups && self.enabledGroups.indexOf(cell)<0;\r\n            d3.select(this).classed(\"odc-disabled\", isDisabled);\r\n        });\r\n    }\r\n\r\n    updateEnabledGroups(cellValue) {\r\n        if (!this.enabledGroups) {\r\n            this.enabledGroups = this.plot.colorCategory.domain().slice();\r\n        }\r\n        var index = this.enabledGroups.indexOf(cellValue);\r\n\r\n        if (index < 0) {\r\n            this.enabledGroups.push(cellValue);\r\n        } else {\r\n            this.enabledGroups.splice(index, 1);\r\n        }\r\n\r\n        if (!this.enabledGroups.length) {\r\n            this.enabledGroups = this.plot.colorCategory.domain().slice();\r\n        }\r\n\r\n    }\r\n\r\n    setData(data){\r\n        super.setData(data);\r\n        this.enabledGroups = null;\r\n        return this;\r\n    }\r\n}\r\n","import {Utils} from './utils'\r\n\r\n\r\nexport class ChartConfig {\r\n    cssClassPrefix = \"odc-\";\r\n    svgClass = this.cssClassPrefix + 'mw-d3-chart';\r\n    width = undefined;\r\n    height = undefined;\r\n    margin = {\r\n        left: 50,\r\n        right: 30,\r\n        top: 30,\r\n        bottom: 50\r\n    };\r\n    showTooltip = false;\r\n    transition = true;\r\n\r\n    title = undefined;\r\n    titleSize=20;\r\n    titleMargin={\r\n        left: 0,\r\n        right: 0,\r\n        top: 15,\r\n        bottom: 20\r\n    };\r\n\r\n    subtitle = undefined;\r\n    subtitleSize=14;\r\n    subtitleMargin={\r\n        left: 0,\r\n        right: 0,\r\n        top: 10,\r\n        bottom: 20\r\n    };\r\n\r\n    constructor(custom) {\r\n        if (custom) {\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class Chart {\r\n    utils = Utils;\r\n    baseContainer;\r\n    svg;\r\n    config;\r\n    plot = {\r\n        margin: {}\r\n    };\r\n    _attached = {};\r\n    _layers = {};\r\n    _events = {};\r\n    _isAttached;\r\n    _isInitialized=false;\r\n\r\n\r\n    constructor(base, data, config) {\r\n        this._id = Utils.guid();\r\n        this._isAttached = base instanceof Chart;\r\n\r\n        this.baseContainer = base;\r\n\r\n        this.setConfig(config);\r\n\r\n        if (data) {\r\n            this.setData(data);\r\n        }\r\n        this.init();\r\n        this.postInit();\r\n    }\r\n\r\n    setConfig(config) {\r\n        if (!config) {\r\n            this.config = new ChartConfig();\r\n        } else {\r\n            this.config = config;\r\n        }\r\n        this.initConfigAccessors();\r\n        return this;\r\n    }\r\n\r\n    setData(data) {\r\n        this.data = data;\r\n        return this;\r\n    }\r\n\r\n    init() {\r\n        var self = this;\r\n        self.initPlot();\r\n        self.initSvg();\r\n\r\n        if(!this._isInitialized){\r\n            self.initTooltip();\r\n        }\r\n        self.draw();\r\n        this._isInitialized=true;\r\n        return this;\r\n    }\r\n\r\n    redraw(){\r\n        return this.init();\r\n    }\r\n\r\n    postInit(){\r\n\r\n    }\r\n\r\n    initSvg() {\r\n        var self = this;\r\n        var config = this.config;\r\n\r\n        var margin = self.plot.margin;\r\n        var width = self.svgWidth = self.plot.width + margin.left + margin.right;\r\n        var height = self.svgHeight =  self.plot.height + margin.top + margin.bottom;\r\n        var aspect = width / height;\r\n        if(!self._isAttached){\r\n            if(!this._isInitialized){\r\n                d3.select(self.baseContainer).select(\"svg\").remove();\r\n            }\r\n            self.svg = d3.select(self.baseContainer).selectOrAppend(\"svg\");\r\n\r\n            self.svg\r\n                .attr(\"width\", width)\r\n                .attr(\"height\", height)\r\n                .attr(\"viewBox\", \"0 0 \" + \" \" + width + \" \" + height)\r\n                .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\r\n                .attr(\"class\", config.svgClass);\r\n            self.svgG = self.svg.selectOrAppend(\"g.main-group\");\r\n        }else{\r\n            console.log(self.baseContainer);\r\n            self.svg = self.baseContainer.svg;\r\n            self.svgG = self.svg.selectOrAppend(\"g.main-group.\"+config.svgClass)\r\n        }\r\n\r\n        self.svgG.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        if (!config.width || config.height) {\r\n            d3.select(window)\r\n                .on(\"resize.\"+self._id, function () {\r\n                    console.log(\"resize\", self);\r\n                    var transition = self.config.transition;\r\n                    self.config.transition=false;\r\n                    self.init();\r\n                    self.config.transition = transition;\r\n                });\r\n        }\r\n    }\r\n\r\n    initTooltip(){\r\n        var self = this;\r\n        if (self.config.showTooltip) {\r\n            if(!self._isAttached ){\r\n                self.plot.tooltip = d3.select(\"body\").selectOrAppend('div.'+self.config.cssClassPrefix+'tooltip')\r\n                    .style(\"opacity\", 0);\r\n            }else{\r\n                self.plot.tooltip= self.baseContainer.plot.tooltip;\r\n            }\r\n\r\n        }else{\r\n            self.plot.tooltip = null;\r\n        }\r\n    }\r\n\r\n    initPlot() {\r\n        var margin = this.config.margin;\r\n        this.plot = this.plot || {};\r\n        this.plot.margin = {\r\n            top: margin.top,\r\n            bottom: margin.bottom,\r\n            left: margin.left,\r\n            right: margin.right\r\n        };\r\n\r\n\r\n        var titleMarginSize = 0;\r\n        if(this.config.title){\r\n            titleMarginSize= this.config.titleSize+this.config.titleMargin.top;\r\n            if(!this.config.subtitle){\r\n                titleMarginSize += this.config.titleMargin.bottom;\r\n            }\r\n\r\n            this.plot.margin.top=Math.max(this.plot.margin.top,titleMarginSize);\r\n        }\r\n\r\n        if(this.config.subtitle){\r\n\r\n            this.plot.margin.top=Math.max(this.plot.margin.top, titleMarginSize+this.config.subtitleMargin.top+this.config.subtitleSize+this.config.subtitleMargin.bottom);\r\n        }\r\n\r\n    }\r\n\r\n    update(data) {\r\n        if (data) {\r\n            this.setData(data);\r\n        }\r\n        this.updateTitle();\r\n        this.updateSubtitle();\r\n\r\n        var layerName, attachmentData;\r\n        for (var attachmentName in this._attached) {\r\n\r\n            attachmentData = data;\r\n\r\n            this._attached[attachmentName].update(attachmentData);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    updateTitle() {\r\n        var titleClass = this.prefixClass('plot-title');\r\n        if(!this.config.title){\r\n            this.svg.select(\"text.\"+titleClass).remove();\r\n            return;\r\n        }\r\n\r\n        this.svg.selectOrAppend(\"text.\"+titleClass)\r\n            .attr(\"transform\", \"translate(\"+ (this.svgWidth/2) +\",\"+ (this.config.titleMargin.top) +\")\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"0.5em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .style(\"dominant-baseline\", \"central\")\r\n            .style(\"font-size\", this.config.titleSize+\"px\")\r\n            .text(this.config.title);\r\n    }\r\n\r\n    updateSubtitle() {\r\n        var subtitleClass = this.prefixClass('plot-subtitle');\r\n        if(!this.config.subtitle){\r\n            this.svg.select(\"text.\"+subtitleClass).remove();\r\n            return;\r\n        }\r\n\r\n        var y = this.config.subtitleMargin.top;\r\n        if(this.config.title){\r\n            y+=this.config.titleMargin.top+this.config.titleSize;\r\n        }\r\n\r\n        this.svg.selectOrAppend(\"text.\"+subtitleClass)\r\n            .attr(\"transform\", \"translate(\"+ (this.svgWidth/2) +\",\"+ (y) +\")\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"0.5em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .style(\"dominant-baseline\", \"central\")\r\n            .style(\"font-size\", this.config.subtitleSize+\"px\")\r\n            .text(this.config.subtitle);\r\n    }\r\n\r\n    draw(data) {\r\n        this.update(data);\r\n\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    //Borrowed from d3.chart\r\n    /**\r\n     * Register or retrieve an \"attachment\" Chart. The \"attachment\" chart's `draw`\r\n     * method will be invoked whenever the containing chart's `draw` method is\r\n     * invoked.\r\n     *\r\n     * @externalExample chart-attach\r\n     *\r\n     * @param {String} attachmentName Name of the attachment\r\n     * @param {Chart} [chart] Chart to register as a mix in of this chart. When\r\n     *        unspecified, this method will return the attachment previously\r\n     *        registered with the specified `attachmentName` (if any).\r\n     *\r\n     * @returns {Chart} Reference to this chart (chainable).\r\n     */\r\n    attach(attachmentName, chart) {\r\n        if (arguments.length === 1) {\r\n            return this._attached[attachmentName];\r\n        }\r\n\r\n        this._attached[attachmentName] = chart;\r\n        return chart;\r\n    };\r\n\r\n    \r\n\r\n    //Borrowed from d3.chart\r\n    /**\r\n     * Subscribe a callback function to an event triggered on the chart. See {@link\r\n        * Chart#once} to subscribe a callback function to an event for one occurence.\r\n     *\r\n     * @externalExample {runnable} chart-on\r\n     *\r\n     * @param {String} name Name of the event\r\n     * @param {ChartEventHandler} callback Function to be invoked when the event\r\n     *        occurs\r\n     * @param {Object} [context] Value to set as `this` when invoking the\r\n     *        `callback`. Defaults to the chart instance.\r\n     *\r\n     * @returns {Chart} A reference to this chart (chainable).\r\n     */\r\n    on(name, callback, context) {\r\n        var events = this._events[name] || (this._events[name] = []);\r\n        events.push({\r\n            callback: callback,\r\n            context: context || this,\r\n            _chart: this\r\n        });\r\n        return this;\r\n    }\r\n\r\n    //Borrowed from d3.chart\r\n    /**\r\n     *\r\n     * Subscribe a callback function to an event triggered on the chart. This\r\n     * function will be invoked at the next occurance of the event and immediately\r\n     * unsubscribed. See {@link Chart#on} to subscribe a callback function to an\r\n     * event indefinitely.\r\n     *\r\n     * @externalExample {runnable} chart-once\r\n     *\r\n     * @param {String} name Name of the event\r\n     * @param {ChartEventHandler} callback Function to be invoked when the event\r\n     *        occurs\r\n     * @param {Object} [context] Value to set as `this` when invoking the\r\n     *        `callback`. Defaults to the chart instance\r\n     *\r\n     * @returns {Chart} A reference to this chart (chainable)\r\n     */\r\n    once(name, callback, context) {\r\n        var self = this;\r\n        var once = function () {\r\n            self.off(name, once);\r\n            callback.apply(this, arguments);\r\n        };\r\n        return this.on(name, once, context);\r\n    }\r\n\r\n\r\n    //Borrowed from d3.chart\r\n    /**\r\n     * Unsubscribe one or more callback functions from an event triggered on the\r\n     * chart. When no arguments are specified, *all* handlers will be unsubscribed.\r\n     * When only a `name` is specified, all handlers subscribed to that event will\r\n     * be unsubscribed. When a `name` and `callback` are specified, only that\r\n     * function will be unsubscribed from that event. When a `name` and `context`\r\n     * are specified (but `callback` is omitted), all events bound to the given\r\n     * event with the given context will be unsubscribed.\r\n     *\r\n     * @externalExample {runnable} chart-off\r\n     *\r\n     * @param {String} [name] Name of the event to be unsubscribed\r\n     * @param {ChartEventHandler} [callback] Function to be unsubscribed\r\n     * @param {Object} [context] Contexts to be unsubscribe\r\n     *\r\n     * @returns {Chart} A reference to this chart (chainable).\r\n     */\r\n\r\n    off(name, callback, context) {\r\n        var names, n, events, event, i, j;\r\n\r\n        // remove all events\r\n        if (arguments.length === 0) {\r\n            for (name in this._events) {\r\n                this._events[name].length = 0;\r\n            }\r\n            return this;\r\n        }\r\n\r\n        // remove all events for a specific name\r\n        if (arguments.length === 1) {\r\n            events = this._events[name];\r\n            if (events) {\r\n                events.length = 0;\r\n            }\r\n            return this;\r\n        }\r\n\r\n        // remove all events that match whatever combination of name, context\r\n        // and callback.\r\n        names = name ? [name] : Object.keys(this._events);\r\n        for (i = 0; i < names.length; i++) {\r\n            n = names[i];\r\n            events = this._events[n];\r\n            j = events.length;\r\n            while (j--) {\r\n                event = events[j];\r\n                if ((callback && callback === event.callback) ||\r\n                    (context && context === event.context)) {\r\n                    events.splice(j, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    //Borrowed from d3.chart\r\n    /**\r\n     * Publish an event on this chart with the given `name`.\r\n     *\r\n     * @externalExample {runnable} chart-trigger\r\n     *\r\n     * @param {String} name Name of the event to publish\r\n     * @param {...*} arguments Values with which to invoke the registered\r\n     *        callbacks.\r\n     *\r\n     * @returns {Chart} A reference to this chart (chainable).\r\n     */\r\n    trigger(name) {\r\n        var args = Array.prototype.slice.call(arguments, 1);\r\n        var events = this._events[name];\r\n        var i, ev;\r\n\r\n        if (events !== undefined) {\r\n            for (i = 0; i < events.length; i++) {\r\n                ev = events[i];\r\n                ev.callback.apply(ev.context, args);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n    getBaseContainer(){\r\n        if(this._isAttached){\r\n            return this.baseContainer.svg;\r\n        }\r\n        return d3.select(this.baseContainer);\r\n    }\r\n\r\n    getBaseContainerNode(){\r\n\r\n        return this.getBaseContainer().node();\r\n    }\r\n\r\n    prefixClass(clazz, addDot){\r\n        return addDot? '.': ''+this.config.cssClassPrefix+clazz;\r\n    }\r\n    computePlotSize() {\r\n        this.plot.width = Utils.availableWidth(this.config.width, this.getBaseContainer(), this.plot.margin);\r\n        this.plot.height = Utils.availableHeight(this.config.height, this.getBaseContainer(), this.plot.margin);\r\n    }\r\n\r\n    transitionEnabled(){\r\n        return this._isInitialized && this.config.transition;\r\n    }\r\n\r\n    showTooltip(html){\r\n        if(!this.plot.tooltip){\r\n            return;\r\n        }\r\n        this.plot.tooltip.transition()\r\n            .duration(200)\r\n            .style(\"opacity\", .9);\r\n        this.plot.tooltip.html(html)\r\n            .style(\"left\", (d3.event.pageX + 5) + \"px\")\r\n            .style(\"top\", (d3.event.pageY - 28) + \"px\");\r\n    }\r\n\r\n    hideTooltip(){\r\n        if(!this.plot.tooltip){\r\n            return;\r\n        }\r\n        this.plot.tooltip.transition()\r\n            .duration(500)\r\n            .style(\"opacity\", 0);\r\n    }\r\n\r\n    initConfigAccessors() {\r\n        this.initPropertyAccessors(this,this, this.config, \"$\", true);\r\n    }\r\n\r\n    initPropertyAccessors(bindTo,returnObj, source, prefix, recursive) {\r\n        var self  = this;\r\n        for (var i in source) {\r\n            if(!source.hasOwnProperty(i)){\r\n                continue;\r\n            }\r\n\r\n            var accessor = self.initPropertyAccessor(bindTo,returnObj, source, i, prefix);\r\n\r\n            if(recursive && Utils.isObjectNotArray(source[i])){\r\n                self.initPropertyAccessors(accessor, bindTo, source[i], prefix, recursive)\r\n            }\r\n        }\r\n    }\r\n\r\n    initPropertyAccessor(bindTo, returnObj, source, propertyKey, prefix) {\r\n        return bindTo[prefix + propertyKey] = function (_) {\r\n            if (!arguments.length) {\r\n                return source[propertyKey];\r\n            }\r\n            source[propertyKey] = _;\r\n            return returnObj;\r\n        };\r\n    }\r\n}\r\n","import {Chart, ChartConfig} from \"./chart\";\r\nimport {Utils} from './utils'\r\nimport {StatisticsUtils} from './statistics-utils'\r\nimport {Legend} from './legend'\r\nimport {ScatterPlot} from './scatterplot'\r\n\r\nexport class CorrelationMatrixConfig extends ChartConfig {\r\n\r\n    svgClass = this.cssClassPrefix+'correlation-matrix';\r\n    guides = false; //show axis guides\r\n    showTooltip = true; //show tooltip on dot hover\r\n    showLegend = true;\r\n    highlightLabels = true;\r\n    rotateLabelsX = true;\r\n    rotateLabelsY = true;\r\n    variables = {\r\n        labels: undefined,\r\n        keys: [], //optional array of variable keys\r\n        value: (d, variableKey) => d[variableKey], // variable value accessor\r\n        scale: \"ordinal\"\r\n    };\r\n    correlation = {\r\n        scale: \"linear\",\r\n        domain: [-1, -0.75, -0.5, 0, 0.5, 0.75, 1],\r\n        range: [\"darkblue\", \"blue\", \"lightskyblue\", \"white\", \"orangered\", \"crimson\", \"darkred\"],\r\n        value: (xValues, yValues) => StatisticsUtils.sampleCorrelation(xValues, yValues)\r\n\r\n    };\r\n    cell = {\r\n        shape: \"ellipse\", //possible values: rect, circle, ellipse\r\n        size: undefined,\r\n        sizeMin: 15,\r\n        sizeMax: 250,\r\n        padding: 1\r\n    };\r\n    margin = {\r\n        left: 60,\r\n        right: 50,\r\n        top: 30,\r\n        bottom: 60\r\n    };\r\n\r\n    constructor(custom) {\r\n        super();\r\n        if (custom) {\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n    }\r\n}\r\n\r\nexport class CorrelationMatrix extends Chart {\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new CorrelationMatrixConfig(config));\r\n    }\r\n\r\n    setConfig(config) {\r\n        return super.setConfig(new CorrelationMatrixConfig(config));\r\n\r\n    }\r\n\r\n    initPlot() {\r\n        super.initPlot();\r\n        var self = this;\r\n        var margin = this.config.margin;\r\n        var conf = this.config;\r\n\r\n        this.plot.x = {};\r\n        this.plot.correlation = {\r\n            matrix: undefined,\r\n            cells: undefined,\r\n            color: {},\r\n            shape: {}\r\n        };\r\n\r\n\r\n        this.setupVariables();\r\n        var width = conf.width;\r\n        var placeholderNode = this.getBaseContainerNode();\r\n        this.plot.placeholderNode = placeholderNode;\r\n\r\n        var parentWidth = placeholderNode.getBoundingClientRect().width;\r\n        if (width) {\r\n\r\n            if (!this.plot.cellSize) {\r\n                this.plot.cellSize = Math.max(conf.cell.sizeMin, Math.min(conf.cell.sizeMax, (width - margin.left - margin.right) / this.plot.variables.length));\r\n            }\r\n\r\n        } else {\r\n            this.plot.cellSize = this.config.cell.size;\r\n\r\n            if (!this.plot.cellSize) {\r\n                this.plot.cellSize = Math.max(conf.cell.sizeMin, Math.min(conf.cell.sizeMax, (parentWidth - margin.left - margin.right) / this.plot.variables.length));\r\n            }\r\n\r\n            width = this.plot.cellSize * this.plot.variables.length + margin.left + margin.right;\r\n\r\n        }\r\n\r\n        var height = width;\r\n        if (!height) {\r\n            height = placeholderNode.getBoundingClientRect().height;\r\n        }\r\n\r\n        this.plot.width = width - margin.left - margin.right;\r\n        this.plot.height = this.plot.width;\r\n\r\n        this.setupVariablesScales();\r\n        this.setupCorrelationScales();\r\n        this.setupCorrelationMatrix();\r\n\r\n\r\n        return this;\r\n    }\r\n\r\n    setupVariablesScales() {\r\n\r\n        var plot = this.plot;\r\n        var x = plot.x;\r\n        var conf = this.config.variables;\r\n\r\n        /* *\r\n         * value accessor - returns the value to encode for a given data object.\r\n         * scale - maps value to a visual display encoding, such as a pixel position.\r\n         * map function - maps from data value to display value\r\n         * axis - sets up axis\r\n         **/\r\n        x.value = conf.value;\r\n        x.scale = d3.scaleBand().range([plot.width, 0]);\r\n        x.map = d => x.scale(x.value(d));\r\n\r\n    };\r\n\r\n    setupCorrelationScales() {\r\n        var plot = this.plot;\r\n        var corrConf = this.config.correlation;\r\n\r\n        plot.correlation.color.scale = Utils.createScale(corrConf.scale).domain(corrConf.domain).range(corrConf.range);\r\n        var shape = plot.correlation.shape = {};\r\n\r\n        var cellConf = this.config.cell;\r\n        shape.type = cellConf.shape;\r\n\r\n        var shapeSize = plot.cellSize - cellConf.padding * 2;\r\n        if (shape.type == 'circle') {\r\n            var radiusMax = shapeSize / 2;\r\n            shape.radiusScale = d3.scaleLinear().domain([0, 1]).range([2, radiusMax]);\r\n            shape.radius = c=> shape.radiusScale(Math.abs(c.value));\r\n        } else if (shape.type == 'ellipse') {\r\n            var radiusMax = shapeSize / 2;\r\n            shape.radiusScale = d3.scaleLinear().domain([0, 1]).range([radiusMax, 2]);\r\n            shape.radiusX = c=> shape.radiusScale(Math.abs(c.value));\r\n            shape.radiusY = radiusMax;\r\n\r\n            shape.rotateVal = v => {\r\n                if (v == 0) return \"0\";\r\n                if (v < 0) return \"-45\";\r\n                return \"45\"\r\n            }\r\n        } else if (shape.type == 'rect') {\r\n            shape.size = shapeSize;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    setupVariables() {\r\n\r\n        var variablesConf = this.config.variables;\r\n\r\n        var data = this.data;\r\n        var plot = this.plot;\r\n        plot.domainByVariable = {};\r\n        plot.variables = variablesConf.keys;\r\n        if (!plot.variables || !plot.variables.length) {\r\n            plot.variables = Utils.inferVariables(data, this.config.groups.key, this.config.includeInPlot);\r\n        }\r\n\r\n        plot.labels = [];\r\n        plot.labelByVariable = {};\r\n        plot.variables.forEach((variableKey, index) => {\r\n            plot.domainByVariable[variableKey] = d3.extent(data, (d) => variablesConf.value(d, variableKey));\r\n            var label = variableKey;\r\n            if (variablesConf.labels && variablesConf.labels.length > index) {\r\n\r\n                label = variablesConf.labels[index];\r\n            }\r\n            plot.labels.push(label);\r\n            plot.labelByVariable[variableKey] = label;\r\n        });\r\n\r\n        console.log(plot.labelByVariable);\r\n\r\n    };\r\n\r\n\r\n    setupCorrelationMatrix() {\r\n        var self = this;\r\n        var data = this.data;\r\n        var matrix = this.plot.correlation.matrix = [];\r\n        var matrixCells = this.plot.correlation.matrix.cells = [];\r\n        var plot = this.plot;\r\n\r\n        var variableToValues = {};\r\n        plot.variables.forEach((v, i) => {\r\n\r\n            variableToValues[v] = data.map(d=>plot.x.value(d, v));\r\n        });\r\n\r\n        plot.variables.forEach((v1, i) => {\r\n            var row = [];\r\n            matrix.push(row);\r\n\r\n            plot.variables.forEach((v2, j) => {\r\n                var corr = 1;\r\n                if (v1 != v2) {\r\n                    corr = self.config.correlation.value(variableToValues[v1], variableToValues[v2]);\r\n                }\r\n                var cell = {\r\n                    rowVar: v1,\r\n                    colVar: v2,\r\n                    row: i,\r\n                    col: j,\r\n                    value: corr\r\n                };\r\n                row.push(cell);\r\n\r\n                matrixCells.push(cell);\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n\r\n    update(newData) {\r\n        super.update(newData);\r\n        // this.update\r\n        this.updateCells();\r\n        this.updateVariableLabels();\r\n\r\n\r\n        if (this.config.showLegend) {\r\n            this.updateLegend();\r\n        }\r\n    };\r\n\r\n    updateVariableLabels() {\r\n        this.plot.labelClass = this.prefixClass(\"label\");\r\n        this.updateAxisX();\r\n        this.updateAxisY();\r\n    }\r\n\r\n    updateAxisX() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var labelClass = plot.labelClass;\r\n        var labelXClass = labelClass + \"-x\";\r\n\r\n        var labels = self.svgG.selectAll(\"text.\" + labelXClass)\r\n            .data(plot.variables, (d, i)=>i);\r\n\r\n        var labelsMerge = labels.enter().append(\"text\").attr(\"class\", (d, i) => labelClass + \" \" + labelXClass + \" \" + labelXClass + \"-\" + i).merge(labels);\r\n\r\n        labelsMerge\r\n            .attr(\"x\", (d, i) => i * plot.cellSize + plot.cellSize / 2)\r\n            .attr(\"y\", plot.height)\r\n            .attr(\"dx\", -2)\r\n            .attr(\"dy\", 5)\r\n            .attr(\"text-anchor\", \"end\")\r\n\r\n            // .attr(\"dominant-baseline\", \"hanging\")\r\n            .text(v=>plot.labelByVariable[v]);\r\n\r\n        if (this.config.rotateLabelsX) {\r\n            labelsMerge.attr(\"transform\", (d, i) => \"rotate(-45, \" + (i * plot.cellSize + plot.cellSize / 2  ) + \", \" + plot.height + \")\")\r\n        }\r\n\r\n        var maxWidth = self.computeXAxisLabelsWidth();\r\n        labelsMerge.each(function (label) {\r\n            Utils.placeTextWithEllipsisAndTooltip(d3.select(this), label, maxWidth, self.config.showTooltip ? self.plot.tooltip : false);\r\n        });\r\n\r\n        labels.exit().remove();\r\n    }\r\n\r\n    updateAxisY() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var labelClass = plot.labelClass;\r\n        var labelYClass = plot.labelClass + \"-y\";\r\n        var labels = self.svgG.selectAll(\"text.\" + labelYClass)\r\n            .data(plot.variables);\r\n\r\n        var labelsMerge = labels.enter().append(\"text\").merge(labels);\r\n\r\n        labelsMerge\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", (d, i) => i * plot.cellSize + plot.cellSize / 2)\r\n            .attr(\"dx\", -2)\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"class\", (d, i) => labelClass + \" \" + labelYClass + \" \" + labelYClass + \"-\" + i)\r\n            // .attr(\"dominant-baseline\", \"hanging\")\r\n            .text(v=>plot.labelByVariable[v]);\r\n\r\n        if (this.config.rotateLabelsY) {\r\n            labelsMerge\r\n                .attr(\"transform\", (d, i) => \"rotate(-45, \" + 0 + \", \" + (i * plot.cellSize + plot.cellSize / 2) + \")\")\r\n                .attr(\"text-anchor\", \"end\");\r\n        }\r\n\r\n        var maxWidth = self.computeYAxisLabelsWidth();\r\n        labelsMerge.each(function (label) {\r\n            Utils.placeTextWithEllipsisAndTooltip(d3.select(this), label, maxWidth, self.config.showTooltip ? self.plot.tooltip : false);\r\n        });\r\n\r\n        labels.exit().remove();\r\n    }\r\n\r\n    computeYAxisLabelsWidth() {\r\n        var maxWidth = this.plot.margin.left;\r\n        if (!this.config.rotateLabelsY) {\r\n            return maxWidth;\r\n        }\r\n\r\n        maxWidth *= Utils.SQRT_2;\r\n        var fontSize = 11; //todo check actual font size\r\n        maxWidth -= fontSize / 2;\r\n\r\n        return maxWidth;\r\n    }\r\n\r\n    computeXAxisLabelsWidth(offset) {\r\n        if (!this.config.rotateLabelsX) {\r\n            return this.plot.cellSize - 2;\r\n        }\r\n        var size = this.plot.margin.bottom;\r\n        size *= Utils.SQRT_2;\r\n        var fontSize = 11; //todo check actual font size\r\n        size -= fontSize / 2;\r\n        return size;\r\n    }\r\n\r\n    updateCells() {\r\n\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var cellClass = self.prefixClass(\"cell\");\r\n        var cellShape = plot.correlation.shape.type;\r\n\r\n        var cells = self.svgG.selectAll(\"g.\" + cellClass)\r\n            .data(plot.correlation.matrix.cells);\r\n\r\n        var cellsEnter = cells.enter().append(\"g\")\r\n            .classed(cellClass, true);\r\n        var cellsMerge = cellsEnter.merge(cells);\r\n        cellsMerge.attr(\"transform\", c=> \"translate(\" + (plot.cellSize * c.col + plot.cellSize / 2) + \",\" + (plot.cellSize * c.row + plot.cellSize / 2) + \")\");\r\n\r\n        cellsMerge.classed(self.config.cssClassPrefix + \"selectable\", !!self.scatterPlot);\r\n\r\n        var selector = \"*:not(.cell-shape-\" + cellShape + \")\";\r\n\r\n        var wrongShapes = cells.selectAll(selector);\r\n        wrongShapes.remove();\r\n\r\n        var shapes = cellsMerge.selectOrAppend(cellShape + \".cell-shape-\" + cellShape);\r\n\r\n        if (plot.correlation.shape.type == 'circle') {\r\n\r\n            shapes\r\n                .attr(\"r\", plot.correlation.shape.radius)\r\n                .attr(\"cx\", 0)\r\n                .attr(\"cy\", 0);\r\n        }\r\n\r\n        if (plot.correlation.shape.type == 'ellipse') {\r\n            // cells.attr(\"transform\", c=> \"translate(300,150) rotate(\"+plot.correlation.shape.rotateVal(c.value)+\")\");\r\n            shapes\r\n                .attr(\"rx\", plot.correlation.shape.radiusX)\r\n                .attr(\"ry\", plot.correlation.shape.radiusY)\r\n                .attr(\"cx\", 0)\r\n                .attr(\"cy\", 0)\r\n\r\n                .attr(\"transform\", c=> \"rotate(\" + plot.correlation.shape.rotateVal(c.value) + \")\");\r\n        }\r\n\r\n\r\n        if (plot.correlation.shape.type == 'rect') {\r\n            shapes\r\n                .attr(\"width\", plot.correlation.shape.size)\r\n                .attr(\"height\", plot.correlation.shape.size)\r\n                .attr(\"x\", -plot.cellSize / 2)\r\n                .attr(\"y\", -plot.cellSize / 2);\r\n        }\r\n        shapes.style(\"fill\", c=> plot.correlation.color.scale(c.value));\r\n\r\n        var mouseoverCallbacks = [];\r\n        var mouseoutCallbacks = [];\r\n\r\n        if (plot.tooltip) {\r\n\r\n            mouseoverCallbacks.push(c=> {\r\n                var html = c.value;\r\n                self.showTooltip(html);\r\n            });\r\n\r\n            mouseoutCallbacks.push(c=> {\r\n                self.hideTooltip();\r\n            });\r\n\r\n\r\n        }\r\n\r\n        if (self.config.highlightLabels) {\r\n            var highlightClass = self.config.cssClassPrefix + \"highlight\";\r\n            var xLabelClass = c=>plot.labelClass + \"-x-\" + c.col;\r\n            var yLabelClass = c=>plot.labelClass + \"-y-\" + c.row;\r\n\r\n\r\n            mouseoverCallbacks.push(c=> {\r\n\r\n                self.svgG.selectAll(\"text.\" + xLabelClass(c)).classed(highlightClass, true);\r\n                self.svgG.selectAll(\"text.\" + yLabelClass(c)).classed(highlightClass, true);\r\n            });\r\n            mouseoutCallbacks.push(c=> {\r\n                self.svgG.selectAll(\"text.\" + xLabelClass(c)).classed(highlightClass, false);\r\n                self.svgG.selectAll(\"text.\" + yLabelClass(c)).classed(highlightClass, false);\r\n            });\r\n        }\r\n\r\n\r\n        cellsMerge.on(\"mouseover\", c => {\r\n            mouseoverCallbacks.forEach(callback=>callback(c));\r\n        })\r\n            .on(\"mouseout\", c => {\r\n                mouseoutCallbacks.forEach(callback=>callback(c));\r\n            });\r\n\r\n        cellsMerge.on(\"click\", c=> {\r\n            self.trigger(\"cell-selected\", c);\r\n        });\r\n\r\n\r\n        cells.exit().remove();\r\n    }\r\n\r\n\r\n    updateLegend() {\r\n\r\n        var plot = this.plot;\r\n        var legendX = this.plot.width + 10;\r\n        var legendY = 0;\r\n        var barWidth = 10;\r\n        var barHeight = this.plot.height - 2;\r\n        var scale = plot.correlation.color.scale;\r\n\r\n        plot.legend = new Legend(this.svg, this.svgG, scale, legendX, legendY).linearGradientBar(barWidth, barHeight);\r\n        \r\n    }\r\n\r\n    attachScatterPlot(containerSelector, config) {\r\n        var self = this;\r\n\r\n        config = config || {};\r\n\r\n\r\n        var scatterPlotConfig = {\r\n            height: self.plot.height + self.config.margin.top + self.config.margin.bottom,\r\n            width: self.plot.height + self.config.margin.top + self.config.margin.bottom,\r\n            groups: {\r\n                key: self.config.groups.key,\r\n                label: self.config.groups.label\r\n            },\r\n            guides: true,\r\n            showLegend: false\r\n        };\r\n\r\n        self.scatterPlot = true;\r\n\r\n        scatterPlotConfig = Utils.deepExtend(scatterPlotConfig, config);\r\n        this.update();\r\n\r\n        this.on(\"cell-selected\", c=> {\r\n\r\n\r\n            scatterPlotConfig.x = {\r\n                key: c.rowVar,\r\n                label: self.plot.labelByVariable[c.rowVar]\r\n            };\r\n            scatterPlotConfig.y = {\r\n                key: c.colVar,\r\n                label: self.plot.labelByVariable[c.colVar]\r\n            };\r\n            if (self.scatterPlot && self.scatterPlot !== true) {\r\n                self.scatterPlot.setConfig(scatterPlotConfig).init();\r\n            } else {\r\n                self.scatterPlot = new ScatterPlot(containerSelector, self.data, scatterPlotConfig);\r\n                this.attach(\"ScatterPlot\", self.scatterPlot);\r\n            }\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n}\r\n","import {Utils} from './utils'\r\n\r\n\r\nexport class D3Extensions{\r\n\r\n    static extend(){\r\n\r\n        d3.selection.prototype.enter.prototype.insertSelector =\r\n            d3.selection.prototype.insertSelector = function(selector, before) {\r\n                return Utils.insertSelector(this, selector, before);\r\n            };\r\n\r\n\r\n        d3.selection.prototype.enter.prototype.appendSelector =\r\n            d3.selection.prototype.appendSelector = function(selector) {\r\n                return Utils.appendSelector(this, selector);\r\n            };\r\n\r\n        d3.selection.prototype.enter.prototype.selectOrAppend =\r\n            d3.selection.prototype.selectOrAppend = function(selector) {\r\n                return Utils.selectOrAppend(this, selector);\r\n            };\r\n\r\n        d3.selection.prototype.enter.prototype.selectOrInsert =\r\n            d3.selection.prototype.selectOrInsert = function(selector, before) {\r\n                return Utils.selectOrInsert(this, selector, before);\r\n            };\r\n\r\n\r\n\r\n    }\r\n}\r\n","import {Chart, ChartConfig} from \"./chart\";\r\nimport {Heatmap, HeatmapConfig} from \"./heatmap\";\r\nimport {Utils} from './utils'\r\nimport {StatisticsUtils} from './statistics-utils'\r\n\r\n\r\nexport class HeatmapTimeSeriesConfig extends HeatmapConfig {\r\n    x = {\r\n        fillMissing: false, // fill missing values using interval and intervalStep\r\n        interval: undefined, //used in filling missing ticks\r\n        intervalStep: 1,\r\n        format: undefined, //input data d3 time format\r\n        displayFormat: undefined,//d3 time format for display\r\n        intervalToFormats: [ //used to guess interval and format\r\n            {\r\n                name: 'year',\r\n                formats: [\"%Y\"]\r\n            },\r\n            {\r\n                name: 'month',\r\n                formats: [\"%Y-%m\"]\r\n            },\r\n            {\r\n                name: 'day',\r\n                formats: [\"%Y-%m-%d\"]\r\n            },\r\n            {\r\n                name: 'hour',\r\n                formats: ['%H', '%Y-%m-%d %H']\r\n            },\r\n            {\r\n                name: 'minute',\r\n                formats: ['%H:%M', '%Y-%m-%d %H:%M']\r\n            },\r\n            {\r\n                name: 'second',\r\n                formats: ['%H:%M:%S', '%Y-%m-%d %H:%M:%S']\r\n            }\r\n        ],\r\n\r\n        sortComparator: function sortComparator(a, b) {\r\n            return Utils.isString(a) ?  a.localeCompare(b) :  a - b;\r\n        },\r\n        formatter: undefined\r\n    };\r\n    z = {\r\n        fillMissing: true // fiill missing values with nearest previous value\r\n    };\r\n\r\n    legend = {\r\n        formatter: function (v) {\r\n            var suffix = \"\";\r\n            if (v / 1000000 >= 1) {\r\n                suffix = \" M\";\r\n                v = Number(v / 1000000).toFixed(3);\r\n            }\r\n            var nf = Intl.NumberFormat();\r\n            return nf.format(v) + suffix;\r\n        }\r\n    };\r\n\r\n    constructor(custom) {\r\n        super();\r\n\r\n        if (custom) {\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n    }\r\n}\r\n\r\nexport class HeatmapTimeSeries extends Heatmap {\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new HeatmapTimeSeriesConfig(config));\r\n    }\r\n\r\n    setConfig(config) {\r\n        return super.setConfig(new HeatmapTimeSeriesConfig(config));\r\n    }\r\n\r\n\r\n    setupValuesBeforeGroupsSort() {\r\n\r\n        this.plot.x.timeFormat = this.config.x.format;\r\n        if(this.config.x.displayFormat && !this.plot.x.timeFormat){\r\n            this.guessTimeFormat();\r\n        }\r\n\r\n\r\n        super.setupValuesBeforeGroupsSort();\r\n        if (!this.config.x.fillMissing) {\r\n            return;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        this.initTimeFormatAndInterval();\r\n\r\n        this.plot.x.intervalStep = this.config.x.intervalStep || 1;\r\n\r\n        this.plot.x.timeParser = this.getTimeParser();\r\n\r\n\r\n\r\n        this.plot.x.uniqueValues.sort(this.config.x.sortComparator);\r\n\r\n        var prev = null;\r\n\r\n        this.plot.x.uniqueValues.forEach((x, i)=> {\r\n            var current = this.parseTime(x);\r\n            if (prev === null) {\r\n                prev = current;\r\n                return;\r\n            }\r\n\r\n            var next = self.nextTimeTickValue(prev);\r\n            var missing = [];\r\n            var iteration = 0;\r\n            while (self.compareTimeValues(next, current)<=0) {\r\n                iteration++;\r\n                if (iteration > 100) {\r\n                    break;\r\n                }\r\n                var d = {};\r\n                var timeString = self.formatTime(next);\r\n                d[this.config.x.key] = timeString;\r\n\r\n                self.updateGroups(d, timeString, self.plot.x.groups, self.config.x.groups);\r\n                missing.push(next);\r\n                next = self.nextTimeTickValue(next);\r\n            }\r\n            prev = current;\r\n        });\r\n\r\n    }\r\n\r\n    parseTime(x) {\r\n        var parser = this.getTimeParser();\r\n        return parser(x);\r\n    }\r\n\r\n    formatTime(date){\r\n        var formatter = this.getTimeFormatter();\r\n        return formatter(date);\r\n    }\r\n\r\n    formatValueX(value) { //used only for display\r\n        if (this.config.x.formatter) return this.config.x.formatter.call(this.config, value);\r\n\r\n        if(this.config.x.displayFormat){\r\n            var date = this.parseTime(value);\r\n            return d3.timeFormat(this.config.x.displayFormat)(date);\r\n        }\r\n\r\n        if(!this.plot.x.timeFormat) return value;\r\n\r\n        if(Utils.isDate(value)){\r\n            return this.formatTime(value);\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    compareTimeValues(a, b){\r\n        return a-b;\r\n    }\r\n\r\n    timeValuesEqual(a, b) {\r\n        var parser = this.plot.x.timeParser;\r\n        return parser(a) === parser(b);\r\n    }\r\n\r\n    nextTimeTickValue(t) {\r\n        var interval = 'time'+Utils.capitalizeFirstLetter(this.plot.x.interval);\r\n\r\n        return d3[interval].offset(t, this.plot.x.intervalStep);\r\n    }\r\n\r\n    initPlot() {\r\n        super.initPlot();\r\n\r\n        if (this.config.z.fillMissing) {\r\n            this.plot.matrix.forEach((row, rowIndex) => {\r\n                var prevRowValue = undefined;\r\n                row.forEach((cell, colIndex) => {\r\n                    if (cell.value === undefined && prevRowValue !== undefined) {\r\n                        cell.value = prevRowValue;\r\n                        cell.missing = true;\r\n                    }\r\n                    prevRowValue = cell.value;\r\n                });\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n\r\n    update(newData) {\r\n        super.update(newData);\r\n\r\n    };\r\n\r\n\r\n    initTimeFormatAndInterval() {\r\n\r\n        this.plot.x.interval = this.config.x.interval;\r\n\r\n        if(!this.plot.x.timeFormat){\r\n            this.guessTimeFormat();\r\n        }\r\n\r\n        if(!this.plot.x.interval && this.plot.x.timeFormat){\r\n            this.guessInterval();\r\n        }\r\n    }\r\n\r\n    guessTimeFormat() {\r\n        var self = this;\r\n        for(let i=0; i < self.config.x.intervalToFormats.length; i++){\r\n            let intervalFormat = self.config.x.intervalToFormats[i];\r\n            var format = null;\r\n            var formatMatch = intervalFormat.formats.some(f=>{\r\n                format = f;\r\n                var parser = d3.timeParse(f);\r\n                return self.plot.x.uniqueValues.every(x=>{\r\n                    return parser(x) !== null\r\n                });\r\n            });\r\n            if(formatMatch){\r\n                self.plot.x.timeFormat = format;\r\n                console.log('Guessed timeFormat', format);\r\n                if(!self.plot.x.interval){\r\n                    self.plot.x.interval = intervalFormat.name;\r\n                    console.log('Guessed interval', self.plot.x.interval);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    guessInterval() {\r\n        var self = this;\r\n        for(let i=0; i < self.config.x.intervalToFormats.length; i++) {\r\n            let intervalFormat = self.config.x.intervalToFormats[i];\r\n\r\n            if(intervalFormat.formats.indexOf(self.plot.x.timeFormat) >= 0){\r\n                self.plot.x.interval = intervalFormat.name;\r\n                console.log('Guessed interval', self.plot.x.interval);\r\n                return;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getTimeFormatter() {\r\n        if(!this.plot.x.timeFormatter){\r\n            this.plot.x.timeFormatter = d3.timeFormat(this.plot.x.timeFormat);\r\n        }\r\n        return this.plot.x.timeFormatter;\r\n    }\r\n    getTimeParser() {\r\n        if(!this.plot.x.timeParser){\r\n            this.plot.x.timeParser = d3.timeParse(this.plot.x.timeFormat);\r\n        }\r\n        return this.plot.x.timeParser;\r\n    }\r\n}\r\n\r\n","import {Chart, ChartConfig} from \"./chart\";\r\nimport {Utils} from './utils'\r\nimport {Legend} from './legend'\r\n\r\n\r\nexport class HeatmapConfig extends ChartConfig {\r\n\r\n    svgClass = 'odc-heatmap';\r\n    showTooltip = true; //show tooltip on dot hover\r\n    tooltip = {\r\n        noDataText: \"N/A\"\r\n    };\r\n    showLegend = true;\r\n    legend = {\r\n        width: 30,\r\n        rotateLabels: false,\r\n        decimalPlaces: undefined,\r\n        formatter: v => this.legend.decimalPlaces === undefined ? v : Number(v).toFixed(this.legend.decimalPlaces)\r\n    }\r\n    highlightLabels = true;\r\n    x = {// X axis config\r\n        title: '', // axis title\r\n        key: 0,\r\n        value: (d) => d[this.x.key], // x value accessor\r\n        rotateLabels: true,\r\n        sortLabels: false,\r\n        sortComparator: (a, b)=> Utils.isNumber(a) ? a - b : a.localeCompare(b),\r\n        groups: {\r\n            keys: [],\r\n            labels: [],\r\n            value: (d, key) => d[key],\r\n            overlap: {\r\n                top: 20,\r\n                bottom: 20\r\n            }\r\n        },\r\n        formatter: undefined // value formatter function\r\n\r\n    };\r\n    y = {// Y axis config\r\n        title: '', // axis title,\r\n        rotateLabels: true,\r\n        key: 1,\r\n        value: (d) => d[this.y.key], // y value accessor\r\n        sortLabels: false,\r\n        sortComparator: (a, b)=> Utils.isNumber(b) ? b - a : b.localeCompare(a),\r\n        groups: {\r\n            keys: [],\r\n            labels: [],\r\n            value: (d, key) => d[key],\r\n            overlap: {\r\n                left: 20,\r\n                right: 20\r\n            }\r\n        },\r\n        formatter: undefined// value formatter function\r\n    };\r\n    z = {\r\n        key: 2,\r\n        value: (d) => d[this.z.key],\r\n        notAvailableValue: (v) => v === null || v === undefined,\r\n\r\n        decimalPlaces: undefined,\r\n        formatter: v => this.z.decimalPlaces === undefined ? v : Number(v).toFixed(this.z.decimalPlaces)// value formatter function\r\n\r\n    };\r\n    color = {\r\n        noDataColor: \"white\",\r\n        scale: \"linear\",\r\n        reverseScale: false,\r\n        range: [\"darkblue\", \"lightskyblue\", \"orange\", \"crimson\", \"darkred\"]\r\n    };\r\n    cell = {\r\n        width: undefined,\r\n        height: undefined,\r\n        sizeMin: 15,\r\n        sizeMax: 250,\r\n        padding: 0\r\n    };\r\n    margin = {\r\n        left: 60,\r\n        right: 50,\r\n        top: 30,\r\n        bottom: 80\r\n    };\r\n\r\n    constructor(custom) {\r\n        super();\r\n        if (custom) {\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n    }\r\n}\r\n\r\n//TODO refactor\r\nexport class Heatmap extends Chart {\r\n\r\n    static maxGroupGapSize = 24;\r\n    static groupTitleRectHeight = 6;\r\n\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new HeatmapConfig(config));\r\n    }\r\n\r\n    setConfig(config) {\r\n        return super.setConfig(new HeatmapConfig(config));\r\n\r\n    }\r\n\r\n    initPlot() {\r\n        super.initPlot();\r\n        var self = this;\r\n        var margin = this.config.margin;\r\n        var conf = this.config;\r\n\r\n        this.plot.x = {};\r\n        this.plot.y = {};\r\n        this.plot.z = {\r\n            matrixes: undefined,\r\n            cells: undefined,\r\n            color: {},\r\n            shape: {}\r\n        };\r\n\r\n\r\n        this.setupValues();\r\n        this.buildCells();\r\n\r\n        var titleRectWidth = 6;\r\n        this.plot.x.overlap = {\r\n            top: 0,\r\n            bottom: 0\r\n        };\r\n        if (this.plot.groupByX) {\r\n            let depth = self.config.x.groups.keys.length;\r\n            let allTitlesWidth = depth * (titleRectWidth);\r\n\r\n            this.plot.x.overlap.bottom = self.config.x.groups.overlap.bottom;\r\n            this.plot.x.overlap.top = self.config.x.groups.overlap.top + allTitlesWidth;\r\n            this.plot.margin.top = conf.margin.right + conf.x.groups.overlap.top;\r\n            this.plot.margin.bottom = conf.margin.bottom + conf.x.groups.overlap.bottom;\r\n        }\r\n\r\n\r\n        this.plot.y.overlap = {\r\n            left: 0,\r\n            right: 0\r\n        };\r\n\r\n\r\n        if (this.plot.groupByY) {\r\n            let depth = self.config.y.groups.keys.length;\r\n            let allTitlesWidth = depth * (titleRectWidth);\r\n            this.plot.y.overlap.right = self.config.y.groups.overlap.left + allTitlesWidth;\r\n            this.plot.y.overlap.left = self.config.y.groups.overlap.left;\r\n            this.plot.margin.left = conf.margin.left + this.plot.y.overlap.left;\r\n            this.plot.margin.right = conf.margin.right + this.plot.y.overlap.right;\r\n        }\r\n        this.plot.showLegend = conf.showLegend;\r\n        if (this.plot.showLegend) {\r\n            this.plot.margin.right += conf.legend.width;\r\n        }\r\n        this.computePlotSize();\r\n        this.setupZScale();\r\n\r\n        return this;\r\n    }\r\n\r\n    setupValues() {\r\n        var self = this;\r\n        var config = self.config;\r\n        var x = self.plot.x;\r\n        var y = self.plot.y;\r\n        var z = self.plot.z;\r\n\r\n\r\n        x.value = d => config.x.value.call(config, d);\r\n        y.value = d => config.y.value.call(config, d);\r\n        z.value = d => config.z.value.call(config, d);\r\n\r\n        x.uniqueValues = [];\r\n        y.uniqueValues = [];\r\n\r\n\r\n        self.plot.groupByY = !!config.y.groups.keys.length;\r\n        self.plot.groupByX = !!config.x.groups.keys.length;\r\n\r\n        y.groups = {\r\n            key: undefined,\r\n            label: '',\r\n            values: [],\r\n            children: null,\r\n            level: 0,\r\n            index: 0,\r\n            lastIndex: 0\r\n        };\r\n        x.groups = {\r\n            key: undefined,\r\n            label: '',\r\n            values: [],\r\n            children: null,\r\n            level: 0,\r\n            index: 0,\r\n            lastIndex: 0\r\n        };\r\n\r\n        var valueMap = {};\r\n        var minZ = undefined;\r\n        var maxZ = undefined;\r\n        this.data.forEach(d=> {\r\n\r\n            var xVal = x.value(d);\r\n            var yVal = y.value(d);\r\n            var zValRaw = z.value(d);\r\n            var zVal = config.z.notAvailableValue(zValRaw) ? undefined : parseFloat(zValRaw);\r\n\r\n\r\n            if (x.uniqueValues.indexOf(xVal) === -1) {\r\n                x.uniqueValues.push(xVal);\r\n            }\r\n\r\n            if (y.uniqueValues.indexOf(yVal) === -1) {\r\n                y.uniqueValues.push(yVal);\r\n            }\r\n\r\n            var groupY = y.groups;\r\n            if (self.plot.groupByY) {\r\n                groupY = this.updateGroups(d, yVal, y.groups, config.y.groups);\r\n            }\r\n            var groupX = x.groups;\r\n            if (self.plot.groupByX) {\r\n\r\n                groupX = this.updateGroups(d, xVal, x.groups, config.x.groups);\r\n            }\r\n\r\n            if (!valueMap[groupY.index]) {\r\n                valueMap[groupY.index] = {};\r\n            }\r\n\r\n            if (!valueMap[groupY.index][groupX.index]) {\r\n                valueMap[groupY.index][groupX.index] = {};\r\n            }\r\n            if (!valueMap[groupY.index][groupX.index][yVal]) {\r\n                valueMap[groupY.index][groupX.index][yVal] = {};\r\n            }\r\n            valueMap[groupY.index][groupX.index][yVal][xVal] = zVal;\r\n\r\n\r\n            if (minZ === undefined || zVal < minZ) {\r\n                minZ = zVal;\r\n            }\r\n            if (maxZ === undefined || zVal > maxZ) {\r\n                maxZ = zVal;\r\n            }\r\n        });\r\n        self.plot.valueMap = valueMap;\r\n\r\n\r\n        if (!self.plot.groupByX) {\r\n            x.groups.values = x.uniqueValues;\r\n        }\r\n\r\n        if (!self.plot.groupByY) {\r\n            y.groups.values = y.uniqueValues;\r\n        }\r\n\r\n        this.setupValuesBeforeGroupsSort();\r\n\r\n        x.gaps = [];\r\n        x.totalValuesCount = 0;\r\n        x.allValuesList = [];\r\n        this.sortGroups(x, x.groups, config.x);\r\n\r\n        y.gaps = [];\r\n        y.totalValuesCount = 0;\r\n        y.allValuesList = [];\r\n        this.sortGroups(y, y.groups, config.y);\r\n\r\n        z.min = minZ;\r\n        z.max = maxZ;\r\n\r\n    }\r\n\r\n    setupValuesBeforeGroupsSort() {\r\n    }\r\n\r\n    buildCells() {\r\n        var self = this;\r\n        var x = self.plot.x;\r\n        var y = self.plot.y;\r\n        var z = self.plot.z;\r\n        var valueMap = self.plot.valueMap;\r\n\r\n        var matrixCells = self.plot.cells = [];\r\n        var matrix = self.plot.matrix = [];\r\n\r\n        y.allValuesList.forEach((v1, i)=> {\r\n            var row = [];\r\n            matrix.push(row);\r\n\r\n            x.allValuesList.forEach((v2, j) => {\r\n                var zVal = undefined;\r\n                try {\r\n                    zVal = valueMap[v1.group.index][v2.group.index][v1.val][v2.val]\r\n                } catch (e) {\r\n                }\r\n\r\n                var cell = {\r\n                    rowVar: v1,\r\n                    colVar: v2,\r\n                    row: i,\r\n                    col: j,\r\n                    value: zVal\r\n                };\r\n                row.push(cell);\r\n\r\n                matrixCells.push(cell);\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    updateGroups(d, axisVal, rootGroup, axisGroupsConfig) {\r\n\r\n        var config = this.config;\r\n        var currentGroup = rootGroup;\r\n        axisGroupsConfig.keys.forEach((groupKey, groupKeyIndex) => {\r\n            currentGroup.key = groupKey;\r\n\r\n            if (!currentGroup.children) {\r\n                currentGroup.children = {};\r\n            }\r\n\r\n            var groupingValue = axisGroupsConfig.value.call(config, d, groupKey);\r\n\r\n            if (!currentGroup.children.hasOwnProperty(groupingValue)) {\r\n                rootGroup.lastIndex++;\r\n                currentGroup.children[groupingValue] = {\r\n                    values: [],\r\n                    children: null,\r\n                    groupingValue: groupingValue,\r\n                    level: currentGroup.level + 1,\r\n                    index: rootGroup.lastIndex,\r\n                    key: groupKey\r\n                }\r\n            }\r\n\r\n            currentGroup = currentGroup.children[groupingValue];\r\n        });\r\n\r\n        if (currentGroup.values.indexOf(axisVal) === -1) {\r\n            currentGroup.values.push(axisVal);\r\n        }\r\n\r\n        return currentGroup;\r\n    }\r\n\r\n    sortGroups(axis, group, axisConfig, gaps) {\r\n        if (axisConfig.groups.labels && axisConfig.groups.labels.length > group.level) {\r\n            group.label = axisConfig.groups.labels[group.level];\r\n        } else {\r\n            group.label = group.key;\r\n        }\r\n\r\n        if (!gaps) {\r\n            gaps = [0];\r\n        }\r\n        if (gaps.length <= group.level) {\r\n            gaps.push(0);\r\n        }\r\n\r\n        group.allValuesCount = group.allValuesCount || 0;\r\n        group.allValuesBeforeCount = group.allValuesBeforeCount || 0;\r\n\r\n        group.gaps = gaps.slice();\r\n        group.gapsBefore = gaps.slice();\r\n\r\n\r\n        group.gapsSize = Heatmap.computeGapsSize(group.gaps);\r\n        group.gapsBeforeSize = group.gapsSize;\r\n        if (group.values) {\r\n            if (axisConfig.sortLabels) {\r\n                group.values.sort(axisConfig.sortComparator);\r\n            }\r\n            group.values.forEach(v=>axis.allValuesList.push({val: v, group: group}));\r\n            group.allValuesBeforeCount = axis.totalValuesCount;\r\n            axis.totalValuesCount += group.values.length;\r\n            group.allValuesCount += group.values.length;\r\n        }\r\n\r\n        group.childrenList = [];\r\n        if (group.children) {\r\n            var childrenCount = 0;\r\n\r\n            for (var childProp in group.children) {\r\n                if (group.children.hasOwnProperty(childProp)) {\r\n                    var child = group.children[childProp];\r\n                    group.childrenList.push(child);\r\n                    childrenCount++;\r\n\r\n                    this.sortGroups(axis, child, axisConfig, gaps);\r\n                    group.allValuesCount += child.allValuesCount;\r\n                    gaps[group.level] += 1;\r\n                }\r\n            }\r\n\r\n            if (gaps && childrenCount > 1) {\r\n                gaps[group.level] -= 1;\r\n            }\r\n\r\n            group.gapsInside = [];\r\n            gaps.forEach((d, i)=> {\r\n                group.gapsInside.push(d - (group.gapsBefore[i] || 0));\r\n            });\r\n            group.gapsInsideSize = Heatmap.computeGapsSize(group.gapsInside);\r\n\r\n            if (axis.gaps.length < gaps.length) {\r\n                axis.gaps = gaps;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    computeYAxisLabelsWidth(offset) {\r\n        var maxWidth = this.plot.margin.left;\r\n        if (this.config.y.title) {\r\n            maxWidth -= 15;\r\n        }\r\n        if (offset && offset.x) {\r\n            maxWidth += offset.x;\r\n        }\r\n\r\n        if (this.config.y.rotateLabels) {\r\n            maxWidth *= Utils.SQRT_2;\r\n            var fontSize = 11; //todo check actual font size\r\n            maxWidth -=fontSize/2;\r\n        }\r\n\r\n        return maxWidth;\r\n    }\r\n\r\n    computeXAxisLabelsWidth(offset) {\r\n        if (!this.config.x.rotateLabels) {\r\n            return this.plot.cellWidth - 2;\r\n        }\r\n        var size = this.plot.margin.bottom;\r\n        if (this.config.x.title) {\r\n            size -= 15;\r\n        }\r\n        if (offset && offset.y) {\r\n            size -= offset.y;\r\n        }\r\n\r\n        size *= Utils.SQRT_2;\r\n\r\n        var fontSize = 11; //todo check actual font size\r\n        size -=fontSize/2;\r\n\r\n        return size;\r\n    }\r\n\r\n    static computeGapSize(gapLevel) {\r\n        return Heatmap.maxGroupGapSize / (gapLevel + 1);\r\n    }\r\n\r\n    static computeGapsSize(gaps) {\r\n        var gapsSize = 0;\r\n        gaps.forEach((gapsNumber, gapsLevel)=> gapsSize += gapsNumber * Heatmap.computeGapSize(gapsLevel));\r\n        return gapsSize;\r\n    }\r\n\r\n    computePlotSize() {\r\n\r\n        var plot = this.plot;\r\n        var conf = this.config;\r\n        var margin = plot.margin;\r\n        var availableWidth = Utils.availableWidth(this.config.width, this.getBaseContainer(), this.plot.margin);\r\n        var availableHeight = Utils.availableHeight(this.config.height, this.getBaseContainer(), this.plot.margin);\r\n        var width = availableWidth;\r\n        var height = availableHeight;\r\n\r\n        var xGapsSize = Heatmap.computeGapsSize(plot.x.gaps);\r\n\r\n\r\n        var computedCellWidth = Math.max(conf.cell.sizeMin, Math.min(conf.cell.sizeMax, (availableWidth - xGapsSize) / this.plot.x.totalValuesCount));\r\n        if (this.config.width) {\r\n\r\n            if (!this.config.cell.width) {\r\n                this.plot.cellWidth = computedCellWidth;\r\n            }\r\n\r\n        } else {\r\n            this.plot.cellWidth = this.config.cell.width;\r\n\r\n            if (!this.plot.cellWidth) {\r\n                this.plot.cellWidth = computedCellWidth;\r\n            }\r\n\r\n        }\r\n        width = this.plot.cellWidth * this.plot.x.totalValuesCount + margin.left + margin.right + xGapsSize;\r\n\r\n        var yGapsSize = Heatmap.computeGapsSize(plot.y.gaps);\r\n        var computedCellHeight = Math.max(conf.cell.sizeMin, Math.min(conf.cell.sizeMax, (availableHeight - yGapsSize) / this.plot.y.totalValuesCount));\r\n        if (this.config.height) {\r\n            if (!this.config.cell.height) {\r\n                this.plot.cellHeight = computedCellHeight;\r\n            }\r\n        } else {\r\n            this.plot.cellHeight = this.config.cell.height;\r\n\r\n            if (!this.plot.cellHeight) {\r\n                this.plot.cellHeight = computedCellHeight;\r\n            }\r\n\r\n        }\r\n\r\n        height = this.plot.cellHeight * this.plot.y.totalValuesCount + margin.top + margin.bottom + yGapsSize;\r\n\r\n\r\n        this.plot.width = width - margin.left - margin.right;\r\n        this.plot.height = height - margin.top - margin.bottom;\r\n    }\r\n\r\n\r\n    setupZScale() {\r\n\r\n        var self = this;\r\n        var config = self.config;\r\n        var z = self.plot.z;\r\n        var range = config.color.range;\r\n        var extent = z.max - z.min;\r\n        var scale;\r\n        z.domain = [];\r\n        if (config.color.scale == \"pow\") {\r\n            var exponent = 10;\r\n            range.forEach((c, i)=> {\r\n                var v = z.max - (extent / Math.pow(10, i));\r\n                z.domain.push(v)\r\n            });\r\n            scale = d3.scalePow().exponent(exponent);\r\n        } else if (config.color.scale == \"log\") {\r\n\r\n            range.forEach((c, i)=> {\r\n                var v = z.min + (extent / Math.pow(10, i));\r\n                z.domain.unshift(v)\r\n\r\n            });\r\n\r\n            scale = d3.scaleLog()\r\n        } else {\r\n            range.forEach((c, i)=> {\r\n                var v = z.min + (extent * (i / (range.length - 1)));\r\n                z.domain.push(v)\r\n            });\r\n            scale = Utils.createScale(config.color.scale);\r\n\r\n        }\r\n\r\n\r\n        z.domain[0] = z.min; //removing unnecessary floating points\r\n        z.domain[z.domain.length - 1] = z.max; //removing unnecessary floating points\r\n        console.log(z.domain);\r\n\r\n        if (config.color.reverseScale) {\r\n            z.domain.reverse();\r\n        }\r\n\r\n        var plot = this.plot;\r\n\r\n        console.log(range);\r\n\r\n        plot.z.color.scale = scale.domain(z.domain).range(range);\r\n        var shape = plot.z.shape = {};\r\n\r\n        var cellConf = this.config.cell;\r\n        shape.type = \"rect\";\r\n\r\n        plot.z.shape.width = plot.cellWidth - cellConf.padding * 2;\r\n        plot.z.shape.height = plot.cellHeight - cellConf.padding * 2;\r\n    }\r\n\r\n\r\n    update(newData) {\r\n        super.update(newData);\r\n        if (this.plot.groupByY) {\r\n            this.drawGroupsY(this.plot.y.groups, this.svgG);\r\n        }\r\n        if (this.plot.groupByX) {\r\n            this.drawGroupsX(this.plot.x.groups, this.svgG);\r\n        }\r\n\r\n        this.updateCells();\r\n\r\n        // this.updateVariableLabels();\r\n\r\n        this.updateAxisX();\r\n        this.updateAxisY();\r\n\r\n        if (this.config.showLegend) {\r\n            this.updateLegend();\r\n        }\r\n\r\n        this.updateAxisTitles();\r\n    };\r\n\r\n    updateAxisTitles() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n\r\n\r\n    }\r\n\r\n\r\n    updateAxisX() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var labelClass = self.prefixClass(\"label\");\r\n        var labelXClass = labelClass + \"-x\";\r\n        var labelYClass = labelClass + \"-y\";\r\n        plot.labelClass = labelClass;\r\n\r\n        var offsetX = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        let gapSize = Heatmap.computeGapSize(0);\r\n        if (plot.groupByX) {\r\n            let overlap = self.config.x.groups.overlap;\r\n\r\n            offsetX.x = gapSize / 2;\r\n            offsetX.y = overlap.bottom + gapSize / 2 + 6;\r\n        } else if (plot.groupByY) {\r\n            offsetX.y = gapSize;\r\n        }\r\n\r\n\r\n        var labels = self.svgG.selectAll(\"text.\" + labelXClass)\r\n            .data(plot.x.allValuesList, (d, i)=>i);\r\n\r\n        var labelsMerge = labels.enter().append(\"text\").attr(\"class\", (d, i) => labelClass + \" \" + labelXClass + \" \" + labelXClass + \"-\" + i).merge(labels);\r\n\r\n        labelsMerge\r\n            .attr(\"x\", (d, i) => (i * plot.cellWidth + plot.cellWidth / 2) + (d.group.gapsSize) + offsetX.x)\r\n            .attr(\"y\", plot.height + offsetX.y)\r\n            .attr(\"dy\", 10)\r\n\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .text(d=>self.formatValueX(d.val));\r\n\r\n\r\n\r\n        var maxWidth = self.computeXAxisLabelsWidth(offsetX);\r\n\r\n        labelsMerge.each(function (label) {\r\n            var elem = d3.select(this),\r\n                text = self.formatValueX(label.val);\r\n            Utils.placeTextWithEllipsisAndTooltip(elem, text, maxWidth, self.config.showTooltip ? self.plot.tooltip : false);\r\n        });\r\n\r\n        if (self.config.x.rotateLabels) {\r\n            labelsMerge.attr(\"transform\", (d, i) => \"rotate(-45, \" + ((i * plot.cellWidth + plot.cellWidth / 2) + d.group.gapsSize + offsetX.x ) + \", \" + ( plot.height + offsetX.y) + \")\")\r\n                .attr(\"dx\", -2)\r\n                .attr(\"dy\", 8)\r\n                .attr(\"text-anchor\", \"end\");\r\n        }\r\n\r\n\r\n        labels.exit().remove();\r\n\r\n\r\n        self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-x'))\r\n            .attr(\"transform\", \"translate(\" + (plot.width / 2) + \",\" + (plot.height + plot.margin.bottom) + \")\")\r\n            .selectOrAppend(\"text.\" + self.prefixClass('label'))\r\n\r\n            .attr(\"dy\", \"-0.5em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(self.config.x.title);\r\n    }\r\n\r\n    updateAxisY() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var labelClass = self.prefixClass(\"label\");\r\n        var labelYClass = labelClass + \"-y\";\r\n        plot.labelClass = labelClass;\r\n\r\n\r\n        var labels = self.svgG.selectAll(\"text.\" + labelYClass)\r\n            .data(plot.y.allValuesList);\r\n\r\n        var labelsEnter = labels.enter().append(\"text\");\r\n        var labelsMerge = labelsEnter.merge(labels);\r\n\r\n        var offsetY = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        if (plot.groupByY) {\r\n            let overlap = self.config.y.groups.overlap;\r\n            let gapSize = Heatmap.computeGapSize(0);\r\n            offsetY.x = -overlap.left;\r\n\r\n            offsetY.y = gapSize / 2;\r\n        }\r\n        labelsMerge\r\n            .attr(\"x\", offsetY.x)\r\n            .attr(\"y\", (d, i) => (i * plot.cellHeight + plot.cellHeight / 2) + d.group.gapsSize + offsetY.y)\r\n            .attr(\"dx\", -2)\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"class\", (d, i) => labelClass + \" \" + labelYClass + \" \" + labelYClass + \"-\" + i)\r\n\r\n            .text(function (d) {\r\n                var formatted = self.formatValueY(d.val);\r\n                return formatted\r\n            });\r\n\r\n        var maxWidth = self.computeYAxisLabelsWidth(offsetY);\r\n\r\n        labelsMerge.each(function (label) {\r\n            var elem = d3.select(this),\r\n                text = self.formatValueY(label.val);\r\n            Utils.placeTextWithEllipsisAndTooltip(elem, text, maxWidth, self.config.showTooltip ? self.plot.tooltip : false);\r\n        });\r\n\r\n        if (self.config.y.rotateLabels) {\r\n            labelsMerge\r\n                .attr(\"transform\", (d, i) => \"rotate(-45, \" + (offsetY.x  ) + \", \" + (d.group.gapsSize + (i * plot.cellHeight + plot.cellHeight / 2) + offsetY.y) + \")\")\r\n                .attr(\"text-anchor\", \"end\");\r\n            // .attr(\"dx\", -7);\r\n        } else {\r\n            labelsMerge.attr(\"dominant-baseline\", \"middle\")\r\n        }\r\n\r\n\r\n        labels.exit().remove();\r\n\r\n\r\n        self.svgG.selectOrAppend(\"g.\" + self.prefixClass('axis-y'))\r\n            .selectOrAppend(\"text.\" + self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\" + -plot.margin.left + \",\" + (plot.height / 2) + \")rotate(-90)\")\r\n            .attr(\"dy\", \"1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(self.config.y.title);\r\n\r\n    }\r\n\r\n\r\n    drawGroupsY(parentGroup, container, availableWidth) {\r\n\r\n        var self = this;\r\n        var plot = self.plot;\r\n\r\n        var groupClass = self.prefixClass(\"group\");\r\n        var groupYClass = groupClass + \"-y\";\r\n        var groups = container.selectAll(\"g.\" + groupClass + \".\" + groupYClass)\r\n            .data(parentGroup.childrenList);\r\n\r\n        var valuesBeforeCount = 0;\r\n        var gapsBeforeSize = 0;\r\n\r\n        var groupsEnter = groups.enter().append(\"g\");\r\n        groupsEnter\r\n            .classed(groupClass, true)\r\n            .classed(groupYClass, true)\r\n            .append(\"rect\").classed(\"group-rect\", true);\r\n\r\n        var titleGroupEnter = groupsEnter.appendSelector(\"g.title\");\r\n        titleGroupEnter.append(\"rect\");\r\n        titleGroupEnter.append(\"text\");\r\n\r\n        var gapSize = Heatmap.computeGapSize(parentGroup.level);\r\n        var padding = gapSize / 4;\r\n\r\n        var titleRectWidth = Heatmap.groupTitleRectHeight;\r\n        var depth = self.config.y.groups.keys.length - parentGroup.level;\r\n        var overlap = {\r\n            left: 0,\r\n            right: 0\r\n        };\r\n\r\n        if (!availableWidth) {\r\n            overlap.right = plot.y.overlap.left;\r\n            overlap.left = plot.y.overlap.left;\r\n            availableWidth = plot.width + gapSize + overlap.left + overlap.right;\r\n        }\r\n\r\n\r\n        var groupsMerge = groupsEnter.merge(groups);\r\n\r\n        groupsMerge\r\n            .attr(\"transform\", (d, i) => {\r\n                var translate = \"translate(\" + (padding - overlap.left) + \",\" + ((plot.cellHeight * valuesBeforeCount) + i * gapSize + gapsBeforeSize + padding) + \")\";\r\n                gapsBeforeSize += (d.gapsInsideSize || 0);\r\n                valuesBeforeCount += d.allValuesCount || 0;\r\n                return translate\r\n            });\r\n\r\n\r\n        var groupWidth = availableWidth - padding * 2;\r\n\r\n        var titleGroups = groupsMerge.selectAll(\"g.title\")\r\n            .attr(\"transform\", (d, i) => \"translate(\" + (groupWidth - titleRectWidth) + \", 0)\");\r\n\r\n        var tileRects = titleGroups.selectAll(\"rect\")\r\n            .attr(\"width\", titleRectWidth)\r\n            .attr(\"height\", d=> {\r\n                return (d.gapsInsideSize || 0) + plot.cellHeight * d.allValuesCount + padding * 2\r\n            })\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", 0)\r\n            // .attr(\"fill\", \"lightgrey\")\r\n            .attr(\"stroke-width\", 0);\r\n\r\n        this.setGroupMouseCallbacks(parentGroup, tileRects);\r\n\r\n\r\n        groupsMerge.selectAll(\"rect.group-rect\")\r\n            .attr(\"class\", d=> \"group-rect group-rect-\" + d.index)\r\n            .attr(\"width\", groupWidth)\r\n            .attr(\"height\", d=> {\r\n                return (d.gapsInsideSize || 0) + plot.cellHeight * d.allValuesCount + padding * 2\r\n            })\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", 0)\r\n            .attr(\"fill\", \"white\")\r\n            .attr(\"fill-opacity\", 0)\r\n            .attr(\"stroke-width\", 0.5)\r\n            .attr(\"stroke\", \"black\")\r\n\r\n\r\n        groupsMerge.each(function (group) {\r\n\r\n            self.drawGroupsY.call(self, group, d3.select(this), groupWidth - titleRectWidth);\r\n        });\r\n\r\n        groups.exit().remove();\r\n    }\r\n\r\n    drawGroupsX(parentGroup, container, availableHeight) {\r\n\r\n        var self = this;\r\n        var plot = self.plot;\r\n\r\n        var groupClass = self.prefixClass(\"group\");\r\n        var groupXClass = groupClass + \"-x\";\r\n        var groups = container.selectAll(\"g.\" + groupClass + \".\" + groupXClass)\r\n            .data(parentGroup.childrenList);\r\n\r\n        var valuesBeforeCount = 0;\r\n        var gapsBeforeSize = 0;\r\n\r\n        var groupsEnter = groups.enter().append(\"g\");\r\n        groupsEnter\r\n            .classed(groupClass, true)\r\n            .classed(groupXClass, true)\r\n            .append(\"rect\").classed(\"group-rect\", true);\r\n\r\n        var titleGroupEnter = groupsEnter.appendSelector(\"g.title\");\r\n        titleGroupEnter.append(\"rect\");\r\n        titleGroupEnter.append(\"text\");\r\n\r\n        var gapSize = Heatmap.computeGapSize(parentGroup.level);\r\n        var padding = gapSize / 4;\r\n        var titleRectHeight = Heatmap.groupTitleRectHeight;\r\n\r\n        var depth = self.config.x.groups.keys.length - parentGroup.level;\r\n\r\n        var overlap = {\r\n            top: 0,\r\n            bottom: 0\r\n        };\r\n\r\n        if (!availableHeight) {\r\n            overlap.bottom = plot.x.overlap.bottom;\r\n            overlap.top = plot.x.overlap.top;\r\n            availableHeight = plot.height + gapSize + overlap.top + overlap.bottom;\r\n\r\n        } else {\r\n            overlap.top = -titleRectHeight;\r\n        }\r\n        // console.log('parentGroup',parentGroup, 'gapSize', gapSize, plot.x.overlap);\r\n\r\n        var groupsMerge = groupsEnter.merge(groups);\r\n\r\n        groupsMerge\r\n            .attr(\"transform\", (d, i) => {\r\n                var translate = \"translate(\" + ((plot.cellWidth * valuesBeforeCount) + i * gapSize + gapsBeforeSize + padding) + \", \" + (padding - overlap.top) + \")\";\r\n                gapsBeforeSize += (d.gapsInsideSize || 0);\r\n                valuesBeforeCount += d.allValuesCount || 0;\r\n                return translate\r\n            });\r\n\r\n        var groupHeight = availableHeight - padding * 2;\r\n\r\n        var titleGroups = groupsMerge.selectAll(\"g.title\")\r\n            .attr(\"transform\", (d, i) => \"translate(0, \" + (0) + \")\");\r\n\r\n\r\n        var tileRects = titleGroups.selectAll(\"rect\")\r\n            .attr(\"height\", titleRectHeight)\r\n            .attr(\"width\", d=> {\r\n                return (d.gapsInsideSize || 0) + plot.cellWidth * d.allValuesCount + padding * 2\r\n            })\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", 0)\r\n            // .attr(\"fill\", \"lightgrey\")\r\n            .attr(\"stroke-width\", 0);\r\n\r\n        this.setGroupMouseCallbacks(parentGroup, tileRects);\r\n\r\n\r\n        groupsMerge.selectAll(\"rect.group-rect\")\r\n            .attr(\"class\", d=> \"group-rect group-rect-\" + d.index)\r\n            .attr(\"height\", groupHeight)\r\n            .attr(\"width\", d=> {\r\n                return (d.gapsInsideSize || 0) + plot.cellWidth * d.allValuesCount + padding * 2\r\n            })\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", 0)\r\n            .attr(\"fill\", \"white\")\r\n            .attr(\"fill-opacity\", 0)\r\n            .attr(\"stroke-width\", 0.5)\r\n            .attr(\"stroke\", \"black\");\r\n\r\n        groupsMerge.each(function (group) {\r\n            self.drawGroupsX.call(self, group, d3.select(this), groupHeight - titleRectHeight);\r\n        });\r\n\r\n        groups.exit().remove();\r\n\r\n    }\r\n\r\n    setGroupMouseCallbacks(parentGroup, tileRects) {\r\n        var plot = this.plot;\r\n        var self = this;\r\n        var mouseoverCallbacks = [];\r\n        mouseoverCallbacks.push(function (d) {\r\n            d3.select(this).classed('highlighted', true);\r\n            d3.select(this.parentNode.parentNode).selectAll(\"rect.group-rect-\" + d.index).classed('highlighted', true);\r\n        });\r\n\r\n        var mouseoutCallbacks = [];\r\n        mouseoutCallbacks.push(function (d) {\r\n            d3.select(this).classed('highlighted', false);\r\n            d3.select(this.parentNode.parentNode).selectAll(\"rect.group-rect-\" + d.index).classed('highlighted', false);\r\n        });\r\n        if (plot.tooltip) {\r\n\r\n            mouseoverCallbacks.push(d=> {\r\n                var html = parentGroup.label + \": \" + d.groupingValue;\r\n                self.showTooltip(html);\r\n            });\r\n\r\n            mouseoutCallbacks.push(d=> {\r\n                self.hideTooltip();\r\n            });\r\n\r\n\r\n        }\r\n        tileRects.on(\"mouseover\", function (d) {\r\n            var self = this;\r\n            mouseoverCallbacks.forEach(function (callback) {\r\n                callback.call(self, d)\r\n            });\r\n        });\r\n        tileRects.on(\"mouseout\", function (d) {\r\n            var self = this;\r\n            mouseoutCallbacks.forEach(function (callback) {\r\n                callback.call(self, d)\r\n            });\r\n        });\r\n    }\r\n\r\n    updateCells() {\r\n\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var cellContainerClass = self.prefixClass(\"cells\");\r\n        var gapSize = Heatmap.computeGapSize(0);\r\n        var paddingX = plot.x.groups.childrenList.length ? gapSize / 2 : 0;\r\n        var paddingY = plot.y.groups.childrenList.length ? gapSize / 2 : 0;\r\n        var cellContainer = self.svgG.selectOrAppend(\"g.\" + cellContainerClass);\r\n        cellContainer.attr(\"transform\", \"translate(\" + paddingX + \", \" + paddingY + \")\");\r\n\r\n        var cellClass = self.prefixClass(\"cell\");\r\n        var cellShape = plot.z.shape.type;\r\n\r\n        var cells = cellContainer.selectAll(\"g.\" + cellClass)\r\n            .data(self.plot.cells);\r\n\r\n        var cellEnter = cells.enter().append(\"g\")\r\n            .classed(cellClass, true);\r\n\r\n        var cellsMerge = cellEnter.merge(cells);\r\n        cellsMerge.attr(\"transform\", c=> \"translate(\" + ((plot.cellWidth * c.col + plot.cellWidth / 2) + c.colVar.group.gapsSize) + \",\" + ((plot.cellHeight * c.row + plot.cellHeight / 2) + c.rowVar.group.gapsSize) + \")\");\r\n\r\n        var shapes = cellsMerge.selectOrAppend(cellShape + \".cell-shape-\" + cellShape);\r\n\r\n        shapes\r\n            .attr(\"width\", plot.z.shape.width)\r\n            .attr(\"height\", plot.z.shape.height)\r\n            .attr(\"x\", -plot.cellWidth / 2)\r\n            .attr(\"y\", -plot.cellHeight / 2);\r\n\r\n        shapes.style(\"fill\", c=> c.value === undefined ? self.config.color.noDataColor : plot.z.color.scale(c.value));\r\n        shapes.attr(\"fill-opacity\", d=> d.value === undefined ? 0 : 1);\r\n\r\n        var mouseoverCallbacks = [];\r\n        var mouseoutCallbacks = [];\r\n\r\n        if (plot.tooltip) {\r\n\r\n            mouseoverCallbacks.push(c=> {\r\n                var html = c.value === undefined ? self.config.tooltip.noDataText : self.formatValueZ(c.value);\r\n                self.showTooltip(html);\r\n\r\n            });\r\n\r\n            mouseoutCallbacks.push(c=> {\r\n                self.hideTooltip();\r\n            });\r\n        }\r\n\r\n        if (self.config.highlightLabels) {\r\n            var highlightClass = self.config.cssClassPrefix + \"highlight\";\r\n            var xLabelClass = c=>plot.labelClass + \"-x-\" + c.col;\r\n            var yLabelClass = c=>plot.labelClass + \"-y-\" + c.row;\r\n\r\n\r\n            mouseoverCallbacks.push(c=> {\r\n\r\n                self.svgG.selectAll(\"text.\" + xLabelClass(c)).classed(highlightClass, true);\r\n                self.svgG.selectAll(\"text.\" + yLabelClass(c)).classed(highlightClass, true);\r\n            });\r\n            mouseoutCallbacks.push(c=> {\r\n                self.svgG.selectAll(\"text.\" + xLabelClass(c)).classed(highlightClass, false);\r\n                self.svgG.selectAll(\"text.\" + yLabelClass(c)).classed(highlightClass, false);\r\n            });\r\n        }\r\n\r\n\r\n        cellsMerge.on(\"mouseover\", c => {\r\n            mouseoverCallbacks.forEach(callback=>callback(c));\r\n        })\r\n            .on(\"mouseout\", c => {\r\n                mouseoutCallbacks.forEach(callback=>callback(c));\r\n            });\r\n\r\n        cellsMerge.on(\"click\", c=> {\r\n            self.trigger(\"cell-selected\", c);\r\n        });\r\n\r\n\r\n        cells.exit().remove();\r\n    }\r\n\r\n    formatValueX(value) {\r\n        if (!this.config.x.formatter) return value;\r\n\r\n        return this.config.x.formatter.call(this.config, value);\r\n    }\r\n\r\n    formatValueY(value) {\r\n        if (!this.config.y.formatter) return value;\r\n\r\n        return this.config.y.formatter.call(this.config, value);\r\n    }\r\n\r\n    formatValueZ(value) {\r\n        if (!this.config.z.formatter) return value;\r\n\r\n        return this.config.z.formatter.call(this.config, value);\r\n    }\r\n\r\n    formatLegendValue(value) {\r\n        if (!this.config.legend.formatter) return value;\r\n\r\n        return this.config.legend.formatter.call(this.config, value);\r\n    }\r\n\r\n    updateLegend() {\r\n        var self = this;\r\n        var plot = this.plot;\r\n        var legendX = this.plot.width + 10;\r\n        var gapSize = Heatmap.computeGapSize(0);\r\n        if (this.plot.groupByY) {\r\n            legendX += gapSize / 2 + plot.y.overlap.right;\r\n        } else if (this.plot.groupByX) {\r\n            legendX += gapSize;\r\n        }\r\n        var legendY = 0;\r\n        if (this.plot.groupByX || this.plot.groupByY) {\r\n            legendY += gapSize / 2;\r\n        }\r\n\r\n        var barWidth = 10;\r\n        var barHeight = this.plot.height - 2;\r\n        var scale = plot.z.color.scale;\r\n\r\n        plot.legend = new Legend(this.svg, this.svgG, scale, legendX, legendY, v => self.formatLegendValue(v)).setRotateLabels(self.config.legend.rotateLabels).linearGradientBar(barWidth, barHeight);\r\n    }\r\n\r\n\r\n}\r\n","import {ChartWithColorGroups, ChartWithColorGroupsConfig} from \"./chart-with-color-groups\";\r\nimport {Utils} from './utils'\r\n\r\nexport class HistogramConfig extends ChartWithColorGroupsConfig{\r\n\r\n    svgClass= this.cssClassPrefix+'histogram';\r\n    showLegend=true;\r\n    showTooltip =true;\r\n    x={// X axis config\r\n        title: '', // axis label\r\n        key: 0,\r\n        value: (d, key) => Utils.isNumber(d) ? d : parseFloat(d[key]), // x value accessor\r\n        scale: \"linear\",\r\n        orient: \"bottom\",\r\n        ticks: undefined,\r\n    };\r\n    y={// Y axis config\r\n        title: '', // axis label,\r\n        orient: \"left\",\r\n        scale: \"linear\"\r\n    };\r\n    frequency=true;\r\n    groups={\r\n        key: 1\r\n    };\r\n    transition= true;\r\n\r\n    constructor(custom){\r\n        super();\r\n\r\n        if(custom){\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport class Histogram extends ChartWithColorGroups{\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new HistogramConfig(config));\r\n    }\r\n\r\n    setConfig(config){\r\n        return super.setConfig(new HistogramConfig(config));\r\n    }\r\n\r\n    initPlot(){\r\n        super.initPlot();\r\n        var self=this;\r\n\r\n        var conf = this.config;\r\n\r\n        this.plot.x={};\r\n        this.plot.y={};\r\n        this.plot.bar={\r\n            color: null//color scale mapping function\r\n        };\r\n        \r\n        this.computePlotSize();\r\n        \r\n        this.setupX();\r\n        this.setupHistogram();\r\n        this.setupGroupStacks();\r\n        this.setupY();\r\n        return this;\r\n    }\r\n\r\n    setupX(){\r\n\r\n        var plot = this.plot;\r\n        var x = plot.x;\r\n        var conf = this.config.x;\r\n\r\n        /* *\r\n         * value accessor - returns the value to encode for a given data object.\r\n         * scale - maps value to a visual display encoding, such as a pixel position.\r\n         * map function - maps from data value to display value\r\n         * axis - sets up axis\r\n         **/\r\n        x.value = d => conf.value(d, conf.key);\r\n        x.scale = Utils.createScale(conf.scale).range([0, plot.width]);\r\n        x.map = d => x.scale(x.value(d));\r\n\r\n        x.axis = Utils.createAxis(conf.orient, x.scale);\r\n\r\n        if(conf.ticks){\r\n            x.axis.ticks(conf.ticks);\r\n        }\r\n        var data = this.plot.groupedData;\r\n        plot.x.scale.domain([d3.min(data, s=>d3.min(s.values, plot.x.value)), d3.max(data, s=>d3.max(s.values, plot.x.value))]);\r\n        \r\n    };\r\n\r\n    setupY (){\r\n\r\n        var plot = this.plot;\r\n        var y = plot.y;\r\n        var conf = this.config.y;\r\n        y.scale = Utils.createScale(conf.scale).range([plot.height, 0]);\r\n\r\n        y.axis = Utils.createAxis(conf.orient, y.scale);\r\n        var data = this.plot.data;\r\n        var yStackMax = d3.max(plot.stackedHistograms, layer => d3.max(layer.histogramBins, d => d.y0 + d.y));\r\n        plot.y.scale.domain([0, yStackMax]);\r\n\r\n    };\r\n\r\n\r\n    setupHistogram() {\r\n        var plot = this.plot;\r\n        var x = plot.x;\r\n        var y = plot.y;\r\n        var ticks = this.config.x.ticks ? x.scale.ticks(this.config.x.ticks) : x.scale.ticks();\r\n\r\n        plot.histogram = d3.histogram()\r\n            .domain(x.scale.domain())\r\n            .value(x.value)\r\n            .thresholds(ticks);\r\n    }\r\n\r\n    setupGroupStacks() {\r\n        var self=this;\r\n        var y0s = [];\r\n        this.plot.groupedData.forEach(d=>{\r\n            d.histogramBins = this.plot.histogram(d.values);\r\n\r\n                d.histogramBins.forEach((b,i) => {\r\n                    b.x =b.x0;\r\n                    b.dx = b.x1-b.x0;\r\n                    b.y = b.length;\r\n                    var prevY0 = y0s[i];\r\n                    if(!prevY0) prevY0 = 0;\r\n                    b.y0 = prevY0;\r\n\r\n                    if(!this.config.frequency){\r\n                        b.y/=this.plot.dataLength\r\n                    }\r\n                    y0s[i] = b.y+prevY0;\r\n                });\r\n\r\n\r\n        });\r\n        var keys = this.plot.groupedData.map(d=>d.key);\r\n        // console.log(this.plot.groupedData);\r\n\r\n        this.plot.stack = d3.stack().keys(keys).value(d=>d.histogramBins);\r\n        this.plot.stackedHistograms = this.plot.groupedData;\r\n    }\r\n\r\n    drawAxisX(){\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var axisConf = this.config.x;\r\n        var axis = self.svgG.selectOrAppend(\"g.\"+self.prefixClass('axis-x')+\".\"+self.prefixClass('axis')+(self.config.guides ? '' : '.'+self.prefixClass('no-guides')))\r\n            .attr(\"transform\", \"translate(0,\" + plot.height + \")\");\r\n\r\n        var axisT = axis;\r\n        if (self.config.transition) {\r\n            axisT = axis.transition().ease(d3.easeSinInOut);\r\n        }\r\n\r\n        axisT.call(plot.x.axis);\r\n\r\n        axis.selectOrAppend(\"text.\"+self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\"+ (plot.width/2) +\",\"+ (plot.margin.bottom) +\")\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"-1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(axisConf.title);\r\n    };\r\n\r\n    drawAxisY(){\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var axisConf = this.config.y;\r\n        var axis = self.svgG.selectOrAppend(\"g.\"+self.prefixClass('axis-y')+\".\"+self.prefixClass('axis')+(self.config.guides ? '' : '.'+self.prefixClass('no-guides')));\r\n\r\n        var axisT = axis;\r\n        if (self.config.transition) {\r\n            axisT = axis.transition().ease(d3.easeSinInOut);\r\n        }\r\n\r\n        axisT.call(plot.y.axis);\r\n\r\n        axis.selectOrAppend(\"text.\"+self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\"+ -plot.margin.left +\",\"+(plot.height/2)+\")rotate(-90)\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(axisConf.title);\r\n    };\r\n\r\n\r\n    drawHistogram() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        \r\n        var layerClass = this.prefixClass(\"layer\");\r\n\r\n        var barClass = this.prefixClass(\"bar\");\r\n        var layer = self.svgG.selectAll(\".\"+layerClass)\r\n            .data(plot.stackedHistograms);\r\n\r\n        var layerMerge = layer.enter().append(\"g\")\r\n            .attr(\"class\", layerClass).merge(layer);\r\n\r\n\r\n        var bar = layerMerge.selectAll(\".\"+barClass)\r\n            .data(d => d.histogramBins);\r\n\r\n        var barEnter = bar.enter().append(\"g\");\r\n        barEnter\r\n            .attr(\"class\", barClass)\r\n            .append(\"rect\")\r\n            .attr(\"x\", 1);\r\n\r\n        var barMerge = barEnter.merge(bar);\r\n        var barRect = barMerge.select(\"rect\");\r\n\r\n        var barRectT = barRect;\r\n        var barT = barMerge;\r\n        var layerT = layerMerge;\r\n        if (this.transitionEnabled()) {\r\n            barRectT = barRect.transition();\r\n            barT = barMerge.transition();\r\n            layerT= layerMerge.transition();\r\n        }\r\n\r\n        barT.attr(\"transform\", function(d) { return \"translate(\" + plot.x.scale(d.x) + \",\" + (plot.y.scale(d.y0 +d.y)) + \")\"; });\r\n        var rectWidth = plot.stackedHistograms.length ? (plot.stackedHistograms[0].histogramBins.length ?  plot.x.scale(plot.stackedHistograms[0].histogramBins[0].x1)-plot.x.scale(plot.stackedHistograms[0].histogramBins[0].x0)-1 : 0) : 0;\r\n\r\n\r\n        barRectT\r\n            .attr(\"width\",  d=>  plot.x.scale(d.x1)-plot.x.scale(d.x0)-1 )\r\n            .attr(\"height\", d =>   plot.height - plot.y.scale(d.y));\r\n\r\n        if(this.plot.color){\r\n            layerT\r\n                .attr(\"fill\", this.plot.seriesColor);\r\n        }\r\n\r\n        if (plot.tooltip) {\r\n            barMerge.on(\"mouseover\", d => {\r\n                self.showTooltip(d.y);\r\n            }).on(\"mouseout\", d => {\r\n                self.hideTooltip();\r\n            });\r\n        }\r\n        layer.exit().remove();\r\n        bar.exit().remove();\r\n    }\r\n\r\n    update(newData){\r\n        super.update(newData);\r\n        this.drawAxisX();\r\n        this.drawAxisY();\r\n\r\n        this.drawHistogram();\r\n        return this;\r\n    };\r\n}\r\n","import {D3Extensions} from './d3-extensions'\r\nD3Extensions.extend();\r\n\r\nexport {ScatterPlot, ScatterPlotConfig} from \"./scatterplot\";\r\nexport {ScatterPlotMatrix, ScatterPlotMatrixConfig} from \"./scatterplot-matrix\";\r\nexport {Regression, RegressionConfig} from './regression'\r\nexport {CorrelationMatrix, CorrelationMatrixConfig} from './correlation-matrix'\r\nexport {Heatmap, HeatmapConfig} from './heatmap'\r\nexport {HeatmapTimeSeries, HeatmapTimeSeriesConfig} from './heatmap-timeseries'\r\nexport {Histogram, HistogramConfig} from './histogram'\r\nexport {BarChart, BarChartConfig} from './bar-chart'\r\nexport {BoxPlotBase, BoxPlotBaseConfig} from './box-plot-base'\r\nexport {BoxPlot, BoxPlotConfig} from './box-plot'\r\nexport {StatisticsUtils} from './statistics-utils'\r\nexport {Legend} from './legend'\r\n\r\n\r\n\r\n\r\n\r\n","import {Utils} from \"./utils\";\r\n\r\nimport legendColor from '../bower_components/d3-legend/src/color'\r\nimport legendSize from '../bower_components/d3-legend/src/size'\r\nimport legendSymbol from '../bower_components/d3-legend/src/symbol'\r\n\r\n\r\n/*var d3 = require('../bower_components/d3');\r\n*/\r\n// var legend = require('../bower_components/d3-legend/no-extend');\r\n//\r\n// module.exports.legend = legend;\r\n\r\nexport class Legend {\r\n\r\n    cssClassPrefix=\"odc-\";\r\n    legendClass=this.cssClassPrefix+\"legend\";\r\n    container;\r\n    scale;\r\n    color= legendColor;\r\n    size = legendSize;\r\n    symbol= legendSymbol;\r\n    guid;\r\n\r\n    labelFormat = undefined;\r\n\r\n    constructor(svg, legendParent, scale, legendX, legendY, labelFormat){\r\n        this.scale=scale;\r\n        this.svg = svg;\r\n        this.guid = Utils.guid();\r\n        this.container =  Utils.selectOrAppend(legendParent, \"g.\"+this.legendClass, \"g\")\r\n            .attr(\"transform\", \"translate(\"+legendX+\",\"+legendY+\")\")\r\n            .classed(this.legendClass, true);\r\n\r\n        this.labelFormat = labelFormat;\r\n    }\r\n\r\n\r\n\r\n    linearGradientBar(barWidth, barHeight, title){\r\n        var gradientId = this.cssClassPrefix+\"linear-gradient\"+\"-\"+this.guid;\r\n        var scale= this.scale;\r\n        var self = this;\r\n\r\n        this.linearGradient = Utils.linearGradient(this.svg, gradientId, this.scale.range(), 0, 100, 0, 0);\r\n\r\n        this.container.append(\"rect\")\r\n            .attr(\"width\", barWidth)\r\n            .attr(\"height\", barHeight)\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", 0)\r\n            .style(\"fill\", \"url(#\"+gradientId+\")\");\r\n\r\n\r\n        var ticks = this.container.selectAll(\"text\")\r\n            .data( scale.domain() );\r\n        var ticksNumber =scale.domain().length-1;\r\n        ticks.enter().append(\"text\");\r\n\r\n        ticks.attr(\"x\", barWidth)\r\n            .attr(\"y\",  (d, i) =>  barHeight -(i*barHeight/ticksNumber))\r\n            .attr(\"dx\", 3)\r\n            // .attr(\"dy\", 1)\r\n            .attr(\"alignment-baseline\", \"middle\")\r\n            .text(d=> self.labelFormat ? self.labelFormat(d) : d);\r\n        ticks.attr(\"dominant-baseline\", \"middle\")\r\n        if(this.rotateLabels){\r\n            ticks\r\n                .attr(\"transform\", (d, i) => \"rotate(-45, \" + barWidth + \", \" + (barHeight -(i*barHeight/ticksNumber)) + \")\")\r\n                .attr(\"text-anchor\", \"start\")\r\n                .attr(\"dx\", 5)\r\n                .attr(\"dy\", 5);\r\n\r\n        }else{\r\n\r\n        }\r\n\r\n        ticks.exit().remove();\r\n\r\n        return this;\r\n    }\r\n\r\n    setRotateLabels(rotateLabels) {\r\n        this.rotateLabels = rotateLabels;\r\n        return this;\r\n    }\r\n\r\n    \r\n}","import {Chart, ChartConfig} from \"./chart\";\r\nimport {ScatterPlot, ScatterPlotConfig} from \"./scatterplot\";\r\nimport {Utils} from './utils'\r\nimport {StatisticsUtils} from './statistics-utils'\r\n\r\n\r\nexport class RegressionConfig extends ScatterPlotConfig{\r\n\r\n    mainRegression = true;\r\n    groupRegression = true;\r\n    confidence={\r\n        level: 0.95,\r\n        criticalValue: (degreesOfFreedom, criticalProbability) => StatisticsUtils.tValue(degreesOfFreedom, criticalProbability),\r\n        marginOfError: undefined //custom  margin Of Error function (x, points)\r\n    };\r\n\r\n    constructor(custom){\r\n        super();\r\n\r\n        if(custom){\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport class Regression extends ScatterPlot{\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new RegressionConfig(config));\r\n    }\r\n\r\n    setConfig(config){\r\n        return super.setConfig(new RegressionConfig(config));\r\n    }\r\n\r\n    initPlot(){\r\n        super.initPlot();\r\n        this.initRegressionLines();\r\n    }\r\n\r\n    initRegressionLines(){\r\n\r\n        var self = this;\r\n        var groupsAvailable = self.plot.groupingEnabled;\r\n\r\n        self.plot.regressions= [];\r\n\r\n\r\n        if(groupsAvailable && self.config.mainRegression){\r\n            var regression = this.initRegression(this.plot.data, false);\r\n            self.plot.regressions.push(regression);\r\n        }\r\n\r\n        if(self.config.groupRegression){\r\n            this.initGroupRegression();\r\n        }\r\n\r\n    }\r\n\r\n    initGroupRegression() {\r\n        var self = this;\r\n\r\n        self.plot.groupedData.forEach(group=>{\r\n            var regression = this.initRegression(group.values, group.key);\r\n            self.plot.regressions.push(regression);\r\n        });\r\n    }\r\n\r\n    initRegression(values, groupVal){\r\n        var self = this;\r\n\r\n        var points = values.map(d=>{\r\n            return [parseFloat(self.plot.x.value(d)), parseFloat(self.plot.y.value(d))];\r\n        });\r\n\r\n        // points.sort((a,b) => a[0]-b[0]);\r\n\r\n        var linearRegression =  StatisticsUtils.linearRegression(points);\r\n        var linearRegressionLine = StatisticsUtils.linearRegressionLine(linearRegression);\r\n\r\n\r\n        var extentX = d3.extent(points, d=>d[0]);\r\n\r\n\r\n        var linePoints = [\r\n            {\r\n                x: extentX[0],\r\n                y: linearRegressionLine(extentX[0])\r\n            },\r\n            {\r\n                x: extentX[1],\r\n                y: linearRegressionLine(extentX[1])\r\n            }\r\n        ];\r\n\r\n        var line = d3.line()\r\n            .curve(d3.curveBasis)\r\n            .x(d => self.plot.x.scale(d.x))\r\n            .y(d => self.plot.y.scale(d.y));\r\n\r\n        var color = self.plot.color;\r\n\r\n        var defaultColor = \"black\";\r\n        if(Utils.isFunction(color)){\r\n            if(values.length && groupVal!==false){\r\n                if(self.config.series){\r\n                    color =self.plot.colorCategory(groupVal);\r\n                }else{\r\n                    color = color(values[0]);\r\n                }\r\n\r\n            }else{\r\n                color = defaultColor;\r\n            }\r\n        }else if(!color && groupVal===false){\r\n            color = defaultColor;\r\n        }\r\n\r\n\r\n        var confidence = this.computeConfidence(points, extentX,  linearRegression,linearRegressionLine);\r\n        return {\r\n            group: groupVal || false,\r\n            line: line,\r\n            linePoints: linePoints,\r\n            color: color,\r\n            confidence: confidence\r\n        };\r\n    }\r\n\r\n    computeConfidence(points, extentX, linearRegression,linearRegressionLine){\r\n        var self = this;\r\n        var slope = linearRegression.m;\r\n        var n = points.length;\r\n        var degreesOfFreedom = Math.max(0, n-2);\r\n\r\n        var alpha = 1 - self.config.confidence.level;\r\n        var criticalProbability  = 1 - alpha/2;\r\n        var criticalValue = self.config.confidence.criticalValue(degreesOfFreedom,criticalProbability);\r\n\r\n        var xValues = points.map(d=>d[0]);\r\n        var meanX = StatisticsUtils.mean(xValues);\r\n        var xMySum=0;\r\n        var xSum=0;\r\n        var xPowSum=0;\r\n        var ySum=0;\r\n        var yPowSum=0;\r\n        points.forEach(p=>{\r\n            var x = p[0];\r\n            var y = p[1];\r\n\r\n            xMySum += x*y;\r\n            xSum+=x;\r\n            ySum+=y;\r\n            xPowSum+= x*x;\r\n            yPowSum+= y*y;\r\n        });\r\n        var a = linearRegression.m;\r\n        var b = linearRegression.b;\r\n\r\n        var Sa2 = n/(n+2) * ((yPowSum-a*xMySum-b*ySum)/(n*xPowSum-(xSum*xSum))); //Wariancja wspczynnika kierunkowego regresji liniowej a\r\n        var Sy2 = (yPowSum - a*xMySum-b*ySum)/(n*(n-2)); //Sa2 //Mean y value variance\r\n\r\n        var errorFn = x=> Math.sqrt(Sy2 + Math.pow(x-meanX,2)*Sa2); //pierwiastek kwadratowy z wariancji dowolnego punktu prostej\r\n        var marginOfError =  x=> criticalValue* errorFn(x);\r\n\r\n\r\n        // console.log('n', n, 'degreesOfFreedom', degreesOfFreedom, 'criticalProbability',criticalProbability);\r\n        // var confidenceDown = x => linearRegressionLine(x) -  marginOfError(x);\r\n        // var confidenceUp = x => linearRegressionLine(x) +  marginOfError(x);\r\n\r\n\r\n        var computeConfidenceAreaPoint = x=>{\r\n            var linearRegression = linearRegressionLine(x);\r\n            var moe = marginOfError(x);\r\n            var confDown = linearRegression - moe;\r\n            var confUp = linearRegression + moe;\r\n            return {\r\n                x: x,\r\n                y0: confDown,\r\n                y1: confUp\r\n            }\r\n\r\n        };\r\n\r\n        var centerX = (extentX[1]+extentX[0])/2;\r\n\r\n        // var confidenceAreaPoints = [extentX[0], centerX,  extentX[1]].map(computeConfidenceAreaPoint);\r\n        var confidenceAreaPoints = [extentX[0], centerX,  extentX[1]].map(computeConfidenceAreaPoint);\r\n\r\n        var fitInPlot = y => y;\r\n\r\n        var confidenceArea =  d3.area()\r\n        .curve(d3.curveNatural)\r\n            .x(d => self.plot.x.scale(d.x))\r\n            .y0(d => fitInPlot(self.plot.y.scale(d.y0)))\r\n            .y1(d => fitInPlot(self.plot.y.scale(d.y1)));\r\n\r\n        return {\r\n            area:confidenceArea,\r\n            points:confidenceAreaPoints\r\n        };\r\n    }\r\n\r\n    update(newData){\r\n        super.update(newData);\r\n        this.updateRegressionLines();\r\n\r\n    };\r\n\r\n    updateRegressionLines() {\r\n        var self = this;\r\n        var regressionContainerClass = this.prefixClass(\"regression-container\");\r\n        var regressionContainerSelector = \"g.\"+regressionContainerClass;\r\n\r\n        var clipPathId = self.prefixClass(\"clip\");\r\n\r\n        var regressionContainer = self.svgG.selectOrInsert(regressionContainerSelector, \".\"+self.dotsContainerClass);\r\n        var regressionContainerClip = regressionContainer.selectOrAppend(\"clipPath\")\r\n            .attr(\"id\", clipPathId);\r\n\r\n\r\n        regressionContainerClip.selectOrAppend('rect')\r\n            .attr('width', self.plot.width)\r\n            .attr('height', self.plot.height)\r\n            .attr('x', 0)\r\n            .attr('y', 0);\r\n\r\n        regressionContainer.attr(\"clip-path\", (d,i) => \"url(#\"+clipPathId+\")\");\r\n\r\n        var regressionClass = this.prefixClass(\"regression\");\r\n        var confidenceAreaClass = self.prefixClass(\"confidence\");\r\n        var regressionSelector = \"g.\"+regressionClass;\r\n        var regression = regressionContainer.selectAll(regressionSelector)\r\n            .data(self.plot.regressions, (d,i)=> d.group);\r\n\r\n\r\n        var regressionEnter = regression.enter().appendSelector(regressionSelector);\r\n        var regressionMerge = regressionEnter.merge(regression);\r\n        var lineClass = self.prefixClass(\"line\");\r\n        regressionEnter\r\n            .append(\"path\")\r\n            .attr(\"class\", lineClass)\r\n            .attr(\"shape-rendering\", \"optimizeQuality\");\r\n\r\n        var line = regressionMerge.select(\"path.\"+lineClass)\r\n            .style(\"stroke\", r => r.color);\r\n        \r\n        var lineT = line;\r\n        if (self.transitionEnabled()) {\r\n            lineT = line.transition();\r\n        }\r\n\r\n        lineT.attr(\"d\", r => r.line(r.linePoints))\r\n\r\n\r\n        regressionEnter\r\n            .append(\"path\")\r\n            .attr(\"class\", confidenceAreaClass)\r\n            .attr(\"shape-rendering\", \"optimizeQuality\")\r\n            .style(\"opacity\", \"0.4\");\r\n\r\n\r\n\r\n        var area = regressionMerge.select(\"path.\"+confidenceAreaClass);\r\n\r\n        var areaT = area;\r\n        if (self.transitionEnabled()) {\r\n            areaT = area.transition();\r\n        }\r\n        areaT.attr(\"d\", r => r.confidence.area(r.confidence.points));\r\n        areaT.style(\"fill\", r => r.color)\r\n        regression.exit().remove();\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n","import {ChartWithColorGroups} from \"./chart-with-color-groups\";\r\nimport {ScatterPlotConfig} from \"./scatterplot\";\r\nimport {Utils} from './utils'\r\nimport {Legend} from \"./legend\";\r\n\r\nexport class ScatterPlotMatrixConfig extends ScatterPlotConfig{\r\n\r\n    svgClass= this.cssClassPrefix+'scatterplot-matrix';\r\n    size= undefined; //scatter plot cell size\r\n    minCellSize = 50;\r\n    maxCellSize = 1000;\r\n    padding= 20; //scatter plot cell padding\r\n    brush= true;\r\n    guides= true; //show axis guides\r\n    showTooltip= true; //show tooltip on dot hover\r\n    ticks= undefined; //ticks number, (default: computed using cell size)\r\n    x={// X axis config\r\n        orient: \"bottom\",\r\n        scale: \"linear\"\r\n    };\r\n    y={// Y axis config\r\n        orient: \"left\",\r\n        scale: \"linear\"\r\n    };\r\n    groups={\r\n        key: undefined, //object property name or array index with grouping variable\r\n        includeInPlot: false, //include group as variable in plot, boolean (default: false)\r\n    };\r\n    variables= {\r\n        labels: [], //optional array of variable labels (for the diagonal of the plot).\r\n        keys: [], //optional array of variable keys\r\n        value: (d, variableKey) => d[variableKey] // variable value accessor\r\n    };\r\n\r\n    constructor(custom){\r\n        super();\r\n        Utils.deepExtend(this, custom);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class ScatterPlotMatrix extends ChartWithColorGroups {\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new ScatterPlotMatrixConfig(config));\r\n    }\r\n\r\n    setConfig(config) {\r\n        return super.setConfig(new ScatterPlotMatrixConfig(config));\r\n\r\n    }\r\n\r\n    initPlot() {\r\n        super.initPlot();\r\n\r\n        var self = this;\r\n        var margin = this.plot.margin;\r\n        var conf = this.config;\r\n        this.plot.x={};\r\n        this.plot.y={};\r\n        this.plot.dot={\r\n            color: null//color scale mapping function\r\n        };\r\n        \r\n        this.setupVariables();\r\n\r\n        this.plot.size = conf.size;\r\n\r\n\r\n        var width = conf.width;\r\n        var availableWidth = Utils.availableWidth(this.config.width, this.getBaseContainer(), margin);\r\n        var availableHeight = Utils.availableHeight(this.config.height, this.getBaseContainer(), margin);\r\n        if (!width) {\r\n            if(!this.plot.size){\r\n                this.plot.size =  Math.min(conf.maxCellSize, Math.max(conf.minCellSize, availableWidth/this.plot.variables.length));\r\n            }\r\n            width = margin.left + margin.right + this.plot.variables.length*this.plot.size;\r\n        }\r\n        if(!this.plot.size){\r\n            this.plot.size = (width - (margin.left + margin.right)) / this.plot.variables.length;\r\n        }\r\n\r\n        var height = width;\r\n        if (!height) {\r\n            height = availableHeight;\r\n        }\r\n\r\n        this.plot.width = width - margin.left - margin.right;\r\n        this.plot.height = height - margin.top - margin.bottom;\r\n\r\n\r\n        this.plot.ticks = conf.ticks;\r\n\r\n        if(this.plot.ticks===undefined){\r\n            this.plot.ticks = this.plot.size / 40;\r\n        }\r\n\r\n        this.setupX();\r\n        this.setupY();\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    setupVariables() {\r\n        var variablesConf = this.config.variables;\r\n\r\n        var data = this.plot.groupedData;\r\n        var plot = this.plot;\r\n        plot.domainByVariable = {};\r\n        plot.variables = variablesConf.keys;\r\n        if(!plot.variables || !plot.variables.length){\r\n\r\n            plot.variables = data.length ? Utils.inferVariables(data[0].values, this.config.groups.key, this.config.includeInPlot) : [];\r\n        }\r\n\r\n        plot.labels = [];\r\n        plot.labelByVariable = {};\r\n        plot.variables.forEach((variableKey, index) => {\r\n            var min = d3.min(data, s=>d3.min(s.values, d=>variablesConf.value(d, variableKey)));\r\n            var max = d3.max(data, s=>d3.max(s.values, d=>variablesConf.value(d, variableKey)));\r\n            plot.domainByVariable[variableKey] = [min,max];\r\n            var label = variableKey;\r\n            if(variablesConf.labels && variablesConf.labels.length>index){\r\n\r\n                label = variablesConf.labels[index];\r\n            }\r\n            plot.labels.push(label);\r\n            plot.labelByVariable[variableKey] = label;\r\n        });\r\n\r\n        plot.subplots = [];\r\n    };\r\n\r\n    setupX() {\r\n\r\n        var plot = this.plot;\r\n        var x = plot.x;\r\n        var conf = this.config;\r\n\r\n        \r\n        x.value = conf.variables.value;\r\n        x.scale = Utils.createScale(conf.x.scale).range([conf.padding / 2, plot.size - conf.padding / 2]);\r\n        x.map = (d, variable) => x.scale(x.value(d, variable));\r\n\r\n        x.axis = Utils.createAxis(conf.x.orient, x.scale).ticks(plot.ticks);\r\n        x.axis.tickSize(plot.size * plot.variables.length);\r\n\r\n    };\r\n\r\n    setupY() {\r\n\r\n        var plot = this.plot;\r\n        var y = plot.y;\r\n        var conf = this.config;\r\n\r\n        y.value = conf.variables.value;\r\n        y.scale = Utils.createScale(conf.y.scale).range([ plot.size - conf.padding / 2, conf.padding / 2]);\r\n\r\n        y.map = (d, variable) => y.scale(y.value(d, variable));\r\n        y.axis = Utils.createAxis(conf.y.orient, y.scale).ticks(plot.ticks);\r\n        y.axis.tickSize(-plot.size * plot.variables.length);\r\n    };\r\n\r\n    update( newData) {\r\n        super.update(newData);\r\n\r\n        var self =this;\r\n        var n = self.plot.variables.length;\r\n        var conf = this.config;\r\n\r\n        var axisClass = self.prefixClass(\"axis\");\r\n        var axisXClass = axisClass+\"-x\";\r\n        var axisYClass = axisClass+\"-y\";\r\n\r\n        var xAxisSelector = \"g.\"+axisXClass+\".\"+axisClass;\r\n        var yAxisSelector = \"g.\"+axisYClass+\".\"+axisClass;\r\n\r\n        var noGuidesClass = self.prefixClass(\"no-guides\");\r\n        var xAxis = self.svgG.selectAll(xAxisSelector)\r\n            .data(self.plot.variables);\r\n\r\n        var xAxisMerge = xAxis.enter().appendSelector(xAxisSelector)\r\n            .classed(noGuidesClass, !conf.guides).merge(xAxis);\r\n\r\n\r\n        xAxisMerge.attr(\"transform\", (d, i) => \"translate(\" + (n - i - 1) * self.plot.size + \",0)\")\r\n            .each(function(d) {\r\n                self.plot.x.scale.domain(self.plot.domainByVariable[d]);\r\n                var axis = d3.select(this);\r\n                if (self.transitionEnabled()) {\r\n                    axis = axis.transition();\r\n                }\r\n                axis.call(self.plot.x.axis);\r\n\r\n            });\r\n\r\n        xAxis.exit().remove();\r\n\r\n        var yAxis = self.svgG.selectAll(yAxisSelector)\r\n            .data(self.plot.variables);\r\n        var yAxisMerge = yAxis.enter().appendSelector(yAxisSelector).merge(yAxis);\r\n        yAxisMerge.classed(noGuidesClass, !conf.guides)\r\n            .attr(\"transform\", (d, i) => \"translate(0,\" + i * self.plot.size + \")\");\r\n        yAxisMerge.each(function(d) {\r\n            self.plot.y.scale.domain(self.plot.domainByVariable[d]);\r\n            var axis = d3.select(this);\r\n            if (self.transitionEnabled()) {\r\n                axis = axis.transition();\r\n            }\r\n            axis.call(self.plot.y.axis);\r\n\r\n        });\r\n\r\n        yAxis.exit().remove();\r\n\r\n        var cellClass =  self.prefixClass(\"cell\");\r\n        var cell = self.svgG.selectAll(\".\"+cellClass)\r\n            .data(self.utils.cross(self.plot.variables, self.plot.variables));\r\n\r\n        var cellEnter =  cell.enter().appendSelector(\"g.\"+cellClass);\r\n        cellEnter.filter(d => d.i === d.j).append(\"text\");\r\n\r\n        var cellMerge = cellEnter.merge(cell);\r\n        cellMerge.attr(\"transform\", d => \"translate(\" + (n - d.i - 1) * self.plot.size + \",\" + d.j * self.plot.size + \")\");\r\n\r\n        if(conf.brush){\r\n            this.drawBrush(cellMerge);\r\n        }\r\n\r\n\r\n        cellMerge.each(plotSubplot);\r\n\r\n        //Labels\r\n        cellMerge.select(\"text\")\r\n            .attr(\"x\", conf.padding)\r\n            .attr(\"y\", conf.padding)\r\n            .attr(\"dy\", \".71em\")\r\n            .text( d => self.plot.labelByVariable[d.x]);\r\n\r\n        cell.exit().remove();\r\n\r\n        function plotSubplot(p) {\r\n            var plot = self.plot;\r\n            plot.subplots.push(p);\r\n            var cell = d3.select(this);\r\n\r\n            plot.x.scale.domain(plot.domainByVariable[p.x]);\r\n            plot.y.scale.domain(plot.domainByVariable[p.y]);\r\n\r\n            var frameClass =  self.prefixClass(\"frame\");\r\n            cell.selectOrAppend(\"rect.\"+frameClass)\r\n                .attr(\"class\", frameClass)\r\n                .attr(\"x\", conf.padding / 2)\r\n                .attr(\"y\", conf.padding / 2)\r\n                .attr(\"width\", plot.size - conf.padding)\r\n                .attr(\"height\", plot.size - conf.padding);\r\n            \r\n            p.update = function() {\r\n\r\n                var subplot = this;\r\n                var layerClass = self.prefixClass('layer');\r\n\r\n\r\n                var layer = cell.selectAll(\"g.\"+layerClass).data(self.plot.groupedData);\r\n\r\n                var layerMerge = layer.enter().appendSelector(\"g.\"+layerClass).merge(layer);\r\n\r\n                var dots = layerMerge.selectAll(\"circle\")\r\n                    .data(d=>d.values);\r\n\r\n                var dotsMerge = dots.enter().append(\"circle\").merge(dots);\r\n\r\n                var dotsT = dotsMerge;\r\n                if (self.transitionEnabled()) {\r\n                    dotsT = dotsMerge.transition();\r\n                }\r\n\r\n                dotsT.attr(\"cx\", (d) => plot.x.map(d, subplot.x))\r\n                    .attr(\"cy\", (d) => plot.y.map(d, subplot.y))\r\n                    .attr(\"r\", self.config.dotRadius);\r\n\r\n\r\n                if (plot.seriesColor) {\r\n                    layerMerge.style(\"fill\", plot.seriesColor)\r\n                }else if(plot.color){\r\n                    dotsMerge.style(\"fill\", plot.color)\r\n                }\r\n\r\n\r\n                if (plot.tooltip) {\r\n                    dotsMerge.on(\"mouseover\", (d) => {\r\n\r\n                        var html = \"(\" + plot.x.value(d, subplot.x) + \", \" + plot.y.value(d, subplot.y) + \")\";\r\n                        var group = self.config.groups ? self.config.groups.value.call(self.config, d) : null;\r\n                        if (group || group === 0) {\r\n                            group = plot.groupToLabel[group];\r\n                            html += \"<br/>\";\r\n                            var label = self.config.groups.label;\r\n                            if (label) {\r\n                                html += label + \": \";\r\n                            }\r\n                            html += group\r\n                        }\r\n                        self.showTooltip(html);\r\n                    })\r\n                        .on(\"mouseout\", (d)=> {\r\n                            self.hideTooltip();\r\n                        });\r\n                }\r\n\r\n                dots.exit().remove();\r\n                layer.exit().remove();\r\n            };\r\n            p.update();\r\n\r\n        }\r\n    };\r\n\r\n    drawBrush(cell) {\r\n        var self = this;\r\n        var brush = d3.brush()\r\n            // .x(self.plot.x.scale)\r\n            // .y(self.plot.y.scale)\r\n            .on(\"start\", brushstart)\r\n            .on(\"brush\", brushmove)\r\n            .on(\"end\", brushend);\r\n\r\n        brush.extent([[0, 0], [self.plot.size, self.plot.size]]);\r\n        cell.selectOrAppend(\"g.brush-container\").call(brush);\r\n\r\n        self.clearBrush();\r\n\r\n        // Clear the previously-active brush, if any.\r\n        function brushstart(p) {\r\n            if (self.plot.brushCell !== this) {\r\n                self.clearBrush();\r\n                self.plot.x.scale.domain(self.plot.domainByVariable[p.x]);\r\n                self.plot.y.scale.domain(self.plot.domainByVariable[p.y]);\r\n                self.plot.brushCell = this;\r\n                self.plot.brush = brush;\r\n            }\r\n        }\r\n\r\n        // Highlight the selected circles.\r\n        function brushmove(p) {\r\n            var s = d3.event.selection;\r\n            if(!s)return;\r\n            var e = s.map(_=> [self.plot.x.scale.invert(_[0]), self.plot.y.scale.invert(_[1])]);\r\n            // console.log(e);\r\n            self.svgG.selectAll(\"circle\").classed(\"hidden\", function (d) {\r\n                var x = parseFloat(d[p.x]),\r\n                    y = parseFloat(d[p.y]);\r\n\r\n                return e[0][0] > x || x > e[1][0]\r\n                    || e[1][1] > y || y > e[0][1];\r\n            });\r\n        }\r\n        // If the brush is empty, select all circles.\r\n        function brushend() {\r\n            if (!d3.event.selection) self.svgG.selectAll(\".hidden\").classed(\"hidden\", false);\r\n        }\r\n    };\r\n\r\n    clearBrush(){\r\n        var self = this;\r\n        if(!self.plot.brushCell){\r\n            return;\r\n        }\r\n        \r\n        self.plot.brush.move(d3.select(self.plot.brushCell), null);\r\n        self.svgG.selectAll(\".hidden\").classed(\"hidden\", false);\r\n        self.plot.brushCell=null;\r\n\r\n    }\r\n}","import {ChartWithColorGroups, ChartWithColorGroupsConfig} from \"./chart-with-color-groups\";\r\nimport {Utils} from './utils'\r\nimport {Legend} from \"./legend\";\r\n\r\nexport class ScatterPlotConfig extends ChartWithColorGroupsConfig{\r\n\r\n    svgClass= this.cssClassPrefix+'scatterplot';\r\n    guides= false; //show axis guides\r\n    showTooltip= true; //show tooltip on dot hover\r\n\r\n    x={// X axis config\r\n        title: '', // axis label\r\n        key: 0,\r\n        value: (d, key) => d[key], // x value accessor\r\n        orient: \"bottom\",\r\n        scale: \"linear\",\r\n        domainMargin: 0.05\r\n    };\r\n    y={// Y axis config\r\n        title: '', // axis label,\r\n        key: 1,\r\n        value: (d, key) => d[key], // y value accessor\r\n        orient: \"left\",\r\n        scale: \"linear\",\r\n        domainMargin: 0.05\r\n    };\r\n    groups={\r\n        key: 2\r\n    };\r\n    dotRadius = 2;\r\n    transition= true;\r\n\r\n    constructor(custom){\r\n        super();\r\n\r\n\r\n\r\n        if(custom){\r\n            Utils.deepExtend(this, custom);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport class ScatterPlot extends ChartWithColorGroups{\r\n    constructor(placeholderSelector, data, config) {\r\n        super(placeholderSelector, data, new ScatterPlotConfig(config));\r\n    }\r\n\r\n    setConfig(config){\r\n        return super.setConfig(new ScatterPlotConfig(config));\r\n    }\r\n\r\n    initPlot(){\r\n        super.initPlot();\r\n        var self=this;\r\n\r\n        var conf = this.config;\r\n\r\n        this.plot.x={};\r\n        this.plot.y={};\r\n\r\n        this.computePlotSize();\r\n        this.setupX();\r\n        this.setupY();\r\n\r\n        return this;\r\n    }\r\n\r\n    setupX(){\r\n\r\n        var plot = this.plot;\r\n        var x = plot.x;\r\n        var conf = this.config.x;\r\n\r\n        /* *\r\n         * value accessor - returns the value to encode for a given data object.\r\n         * scale - maps value to a visual display encoding, such as a pixel position.\r\n         * map function - maps from data value to display value\r\n         * axis - sets up axis\r\n         **/\r\n        x.value = d => conf.value(d, conf.key);\r\n        \r\n        x.scale = Utils.createScale(conf.scale).range([0, plot.width]);\r\n        x.map = d => x.scale(x.value(d));\r\n        \r\n        x.axis = Utils.createAxis(conf.orient, x.scale);\r\n\r\n        var data = this.plot.groupedData;\r\n\r\n        var domain = [parseFloat(d3.min(data, s=>d3.min(s.values, plot.x.value))), parseFloat(d3.max(data, s=>d3.max(s.values, plot.x.value)))];\r\n        var margin = (domain[1]-domain[0])* conf.domainMargin;\r\n        domain[0]-=margin;\r\n        domain[1]+=margin;\r\n        plot.x.scale.domain(domain);\r\n        if(this.config.guides) {\r\n            x.axis.tickSize(-plot.height);\r\n        }\r\n\r\n    };\r\n\r\n    setupY (){\r\n\r\n        var plot = this.plot;\r\n        var y = plot.y;\r\n        var conf = this.config.y;\r\n\r\n        /*\r\n         * value accessor - returns the value to encode for a given data object.\r\n         * scale - maps value to a visual display encoding, such as a pixel position.\r\n         * map function - maps from data value to display value\r\n         * axis - sets up axis\r\n         */\r\n        y.value = d => conf.value(d, conf.key);\r\n\r\n        y.scale = Utils.createScale(conf.scale).range([plot.height, 0]);\r\n\r\n        y.map = d => y.scale(y.value(d));\r\n\r\n        y.axis = Utils.createAxis(conf.orient, y.scale);\r\n\r\n        if(this.config.guides){\r\n            y.axis.tickSize(-plot.width);\r\n        }\r\n\r\n\r\n        var data = this.plot.groupedData;\r\n\r\n        var domain = [parseFloat(d3.min(data, s=>d3.min(s.values, plot.y.value))), parseFloat(d3.max(data, s=>d3.max(s.values, plot.y.value)))];\r\n        var margin = (domain[1]-domain[0])* conf.domainMargin;\r\n        domain[0]-=margin;\r\n        domain[1]+=margin;\r\n        plot.y.scale.domain(domain);\r\n        // plot.y.scale.domain([d3.min(data, plot.y.value)-1, d3.max(data, plot.y.value)+1]);\r\n    };\r\n\r\n    drawAxisX(){\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var axisConf = this.config.x;\r\n        var axis = self.svgG.selectOrAppend(\"g.\"+self.prefixClass('axis-x')+\".\"+self.prefixClass('axis')+(self.config.guides ? '' : '.'+self.prefixClass('no-guides')))\r\n            .attr(\"transform\", \"translate(0,\" + plot.height + \")\");\r\n        \r\n        var axisT = axis;\r\n        if (self.transitionEnabled()) {\r\n            axisT = axis.transition().ease(d3.easeSinInOut);\r\n        }\r\n\r\n        axisT.call(plot.x.axis);\r\n        \r\n        axis.selectOrAppend(\"text.\"+self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\"+ (plot.width/2) +\",\"+ (plot.margin.bottom) +\")\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"-1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(axisConf.title);\r\n    };\r\n\r\n    drawAxisY(){\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var axisConf = this.config.y;\r\n        var axis = self.svgG.selectOrAppend(\"g.\"+self.prefixClass('axis-y')+\".\"+self.prefixClass('axis')+(self.config.guides ? '' : '.'+self.prefixClass('no-guides')));\r\n\r\n        var axisT = axis;\r\n        if (self.transitionEnabled()) {\r\n            axisT = axis.transition().ease(d3.easeSinInOut);\r\n        }\r\n\r\n        axisT.call(plot.y.axis);\r\n\r\n        axis.selectOrAppend(\"text.\"+self.prefixClass('label'))\r\n            .attr(\"transform\", \"translate(\"+ -plot.margin.left +\",\"+(plot.height/2)+\")rotate(-90)\")  // text is drawn off the screen top left, move down and out and rotate\r\n            .attr(\"dy\", \"1em\")\r\n            .style(\"text-anchor\", \"middle\")\r\n            .text(axisConf.title);\r\n    };\r\n\r\n    update(newData){\r\n        super.update(newData);\r\n        this.drawAxisX();\r\n        this.drawAxisY();\r\n\r\n        this.updateDots();\r\n    };\r\n\r\n    updateDots() {\r\n        var self = this;\r\n        var plot = self.plot;\r\n        var data = plot.data;\r\n        var layerClass = self.prefixClass('layer');\r\n        var dotClass = self.prefixClass('dot');\r\n        self.dotsContainerClass = self.prefixClass('dots-container');\r\n\r\n        var dotsContainer = self.svgG.selectOrAppend(\"g.\" + self.dotsContainerClass);\r\n\r\n        var layer = dotsContainer.selectAll(\"g.\"+layerClass).data(plot.groupedData);\r\n\r\n        var layerEnter = layer.enter().appendSelector(\"g.\"+layerClass);\r\n\r\n        var layerMerge = layerEnter.merge(layer);\r\n\r\n        var dots = layerMerge.selectAll('.' + dotClass)\r\n            .data(d=>d.values)\r\n\r\n        var dotsEnter = dots.enter().append(\"circle\")\r\n            .attr(\"class\", dotClass);\r\n\r\n        var dotsMerge = dotsEnter.merge(dots);\r\n\r\n        var dotsT = dotsMerge;\r\n        if (self.transitionEnabled()) {\r\n            dotsT = dotsMerge.transition();\r\n        }\r\n\r\n        dotsT.attr(\"r\", self.config.dotRadius)\r\n            .attr(\"cx\", plot.x.map)\r\n            .attr(\"cy\", plot.y.map);\r\n\r\n        if (plot.tooltip) {\r\n            dotsMerge.on(\"mouseover\", d => {\r\n                var html = \"(\" + plot.x.value(d) + \", \" + plot.y.value(d) + \")\";\r\n                var group = self.config.groups ?  self.config.groups.value.call(self.config,d) : null;\r\n                if (group || group === 0) {\r\n                    group = plot.groupToLabel[group];\r\n                    html += \"<br/>\";\r\n                    var label = self.config.groups.label;\r\n                    if (label) {\r\n                        html += label + \": \";\r\n                    }\r\n                    html += group\r\n                }\r\n                self.showTooltip(html);\r\n            })\r\n                .on(\"mouseout\", d => {\r\n                    self.hideTooltip();\r\n                });\r\n        }\r\n\r\n        if (plot.seriesColor) {\r\n            layerMerge.style(\"fill\", plot.seriesColor)\r\n        }else if(plot.color){\r\n            dotsMerge.style(\"fill\", plot.color)\r\n        }\r\n\r\n        dots.exit().remove();\r\n        layer.exit().remove();\r\n    }\r\n}\r\n","/*\n * https://gist.github.com/benrasmusen/1261977\n * NAME\n * \n * statistics-distributions.js - JavaScript library for calculating\n *   critical values and upper probabilities of common statistical\n *   distributions\n * \n * SYNOPSIS\n * \n * \n *   // Chi-squared-crit (2 degrees of freedom, 95th percentile = 0.05 level\n *   chisqrdistr(2, .05)\n *   \n *   // u-crit (95th percentile = 0.05 level)\n *   udistr(.05);\n *   \n *   // t-crit (1 degree of freedom, 99.5th percentile = 0.005 level) \n *   tdistr(1,.005);\n *   \n *   // F-crit (1 degree of freedom in numerator, 3 degrees of freedom \n *   //         in denominator, 99th percentile = 0.01 level)\n *   fdistr(1,3,.01);\n *   \n *   // upper probability of the u distribution (u = -0.85): Q(u) = 1-G(u)\n *   uprob(-0.85);\n *   \n *   // upper probability of the chi-square distribution\n *   // (3 degrees of freedom, chi-squared = 6.25): Q = 1-G\n *   chisqrprob(3,6.25);\n *   \n *   // upper probability of the t distribution\n *   // (3 degrees of freedom, t = 6.251): Q = 1-G\n *   tprob(3,6.251);\n *   \n *   // upper probability of the F distribution\n *   // (3 degrees of freedom in numerator, 5 degrees of freedom in\n *   //  denominator, F = 6.25): Q = 1-G\n *   fprob(3,5,.625);\n * \n * \n *  DESCRIPTION\n * \n * This library calculates percentage points (5 significant digits) of the u\n * (standard normal) distribution, the student's t distribution, the\n * chi-square distribution and the F distribution. It can also calculate the\n * upper probability (5 significant digits) of the u (standard normal), the\n * chi-square, the t and the F distribution.\n * \n * These critical values are needed to perform statistical tests, like the u\n * test, the t test, the F test and the chi-squared test, and to calculate\n * confidence intervals.\n * \n * If you are interested in more precise algorithms you could look at:\n *   StatLib: http://lib.stat.cmu.edu/apstat/ ; \n *   Applied Statistics Algorithms by Griffiths, P. and Hill, I.D.\n *   , Ellis Horwood: Chichester (1985)\n * \n * BUGS \n * \n * This port was produced from the Perl module Statistics::Distributions\n * that has had no bug reports in several years.  If you find a bug then\n * please double-check that JavaScript does not thing the numbers you are\n * passing in are strings.  (You can subtract 0 from them as you pass them\n * in so that \"5\" is properly understood to be 5.)  If you have passed in a\n * number then please contact the author\n * \n * AUTHOR\n * \n * Ben Tilly <btilly@gmail.com>\n * \n * Originl Perl version by Michael Kospach <mike.perl@gmx.at>\n * \n * Nice formating, simplification and bug repair by Matthias Trautner Kromann\n * <mtk@id.cbs.dk>\n * \n * COPYRIGHT \n * \n * Copyright 2008 Ben Tilly.\n * \n * This library is free software; you can redistribute it and/or modify it\n * under the same terms as Perl itself.  This means under either the Perl\n * Artistic License or the GPL v1 or later.\n */\n\nvar SIGNIFICANT = 5; // number of significant digits to be returned\n\nfunction chisqrdistr ($n, $p) {\n\tif ($n <= 0 || Math.abs($n) - Math.abs(integer($n)) != 0) {\n\t\tthrow(\"Invalid n: $n\\n\"); /* degree of freedom */\n\t}\n\tif ($p <= 0 || $p > 1) {\n\t\tthrow(\"Invalid p: $p\\n\"); \n\t}\n\treturn precision_string(_subchisqr($n-0, $p-0));\n}\n\nfunction udistr ($p) {\n\tif ($p > 1 || $p <= 0) {\n\t\tthrow(\"Invalid p: $p\\n\");\n\t}\n\treturn precision_string(_subu($p-0));\n}\n\nexport function tdistr ($n, $p) {\n\tif ($n <= 0 || Math.abs($n) - Math.abs(integer($n)) != 0) {\n\t\tthrow(\"Invalid n: $n\\n\");\n\t}\n\tif ($p <= 0 || $p >= 1) {\n\t\tthrow(\"Invalid p: $p\\n\");\n\t}\n\treturn precision_string(_subt($n-0, $p-0));\n}\n\nfunction fdistr ($n, $m, $p) {\n\tif (($n<=0) || ((Math.abs($n)-(Math.abs(integer($n))))!=0)) {\n\t\tthrow(\"Invalid n: $n\\n\"); /* first degree of freedom */\n\t}\n\tif (($m<=0) || ((Math.abs($m)-(Math.abs(integer($m))))!=0)) {\n\t\tthrow(\"Invalid m: $m\\n\"); /* second degree of freedom */\n\t}\n\tif (($p<=0) || ($p>1)) {\n\t\tthrow(\"Invalid p: $p\\n\");\n\t}\n\treturn precision_string(_subf($n-0, $m-0, $p-0));\n}\n\nfunction uprob ($x) {\n\treturn precision_string(_subuprob($x-0));\n}\n\nfunction chisqrprob ($n,$x) {\n\tif (($n <= 0) || ((Math.abs($n) - (Math.abs(integer($n)))) != 0)) {\n\t\tthrow(\"Invalid n: $n\\n\"); /* degree of freedom */\n\t}\n\treturn precision_string(_subchisqrprob($n-0, $x-0));\n}\n\nfunction tprob ($n, $x) {\n\tif (($n <= 0) || ((Math.abs($n) - Math.abs(integer($n))) !=0)) {\n\t\tthrow(\"Invalid n: $n\\n\"); /* degree of freedom */\n\t}\n\treturn precision_string(_subtprob($n-0, $x-0));\n}\n\nfunction fprob ($n, $m, $x) {\n\tif (($n<=0) || ((Math.abs($n)-(Math.abs(integer($n))))!=0)) {\n\t\tthrow(\"Invalid n: $n\\n\"); /* first degree of freedom */\n\t}\n\tif (($m<=0) || ((Math.abs($m)-(Math.abs(integer($m))))!=0)) {\n\t\tthrow(\"Invalid m: $m\\n\"); /* second degree of freedom */\n\t} \n\treturn precision_string(_subfprob($n-0, $m-0, $x-0));\n}\n\n\nfunction _subfprob ($n, $m, $x) {\n\tvar $p;\n\n\tif ($x<=0) {\n\t\t$p=1;\n\t} else if ($m % 2 == 0) {\n\t\tvar $z = $m / ($m + $n * $x);\n\t\tvar $a = 1;\n\t\tfor (var $i = $m - 2; $i >= 2; $i -= 2) {\n\t\t\t$a = 1 + ($n + $i - 2) / $i * $z * $a;\n\t\t}\n\t\t$p = 1 - Math.pow((1 - $z), ($n / 2) * $a);\n\t} else if ($n % 2 == 0) {\n\t\tvar $z = $n * $x / ($m + $n * $x);\n\t\tvar $a = 1;\n\t\tfor (var $i = $n - 2; $i >= 2; $i -= 2) {\n\t\t\t$a = 1 + ($m + $i - 2) / $i * $z * $a;\n\t\t}\n\t\t$p = Math.pow((1 - $z), ($m / 2)) * $a;\n\t} else {\n\t\tvar $y = Math.atan2(Math.sqrt($n * $x / $m), 1);\n\t\tvar $z = Math.pow(Math.sin($y), 2);\n\t\tvar $a = ($n == 1) ? 0 : 1;\n\t\tfor (var $i = $n - 2; $i >= 3; $i -= 2) {\n\t\t\t$a = 1 + ($m + $i - 2) / $i * $z * $a;\n\t\t} \n\t\tvar $b = Math.PI;\n\t\tfor (var $i = 2; $i <= $m - 1; $i += 2) {\n\t\t\t$b *= ($i - 1) / $i;\n\t\t}\n\t\tvar $p1 = 2 / $b * Math.sin($y) * Math.pow(Math.cos($y), $m) * $a;\n\n\t\t$z = Math.pow(Math.cos($y), 2);\n\t\t$a = ($m == 1) ? 0 : 1;\n\t\tfor (var $i = $m-2; $i >= 3; $i -= 2) {\n\t\t\t$a = 1 + ($i - 1) / $i * $z * $a;\n\t\t}\n\t\t$p = max(0, $p1 + 1 - 2 * $y / Math.PI\n\t\t\t- 2 / Math.PI * Math.sin($y) * Math.cos($y) * $a);\n\t}\n\treturn $p;\n}\n\n\nfunction _subchisqrprob ($n,$x) {\n\tvar $p;\n\n\tif ($x <= 0) {\n\t\t$p = 1;\n\t} else if ($n > 100) {\n\t\t$p = _subuprob((Math.pow(($x / $n), 1/3)\n\t\t\t\t- (1 - 2/9/$n)) / Math.sqrt(2/9/$n));\n\t} else if ($x > 400) {\n\t\t$p = 0;\n\t} else {   \n\t\tvar $a;\n                var $i;\n                var $i1;\n\t\tif (($n % 2) != 0) {\n\t\t\t$p = 2 * _subuprob(Math.sqrt($x));\n\t\t\t$a = Math.sqrt(2/Math.PI) * Math.exp(-$x/2) / Math.sqrt($x);\n\t\t\t$i1 = 1;\n\t\t} else {\n\t\t\t$p = $a = Math.exp(-$x/2);\n\t\t\t$i1 = 2;\n\t\t}\n\n\t\tfor ($i = $i1; $i <= ($n-2); $i += 2) {\n\t\t\t$a *= $x / $i;\n\t\t\t$p += $a;\n\t\t}\n\t}\n\treturn $p;\n}\n\nfunction _subu ($p) {\n\tvar $y = -Math.log(4 * $p * (1 - $p));\n\tvar $x = Math.sqrt(\n\t\t$y * (1.570796288\n\t\t  + $y * (.03706987906\n\t\t  \t+ $y * (-.8364353589E-3\n\t\t\t  + $y *(-.2250947176E-3\n\t\t\t  \t+ $y * (.6841218299E-5\n\t\t\t\t  + $y * (0.5824238515E-5\n\t\t\t\t\t+ $y * (-.104527497E-5\n\t\t\t\t\t  + $y * (.8360937017E-7\n\t\t\t\t\t\t+ $y * (-.3231081277E-8\n\t\t\t\t\t\t  + $y * (.3657763036E-10\n\t\t\t\t\t\t\t+ $y *.6936233982E-12)))))))))));\n\tif ($p>.5)\n                $x = -$x;\n\treturn $x;\n}\n\nfunction _subuprob ($x) {\n\tvar $p = 0; /* if ($absx > 100) */\n\tvar $absx = Math.abs($x);\n\n\tif ($absx < 1.9) {\n\t\t$p = Math.pow((1 +\n\t\t\t$absx * (.049867347\n\t\t\t  + $absx * (.0211410061\n\t\t\t  \t+ $absx * (.0032776263\n\t\t\t\t  + $absx * (.0000380036\n\t\t\t\t\t+ $absx * (.0000488906\n\t\t\t\t\t  + $absx * .000005383)))))), -16)/2;\n\t} else if ($absx <= 100) {\n\t\tfor (var $i = 18; $i >= 1; $i--) {\n\t\t\t$p = $i / ($absx + $p);\n\t\t}\n\t\t$p = Math.exp(-.5 * $absx * $absx) \n\t\t\t/ Math.sqrt(2 * Math.PI) / ($absx + $p);\n\t}\n\n\tif ($x<0)\n        \t$p = 1 - $p;\n\treturn $p;\n}\n\n   \nfunction _subt ($n, $p) {\n\n\tif ($p >= 1 || $p <= 0) {\n\t\tthrow(\"Invalid p: $p\\n\");\n\t}\n\n\tif ($p == 0.5) {\n\t\treturn 0;\n\t} else if ($p < 0.5) {\n\t\treturn - _subt($n, 1 - $p);\n\t}\n\n\tvar $u = _subu($p);\n\tvar $u2 = Math.pow($u, 2);\n\n\tvar $a = ($u2 + 1) / 4;\n\tvar $b = ((5 * $u2 + 16) * $u2 + 3) / 96;\n\tvar $c = (((3 * $u2 + 19) * $u2 + 17) * $u2 - 15) / 384;\n\tvar $d = ((((79 * $u2 + 776) * $u2 + 1482) * $u2 - 1920) * $u2 - 945) \n\t\t\t\t/ 92160;\n\tvar $e = (((((27 * $u2 + 339) * $u2 + 930) * $u2 - 1782) * $u2 - 765) * $u2\n\t\t\t+ 17955) / 368640;\n\n\tvar $x = $u * (1 + ($a + ($b + ($c + ($d + $e / $n) / $n) / $n) / $n) / $n);\n\n\tif ($n <= Math.pow(log10($p), 2) + 3) {\n\t\tvar $round;\n\t\tdo { \n\t\t\tvar $p1 = _subtprob($n, $x);\n\t\t\tvar $n1 = $n + 1;\n\t\t\tvar $delta = ($p1 - $p) \n\t\t\t\t/ Math.exp(($n1 * Math.log($n1 / ($n + $x * $x)) \n\t\t\t\t\t+ Math.log($n/$n1/2/Math.PI) - 1 \n\t\t\t\t\t+ (1/$n1 - 1/$n) / 6) / 2);\n\t\t\t$x += $delta;\n\t\t\t$round = round_to_precision($delta, Math.abs(integer(log10(Math.abs($x))-4)));\n\t\t} while (($x) && ($round != 0));\n\t}\n\treturn $x;\n}\n\nfunction _subtprob ($n, $x) {\n\n\tvar $a;\n        var $b;\n\tvar $w = Math.atan2($x / Math.sqrt($n), 1);\n\tvar $z = Math.pow(Math.cos($w), 2);\n\tvar $y = 1;\n\n\tfor (var $i = $n-2; $i >= 2; $i -= 2) {\n\t\t$y = 1 + ($i-1) / $i * $z * $y;\n\t} \n\n\tif ($n % 2 == 0) {\n\t\t$a = Math.sin($w)/2;\n\t\t$b = .5;\n\t} else {\n\t\t$a = ($n == 1) ? 0 : Math.sin($w)*Math.cos($w)/Math.PI;\n\t\t$b= .5 + $w/Math.PI;\n\t}\n\treturn max(0, 1 - $b - $a * $y);\n}\n\nfunction _subf ($n, $m, $p) {\n\tvar $x;\n\n\tif ($p >= 1 || $p <= 0) {\n\t\tthrow(\"Invalid p: $p\\n\");\n\t}\n\n\tif ($p == 1) {\n\t\t$x = 0;\n\t} else if ($m == 1) {\n\t\t$x = 1 / Math.pow(_subt($n, 0.5 - $p / 2), 2);\n\t} else if ($n == 1) {\n\t\t$x = Math.pow(_subt($m, $p/2), 2);\n\t} else if ($m == 2) {\n\t\tvar $u = _subchisqr($m, 1 - $p);\n\t\tvar $a = $m - 2;\n\t\t$x = 1 / ($u / $m * (1 +\n\t\t\t(($u - $a) / 2 +\n\t\t\t\t(((4 * $u - 11 * $a) * $u + $a * (7 * $m - 10)) / 24 +\n\t\t\t\t\t(((2 * $u - 10 * $a) * $u + $a * (17 * $m - 26)) * $u\n\t\t\t\t\t\t- $a * $a * (9 * $m - 6)\n\t\t\t\t\t)/48/$n\n\t\t\t\t)/$n\n\t\t\t)/$n));\n\t} else if ($n > $m) {\n\t\t$x = 1 / _subf2($m, $n, 1 - $p)\n\t} else {\n\t\t$x = _subf2($n, $m, $p)\n\t}\n\treturn $x;\n}\n\nfunction _subf2 ($n, $m, $p) {\n\tvar $u = _subchisqr($n, $p);\n\tvar $n2 = $n - 2;\n\tvar $x = $u / $n * \n\t\t(1 + \n\t\t\t(($u - $n2) / 2 + \n\t\t\t\t(((4 * $u - 11 * $n2) * $u + $n2 * (7 * $n - 10)) / 24 + \n\t\t\t\t\t(((2 * $u - 10 * $n2) * $u + $n2 * (17 * $n - 26)) * $u \n\t\t\t\t\t\t- $n2 * $n2 * (9 * $n - 6)) / 48 / $m) / $m) / $m);\n\tvar $delta;\n\tdo {\n\t\tvar $z = Math.exp(\n\t\t\t(($n+$m) * Math.log(($n+$m) / ($n * $x + $m)) \n\t\t\t\t+ ($n - 2) * Math.log($x)\n\t\t\t\t+ Math.log($n * $m / ($n+$m))\n\t\t\t\t- Math.log(4 * Math.PI)\n\t\t\t\t- (1/$n  + 1/$m - 1/($n+$m))/6\n\t\t\t)/2);\n\t\t$delta = (_subfprob($n, $m, $x) - $p) / $z;\n\t\t$x += $delta;\n\t} while (Math.abs($delta)>3e-4);\n\treturn $x;\n}\n\nfunction _subchisqr ($n, $p) {\n\tvar $x;\n\n\tif (($p > 1) || ($p <= 0)) {\n\t\tthrow(\"Invalid p: $p\\n\");\n\t} else if ($p == 1){\n\t\t$x = 0;\n\t} else if ($n == 1) {\n\t\t$x = Math.pow(_subu($p / 2), 2);\n\t} else if ($n == 2) {\n\t\t$x = -2 * Math.log($p);\n\t} else {\n\t\tvar $u = _subu($p);\n\t\tvar $u2 = $u * $u;\n\n\t\t$x = max(0, $n + Math.sqrt(2 * $n) * $u \n\t\t\t+ 2/3 * ($u2 - 1)\n\t\t\t+ $u * ($u2 - 7) / 9 / Math.sqrt(2 * $n)\n\t\t\t- 2/405 / $n * ($u2 * (3 *$u2 + 7) - 16));\n\n\t\tif ($n <= 100) {\n\t\t\tvar $x0;\n                        var $p1;\n                        var $z;\n\t\t\tdo {\n\t\t\t\t$x0 = $x;\n\t\t\t\tif ($x < 0) {\n\t\t\t\t\t$p1 = 1;\n\t\t\t\t} else if ($n>100) {\n\t\t\t\t\t$p1 = _subuprob((Math.pow(($x / $n), (1/3)) - (1 - 2/9/$n))\n\t\t\t\t\t\t/ Math.sqrt(2/9/$n));\n\t\t\t\t} else if ($x>400) {\n\t\t\t\t\t$p1 = 0;\n\t\t\t\t} else {\n\t\t\t\t\tvar $i0\n                                        var $a;\n\t\t\t\t\tif (($n % 2) != 0) {\n\t\t\t\t\t\t$p1 = 2 * _subuprob(Math.sqrt($x));\n\t\t\t\t\t\t$a = Math.sqrt(2/Math.PI) * Math.exp(-$x/2) / Math.sqrt($x);\n\t\t\t\t\t\t$i0 = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$p1 = $a = Math.exp(-$x/2);\n\t\t\t\t\t\t$i0 = 2;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var $i = $i0; $i <= $n-2; $i += 2) {\n\t\t\t\t\t\t$a *= $x / $i;\n\t\t\t\t\t\t$p1 += $a;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$z = Math.exp((($n-1) * Math.log($x/$n) - Math.log(4*Math.PI*$x) \n\t\t\t\t\t+ $n - $x - 1/$n/6) / 2);\n\t\t\t\t$x += ($p1 - $p) / $z;\n\t\t\t\t$x = round_to_precision($x, 5);\n\t\t\t} while (($n < 31) && (Math.abs($x0 - $x) > 1e-4));\n\t\t}\n\t}\n\treturn $x;\n}\n\nfunction log10 ($n) {\n\treturn Math.log($n) / Math.log(10);\n}\n \nfunction max () {\n\tvar $max = arguments[0];\n\tfor (var $i = 0; i < arguments.length; i++) {\n                if ($max < arguments[$i])\n                        $max = arguments[$i];\n\t}\t\n\treturn $max;\n}\n\nfunction min () {\n\tvar $min = arguments[0];\n\tfor (var $i = 0; i < arguments.length; i++) {\n                if ($min > arguments[$i])\n                        $min = arguments[$i];\n\t}\n\treturn $min;\n}\n\nfunction precision ($x) {\n\treturn Math.abs(integer(log10(Math.abs($x)) - SIGNIFICANT));\n}\n\nfunction precision_string ($x) {\n\tif ($x) {\n\t\treturn round_to_precision($x, precision($x));\n\t} else {\n\t\treturn \"0\";\n\t}\n}\n\nfunction round_to_precision ($x, $p) {\n        $x = $x * Math.pow(10, $p);\n        $x = Math.round($x);\n        return $x / Math.pow(10, $p);\n}\n\nfunction integer ($i) {\n        if ($i > 0)\n                return Math.floor($i);\n        else\n                return Math.ceil($i);\n}","import {tdistr} from \"./statistics-distributions\"\r\n\r\nvar su = module.exports.StatisticsUtils ={};\r\nsu.sampleCorrelation = require('../bower_components/simple-statistics/src/sample_correlation');\r\nsu.linearRegression = require('../bower_components/simple-statistics/src/linear_regression');\r\nsu.linearRegressionLine = require('../bower_components/simple-statistics/src/linear_regression_line');\r\nsu.errorFunction = require('../bower_components/simple-statistics/src/error_function');\r\nsu.standardDeviation = require('../bower_components/simple-statistics/src/standard_deviation');\r\nsu.sampleStandardDeviation = require('../bower_components/simple-statistics/src/sample_standard_deviation');\r\nsu.variance = require('../bower_components/simple-statistics/src/variance');\r\nsu.mean = require('../bower_components/simple-statistics/src/mean');\r\nsu.zScore = require('../bower_components/simple-statistics/src/z_score');\r\nsu.standardError= arr => Math.sqrt(su.variance(arr)/(arr.length-1));\r\nsu.quantile = require('../bower_components/simple-statistics/src/quantile');\r\n\r\nsu.tValue= (degreesOfFreedom, criticalProbability) => { //as in http://stattrek.com/online-calculator/t-distribution.aspx\r\n    return tdistr(degreesOfFreedom, criticalProbability);\r\n};","export class Utils {\r\n    static SQRT_2 = 1.41421356237;\r\n    // usage example deepExtend({}, objA, objB); => should work similar to $.extend(true, {}, objA, objB);\r\n    static deepExtend(out) {\r\n\r\n        var utils = this;\r\n        var emptyOut = {};\r\n\r\n\r\n        if (!out && arguments.length > 1 && Array.isArray(arguments[1])) {\r\n            out = [];\r\n        }\r\n        out = out || {};\r\n\r\n        for (var i = 1; i < arguments.length; i++) {\r\n            var source = arguments[i];\r\n            if (!source)\r\n                continue;\r\n\r\n            for (var key in source) {\r\n                if (!source.hasOwnProperty(key)) {\r\n                    continue;\r\n                }\r\n                var isArray = Array.isArray(out[key]);\r\n                var isObject = utils.isObject(out[key]);\r\n                var srcObj = utils.isObject(source[key]);\r\n\r\n                if (isObject && !isArray && srcObj) {\r\n                    utils.deepExtend(out[key], source[key]);\r\n                } else {\r\n                    out[key] = source[key];\r\n                }\r\n            }\r\n        }\r\n\r\n        return out;\r\n    };\r\n\r\n    static mergeDeep(target, source) {\r\n        let output = Object.assign({}, target);\r\n        if (Utils.isObjectNotArray(target) && Utils.isObjectNotArray(source)) {\r\n            Object.keys(source).forEach(key => {\r\n                if (Utils.isObjectNotArray(source[key])) {\r\n                    if (!(key in target))\r\n                        Object.assign(output, {[key]: source[key]});\r\n                    else\r\n                        output[key] = Utils.mergeDeep(target[key], source[key]);\r\n                } else {\r\n                    Object.assign(output, {[key]: source[key]});\r\n                }\r\n            });\r\n        }\r\n        return output;\r\n    }\r\n\r\n    static cross(a, b) {\r\n        var c = [], n = a.length, m = b.length, i, j;\r\n        for (i = -1; ++i < n;) for (j = -1; ++j < m;) c.push({x: a[i], i: i, y: b[j], j: j});\r\n        return c;\r\n    };\r\n\r\n    static inferVariables(data, groupKey, includeGroup) {\r\n        var res = [];\r\n        if(!data){\r\n            return res;\r\n        }\r\n\r\n        if (data.length) {\r\n            var d = data[0];\r\n            if (d instanceof Array) {\r\n                res = d.map(function (v, i) {\r\n                    return i;\r\n                });\r\n            } else if (typeof d === 'object') {\r\n\r\n                for (var prop in d) {\r\n                    if (!d.hasOwnProperty(prop)) continue;\r\n\r\n                    res.push(prop);\r\n                }\r\n            }\r\n        }\r\n        if (groupKey !== null && groupKey !== undefined && !includeGroup) {\r\n            var index = res.indexOf(groupKey);\r\n            if (index > -1) {\r\n                res.splice(index, 1);\r\n            }\r\n        }\r\n        return res\r\n    };\r\n\r\n    static isObjectNotArray(item) {\r\n        return (item && typeof item === 'object' && !Array.isArray(item) && item !== null);\r\n    };\r\n\r\n    static isObject(a) {\r\n        return a !== null && typeof a === 'object';\r\n    };\r\n\r\n    static isNumber(a) {\r\n        return !isNaN(a) && typeof a === 'number';\r\n    };\r\n\r\n    static isFunction(a) {\r\n        return typeof a === 'function';\r\n    };\r\n\r\n    static isDate(a){\r\n        return Object.prototype.toString.call(a) === '[object Date]'\r\n    }\r\n\r\n    static isString(a){\r\n        return typeof a === 'string' || a instanceof String\r\n    }\r\n\r\n    static insertOrAppendSelector(parent, selector, operation, before) {\r\n\r\n        var selectorParts = selector.split(/([\\.\\#])/);\r\n        var element = parent[operation](selectorParts.shift(), before);//\":first-child\"\r\n        \r\n        while (selectorParts.length > 1) {\r\n            var selectorModifier = selectorParts.shift();\r\n            var selectorItem = selectorParts.shift();\r\n            if (selectorModifier === \".\") {\r\n                element = element.classed(selectorItem, true);\r\n            } else if (selectorModifier === \"#\") {\r\n                element = element.attr('id', selectorItem);\r\n            }\r\n        }\r\n        return element;\r\n    }\r\n\r\n    static insertSelector(parent, selector, before) {\r\n        return Utils.insertOrAppendSelector(parent, selector, \"insert\", before);\r\n    }\r\n\r\n    static appendSelector(parent, selector) {\r\n        return Utils.insertOrAppendSelector(parent, selector, \"append\");\r\n    }\r\n\r\n    static selectOrAppend(parent, selector, element) {\r\n        var selection = parent.select(selector);\r\n        if (selection.empty()) {\r\n            if (element) {\r\n                return parent.append(element);\r\n            }\r\n            return Utils.appendSelector(parent, selector);\r\n\r\n        }\r\n        return selection;\r\n    };\r\n\r\n    static selectOrInsert(parent, selector, before) {\r\n        var selection = parent.select(selector);\r\n        if (selection.empty()) {\r\n            return Utils.insertSelector(parent, selector, before);\r\n        }\r\n        return selection;\r\n    };\r\n\r\n    static linearGradient(svg, gradientId, range, x1, y1, x2, y2) {\r\n        var defs = Utils.selectOrAppend(svg, \"defs\");\r\n        var linearGradient = defs.append(\"linearGradient\")\r\n            .attr(\"id\", gradientId);\r\n\r\n        linearGradient\r\n            .attr(\"x1\", x1 + \"%\")\r\n            .attr(\"y1\", y1 + \"%\")\r\n            .attr(\"x2\", x2 + \"%\")\r\n            .attr(\"y2\", y2 + \"%\");\r\n\r\n        //Append multiple color stops by using D3's data/enter step\r\n        var stops = linearGradient.selectAll(\"stop\")\r\n            .data(range);\r\n\r\n        var stopsMerge = stops.enter().append(\"stop\").merge(stops);\r\n\r\n        stopsMerge.attr(\"offset\", (d, i) => i / (range.length - 1))\r\n            .attr(\"stop-color\", d => d);\r\n\r\n        stops.exit().remove();\r\n    }\r\n\r\n    static sanitizeHeight = function (height, container) {\r\n        return (height || parseInt(container.style('height'), 10) || 400);\r\n    };\r\n\r\n    static sanitizeWidth = function (width, container) {\r\n        return (width || parseInt(container.style('width'), 10) || 960);\r\n    };\r\n\r\n    static availableHeight = function (height, container, margin) {\r\n        return Math.max(0, Utils.sanitizeHeight(height, container) - margin.top - margin.bottom);\r\n    };\r\n\r\n    static availableWidth = function (width, container, margin) {\r\n        return Math.max(0, Utils.sanitizeWidth(width, container) - margin.left - margin.right);\r\n    };\r\n\r\n    static guid() {\r\n        function s4() {\r\n            return Math.floor((1 + Math.random()) * 0x10000)\r\n                .toString(16)\r\n                .substring(1);\r\n        }\r\n\r\n        return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n            s4() + '-' + s4() + s4() + s4();\r\n    }\r\n\r\n    //places textString in textObj, adds an ellipsis if text can't fit in width\r\n    static placeTextWithEllipsis(textD3Obj, textString, width){\r\n        var textObj = textD3Obj.node();\r\n        textObj.textContent=textString;\r\n\r\n        var margin = 0;\r\n        var ellipsisLength = 9;\r\n        //ellipsis is needed\r\n        if (textObj.getComputedTextLength()>width+margin){\r\n            for (var x=textString.length-3;x>0;x-=1){\r\n                if (textObj.getSubStringLength(0,x)+ellipsisLength<=width+margin){\r\n                    textObj.textContent=textString.substring(0,x)+\"...\";\r\n                    return true;\r\n                }\r\n            }\r\n            textObj.textContent=\"...\"; //can't place at all\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static placeTextWithEllipsisAndTooltip(textD3Obj, textString, width, tooltip){\r\n        var ellipsisPlaced = Utils.placeTextWithEllipsis(textD3Obj, textString, width);\r\n        if(ellipsisPlaced && tooltip){\r\n            textD3Obj.on(\"mouseover\", function (d) {\r\n                tooltip.transition()\r\n                    .duration(200)\r\n                    .style(\"opacity\", .9);\r\n                tooltip.html(textString)\r\n                    .style(\"left\", (d3.event.pageX + 5) + \"px\")\r\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\r\n            });\r\n\r\n            textD3Obj.on(\"mouseout\", function (d) {\r\n                tooltip.transition()\r\n                    .duration(500)\r\n                    .style(\"opacity\", 0);\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    static getFontSize(element){\r\n        return window.getComputedStyle(element, null).getPropertyValue(\"font-size\");\r\n    }\r\n\r\n    static capitalizeFirstLetter(string) {\r\n        return string.charAt(0).toUpperCase() + string.slice(1);\r\n    }\r\n\r\n    static createScale(scaleName) {\r\n        var scaleFunctionName = 'scale'+Utils.capitalizeFirstLetter(scaleName);\r\n        try{\r\n            return d3[scaleFunctionName]();\r\n        }catch (e){\r\n            throw 'ODC-D3 - scale not supported: '+scaleName+ ' ('+scaleFunctionName+')';\r\n        }\r\n    }\r\n\r\n    static createAxis(orient, scale){\r\n        var axisFnName = 'axis'+Utils.capitalizeFirstLetter(orient);\r\n        try{\r\n            return d3[axisFnName](scale)\r\n        }catch (e){\r\n            throw 'ODC-D3 - axis orient not supported: '+orient;\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}