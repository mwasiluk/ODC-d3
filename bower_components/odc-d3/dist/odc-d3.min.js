!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ODCD3=t()}}(function(){return function t(e,n,r){function i(o,l){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";e.exports={color:t("./src/color"),size:t("./src/size"),symbol:t("./src/symbol")}},{"./src/color":2,"./src/size":4,"./src/symbol":5}],2:[function(t,e,n){"use strict";var r=t("./legend");e.exports=function(){function t(t){var w=r.d3_calcType(n,b,c,u,d,y),C=t.selectAll("g").data([n]);C.enter().append("g").attr("class",p+"legendCells");var O=C.selectAll("."+p+"cell").data(w.data),k=O.enter().append("g",".cell").attr("class",p+"cell").style("opacity",1e-6),P=(k.append(i).attr("class",p+"swatch"),O.select("g."+p+"cell "+i));r.d3_addEvents(k,x),O.exit().transition().style("opacity",0).remove(),r.d3_drawShapes(i,P,o,a,l,e),r.d3_addText(C,k,w.labels,p);var _=O.select("text"),S=P[0].map(function(t){return t.getBBox()});f?P.attr("class",function(t){return p+"swatch "+w.feature(t)}):"line"==i?P.style("stroke",w.feature):P.style("fill",w.feature);var z,M,j="start"==v?0:"middle"==v?.5:1;"vertical"===m?(z=function(t,e){return"translate(0, "+e*(S[e].height+s)+")"},M=function(t,e){return"translate("+(S[e].width+S[e].x+g)+","+(S[e].y+S[e].height/2+5)+")"}):"horizontal"===m&&(z=function(t,e){return"translate("+e*(S[e].width+s)+",0)"},M=function(t,e){return"translate("+(S[e].width*j+S[e].x)+","+(S[e].height+S[e].y+g+8)+")"}),r.d3_placement(m,O,z,_,M,v),r.d3_title(t,C,h,p),O.transition().style("opacity",1)}var e,n=d3.scale.linear(),i="rect",a=15,o=15,l=10,s=2,c=[5],u=[],p="",f=!1,h="",d=d3.format(".01f"),g=10,v="middle",y="to",m="vertical",b=!1,x=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(n=e,t):n},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(c=e),t):c},t.shape=function(n,r){return arguments.length?(("rect"==n||"circle"==n||"line"==n||"path"==n&&"string"==typeof r)&&(i=n,e=r),t):i},t.shapeWidth=function(e){return arguments.length?(a=+e,t):a},t.shapeHeight=function(e){return arguments.length?(o=+e,t):o},t.shapeRadius=function(e){return arguments.length?(l=+e,t):l},t.shapePadding=function(e){return arguments.length?(s=+e,t):s},t.labels=function(e){return arguments.length?(u=e,t):u},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(v=e),t):v},t.labelFormat=function(e){return arguments.length?(d=e,t):d},t.labelOffset=function(e){return arguments.length?(g=+e,t):g},t.labelDelimiter=function(e){return arguments.length?(y=e,t):y},t.useClass=function(e){return arguments.length?(e!==!0&&e!==!1||(f=e),t):f},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(m=e),t):m},t.ascending=function(e){return arguments.length?(b=!!e,t):b},t.classPrefix=function(e){return arguments.length?(p=e,t):p},t.title=function(e){return arguments.length?(h=e,t):h},d3.rebind(t,x,"on"),t}},{"./legend":3}],3:[function(t,e,n){"use strict";e.exports={d3_identity:function(t){return t},d3_mergeLabels:function(t,e){if(0===e.length)return t;t=t?t:[];for(var n=e.length;n<t.length;n++)e.push(t[n]);return e},d3_linearLegend:function(t,e,n){var r=[];if(e.length>1)r=e;else for(var i=t.domain(),a=(i[i.length-1]-i[0])/(e-1),o=0;o<e;o++)r.push(i[0]+o*a);var l=r.map(n);return{data:r,labels:l,feature:function(e){return t(e)}}},d3_quantLegend:function(t,e,n){var r=t.range().map(function(r){var i=t.invertExtent(r);e(i[0]),e(i[1]);return e(i[0])+" "+n+" "+e(i[1])});return{data:t.range(),labels:r,feature:this.d3_identity}},d3_ordinalLegend:function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}},d3_drawShapes:function(t,e,n,r,i,a){"rect"===t?e.attr("height",n).attr("width",r):"circle"===t?e.attr("r",i):"line"===t?e.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",a)},d3_addText:function(t,e,n,r){e.append("text").attr("class",r+"label"),t.selectAll("g."+r+"cell text").data(n).text(this.d3_identity)},d3_calcType:function(t,e,n,r,i,a){var o=t.ticks?this.d3_linearLegend(t,n,i):t.invertExtent?this.d3_quantLegend(t,i,a):this.d3_ordinalLegend(t);return o.labels=this.d3_mergeLabels(o.labels,r),e&&(o.labels=this.d3_reverse(o.labels),o.data=this.d3_reverse(o.data)),o},d3_reverse:function(t){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[r-n-1];return e},d3_placement:function(t,e,n,r,i,a){e.attr("transform",n),r.attr("transform",i),"horizontal"===t&&r.style("text-anchor",a)},d3_addEvents:function(t,e){var n=this;t.on("mouseover.legend",function(t){n.d3_cellOver(e,t,this)}).on("mouseout.legend",function(t){n.d3_cellOut(e,t,this)}).on("click.legend",function(t){n.d3_cellClick(e,t,this)})},d3_cellOver:function(t,e,n){t.cellover.call(n,e)},d3_cellOut:function(t,e,n){t.cellout.call(n,e)},d3_cellClick:function(t,e,n){t.cellclick.call(n,e)},d3_title:function(t,e,n,r){if(""!==n){var i=t.selectAll("text."+r+"legendTitle");i.data([n]).enter().append("text").attr("class",r+"legendTitle"),t.selectAll("text."+r+"legendTitle").text(n);var a=t.select("."+r+"legendTitle").map(function(t){return t[0].getBBox().height})[0],o=-e.map(function(t){return t[0].getBBox().x})[0];e.attr("transform","translate("+o+","+(a+10)+")")}}}},{}],4:[function(t,e,n){"use strict";var r=t("./legend");e.exports=function(){function t(t){var m=r.d3_calcType(n,v,l,s,p,d),b=t.selectAll("g").data([n]);b.enter().append("g").attr("class",c+"legendCells");var x=b.selectAll("."+c+"cell").data(m.data),w=x.enter().append("g",".cell").attr("class",c+"cell").style("opacity",1e-6),C=(w.append(i).attr("class",c+"swatch"),x.select("g."+c+"cell "+i));r.d3_addEvents(w,y),x.exit().transition().style("opacity",0).remove(),"line"===i?(r.d3_drawShapes(i,C,0,a),C.attr("stroke-width",m.feature)):r.d3_drawShapes(i,C,m.feature,m.feature,m.feature,e),r.d3_addText(b,w,m.labels,c);var O,k,P=x.select("text"),_=C[0].map(function(t,e){var r=t.getBBox(),a=n(m.data[e]);return"line"===i&&"horizontal"===g?r.height=r.height+a:"line"===i&&"vertical"===g&&(r.width=r.width),r}),S=d3.max(_,function(t){return t.height+t.y}),z=d3.max(_,function(t){return t.width+t.x}),M="start"==h?0:"middle"==h?.5:1;"vertical"===g?(O=function(t,e){var n=d3.sum(_.slice(0,e+1),function(t){return t.height});return"translate(0, "+(n+e*o)+")"},k=function(t,e){return"translate("+(z+f)+","+(_[e].y+_[e].height/2+5)+")"}):"horizontal"===g&&(O=function(t,e){var n=d3.sum(_.slice(0,e+1),function(t){return t.width});return"translate("+(n+e*o)+",0)"},k=function(t,e){return"translate("+(_[e].width*M+_[e].x)+","+(S+f)+")"}),r.d3_placement(g,x,O,P,k,h),r.d3_title(t,b,u,c),x.transition().style("opacity",1)}var e,n=d3.scale.linear(),i="rect",a=15,o=2,l=[5],s=[],c="",u="",p=d3.format(".01f"),f=10,h="middle",d="to",g="vertical",v=!1,y=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(n=e,t):n},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(l=e),t):l},t.shape=function(n,r){return arguments.length?("rect"!=n&&"circle"!=n&&"line"!=n||(i=n,e=r),t):i},t.shapeWidth=function(e){return arguments.length?(a=+e,t):a},t.shapePadding=function(e){return arguments.length?(o=+e,t):o},t.labels=function(e){return arguments.length?(s=e,t):s},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(h=e),t):h},t.labelFormat=function(e){return arguments.length?(p=e,t):p},t.labelOffset=function(e){return arguments.length?(f=+e,t):f},t.labelDelimiter=function(e){return arguments.length?(d=e,t):d},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(g=e),t):g},t.ascending=function(e){return arguments.length?(v=!!e,t):v},t.classPrefix=function(e){return arguments.length?(c=e,t):c},t.title=function(e){return arguments.length?(u=e,t):u},d3.rebind(t,y,"on"),t}},{"./legend":3}],5:[function(t,e,n){"use strict";var r=t("./legend");e.exports=function(){function t(t){var b=r.d3_calcType(e,y,s,c,f,g),x=t.selectAll("g").data([e]);x.enter().append("g").attr("class",u+"legendCells");var w=x.selectAll("."+u+"cell").data(b.data),C=w.enter().append("g",".cell").attr("class",u+"cell").style("opacity",1e-6),O=(C.append(n).attr("class",u+"swatch"),w.select("g."+u+"cell "+n));r.d3_addEvents(C,m),w.exit().transition().style("opacity",0).remove(),r.d3_drawShapes(n,O,a,i,o,b.feature),r.d3_addText(x,C,b.labels,u);var k,P,_=w.select("text"),S=O[0].map(function(t){return t.getBBox()}),z=d3.max(S,function(t){return t.height}),M=d3.max(S,function(t){return t.width}),j="start"==h?0:"middle"==h?.5:1;"vertical"===v?(k=function(t,e){return"translate(0, "+e*(z+l)+")"},P=function(t,e){return"translate("+(M+d)+","+(S[e].y+S[e].height/2+5)+")"}):"horizontal"===v&&(k=function(t,e){return"translate("+e*(M+l)+",0)"},P=function(t,e){return"translate("+(S[e].width*j+S[e].x)+","+(z+d)+")"}),r.d3_placement(v,w,k,_,P,h),r.d3_title(t,x,p,u),w.transition().style("opacity",1)}var e=d3.scale.linear(),n="path",i=15,a=15,o=10,l=5,s=[5],c=[],u="",p="",f=d3.format(".01f"),h="middle",d=10,g="to",v="vertical",y=!1,m=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(n){return arguments.length?(e=n,t):e},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(s=e),t):s},t.shapePadding=function(e){return arguments.length?(l=+e,t):l},t.labels=function(e){return arguments.length?(c=e,t):c},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(h=e),t):h},t.labelFormat=function(e){return arguments.length?(f=e,t):f},t.labelOffset=function(e){return arguments.length?(d=+e,t):d},t.labelDelimiter=function(e){return arguments.length?(g=e,t):g},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(v=e),t):v},t.ascending=function(e){return arguments.length?(y=!!e,t):y},t.classPrefix=function(e){return arguments.length?(u=e,t):u},t.title=function(e){return arguments.length?(p=e,t):p},d3.rebind(t,m,"on"),t}},{"./legend":3}],6:[function(t,e,n){"use strict";function r(t){var e=1/(1+.5*Math.abs(t)),n=e*Math.exp(-Math.pow(t,2)-1.26551223+1.00002368*e+.37409196*Math.pow(e,2)+.09678418*Math.pow(e,3)-.18628806*Math.pow(e,4)+.27886807*Math.pow(e,5)-1.13520398*Math.pow(e,6)+1.48851587*Math.pow(e,7)-.82215223*Math.pow(e,8)+.17087277*Math.pow(e,9));return t>=0?1-n:n-1}e.exports=r},{}],7:[function(t,e,n){"use strict";function r(t){var e,n,r=t.length;if(1===r)e=0,n=t[0][1];else{for(var i,a,o,l=0,s=0,c=0,u=0,p=0;p<r;p++)i=t[p],a=i[0],o=i[1],l+=a,s+=o,c+=a*a,u+=a*o;e=(r*u-l*s)/(r*c-l*l),n=s/r-e*l/r}return{m:e,b:n}}e.exports=r},{}],8:[function(t,e,n){"use strict";function r(t){return function(e){return t.b+t.m*e}}e.exports=r},{}],9:[function(t,e,n){"use strict";function r(t){return 0===t.length?NaN:i(t)/t.length}var i=t("./sum");e.exports=r},{"./sum":15}],10:[function(t,e,n){"use strict";function r(t,e){var n=i(t,e),r=a(t),o=a(e);return n/r/o}var i=t("./sample_covariance"),a=t("./sample_standard_deviation");e.exports=r},{"./sample_covariance":11,"./sample_standard_deviation":12}],11:[function(t,e,n){"use strict";function r(t,e){if(t.length<=1||t.length!==e.length)return NaN;for(var n=i(t),r=i(e),a=0,o=0;o<t.length;o++)a+=(t[o]-n)*(e[o]-r);var l=t.length-1;return a/l}var i=t("./mean");e.exports=r},{"./mean":9}],12:[function(t,e,n){"use strict";function r(t){var e=i(t);return isNaN(e)?NaN:Math.sqrt(e)}var i=t("./sample_variance");e.exports=r},{"./sample_variance":13}],13:[function(t,e,n){"use strict";function r(t){if(t.length<=1)return NaN;var e=i(t,2),n=t.length-1;return e/n}var i=t("./sum_nth_power_deviations");e.exports=r},{"./sum_nth_power_deviations":16}],14:[function(t,e,n){"use strict";function r(t){var e=i(t);return isNaN(e)?0:Math.sqrt(e)}var i=t("./variance");e.exports=r},{"./variance":17}],15:[function(t,e,n){"use strict";function r(t){for(var e,n,r=0,i=0,a=0;a<t.length;a++)e=t[a]-i,n=r+e,i=n-r-e,r=n;return r}e.exports=r},{}],16:[function(t,e,n){"use strict";function r(t,e){for(var n=i(t),r=0,a=0;a<t.length;a++)r+=Math.pow(t[a]-n,e);return r}var i=t("./mean");e.exports=r},{"./mean":9}],17:[function(t,e,n){"use strict";function r(t){return 0===t.length?NaN:i(t,2)/t.length}var i=t("./sum_nth_power_deviations");e.exports=r},{"./sum_nth_power_deviations":16}],18:[function(t,e,n){"use strict";function r(t,e,n){return(t-e)/n}e.exports=r},{}],19:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Chart=n.ChartConfig=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./utils"),o=n.ChartConfig=function l(t){r(this,l),this.cssClassPrefix="odc-",this.svgClass=this.cssClassPrefix+"mw-d3-chart",this.width=void 0,this.height=void 0,this.margin={left:50,right:30,top:30,bottom:50},this.showTooltip=!1,this.transition=!0,t&&a.Utils.deepExtend(this,t)};n.Chart=function(){function t(e,n,i){r(this,t),this.utils=a.Utils,this.plot={margin:{}},this._attached={},this._layers={},this._events={},this._isInitialized=!1,this._isAttached=e instanceof t,this.baseContainer=e,this.setConfig(i),n&&this.setData(n),this.init(),this.postInit()}return i(t,[{key:"setConfig",value:function(t){return t?this.config=t:this.config=new o,this}},{key:"setData",value:function(t){return this.data=t,this}},{key:"init",value:function(){var t=this;return t.initPlot(),t.initSvg(),t.initTooltip(),t.draw(),this._isInitialized=!0,this}},{key:"postInit",value:function(){}},{key:"initSvg",value:function(){var t=this,e=this.config,n=t.plot.margin,r=t.plot.width+n.left+n.right,i=t.plot.height+n.top+n.bottom;t._isAttached?(t.svg=t.baseContainer.svg,t.svgG=t.svg.selectOrAppend("g.main-group."+e.svgClass)):(this._isInitialized||d3.select(t.baseContainer).select("svg").remove(),t.svg=d3.select(t.baseContainer).selectOrAppend("svg"),t.svg.attr("width",r).attr("height",i).attr("viewBox","0 0  "+r+" "+i).attr("preserveAspectRatio","xMidYMid meet").attr("class",e.svgClass),t.svgG=t.svg.selectOrAppend("g.main-group")),t.svgG.attr("transform","translate("+n.left+","+n.top+")"),e.width&&!e.height||d3.select(window).on("resize",function(){})}},{key:"initTooltip",value:function(){var t=this;t.config.showTooltip&&(t._isAttached?t.plot.tooltip=t.baseContainer.plot.tooltip:t.plot.tooltip=d3.select("body").selectOrAppend("div."+t.config.cssClassPrefix+"tooltip").style("opacity",0))}},{key:"initPlot",value:function(){var t=this.config.margin;this.plot={margin:{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}}},{key:"update",value:function(t){t&&this.setData(t);var e;for(var n in this._attached)e=t,this._attached[n].update(e);return this}},{key:"draw",value:function(t){return this.update(t),this}},{key:"attach",value:function(t,e){return 1===arguments.length?this._attached[t]:(this._attached[t]=e,e)}},{key:"on",value:function(t,e,n){var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n||this,_chart:this}),this}},{key:"once",value:function e(t,n,r){var i=this,e=function a(){i.off(t,a),n.apply(this,arguments)};return this.on(t,e,r)}},{key:"off",value:function(t,e,n){var r,i,a,o,l,s;if(0===arguments.length){for(t in this._events)this._events[t].length=0;return this}if(1===arguments.length)return a=this._events[t],a&&(a.length=0),this;for(r=t?[t]:Object.keys(this._events),l=0;l<r.length;l++)for(i=r[l],a=this._events[i],s=a.length;s--;)o=a[s],(e&&e===o.callback||n&&n===o.context)&&a.splice(s,1);return this}},{key:"trigger",value:function(t){var e,n,r=Array.prototype.slice.call(arguments,1),i=this._events[t];if(void 0!==i)for(e=0;e<i.length;e++)n=i[e],n.callback.apply(n.context,r);return this}},{key:"getBaseContainer",value:function(){return this._isAttached?this.baseContainer.svg:d3.select(this.baseContainer)}},{key:"getBaseContainerNode",value:function(){return this.getBaseContainer().node()}},{key:"prefixClass",value:function(t,e){return e?".":""+this.config.cssClassPrefix+t}},{key:"computePlotSize",value:function(){this.plot.width=a.Utils.availableWidth(this.config.width,this.getBaseContainer(),this.plot.margin),this.plot.height=a.Utils.availableHeight(this.config.height,this.getBaseContainer(),this.plot.margin)}}]),t}()},{"./utils":31}],20:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.CorrelationMatrix=n.CorrelationMatrixConfig=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function d(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:d(i,e,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},s=t("./chart"),c=t("./utils"),u=t("./statistics-utils"),p=t("./legend"),f=t("./scatterplot"),h=n.CorrelationMatrixConfig=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return n.svgClass="odc-correlation-matrix",n.guides=!1,n.showTooltip=!0,n.showLegend=!0,n.highlightLabels=!0,n.rotateLabelsX=!0,n.rotateLabelsY=!0,n.variables={labels:void 0,keys:[],value:function(t,e){return t[e]},scale:"ordinal"},n.correlation={scale:"linear",domain:[-1,-.75,-.5,0,.5,.75,1],range:["darkblue","blue","lightskyblue","white","orangered","crimson","darkred"],value:function(t,e){return u.StatisticsUtils.sampleCorrelation(t,e)}},n.cell={shape:"ellipse",size:void 0,sizeMin:15,sizeMax:250,padding:1},n.margin={left:60,right:50,top:30,bottom:60},t&&c.Utils.deepExtend(n,t),n}return a(e,t),e}(s.ChartConfig);n.CorrelationMatrix=function(t){function e(t,n,a){return r(this,e),i(this,Object.getPrototypeOf(e).call(this,t,n,new h(a)))}return a(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new h(t))}},{key:"initPlot",value:function(){l(Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);var t=this.config.margin,n=this.config;this.plot.x={},this.plot.correlation={matrix:void 0,cells:void 0,color:{},shape:{}},this.setupVariables();var r=n.width,i=this.getBaseContainerNode();this.plot.placeholderNode=i;var a=i.getBoundingClientRect().width;r?this.plot.cellSize||(this.plot.cellSize=Math.max(n.cell.sizeMin,Math.min(n.cell.sizeMax,(r-t.left-t.right)/this.plot.variables.length))):(this.plot.cellSize=this.config.cell.size,this.plot.cellSize||(this.plot.cellSize=Math.max(n.cell.sizeMin,Math.min(n.cell.sizeMax,(a-t.left-t.right)/this.plot.variables.length))),r=this.plot.cellSize*this.plot.variables.length+t.left+t.right);var o=r;return o||(o=i.getBoundingClientRect().height),this.plot.width=r-t.left-t.right,this.plot.height=this.plot.width,this.setupVariablesScales(),this.setupCorrelationScales(),this.setupCorrelationMatrix(),this}},{key:"setupVariablesScales",value:function(){var t=this.plot,e=t.x,n=this.config.variables;e.value=n.value,e.scale=d3.scale[n.scale]().rangeBands([t.width,0]),e.map=function(t){return e.scale(e.value(t))}}},{key:"setupCorrelationScales",value:function(){var t=this.plot,e=this.config.correlation;t.correlation.color.scale=d3.scale[e.scale]().domain(e.domain).range(e.range);var n=t.correlation.shape={},r=this.config.cell;n.type=r.shape;var i=t.cellSize-2*r.padding;if("circle"==n.type){var a=i/2;n.radiusScale=d3.scale.linear().domain([0,1]).range([2,a]),n.radius=function(t){return n.radiusScale(Math.abs(t.value))}}else if("ellipse"==n.type){var a=i/2;n.radiusScale=d3.scale.linear().domain([0,1]).range([a,2]),n.radiusX=function(t){return n.radiusScale(Math.abs(t.value))},n.radiusY=a,n.rotateVal=function(t){return 0==t?"0":t<0?"-45":"45"}}else"rect"==n.type&&(n.size=i)}},{key:"setupVariables",value:function(){var t=this.config.variables,e=this.data,n=this.plot;n.domainByVariable={},n.variables=t.keys,n.variables&&n.variables.length||(n.variables=c.Utils.inferVariables(e,this.config.groups.key,this.config.includeInPlot)),n.labels=[],n.labelByVariable={},n.variables.forEach(function(r,i){n.domainByVariable[r]=d3.extent(e,function(e){return t.value(e,r)});var a=r;t.labels&&t.labels.length>i&&(a=t.labels[i]),n.labels.push(a),n.labelByVariable[r]=a})}},{key:"setupCorrelationMatrix",value:function(){var t=this,e=this.data,n=this.plot.correlation.matrix=[],r=this.plot.correlation.matrix.cells=[],i=this.plot,a={};i.variables.forEach(function(t,n){a[t]=e.map(function(e){return i.x.value(e,t)})}),i.variables.forEach(function(e,o){var l=[];n.push(l),i.variables.forEach(function(n,i){var s=1;e!=n&&(s=t.config.correlation.value(a[e],a[n]));var c={rowVar:e,colVar:n,row:o,col:i,value:s};l.push(c),r.push(c)})})}},{key:"update",value:function(t){l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.updateCells(),this.updateVariableLabels(),this.config.showLegend&&this.updateLegend()}},{key:"updateVariableLabels",value:function(){var t=this,e=t.plot,n=t.prefixClass("label"),r=n+"-x",i=n+"-y";e.labelClass=n;var a=t.svgG.selectAll("text."+r).data(e.variables,function(t,e){return e});a.enter().append("text").attr("class",function(t,e){return n+" "+r+" "+r+"-"+e}),a.attr("x",function(t,n){return n*e.cellSize+e.cellSize/2}).attr("y",e.height).attr("dx",-2).attr("dy",5).attr("text-anchor","end").text(function(t){return e.labelByVariable[t]}),this.config.rotateLabelsX&&a.attr("transform",function(t,n){return"rotate(-45, "+(n*e.cellSize+e.cellSize/2)+", "+e.height+")"}),a.exit().remove();var o=t.svgG.selectAll("text."+i).data(e.variables);o.enter().append("text"),o.attr("x",0).attr("y",function(t,n){return n*e.cellSize+e.cellSize/2}).attr("dx",-2).attr("text-anchor","end").attr("class",function(t,e){return n+" "+i+" "+i+"-"+e}).text(function(t){return e.labelByVariable[t]}),this.config.rotateLabelsY&&(a.attr("transform",function(t,n){return"rotate(-45, "+(n*e.cellSize+e.cellSize/2)+", "+e.height+")"}),o.attr("transform",function(t,n){return"rotate(-45, 0, "+(n*e.cellSize+e.cellSize/2)+")"}).attr("text-anchor","end")),o.exit().remove()}},{key:"updateCells",value:function(){var t=this,e=t.plot,n=t.prefixClass("cell"),r=e.correlation.shape.type,i=t.svgG.selectAll("g."+n).data(e.correlation.matrix.cells);i.enter().append("g").classed(n,!0);i.attr("transform",function(t){return"translate("+(e.cellSize*t.col+e.cellSize/2)+","+(e.cellSize*t.row+e.cellSize/2)+")"}),i.classed(t.config.cssClassPrefix+"selectable",!!t.scatterPlot);var a="*:not(.cell-shape-"+r+")",o=i.selectAll(a);o.remove();var l=i.selectOrAppend(r+".cell-shape-"+r);"circle"==e.correlation.shape.type&&l.attr("r",e.correlation.shape.radius).attr("cx",0).attr("cy",0),"ellipse"==e.correlation.shape.type&&l.attr("rx",e.correlation.shape.radiusX).attr("ry",e.correlation.shape.radiusY).attr("cx",0).attr("cy",0).attr("transform",function(t){return"rotate("+e.correlation.shape.rotateVal(t.value)+")"}),"rect"==e.correlation.shape.type&&l.attr("width",e.correlation.shape.size).attr("height",e.correlation.shape.size).attr("x",-e.cellSize/2).attr("y",-e.cellSize/2),l.style("fill",function(t){return e.correlation.color.scale(t.value)});var s=[],c=[];if(e.tooltip&&(s.push(function(t){e.tooltip.transition().duration(200).style("opacity",.9);var n=t.value;e.tooltip.html(n).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}),c.push(function(t){e.tooltip.transition().duration(500).style("opacity",0)})),t.config.highlightLabels){var u=t.config.cssClassPrefix+"highlight",p=function(t){return e.labelClass+"-x-"+t.col},f=function(t){return e.labelClass+"-y-"+t.row};s.push(function(e){t.svgG.selectAll("text."+p(e)).classed(u,!0),t.svgG.selectAll("text."+f(e)).classed(u,!0)}),c.push(function(e){t.svgG.selectAll("text."+p(e)).classed(u,!1),t.svgG.selectAll("text."+f(e)).classed(u,!1)})}i.on("mouseover",function(t){s.forEach(function(e){return e(t)})}).on("mouseout",function(t){c.forEach(function(e){return e(t)})}),i.on("click",function(e){t.trigger("cell-selected",e)}),i.exit().remove()}},{key:"updateLegend",value:function(){var t=this.plot,e=this.plot.width+10,n=0,r=10,i=this.plot.height-2,a=t.correlation.color.scale;t.legend=new p.Legend(this.svg,this.svgG,a,e,n).linearGradientBar(r,i)}},{key:"attachScatterPlot",value:function(t,e){var n=this,r=this;e=e||{};var i={height:r.plot.height+r.config.margin.top+r.config.margin.bottom,width:r.plot.height+r.config.margin.top+r.config.margin.bottom,groups:{key:r.config.groups.key,label:r.config.groups.label},guides:!0,showLegend:!1};r.scatterPlot=!0,i=c.Utils.deepExtend(i,e),this.update(),this.on("cell-selected",function(e){i.x={key:e.rowVar,label:r.plot.labelByVariable[e.rowVar]},i.y={key:e.colVar,label:r.plot.labelByVariable[e.colVar]},r.scatterPlot&&r.scatterPlot!==!0?r.scatterPlot.setConfig(i).init():(r.scatterPlot=new f.ScatterPlot(t,r.data,i),n.attach("ScatterPlot",r.scatterPlot))})}}]),e}(s.Chart)},{"./chart":19,"./legend":25,"./scatterplot":28,"./statistics-utils":30,"./utils":31}],21:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.D3Extensions=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./utils");n.D3Extensions=function(){function t(){r(this,t)}return i(t,null,[{key:"extend",value:function(){d3.selection.enter.prototype.insertSelector=d3.selection.prototype.insertSelector=function(t,e){return a.Utils.insertSelector(this,t,e)},d3.selection.enter.prototype.appendSelector=d3.selection.prototype.appendSelector=function(t){return a.Utils.appendSelector(this,t)},d3.selection.enter.prototype.selectOrAppend=d3.selection.prototype.selectOrAppend=function(t){return a.Utils.selectOrAppend(this,t)},d3.selection.enter.prototype.selectOrInsert=d3.selection.prototype.selectOrInsert=function(t,e){return a.Utils.selectOrInsert(this,t,e)}}}]),t}()},{"./utils":31}],22:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.HeatmapTimeSeries=n.HeatmapTimeSeriesConfig=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function p(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:p(i,e,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},s=(t("./chart"),t("./heatmap")),c=t("./utils"),u=(t("./statistics-utils"),n.HeatmapTimeSeriesConfig=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return n.x={fillMissing:!1},n.z={fillMissing:!0},t&&c.Utils.deepExtend(n,t),n}return a(e,t),e}(s.HeatmapConfig));n.HeatmapTimeSeries=function(t){function e(t,n,a){return r(this,e),i(this,Object.getPrototypeOf(e).call(this,t,n,new u(a)))}return a(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new u(t))}},{key:"setupValuesBeforeGroupsSort",value:function(){var t=this;if(l(Object.getPrototypeOf(e.prototype),"setupValuesBeforeGroupsSort",this).call(this),this.config.x.fillMissing){var n=this;this.plot.x.uniqueValues.sort(this.config.x.sortComparator);var r=null;this.plot.x.uniqueValues.forEach(function(e,i){var a=t.getTimeValue(e);if(null===r)return void(r=a);for(var o=n.nextTimeTickValue(r),l=[],s=0;!(n.timeValuesEqual(a,o)||(s++,s>100));){var c={};c[t.config.x.key]=o,n.updateGroups(c,o,n.plot.x.groups,n.config.x.groups),l.push(o),o=n.nextTimeTickValue(o)}r=a})}}},{key:"getTimeValue",value:function(t){return Number(t)}},{key:"timeValuesEqual",value:function(t,e){return t==e}},{key:"nextTimeTickValue",value:function(t){return t+1}},{key:"initPlot",value:function(){l(Object.getPrototypeOf(e.prototype),"initPlot",this).call(this),this.config.z.fillMissing&&this.plot.matrix.forEach(function(t,e){var n=void 0;t.forEach(function(t,e){void 0===t.value&&void 0!==n&&(t.value=n,t.missing=!0),n=t.value})})}},{key:"update",value:function(t){l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t)}}]),e}(s.Heatmap)},{"./chart":19,"./heatmap":23,"./statistics-utils":30,"./utils":31}],23:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Heatmap=n.HeatmapConfig=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function f(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:f(i,e,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},s=t("./chart"),c=t("./utils"),u=t("./legend"),p=n.HeatmapConfig=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return n.svgClass="odc-heatmap",n.showTooltip=!0,n.tooltip={noDataText:"N/A"},n.showLegend=!0,n.legend={width:30,rotateLabels:!1,decimalPlaces:void 0,formatter:function(t){return void 0===n.legend.decimalPlaces?t:Number(t).toFixed(n.legend.decimalPlaces)}},n.highlightLabels=!0,n.x={title:"",key:0,value:function(t){return t[n.x.key];
},rotateLabels:!0,sortLabels:!1,sortComparator:function(t,e){return c.Utils.isNumber(t)?t-e:t.localeCompare(e)},groups:{keys:[],labels:[],value:function(t,e){return t[e]},overlap:{top:20,bottom:20}},formatter:void 0},n.y={title:"",rotateLabels:!0,key:1,value:function(t){return t[n.y.key]},sortLabels:!1,sortComparator:function(t,e){return c.Utils.isNumber(e)?e-t:e.localeCompare(t)},groups:{keys:[],labels:[],value:function(t,e){return t[e]},overlap:{left:20,right:20}},formatter:void 0},n.z={key:2,value:function(t){return t[n.z.key]},notAvailableValue:function(t){return null===t||void 0===t},decimalPlaces:void 0,formatter:function(t){return void 0===n.z.decimalPlaces?t:Number(t).toFixed(n.z.decimalPlaces)}},n.color={noDataColor:"white",scale:"linear",reverseScale:!1,range:["darkblue","lightskyblue","orange","crimson","darkred"]},n.cell={width:void 0,height:void 0,sizeMin:15,sizeMax:250,padding:0},n.margin={left:60,right:50,top:30,bottom:80},t&&c.Utils.deepExtend(n,t),n}return a(e,t),e}(s.ChartConfig);n.Heatmap=function(t){function e(t,n,a){return r(this,e),i(this,Object.getPrototypeOf(e).call(this,t,n,new p(a)))}return a(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new p(t))}},{key:"initPlot",value:function(){l(Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);var t=this,n=(this.config.margin,this.config);this.plot.x={},this.plot.y={},this.plot.z={matrixes:void 0,cells:void 0,color:{},shape:{}},this.setupValues(),this.buildCells();var r=6;if(this.plot.x.overlap={top:0,bottom:0},this.plot.groupByX){var i=t.config.x.groups.keys.length,a=i*r;this.plot.x.overlap.bottom=t.config.x.groups.overlap.bottom,this.plot.x.overlap.top=t.config.x.groups.overlap.top+a,this.plot.margin.top=n.margin.right+n.x.groups.overlap.top,this.plot.margin.bottom=n.margin.bottom+n.x.groups.overlap.bottom}if(this.plot.y.overlap={left:0,right:0},this.plot.groupByY){var o=t.config.y.groups.keys.length,s=o*r;this.plot.y.overlap.right=t.config.y.groups.overlap.left+s,this.plot.y.overlap.left=t.config.y.groups.overlap.left,this.plot.margin.left=n.margin.left+this.plot.y.overlap.left,this.plot.margin.right=n.margin.right+this.plot.y.overlap.right}return this.plot.showLegend=n.showLegend,this.plot.showLegend&&(this.plot.margin.right+=n.legend.width),this.computePlotSize(),this.setupZScale(),this}},{key:"setupValues",value:function(){var t=this,e=this,n=e.config,r=e.plot.x,i=e.plot.y,a=e.plot.z;r.value=function(t){return n.x.value.call(n,t)},i.value=function(t){return n.y.value.call(n,t)},a.value=function(t){return n.z.value.call(n,t)},r.uniqueValues=[],i.uniqueValues=[],e.plot.groupByY=!!n.y.groups.keys.length,e.plot.groupByX=!!n.x.groups.keys.length,i.groups={key:void 0,label:"",values:[],children:null,level:0,index:0,lastIndex:0},r.groups={key:void 0,label:"",values:[],children:null,level:0,index:0,lastIndex:0};var o={},l=void 0,s=void 0;this.data.forEach(function(c){var u=r.value(c),p=i.value(c),f=a.value(c),h=n.z.notAvailableValue(f)?void 0:parseFloat(f);r.uniqueValues.indexOf(u)===-1&&r.uniqueValues.push(u),i.uniqueValues.indexOf(p)===-1&&i.uniqueValues.push(p);var d=i.groups;e.plot.groupByY&&(d=t.updateGroups(c,p,i.groups,n.y.groups));var g=r.groups;e.plot.groupByX&&(g=t.updateGroups(c,u,r.groups,n.x.groups)),o[d.index]||(o[d.index]={}),o[d.index][g.index]||(o[d.index][g.index]={}),o[d.index][g.index][p]||(o[d.index][g.index][p]={}),o[d.index][g.index][p][u]=h,(void 0===l||h<l)&&(l=h),(void 0===s||h>s)&&(s=h)}),e.plot.valueMap=o,e.plot.groupByX||(r.groups.values=r.uniqueValues),e.plot.groupByY||(i.groups.values=i.uniqueValues),this.setupValuesBeforeGroupsSort(),r.gaps=[],r.totalValuesCount=0,r.allValuesList=[],this.sortGroups(r,r.groups,n.x),i.gaps=[],i.totalValuesCount=0,i.allValuesList=[],this.sortGroups(i,i.groups,n.y),a.min=l,a.max=s}},{key:"setupValuesBeforeGroupsSort",value:function(){}},{key:"buildCells",value:function(){var t=this,e=(t.config,t.plot.x),n=t.plot.y,r=(t.plot.z,t.plot.valueMap),i=t.plot.cells=[],a=t.plot.matrix=[];n.allValuesList.forEach(function(t,n){var o=[];a.push(o),e.allValuesList.forEach(function(e,a){var l=void 0;try{l=r[t.group.index][e.group.index][t.val][e.val]}catch(s){}var c={rowVar:t,colVar:e,row:n,col:a,value:l};o.push(c),i.push(c)})})}},{key:"updateGroups",value:function(t,e,n,r){var i=this.config,a=n;return r.keys.forEach(function(e,o){a.key=e,a.children||(a.children={});var l=r.value.call(i,t,e);a.children.hasOwnProperty(l)||(n.lastIndex++,a.children[l]={values:[],children:null,groupingValue:l,level:a.level+1,index:n.lastIndex,key:e}),a=a.children[l]}),a.values.indexOf(e)===-1&&a.values.push(e),a}},{key:"sortGroups",value:function(t,n,r,i){if(r.groups.labels&&r.groups.labels.length>n.level?n.label=r.groups.labels[n.level]:n.label=n.key,i||(i=[0]),i.length<=n.level&&i.push(0),n.allValuesCount=n.allValuesCount||0,n.allValuesBeforeCount=n.allValuesBeforeCount||0,n.gaps=i.slice(),n.gapsBefore=i.slice(),n.gapsSize=e.computeGapsSize(n.gaps),n.gapsBeforeSize=n.gapsSize,n.values&&(r.sortLabels&&n.values.sort(r.sortComparator),n.values.forEach(function(e){return t.allValuesList.push({val:e,group:n})}),n.allValuesBeforeCount=t.totalValuesCount,t.totalValuesCount+=n.values.length,n.allValuesCount+=n.values.length),n.childrenList=[],n.children){var a=0;for(var o in n.children)if(n.children.hasOwnProperty(o)){var l=n.children[o];n.childrenList.push(l),a++,this.sortGroups(t,l,r,i),n.allValuesCount+=l.allValuesCount,i[n.level]+=1}i&&a>1&&(i[n.level]-=1),n.gapsInside=[],i.forEach(function(t,e){n.gapsInside.push(t-(n.gapsBefore[e]||0))}),n.gapsInsideSize=e.computeGapsSize(n.gapsInside),t.gaps.length<i.length&&(t.gaps=i)}}},{key:"computePlotSize",value:function(){var t=this.plot,n=this.config,r=t.margin,i=c.Utils.availableWidth(this.config.width,this.getBaseContainer(),this.plot.margin),a=c.Utils.availableHeight(this.config.height,this.getBaseContainer(),this.plot.margin),o=i,l=a,s=e.computeGapsSize(t.x.gaps),u=Math.max(n.cell.sizeMin,Math.min(n.cell.sizeMax,(i-s)/this.plot.x.totalValuesCount));this.config.width?this.config.cell.width||(this.plot.cellWidth=u):(this.plot.cellWidth=this.config.cell.width,this.plot.cellWidth||(this.plot.cellWidth=u)),o=this.plot.cellWidth*this.plot.x.totalValuesCount+r.left+r.right+s;var p=e.computeGapsSize(t.y.gaps),f=Math.max(n.cell.sizeMin,Math.min(n.cell.sizeMax,(a-p)/this.plot.y.totalValuesCount));this.config.height?this.config.cell.height||(this.plot.cellHeight=f):(this.plot.cellHeight=this.config.cell.height,this.plot.cellHeight||(this.plot.cellHeight=f)),l=this.plot.cellHeight*this.plot.y.totalValuesCount+r.top+r.bottom+p,this.plot.width=o-r.left-r.right,this.plot.height=l-r.top-r.bottom}},{key:"setupZScale",value:function(){var t,e=this,n=e.config,r=e.plot.z,i=n.color.range,a=r.max-r.min;if(r.domain=[],"pow"==n.color.scale){var o=10;i.forEach(function(t,e){var n=r.max-a/Math.pow(10,e);r.domain.push(n)}),t=d3.scale.pow().exponent(o)}else"log"==n.color.scale?(i.forEach(function(t,e){var n=r.min+a/Math.pow(10,e);r.domain.unshift(n)}),t=d3.scale.log()):(i.forEach(function(t,e){var n=r.min+a*(e/(i.length-1));r.domain.push(n)}),t=d3.scale[n.color.scale]());r.domain[0]=r.min,r.domain[r.domain.length-1]=r.max,n.color.reverseScale&&r.domain.reverse();var l=this.plot;l.z.color.scale=t.domain(r.domain).range(i);var s=l.z.shape={},c=this.config.cell;s.type="rect",l.z.shape.width=l.cellWidth-2*c.padding,l.z.shape.height=l.cellHeight-2*c.padding}},{key:"update",value:function(t){l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.plot.groupByY&&this.drawGroupsY(this.plot.y.groups,this.svgG),this.plot.groupByX&&this.drawGroupsX(this.plot.x.groups,this.svgG),this.updateCells(),this.updateVariableLabels(),this.config.showLegend&&this.updateLegend(),this.updateAxisTitles()}},{key:"updateAxisTitles",value:function(){var t=this,e=t.plot;t.svgG.selectOrAppend("g."+t.prefixClass("axis-x")).attr("transform","translate("+e.width/2+","+(e.height+e.margin.bottom)+")").selectOrAppend("text."+t.prefixClass("label")).attr("dy","-1em").style("text-anchor","middle").text(t.config.x.title),t.svgG.selectOrAppend("g."+t.prefixClass("axis-y")).selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+-e.margin.left+","+e.height/2+")rotate(-90)").attr("dy","1em").style("text-anchor","middle").text(t.config.y.title)}},{key:"updateVariableLabels",value:function(){var t=this,n=t.plot,r=t.prefixClass("label"),i=r+"-x",a=r+"-y";n.labelClass=r;var o={x:0,y:0},l=e.computeGapSize(0);if(n.groupByX){var s=t.config.x.groups.overlap;o.x=l/2,o.y=s.bottom+l/2+6}else n.groupByY&&(o.y=l);var c=t.svgG.selectAll("text."+i).data(n.x.allValuesList,function(t,e){return e});c.enter().append("text").attr("class",function(t,e){return r+" "+i+" "+i+"-"+e}),c.attr("x",function(t,e){return e*n.cellWidth+n.cellWidth/2+t.group.gapsSize+o.x}).attr("y",n.height+o.y).attr("dy",10).attr("text-anchor","middle").text(function(e){return t.formatValueX(e.val)}),t.config.x.rotateLabels&&c.attr("transform",function(t,e){return"rotate(-45, "+(e*n.cellWidth+n.cellWidth/2+t.group.gapsSize+o.x)+", "+(n.height+o.y)+")"}).attr("dx",-2).attr("dy",8).attr("text-anchor","end"),c.exit().remove();var u=t.svgG.selectAll("text."+a).data(n.y.allValuesList);u.enter().append("text");var p={x:0,y:0};if(n.groupByY){var f=t.config.y.groups.overlap,h=e.computeGapSize(0);p.x=-f.left,p.y=h/2}u.attr("x",p.x).attr("y",function(t,e){return e*n.cellHeight+n.cellHeight/2+t.group.gapsSize+p.y}).attr("dx",-2).attr("text-anchor","end").attr("class",function(t,e){return r+" "+a+" "+a+"-"+e}).text(function(e){return t.formatValueY(e.val)}),t.config.y.rotateLabels?u.attr("transform",function(t,e){return"rotate(-45, "+p.x+", "+(t.group.gapsSize+(e*n.cellHeight+n.cellHeight/2)+p.y)+")"}).attr("text-anchor","end"):u.attr("dominant-baseline","middle"),u.exit().remove()}},{key:"drawGroupsY",value:function(t,n,r){var i=this,a=i.plot,o=i.prefixClass("group"),l=o+"-y",s=n.selectAll("g."+o+"."+l).data(t.childrenList),c=0,u=0,p=s.enter().append("g");p.classed(o,!0).classed(l,!0).append("rect").classed("group-rect",!0);var f=p.appendSelector("g.title");f.append("rect"),f.append("text");var h=e.computeGapSize(t.level),d=h/4,g=6,v=(i.config.y.groups.keys.length-t.level,{left:0,right:0});r||(v.right=a.y.overlap.left,v.left=a.y.overlap.left,r=a.width+h+v.left+v.right),s.attr("transform",function(t,e){var n="translate("+(d-v.left)+","+(a.cellHeight*c+e*h+u+d)+")";return u+=t.gapsInsideSize||0,c+=t.allValuesCount||0,n});var y=r-2*d,m=s.selectAll("g.title").attr("transform",function(t,e){return"translate("+(y-g)+", 0)"}),b=m.selectAll("rect").attr("width",g).attr("height",function(t){return(t.gapsInsideSize||0)+a.cellHeight*t.allValuesCount+2*d}).attr("x",0).attr("y",0).attr("stroke-width",0);this.setGroupMouseCallbacks(t,b),s.selectAll("rect.group-rect").attr("class",function(t){return"group-rect group-rect-"+t.index}).attr("width",y).attr("height",function(t){return(t.gapsInsideSize||0)+a.cellHeight*t.allValuesCount+2*d}).attr("x",0).attr("y",0).attr("fill","white").attr("fill-opacity",0).attr("stroke-width",.5).attr("stroke","black"),s.each(function(t){i.drawGroupsY.call(i,t,d3.select(this),y-g)})}},{key:"drawGroupsX",value:function(t,n,r){var i=this,a=i.plot,o=i.prefixClass("group"),l=o+"-x",s=n.selectAll("g."+o+"."+l).data(t.childrenList),c=0,u=0,p=s.enter().append("g");p.classed(o,!0).classed(l,!0).append("rect").classed("group-rect",!0);var f=p.appendSelector("g.title");f.append("rect"),f.append("text");var h=e.computeGapSize(t.level),d=h/4,g=6,v=(i.config.x.groups.keys.length-t.level,{top:0,bottom:0});r?v.top=-g:(v.bottom=a.x.overlap.bottom,v.top=a.x.overlap.top,r=a.height+h+v.top+v.bottom),s.attr("transform",function(t,e){var n="translate("+(a.cellWidth*c+e*h+u+d)+", "+(d-v.top)+")";return u+=t.gapsInsideSize||0,c+=t.allValuesCount||0,n});var y=r-2*d,m=s.selectAll("g.title").attr("transform",function(t,e){return"translate(0, 0)"}),b=m.selectAll("rect").attr("height",g).attr("width",function(t){return(t.gapsInsideSize||0)+a.cellWidth*t.allValuesCount+2*d}).attr("x",0).attr("y",0).attr("stroke-width",0);this.setGroupMouseCallbacks(t,b),s.selectAll("rect.group-rect").attr("class",function(t){return"group-rect group-rect-"+t.index}).attr("height",y).attr("width",function(t){return(t.gapsInsideSize||0)+a.cellWidth*t.allValuesCount+2*d}).attr("x",0).attr("y",0).attr("fill","white").attr("fill-opacity",0).attr("stroke-width",.5).attr("stroke","black"),s.each(function(t){i.drawGroupsX.call(i,t,d3.select(this),y-g)}),s.exit().remove()}},{key:"setGroupMouseCallbacks",value:function(t,e){var n=this.plot,r=[];r.push(function(t){d3.select(this).classed("highlighted",!0),d3.select(this.parentNode.parentNode).selectAll("rect.group-rect-"+t.index).classed("highlighted",!0)});var i=[];i.push(function(t){d3.select(this).classed("highlighted",!1),d3.select(this.parentNode.parentNode).selectAll("rect.group-rect-"+t.index).classed("highlighted",!1)}),n.tooltip&&(r.push(function(e){n.tooltip.transition().duration(200).style("opacity",.9);var r=t.label+": "+e.groupingValue;n.tooltip.html(r).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}),i.push(function(t){n.tooltip.transition().duration(500).style("opacity",0)})),e.on("mouseover",function(t){var e=this;r.forEach(function(n){n.call(e,t)})}),e.on("mouseout",function(t){var e=this;i.forEach(function(n){n.call(e,t)})})}},{key:"updateCells",value:function(){var t=this,n=t.plot,r=t.prefixClass("cells"),i=e.computeGapSize(0),a=n.x.groups.childrenList.length?i/2:0,o=n.y.groups.childrenList.length?i/2:0,l=t.svgG.selectOrAppend("g."+r);l.attr("transform","translate("+a+", "+o+")");var s=t.prefixClass("cell"),c=n.z.shape.type,u=l.selectAll("g."+s).data(t.plot.cells);u.enter().append("g").classed(s,!0);u.attr("transform",function(t){return"translate("+(n.cellWidth*t.col+n.cellWidth/2+t.colVar.group.gapsSize)+","+(n.cellHeight*t.row+n.cellHeight/2+t.rowVar.group.gapsSize)+")"});var p=u.selectOrAppend(c+".cell-shape-"+c);p.attr("width",n.z.shape.width).attr("height",n.z.shape.height).attr("x",-n.cellWidth/2).attr("y",-n.cellHeight/2),p.style("fill",function(e){return void 0===e.value?t.config.color.noDataColor:n.z.color.scale(e.value)}),p.attr("fill-opacity",function(t){return void 0===t.value?0:1});var f=[],h=[];if(n.tooltip&&(f.push(function(e){n.tooltip.transition().duration(200).style("opacity",.9);var r=void 0===e.value?t.config.tooltip.noDataText:t.formatValueZ(e.value);n.tooltip.html(r).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}),h.push(function(t){n.tooltip.transition().duration(500).style("opacity",0)})),t.config.highlightLabels){var d=t.config.cssClassPrefix+"highlight",g=function(t){return n.labelClass+"-x-"+t.col},v=function(t){return n.labelClass+"-y-"+t.row};f.push(function(e){t.svgG.selectAll("text."+g(e)).classed(d,!0),t.svgG.selectAll("text."+v(e)).classed(d,!0)}),h.push(function(e){t.svgG.selectAll("text."+g(e)).classed(d,!1),t.svgG.selectAll("text."+v(e)).classed(d,!1)})}u.on("mouseover",function(t){f.forEach(function(e){return e(t)})}).on("mouseout",function(t){h.forEach(function(e){return e(t)})}),u.on("click",function(e){t.trigger("cell-selected",e)}),u.exit().remove()}},{key:"formatValueX",value:function(t){return this.config.x.formatter?this.config.x.formatter.call(this.config,t):t}},{key:"formatValueY",value:function(t){return this.config.y.formatter?this.config.y.formatter.call(this.config,t):t}},{key:"formatValueZ",value:function(t){return this.config.z.formatter?this.config.z.formatter.call(this.config,t):t}},{key:"formatLegendValue",value:function(t){return this.config.legend.formatter?this.config.legend.formatter.call(this.config,t):t}},{key:"updateLegend",value:function(){var t=this,n=this.plot,r=this.plot.width+10,i=e.computeGapSize(0);this.plot.groupByY?r+=i/2+n.y.overlap.right:this.plot.groupByX&&(r+=i);var a=0;(this.plot.groupByX||this.plot.groupByY)&&(a+=i/2);var o=10,l=this.plot.height-2,s=n.z.color.scale;n.legend=new u.Legend(this.svg,this.svgG,s,r,a,function(e){return t.formatLegendValue(e)}).setRotateLabels(t.config.legend.rotateLabels).linearGradientBar(o,l)}}],[{key:"computeGapSize",value:function(t){return 24/(t+1)}},{key:"computeGapsSize",value:function(t){var n=0;return t.forEach(function(t,r){return n+=t*e.computeGapSize(r)}),n}}]),e}(s.Chart)},{"./chart":19,"./legend":25,"./utils":31}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Legend=n.StatisticsUtils=n.HeatmapTimeSeriesConfig=n.HeatmapTimeSeries=n.HeatmapConfig=n.Heatmap=n.RegressionConfig=n.Regression=n.CorrelationMatrixConfig=n.CorrelationMatrix=n.ScatterPlotMatrixConfig=n.ScatterPlotMatrix=n.ScatterPlotConfig=n.ScatterPlot=void 0;var r=t("./scatterplot");Object.defineProperty(n,"ScatterPlot",{enumerable:!0,get:function(){return r.ScatterPlot}}),Object.defineProperty(n,"ScatterPlotConfig",{enumerable:!0,get:function(){return r.ScatterPlotConfig}});var i=t("./scatterplot-matrix");Object.defineProperty(n,"ScatterPlotMatrix",{enumerable:!0,get:function(){return i.ScatterPlotMatrix}}),Object.defineProperty(n,"ScatterPlotMatrixConfig",{enumerable:!0,get:function(){return i.ScatterPlotMatrixConfig}});var a=t("./correlation-matrix");Object.defineProperty(n,"CorrelationMatrix",{enumerable:!0,get:function(){return a.CorrelationMatrix}}),Object.defineProperty(n,"CorrelationMatrixConfig",{enumerable:!0,get:function(){return a.CorrelationMatrixConfig}});var o=t("./regression");Object.defineProperty(n,"Regression",{enumerable:!0,get:function(){return o.Regression}}),Object.defineProperty(n,"RegressionConfig",{enumerable:!0,get:function(){return o.RegressionConfig}});var l=t("./heatmap");Object.defineProperty(n,"Heatmap",{enumerable:!0,get:function(){return l.Heatmap}}),Object.defineProperty(n,"HeatmapConfig",{enumerable:!0,get:function(){return l.HeatmapConfig}});var s=t("./heatmap-timeseries");Object.defineProperty(n,"HeatmapTimeSeries",{enumerable:!0,get:function(){return s.HeatmapTimeSeries}}),Object.defineProperty(n,"HeatmapTimeSeriesConfig",{enumerable:!0,get:function(){return s.HeatmapTimeSeriesConfig}});var c=t("./statistics-utils");Object.defineProperty(n,"StatisticsUtils",{enumerable:!0,get:function(){return c.StatisticsUtils}});var u=t("./legend");Object.defineProperty(n,"Legend",{enumerable:!0,get:function(){return u.Legend}});var p=t("./d3-extensions");p.D3Extensions.extend()},{"./correlation-matrix":20,"./d3-extensions":21,"./heatmap":23,"./heatmap-timeseries":22,"./legend":25,"./regression":26,"./scatterplot":28,"./scatterplot-matrix":27,"./statistics-utils":30}],25:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Legend=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./utils"),o=t("../bower_components/d3-legend/no-extend");n.Legend=function(){function t(e,n,i,l,s,c){r(this,t),this.cssClassPrefix="odc-",this.legendClass=this.cssClassPrefix+"legend",this.color=o.color,this.size=o.size,this.symbol=o.symbol,this.labelFormat=void 0,this.scale=i,this.svg=e,this.guid=a.Utils.guid(),this.container=a.Utils.selectOrAppend(n,"g."+this.legendClass,"g").attr("transform","translate("+l+","+s+")").classed(this.legendClass,!0),this.labelFormat=c}return i(t,[{key:"linearGradientBar",value:function(t,e,n){var r=this.cssClassPrefix+"linear-gradient-"+this.guid,i=this.scale,o=this;this.linearGradient=a.Utils.linearGradient(this.svg,r,this.scale.range(),0,100,0,0),this.container.append("rect").attr("width",t).attr("height",e).attr("x",0).attr("y",0).style("fill","url(#"+r+")");var l=this.container.selectAll("text").data(i.domain()),s=i.domain().length-1;return l.enter().append("text"),l.attr("x",t).attr("y",function(t,n){return e-n*e/s}).attr("dx",3).attr("alignment-baseline","middle").text(function(t){return o.labelFormat?o.labelFormat(t):t}),l.attr("dominant-baseline","middle"),this.rotateLabels&&l.attr("transform",function(n,r){return"rotate(-45, "+t+", "+(e-r*e/s)+")"}).attr("text-anchor","start").attr("dx",5).attr("dy",5),l.exit().remove(),this}},{key:"setRotateLabels",value:function(t){return this.rotateLabels=t,this}}]),t}()},{"../bower_components/d3-legend/no-extend":1,"./utils":31}],26:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Regression=n.RegressionConfig=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function f(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:f(i,e,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},s=(t("./chart"),t("./scatterplot")),c=t("./utils"),u=t("./statistics-utils"),p=n.RegressionConfig=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return n.mainRegression=!0,n.groupRegression=!0,n.confidence={level:.95,criticalValue:function(t,e){return u.StatisticsUtils.tValue(t,e)},marginOfError:void 0},t&&c.Utils.deepExtend(n,t),n}return a(e,t),e}(s.ScatterPlotConfig);n.Regression=function(t){function e(t,n,a){return r(this,e),i(this,Object.getPrototypeOf(e).call(this,t,n,new p(a)))}return a(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new p(t))}},{key:"initPlot",value:function(){l(Object.getPrototypeOf(e.prototype),"initPlot",this).call(this),this.initRegressionLines()}},{key:"initRegressionLines",value:function(){var t=this,e=t.config.groups&&t.config.groups.value;if(t.plot.regressions=[],e&&t.config.mainRegression){var n=this.initRegression(this.data,!1);t.plot.regressions.push(n)}t.config.groupRegression&&this.initGroupRegression()}},{key:"initGroupRegression",value:function(){var t=this,e={};t.data.forEach(function(n){var r=t.config.groups.value(n,t.config.groups.key);(r||0===r)&&(e[r]||(e[r]=[]),e[r].push(n))});for(var n in e)if(e.hasOwnProperty(n)){var r=this.initRegression(e[n],n);t.plot.regressions.push(r)}}},{key:"initRegression",value:function(t,e){var n=this,r=t.map(function(t){return[parseFloat(n.plot.x.value(t)),parseFloat(n.plot.y.value(t))]}),i=u.StatisticsUtils.linearRegression(r),a=u.StatisticsUtils.linearRegressionLine(i),o=d3.extent(r,function(t){return t[0]}),l=[{x:o[0],y:a(o[0])},{x:o[1],y:a(o[1])}],s=d3.svg.line().interpolate("basis").x(function(t){return n.plot.x.scale(t.x)}).y(function(t){return n.plot.y.scale(t.y)}),p=n.plot.dot.color,f="black";c.Utils.isFunction(p)?p=t.length&&e!==!1?p(t[0]):f:p||e!==!1||(p=f);var h=this.computeConfidence(r,o,i,a);return{group:e||!1,line:s,linePoints:l,color:p,confidence:h}}},{key:"computeConfidence",value:function(t,e,n,r){var i=this,a=(n.m,t.length),o=Math.max(0,a-2),l=1-i.config.confidence.level,s=1-l/2,c=i.config.confidence.criticalValue(o,s),p=t.map(function(t){return t[0]}),f=u.StatisticsUtils.mean(p),h=0,d=0,g=0,v=0,y=0;t.forEach(function(t){var e=t[0],n=t[1];h+=e*n,d+=e,v+=n,g+=e*e,y+=n*n});var m=n.m,b=n.b,x=a/(a+2)*((y-m*h-b*v)/(a*g-d*d)),w=(y-m*h-b*v)/(a*(a-2)),C=function(t){return Math.sqrt(w+Math.pow(t-f,2)*x)},O=function(t){return c*C(t)},k=function(t){var e=r(t),n=O(t),i=e-n,a=e+n;return{x:t,y0:i,y1:a}},P=(e[1]+e[0])/2,_=[e[0],P,e[1]].map(k),S=function(t){return t},z=d3.svg.area().interpolate("monotone").x(function(t){return i.plot.x.scale(t.x)}).y0(function(t){return S(i.plot.y.scale(t.y0))}).y1(function(t){return S(i.plot.y.scale(t.y1))});return{area:z,points:_}}},{key:"update",value:function(t){l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.updateRegressionLines()}},{key:"updateRegressionLines",value:function(){var t=this,e=this.prefixClass("regression-container"),n="g."+e,r=t.prefixClass("clip"),i=t.svgG.selectOrInsert(n,"."+t.dotsContainerClass),a=i.selectOrAppend("clipPath").attr("id",r);a.selectOrAppend("rect").attr("width",t.plot.width).attr("height",t.plot.height).attr("x",0).attr("y",0),i.attr("clip-path",function(t,e){return"url(#"+r+")"});var o=this.prefixClass("regression"),l=t.prefixClass("confidence"),s="g."+o,c=i.selectAll(s).data(t.plot.regressions),u=c.enter().insertSelector(s),p=t.prefixClass("line");u.append("path").attr("class",p).attr("shape-rendering","optimizeQuality");var f=c.select("path."+p).style("stroke",function(t){return t.color}),h=f;t.config.transition&&(h=f.transition()),h.attr("d",function(t){return t.line(t.linePoints)}),u.append("path").attr("class",l).attr("shape-rendering","optimizeQuality").style("fill",function(t){return t.color}).style("opacity","0.4");var d=c.select("path."+l),g=d;t.config.transition&&(g=d.transition()),g.attr("d",function(t){return t.confidence.area(t.confidence.points)}),c.exit().remove()}}]),e}(s.ScatterPlot)},{"./chart":19,"./scatterplot":28,"./statistics-utils":30,"./utils":31}],27:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.ScatterPlotMatrix=n.ScatterPlotMatrixConfig=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function h(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:h(i,e,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},s=t("./chart"),c=t("./scatterplot"),u=t("./utils"),p=t("./legend"),f=n.ScatterPlotMatrixConfig=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return n.svgClass=n.cssClassPrefix+"scatterplot-matrix",n.size=200,n.padding=20,n.brush=!0,n.guides=!0,n.showTooltip=!0,n.ticks=void 0,n.x={orient:"bottom",scale:"linear"},n.y={orient:"left",scale:"linear"},n.groups={key:void 0,includeInPlot:!1,value:function(t,e){return t[e]},label:""},n.variables={labels:[],keys:[],value:function(t,e){return t[e]}},u.Utils.deepExtend(n,t),n}return a(e,t),e}(c.ScatterPlotConfig);n.ScatterPlotMatrix=function(t){function e(t,n,a){return r(this,e),i(this,Object.getPrototypeOf(e).call(this,t,n,new f(a)))}return a(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new f(t))}},{key:"initPlot",value:function(){l(Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);var t=this,n=this.plot.margin,r=this.config;this.plot.x={},this.plot.y={},this.plot.dot={color:null},this.plot.showLegend=r.showLegend,this.plot.showLegend&&(n.right=r.margin.right+r.legend.width+2*r.legend.margin),this.setupVariables(),this.plot.size=r.size;var i=r.width,a=this.getBaseContainerNode().getBoundingClientRect();if(!i){var o=n.left+n.right+this.plot.variables.length*this.plot.size;i=Math.min(a.width,o)}var s=i;s||(s=a.height),this.plot.width=i-n.left-n.right,this.plot.height=s-n.top-n.bottom,void 0===r.ticks&&(r.ticks=this.plot.size/40),this.setupX(),this.setupY(),r.dot.d3ColorCategory&&(this.plot.dot.colorCategory=d3.scale[r.dot.d3ColorCategory]());var c=r.dot.color;return c&&(this.plot.dot.colorValue=c,"string"==typeof c||c instanceof String?this.plot.dot.color=c:this.plot.dot.colorCategory&&(this.plot.dot.color=function(e){return t.plot.dot.colorCategory(t.plot.dot.colorValue(e))})),this}},{key:"setupVariables",value:function(){var t=this.config.variables,e=this.data,n=this.plot;n.domainByVariable={},n.variables=t.keys,n.variables&&n.variables.length||(n.variables=u.Utils.inferVariables(e,this.config.groups.key,this.config.includeInPlot)),n.labels=[],n.labelByVariable={},n.variables.forEach(function(r,i){n.domainByVariable[r]=d3.extent(e,function(e){return t.value(e,r)});var a=r;t.labels&&t.labels.length>i&&(a=t.labels[i]),n.labels.push(a),n.labelByVariable[r]=a}),n.subplots=[]}},{key:"setupX",value:function(){var t=this.plot,e=t.x,n=this.config;e.value=n.variables.value,e.scale=d3.scale[n.x.scale]().range([n.padding/2,t.size-n.padding/2]),e.map=function(t,n){return e.scale(e.value(t,n))},e.axis=d3.svg.axis().scale(e.scale).orient(n.x.orient).ticks(n.ticks),e.axis.tickSize(t.size*t.variables.length)}},{key:"setupY",value:function(){var t=this.plot,e=t.y,n=this.config;e.value=n.variables.value,e.scale=d3.scale[n.y.scale]().range([t.size-n.padding/2,n.padding/2]),e.map=function(t,n){return e.scale(e.value(t,n))},e.axis=d3.svg.axis().scale(e.scale).orient(n.y.orient).ticks(n.ticks),e.axis.tickSize(-t.size*t.variables.length)}},{key:"draw",value:function(){function t(t){var n=e.plot;n.subplots.push(t);var i=d3.select(this);n.x.scale.domain(n.domainByVariable[t.x]),n.y.scale.domain(n.domainByVariable[t.y]);var a=e.prefixClass("frame");i.append("rect").attr("class",a).attr("x",r.padding/2).attr("y",r.padding/2).attr("width",r.size-r.padding).attr("height",r.size-r.padding),t.update=function(){var t=this,r=i.selectAll("circle").data(e.data);r.enter().append("circle"),r.attr("cx",function(e){return n.x.map(e,t.x)}).attr("cy",function(e){return n.y.map(e,t.y)}).attr("r",e.config.dot.radius),n.dot.color&&r.style("fill",n.dot.color),n.tooltip&&r.on("mouseover",function(r){n.tooltip.transition().duration(200).style("opacity",.9);var i="("+n.x.value(r,t.x)+", "+n.y.value(r,t.y)+")";n.tooltip.html(i).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px");var a=e.config.groups.value(r);if(a||0===a){i+="<br/>";var o=e.config.groups.label;o&&(i+=o+": "),i+=a}n.tooltip.html(i).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){n.tooltip.transition().duration(500).style("opacity",0)}),r.exit().remove()},t.update()}var e=this,n=e.plot.variables.length,r=this.config,i=e.prefixClass("axis"),a=i+"-x",o=i+"-y",l="g."+a+"."+i,s="g."+o+"."+i,c=e.prefixClass("no-guides");e.svgG.selectAll(l).data(e.plot.variables).enter().appendSelector(l).classed(c,!r.guides).attr("transform",function(t,r){return"translate("+(n-r-1)*e.plot.size+",0)"}).each(function(t){e.plot.x.scale.domain(e.plot.domainByVariable[t]),d3.select(this).call(e.plot.x.axis)}),e.svgG.selectAll(s).data(e.plot.variables).enter().appendSelector(s).classed(c,!r.guides).attr("transform",function(t,n){return"translate(0,"+n*e.plot.size+")"}).each(function(t){e.plot.y.scale.domain(e.plot.domainByVariable[t]),d3.select(this).call(e.plot.y.axis)});var u=e.prefixClass("cell"),p=e.svgG.selectAll("."+u).data(e.utils.cross(e.plot.variables,e.plot.variables)).enter().appendSelector("g."+u).attr("transform",function(t){
return"translate("+(n-t.i-1)*e.plot.size+","+t.j*e.plot.size+")"});r.brush&&this.drawBrush(p),p.each(t),p.filter(function(t){return t.i===t.j}).append("text").attr("x",r.padding).attr("y",r.padding).attr("dy",".71em").text(function(t){return e.plot.labelByVariable[t.x]}),this.updateLegend()}},{key:"update",value:function(t){l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.plot.subplots.forEach(function(t){return t.update()}),this.updateLegend()}},{key:"drawBrush",value:function(t){function e(t){o!==this&&(d3.select(o).call(a.clear()),i.plot.x.scale.domain(i.plot.domainByVariable[t.x]),i.plot.y.scale.domain(i.plot.domainByVariable[t.y]),o=this)}function n(t){var e=a.extent();i.svgG.selectAll("circle").classed("hidden",function(n){return e[0][0]>n[t.x]||n[t.x]>e[1][0]||e[0][1]>n[t.y]||n[t.y]>e[1][1]})}function r(){a.empty()&&i.svgG.selectAll(".hidden").classed("hidden",!1)}var i=this,a=d3.svg.brush().x(i.plot.x.scale).y(i.plot.y.scale).on("brushstart",e).on("brush",n).on("brushend",r);t.append("g").call(a);var o}},{key:"updateLegend",value:function(){var t=this.plot,e=t.dot.colorCategory;if((!e.domain()||e.domain().length<2)&&(t.showLegend=!1),!t.showLegend)return void(t.legend&&t.legend.container&&t.legend.container.remove());var n=this.plot.width+this.config.legend.margin,r=this.config.legend.margin;t.legend=new p.Legend(this.svg,this.svgG,e,n,r);var i=t.legend.color().shapeWidth(this.config.legend.shapeWidth).orient("vertical").scale(e);t.legend.container.call(i)}}]),e}(s.Chart)},{"./chart":19,"./legend":25,"./scatterplot":28,"./utils":31}],28:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.ScatterPlot=n.ScatterPlotConfig=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function f(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:f(i,e,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},s=t("./chart"),c=t("./utils"),u=t("./legend"),p=n.ScatterPlotConfig=function(t){function e(t){r(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));n.svgClass=n.cssClassPrefix+"scatterplot",n.guides=!1,n.showTooltip=!0,n.showLegend=!0,n.legend={width:80,margin:10,shapeWidth:20},n.x={label:"X",key:0,value:function(t,e){return t[e]},orient:"bottom",scale:"linear"},n.y={label:"Y",key:1,value:function(t,e){return t[e]},orient:"left",scale:"linear"},n.groups={key:2,value:function(t,e){return t[e]},label:""},n.transition=!0;var a=n;return n.dot={radius:2,color:function(t){return a.groups.value(t,a.groups.key)},d3ColorCategory:"category10"},t&&c.Utils.deepExtend(n,t),n}return a(e,t),e}(s.ChartConfig);n.ScatterPlot=function(t){function e(t,n,a){return r(this,e),i(this,Object.getPrototypeOf(e).call(this,t,n,new p(a)))}return a(e,t),o(e,[{key:"setConfig",value:function(t){return l(Object.getPrototypeOf(e.prototype),"setConfig",this).call(this,new p(t))}},{key:"initPlot",value:function(){l(Object.getPrototypeOf(e.prototype),"initPlot",this).call(this);var t=this,n=this.config;this.plot.x={},this.plot.y={},this.plot.dot={color:null},this.plot.showLegend=n.showLegend,this.plot.showLegend&&(this.plot.margin.right=n.margin.right+n.legend.width+2*n.legend.margin),this.computePlotSize(),this.setupX(),this.setupY(),n.dot.d3ColorCategory&&(this.plot.dot.colorCategory=d3.scale[n.dot.d3ColorCategory]());var r=n.dot.color;return r&&(this.plot.dot.colorValue=r,"string"==typeof r||r instanceof String?this.plot.dot.color=r:this.plot.dot.colorCategory&&(this.plot.dot.color=function(e){return t.plot.dot.colorCategory(t.plot.dot.colorValue(e))})),this}},{key:"setupX",value:function(){var t=this.plot,e=t.x,n=this.config.x;e.value=function(t){return n.value(t,n.key)},e.scale=d3.scale[n.scale]().range([0,t.width]),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(n.orient);var r=this.data;t.x.scale.domain([d3.min(r,t.x.value)-1,d3.max(r,t.x.value)+1]),this.config.guides&&e.axis.tickSize(-t.height)}},{key:"setupY",value:function(){var t=this.plot,e=t.y,n=this.config.y;e.value=function(t){return n.value(t,n.key)},e.scale=d3.scale[n.scale]().range([t.height,0]),e.map=function(t){return e.scale(e.value(t))},e.axis=d3.svg.axis().scale(e.scale).orient(n.orient),this.config.guides&&e.axis.tickSize(-t.width);var r=this.data;t.y.scale.domain([d3.min(r,t.y.value)-1,d3.max(r,t.y.value)+1])}},{key:"draw",value:function(){this.drawAxisX(),this.drawAxisY(),this.update()}},{key:"drawAxisX",value:function(){var t=this,e=t.plot,n=this.config.x,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-x")+"."+t.prefixClass("axis")+(t.config.guides?"":"."+t.prefixClass("no-guides"))).attr("transform","translate(0,"+e.height+")"),i=r;t.config.transition&&(i=r.transition().ease("sin-in-out")),i.call(e.x.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+e.width/2+","+e.margin.bottom+")").attr("dy","-1em").style("text-anchor","middle").text(n.label)}},{key:"drawAxisY",value:function(){var t=this,e=t.plot,n=this.config.y,r=t.svgG.selectOrAppend("g."+t.prefixClass("axis-y")+"."+t.prefixClass("axis")+(t.config.guides?"":"."+t.prefixClass("no-guides"))),i=r;t.config.transition&&(i=r.transition().ease("sin-in-out")),i.call(e.y.axis),r.selectOrAppend("text."+t.prefixClass("label")).attr("transform","translate("+-e.margin.left+","+e.height/2+")rotate(-90)").attr("dy","1em").style("text-anchor","middle").text(n.label)}},{key:"update",value:function(t){l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.updateDots(),this.updateLegend()}},{key:"updateDots",value:function(){var t=this,e=t.plot,n=this.data,r=t.prefixClass("dot");t.dotsContainerClass=t.prefixClass("dots-container");var i=t.svgG.selectOrAppend("g."+t.dotsContainerClass),a=i.selectAll("."+r).data(n);a.enter().append("circle").attr("class",r);var o=a;t.config.transition&&(o=a.transition()),o.attr("r",t.config.dot.radius).attr("cx",e.x.map).attr("cy",e.y.map),e.tooltip&&a.on("mouseover",function(n){e.tooltip.transition().duration(200).style("opacity",.9);var r="("+e.x.value(n)+", "+e.y.value(n)+")",i=t.config.groups.value(n,t.config.groups.key);if(i||0===i){r+="<br/>";var a=t.config.groups.label;a&&(r+=a+": "),r+=i}e.tooltip.html(r).style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){e.tooltip.transition().duration(500).style("opacity",0)}),e.dot.color&&a.style("fill",e.dot.color),a.exit().remove()}},{key:"updateLegend",value:function(){var t=this.plot,e=t.dot.colorCategory;if((!e.domain()||e.domain().length<2)&&(t.showLegend=!1),!t.showLegend)return void(t.legend&&t.legend.container&&t.legend.container.remove());var n=this.plot.width+this.config.legend.margin,r=this.config.legend.margin;t.legend=new u.Legend(this.svg,this.svgG,e,n,r);var i=t.legend.color().shapeWidth(this.config.legend.shapeWidth).orient("vertical").scale(e);t.legend.container.call(i)}}]),e}(s.Chart)},{"./chart":19,"./legend":25,"./utils":31}],29:[function(t,e,n){"use strict";function r(t,e){if(t<=0||Math.abs(t)-Math.abs(h(t))!=0)throw"Invalid n: $n\n";if(e<=0||e>=1)throw"Invalid p: $p\n";return p(o(t-0,e-0))}function a(t){var e=-Math.log(4*t*(1-t)),n=Math.sqrt(e*(1.570796288+e*(.03706987906+e*(-.0008364353589+e*(-.0002250947176+e*(6841218299e-15+e*(5824238515e-15+e*(-104527497e-14+e*(8.360937017e-8+e*(-3.231081277e-9+e*(3.657763036e-11+6.936233982e-13*e)))))))))));return t>.5&&(n=-n),n}function o(t,e){if(e>=1||e<=0)throw"Invalid p: $p\n";if(.5==e)return 0;if(e<.5)return-o(t,1-e);var n=a(e),r=Math.pow(n,2),i=(r+1)/4,c=((5*r+16)*r+3)/96,u=(((3*r+19)*r+17)*r-15)/384,p=((((79*r+776)*r+1482)*r-1920)*r-945)/92160,d=(((((27*r+339)*r+930)*r-1782)*r-765)*r+17955)/368640,g=n*(1+(i+(c+(u+(p+d/t)/t)/t)/t)/t);if(t<=Math.pow(s(e),2)+3){var v;do{var y=l(t,g),m=t+1,b=(y-e)/Math.exp((m*Math.log(m/(t+g*g))+Math.log(t/m/2/Math.PI)-1+(1/m-1/t)/6)/2);g+=b,v=f(b,Math.abs(h(s(Math.abs(g))-4)))}while(g&&0!=v)}return g}function l(t,e){for(var n,r,i=Math.atan2(e/Math.sqrt(t),1),a=Math.pow(Math.cos(i),2),o=1,l=t-2;l>=2;l-=2)o=1+(l-1)/l*a*o;return t%2==0?(n=Math.sin(i)/2,r=.5):(n=1==t?0:Math.sin(i)*Math.cos(i)/Math.PI,r=.5+i/Math.PI),c(0,1-r-n*o)}function s(t){return Math.log(t)/Math.log(10)}function c(){for(var t=arguments[0],e=0;i<arguments.length;i++)t<arguments[e]&&(t=arguments[e]);return t}function u(t){return Math.abs(h(s(Math.abs(t))-d))}function p(t){return t?f(t,u(t)):"0"}function f(t,e){return t*=Math.pow(10,e),t=Math.round(t),t/Math.pow(10,e)}function h(t){return t>0?Math.floor(t):Math.ceil(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.tdistr=r;var d=5},{}],30:[function(t,e,n){"use strict";var r=t("./statistics-distributions"),i=e.exports.StatisticsUtils={};i.sampleCorrelation=t("../bower_components/simple-statistics/src/sample_correlation"),i.linearRegression=t("../bower_components/simple-statistics/src/linear_regression"),i.linearRegressionLine=t("../bower_components/simple-statistics/src/linear_regression_line"),i.errorFunction=t("../bower_components/simple-statistics/src/error_function"),i.standardDeviation=t("../bower_components/simple-statistics/src/standard_deviation"),i.sampleStandardDeviation=t("../bower_components/simple-statistics/src/sample_standard_deviation"),i.variance=t("../bower_components/simple-statistics/src/variance"),i.mean=t("../bower_components/simple-statistics/src/mean"),i.zScore=t("../bower_components/simple-statistics/src/z_score"),i.standardError=function(t){return Math.sqrt(i.variance(t)/(t.length-1))},i.tValue=function(t,e){return(0,r.tdistr)(t,e)}},{"../bower_components/simple-statistics/src/error_function":6,"../bower_components/simple-statistics/src/linear_regression":7,"../bower_components/simple-statistics/src/linear_regression_line":8,"../bower_components/simple-statistics/src/mean":9,"../bower_components/simple-statistics/src/sample_correlation":10,"../bower_components/simple-statistics/src/sample_standard_deviation":12,"../bower_components/simple-statistics/src/standard_deviation":14,"../bower_components/simple-statistics/src/variance":17,"../bower_components/simple-statistics/src/z_score":18,"./statistics-distributions":29}],31:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n.Utils=function(){function t(){i(this,t)}return o(t,null,[{key:"deepExtend",value:function(t){var e=this;!t&&arguments.length>1&&Array.isArray(arguments[1])&&(t=[]),t=t||{};for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)if(r.hasOwnProperty(i)){var a=Array.isArray(t[i]),o=e.isObject(t[i]),l=e.isObject(r[i]);o&&!a&&l?e.deepExtend(t[i],r[i]):t[i]=r[i]}}return t}},{key:"mergeDeep",value:function(e,n){var i=Object.assign({},e);return t.isObjectNotArray(e)&&t.isObjectNotArray(n)&&Object.keys(n).forEach(function(a){t.isObjectNotArray(n[a])&&a in e?i[a]=t.mergeDeep(e[a],n[a]):Object.assign(i,r({},a,n[a]))}),i}},{key:"cross",value:function(t,e){var n,r,i=[],a=t.length,o=e.length;for(n=-1;++n<a;)for(r=-1;++r<o;)i.push({x:t[n],i:n,y:e[r],j:r});return i}},{key:"inferVariables",value:function(t,e,n){var r=[];if(t.length){var i=t[0];if(i instanceof Array)r=i.map(function(t,e){return e});else if("object"===("undefined"==typeof i?"undefined":a(i)))for(var o in i)i.hasOwnProperty(o)&&r.push(o)}if(!n){var l=r.indexOf(e);l>-1&&r.splice(l,1)}return r}},{key:"isObjectNotArray",value:function(t){return t&&"object"===("undefined"==typeof t?"undefined":a(t))&&!Array.isArray(t)&&null!==t}},{key:"isObject",value:function(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":a(t))}},{key:"isNumber",value:function(t){return!isNaN(t)&&"number"==typeof t}},{key:"isFunction",value:function(t){return"function"==typeof t}},{key:"insertOrAppendSelector",value:function(t,e,n,r){for(var i=e.split(/([\.\#])/),a=t[n](i.shift(),r);i.length>1;){var o=i.shift(),l=i.shift();"."===o?a=a.classed(l,!0):"#"===o&&(a=a.attr("id",l))}return a}},{key:"insertSelector",value:function(e,n,r){return t.insertOrAppendSelector(e,n,"insert",r)}},{key:"appendSelector",value:function(e,n){return t.insertOrAppendSelector(e,n,"append")}},{key:"selectOrAppend",value:function(e,n,r){var i=e.select(n);return i.empty()?r?e.append(r):t.appendSelector(e,n):i}},{key:"selectOrInsert",value:function(e,n,r){var i=e.select(n);return i.empty()?t.insertSelector(e,n,r):i}},{key:"linearGradient",value:function e(n,r,i,a,o,l,s){var c=t.selectOrAppend(n,"defs"),e=c.append("linearGradient").attr("id",r);e.attr("x1",a+"%").attr("y1",o+"%").attr("x2",l+"%").attr("y2",s+"%");var u=e.selectAll("stop").data(i);u.enter().append("stop"),u.attr("offset",function(t,e){return e/(i.length-1)}).attr("stop-color",function(t){return t}),u.exit().remove()}},{key:"guid",value:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}]),t}();l.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},l.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},l.availableHeight=function(t,e,n){return Math.max(0,l.sanitizeHeight(t,e)-n.top-n.bottom)},l.availableWidth=function(t,e,n){return Math.max(0,l.sanitizeWidth(t,e)-n.left-n.right)}},{}]},{},[24])(24)});
//# sourceMappingURL=odc-d3.min.js.map
